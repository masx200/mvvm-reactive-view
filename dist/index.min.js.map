{"version":3,"file":"index.min.js","sources":["index.js"],"sourcesContent":["const Reflect$1 = window.Reflect;\n\nconst {apply: apply, construct: construct, defineProperty: defineProperty, deleteProperty: deleteProperty, get: get, getOwnPropertyDescriptor: getOwnPropertyDescriptor, getPrototypeOf: getPrototypeOf, has: has, isExtensible: isExtensible, ownKeys: ownKeys, preventExtensions: preventExtensions, set: set, setPrototypeOf: setPrototypeOf} = Reflect$1;\n\nfunction isundefined(a) {\n    return typeof a === \"undefined\";\n}\n\nfunction isnumber(a) {\n    return typeof a === \"number\";\n}\n\nfunction isboolean(a) {\n    return typeof a === \"boolean\";\n}\n\nfunction isobject(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isstring(a) {\n    return typeof a === \"string\";\n}\n\nfunction isfunction(a) {\n    return typeof a === \"function\";\n}\n\nfunction isarray(a) {\n    return a instanceof Array && Array.isArray(a) && gettagtype(a) === \"array\";\n}\n\nfunction getsymbol(a) {\n    return Symbol(a);\n}\n\nfunction gettagtype(a) {\n    return {}.toString.call(a).replace(\"[object \", \"\").replace(\"]\", \"\").toLowerCase();\n}\n\nfunction isprimitive(a) {\n    return isstring(a) || isnumber(a) || isboolean(a) || isundefined(a);\n}\n\nvar _a, _b, _c;\n\nfunction isReactiveState(a) {\n    return a instanceof ReactiveState;\n}\n\nconst textnodesymbol = Symbol(\"textnode\");\n\nconst eventtargetsymbol = Symbol(\"eventtatget\");\n\nconst memlisteners = Symbol(\"memlisteners\");\n\nconst dispatchsymbol = getsymbol(\"dispatch\");\n\nconst subscribesymbol = getsymbol(\"subscribe\");\n\nconst removeallistenerssymbol = getsymbol(\"removeallisteners\");\n\nconst addallistenerssymbol = getsymbol(\"addallisteners\");\n\nclass ReactiveState {\n    constructor(init) {\n        this[_a] = undefined;\n        this[_b] = new EventTarget;\n        this[_c] = [];\n        if (isprimitive(init) || isobject(init)) {\n            Object.defineProperty(this, \"value\", {\n                value: init,\n                configurable: true,\n                writable: true\n            });\n        } else {\n            throw TypeError(\"invalid State\");\n        }\n        Object.defineProperty(this, Symbol.toStringTag, {\n            value: \"ReactiveState\",\n            configurable: true\n        });\n    }\n    [addallistenerssymbol]() {\n        this[memlisteners].forEach(([value, callback]) => {\n            this[eventtargetsymbol].addEventListener(value, callback);\n        });\n    }\n    valueOf() {\n        return this.value;\n    }\n    toString() {\n        const value = this.value;\n        return isprimitive(value) ? String(value) : isobject(value) ? JSON.stringify(value) : \"\";\n    }\n    [(_a = textnodesymbol, _b = eventtargetsymbol, _c = memlisteners, dispatchsymbol)](eventname) {\n        const name = eventname ? String(eventname) : \"value\";\n        if (name !== \"value\") {\n            this[eventtargetsymbol].dispatchEvent(new Event(name));\n        }\n        this[eventtargetsymbol].dispatchEvent(new Event(\"value\"));\n    }\n    [subscribesymbol](callback, eventname) {\n        const name = eventname ? String(eventname) : \"value\";\n        this[memlisteners].push([ name, () => callback(this) ]);\n    }\n    [removeallistenerssymbol]() {\n        this[memlisteners].forEach(([value, callback]) => {\n            this[eventtargetsymbol].removeEventListener(value, callback);\n        });\n    }\n    [Symbol.toPrimitive]() {\n        const value = this.value;\n        return isprimitive(value) ? value : isobject(value) ? JSON.stringify(value) : void 0;\n    }\n}\n\nconst document = window.document;\n\nfunction seteletext(e, v) {\n    e.textContent = v;\n}\n\nfunction setelehtml(e, v) {\n    e.innerHTML = v;\n}\n\nfunction appendchild(container, ele) {\n    container.appendChild(ele);\n}\n\nfunction createsvgelement() {\n    return createElementNS(svgnamespace, \"svg\");\n}\n\nfunction createnonescript() {\n    return document.createDocumentFragment();\n}\n\nfunction createnativeelement(type) {\n    return document.createElement(type);\n}\n\nfunction createElementNS(namespace, name) {\n    return document.createElementNS(namespace, name);\n}\n\nfunction createtextnode(data) {\n    return document.createTextNode(data);\n}\n\nconst svgnamespace = \"http://www.w3.org/2000/svg\";\n\nfunction changetext(textnode, value) {\n    textnode.nodeValue = String(value);\n}\n\nconst mathnamespace = \"http://www.w3.org/1998/Math/MathML\";\n\nfunction createmathelement() {\n    return createElementNS(mathnamespace, \"math\");\n}\n\nfunction domaddlisten(ele, event, call) {\n    ele.addEventListener(event, call);\n}\n\nfunction domremovelisten(ele, event, call) {\n    ele.removeEventListener(event, call);\n}\n\nfunction getdomchildren(ele) {\n    return Array.from(ele.childNodes);\n}\n\nfunction watch(state, callback, statekey) {\n    if (!(isReactiveState(state) && isfunction(callback))) {\n        throw TypeError(\"invalid state or callback\");\n    }\n    if (statekey) {\n        state[subscribesymbol](callback, statekey);\n    } else {\n        state[subscribesymbol](callback);\n    }\n    requestAnimationFrame(() => {\n        state[addallistenerssymbol]();\n    });\n}\n\nfunction unwatch(state) {\n    state[removeallistenerssymbol]();\n}\n\nfunction rewatch(state) {\n    state[addallistenerssymbol]();\n}\n\nconst requestAnimationFrame = window.requestAnimationFrame;\n\nvar directives = {\n    ref(ele, ref) {\n        if (typeof ref == \"object\") {\n            ref.value = ele;\n        } else {\n            throw TypeError(\"invalid ref\");\n        }\n    },\n    html(ele, html) {\n        createhtmlandtextdirective(setelehtml, \"html\")(ele, html);\n    },\n    text(ele, text) {\n        createhtmlandtextdirective(seteletext, \"text\")(ele, text);\n    }\n};\n\nfunction createhtmlandtextdirective(seteletext, errorname) {\n    return function(ele, text) {\n        if (typeof text == \"string\") {\n            requestAnimationFrame(() => {\n                seteletext(ele, text);\n            });\n        } else if (isReactiveState(text)) {\n            watch(text, state => {\n                seteletext(ele, String(state));\n            });\n            requestAnimationFrame(() => {\n                seteletext(ele, String(text));\n            });\n        } else {\n            throw TypeError(\"invalid \" + errorname);\n        }\n    };\n}\n\nfunction extenddirectives(options) {\n    Object.entries(options).forEach(([key, value]) => {\n        if (typeof value !== \"function\") {\n            throw TypeError(\"invalid directive\");\n        } else {\n            directives[key] = value;\n        }\n    });\n}\n\nextenddirectives({\n    value(element, value, vdom) {\n        if (isReactiveState(value) && (vdom.type === \"input\" || vdom.type === \"textarea\")) {\n            vdom.bindattr[\"value\"] = value;\n            [ \"change\", \"input\" ].forEach(eventname => {\n                const origin = vdom.onevent[eventname];\n                const eventsarray = [ origin ].flat(Infinity);\n                Reflect.set(vdom.onevent, eventname, eventsarray.concat([ e => {\n                    return value.value = e.target.value;\n                } ]).filter(Boolean));\n            });\n        } else {\n            throw TypeError(\"invalid ReactiveState or element\");\n        }\n    }\n});\n\nfunction isclassextendsHTMLElement(initclass) {\n    return !!(isfunction(initclass) && initclass.prototype && initclass.prototype instanceof HTMLElement);\n}\n\nfunction createcostumelemet(initclass, propsjson, children, options) {\n    if (isclassextendsHTMLElement(initclass)) {\n        RandomDefineCustomElement(initclass);\n        return construct(initclass, [ propsjson, children, options ]);\n    } else {\n        console.error(initclass);\n        throw TypeError(\"invalid custom element class !\");\n    }\n}\n\nfunction 使用value从表中查询key(表, 组件状态名) {\n    return Object.entries(表).find(v => {\n        return v[1] === 组件状态名;\n    })[0];\n}\n\nwindow.CustomElementRegistry = get(getPrototypeOf(window.customElements), \"constructor\");\n\nconst {customElements: customElements$1, CustomElementRegistry: CustomElementRegistry$1} = window;\n\nconst elementset = Symbol.for(\"elementset\");\n\nconst elementmap = Symbol.for(\"elementmap\");\n\nvar RandomDefineCustomElement = (initclass, extendsname) => RandomDefineCustomElement$1(initclass, extendsname);\n\nfunction RandomDefineCustomElement$1(initclass, extendsname, length = 1) {\n    if (!isclassextendsHTMLElement(initclass)) {\n        throw TypeError(\"invalid custom element class !\");\n    }\n    if (!customElements$1[elementset].has(initclass)) {\n        const elementname = getrandomstringandnumber(length);\n        if (customElements$1.get(elementname)) {\n            return RandomDefineCustomElement$1(initclass, extendsname, length + 1);\n        } else {\n            if (extendsname) {\n                customElements$1.define(elementname, initclass, {\n                    extends: extendsname\n                });\n            } else {\n                customElements$1.define(elementname, initclass);\n            }\n        }\n        return elementname;\n    } else {\n        return 使用value从表中查询key(customElements$1[elementmap], initclass);\n    }\n}\n\nif (!customElements$1[elementset]) {\n    customElements$1[elementset] = new Set;\n}\n\nif (!customElements$1[elementmap]) {\n    customElements$1[elementmap] = {};\n}\n\ncustomElements$1.define = function(name, constructor, options) {\n    if (!isclassextendsHTMLElement(constructor)) {\n        throw TypeError(\"invalid custom element class !\");\n    }\n    CustomElementRegistry$1.prototype.define.call(customElements$1, name, constructor, options);\n    customElements$1[elementset].add(constructor);\n    customElements$1[elementmap][name] = constructor;\n};\n\ncustomElements$1[Symbol.iterator] = () => {\n    const entries = Object.entries(customElements$1[elementmap]);\n    return entries[Symbol.iterator].call(entries);\n};\n\nfunction getrandomcharactor() {\n    return get(Array(26).fill(undefined).map((v, i) => 97 + i).map(n => String.fromCharCode(n)), Math.floor(Math.random() * 26));\n}\n\nfunction getrandomhexnumber() {\n    return get(Array(16).fill(undefined).map((v, i) => i), Math.floor(Math.random() * 16)).toString(16);\n}\n\nfunction getrandomstringandnumber(length = 4) {\n    return Array(length).fill(undefined).map(() => getrandomcharactor()).join(\"\") + \"-\" + Array(length).fill(undefined).map(() => getrandomhexnumber()).join(\"\");\n}\n\nfunction isVirtualdom(a) {\n    return a instanceof Virtualdom;\n}\n\nclass Virtualdom {\n    constructor(type = \"\", props = {}, children = []) {\n        this.options = undefined;\n        this.element = undefined;\n        this.props = {};\n        this.children = [];\n        this.directives = {};\n        this.onevent = {};\n        this.bindattr = {};\n        const propsentries = Object.entries(props);\n        Object.assign(this, {\n            type: type,\n            bindattr: Object.fromEntries(propsentries.filter(([key]) => /[A-Za-z]/.test(key[0])).filter(e => isReactiveState(e[1]))),\n            props: Object.fromEntries(propsentries.filter(([key]) => /[A-Za-z]/.test(key[0])).filter(e => !isReactiveState(e[1]))),\n            children: children,\n            onevent: Object.fromEntries(propsentries.filter(([key]) => /\\@/.test(key[0])).map(([key, value]) => [ key.slice(1), value ])),\n            directives: Object.fromEntries(propsentries.filter(([key]) => /\\*/.test(key[0])).map(([key, value]) => [ key.slice(1), value ]))\n        });\n        Object.defineProperty(this, Symbol.toStringTag, {\n            value: \"virtualdom\",\n            configurable: true\n        });\n    }\n}\n\nvar n = function(t, r, u, e) {\n    for (var p = 1; p < r.length; p++) {\n        var s = r[p], h = \"number\" == typeof s ? u[s] : s, a = r[++p];\n        1 === a ? e[0] = h : 3 === a ? e[1] = Object.assign(e[1] || {}, h) : 5 === a ? (e[1] = e[1] || {})[r[++p]] = h : 6 === a ? e[1][r[++p]] += h + \"\" : e.push(a ? t.apply(null, n(t, h, u, [ \"\", null ])) : h);\n    }\n    return e;\n}, t = function(n) {\n    for (var t, r, u = 1, e = \"\", p = \"\", s = [ 0 ], h = function(n) {\n        1 === u && (n || (e = e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g, \"\"))) ? s.push(n || e, 0) : 3 === u && (n || e) ? (s.push(n || e, 1), \n        u = 2) : 2 === u && \"...\" === e && n ? s.push(n, 3) : 2 === u && e && !n ? s.push(!0, 5, e) : u >= 5 && ((e || !n && 5 === u) && (s.push(e, u, r), \n        u = 6), n && (s.push(n, u, r), u = 6)), e = \"\";\n    }, a = 0; a < n.length; a++) {\n        a && (1 === u && h(), h(a));\n        for (var f = 0; f < n[a].length; f++) t = n[a][f], 1 === u ? \"<\" === t ? (h(), s = [ s ], \n        u = 3) : e += t : 4 === u ? \"--\" === e && \">\" === t ? (u = 1, e = \"\") : e = t + e[0] : p ? t === p ? p = \"\" : e += t : '\"' === t || \"'\" === t ? p = t : \">\" === t ? (h(), \n        u = 1) : u && (\"=\" === t ? (u = 5, r = e, e = \"\") : \"/\" === t && (u < 5 || \">\" === n[a][f + 1]) ? (h(), \n        3 === u && (s = s[0]), u = s, (s = s[0]).push(u, 2), u = 0) : \" \" === t || \"\\t\" === t || \"\\n\" === t || \"\\r\" === t ? (h(), \n        u = 2) : e += t), 3 === u && \"!--\" === e && (u = 4, s = s[0]);\n    }\n    return h(), s;\n}, r = \"function\" == typeof Map, u = r ? new Map : {}, e = r ? function(n) {\n    var r = u.get(n);\n    return r || u.set(n, r = t(n)), r;\n} : function(n) {\n    for (var r = \"\", e = 0; e < n.length; e++) r += n[e].length + \"-\" + n[e];\n    return u[r] || (u[r] = t(n));\n};\n\nfunction htm(t) {\n    var r = n(this, e(t), arguments, []);\n    return r.length > 1 ? r : r[0];\n}\n\nfunction h(type = \"\", props = {}, ...children) {\n    let typenormalized = isstring(type) || isfunction(type) ? type : \"\";\n    const propsnormalized = isobject(props) ? props : {};\n    const childrennormalized = children.flat(1);\n    if (isstring(typenormalized)) {\n        typenormalized = typenormalized.trim().toLowerCase();\n    }\n    if (\"\" === typenormalized) {\n        return childrennormalized;\n    }\n    return new Virtualdom(typenormalized, propsnormalized, childrennormalized);\n}\n\nconst html = htm.bind(h);\n\nfunction isvalidvdom(v) {\n    let flag = false;\n    if (isarray(v)) {\n        flag = v.map(ele => {\n            return isvalidvdom(ele);\n        }).includes(false) ? false : true;\n        return flag;\n    } else if (isVirtualdom(v)) {\n        if (isvalidvdom(v.children)) {\n            return true;\n        }\n    } else if (isReactiveState(v)) {\n        return true;\n    } else {\n        if (isstring(v)) {\n            return true;\n        }\n    }\n    return flag;\n}\n\nfunction assertvalidvirtualdom(...args) {\n    const vdom = html(...args);\n    if (isvalidvdom(vdom)) {\n        return vdom;\n    } else {\n        console.error(vdom);\n        throw new TypeError(\"invalid Virtualdom!\");\n    }\n}\n\nconst eventlistenerssymbol = Symbol(\"eventlisteners\");\n\nfunction onevent(element, eventname, callback) {\n    if (!element[eventlistenerssymbol]) {\n        element[eventlistenerssymbol] = [];\n    }\n    if (typeof callback === \"function\") {\n        firstaddlisteners(element, eventname, [ callback ]);\n    } else if (isarray(callback)) {\n        firstaddlisteners(element, eventname, callback);\n    } else {\n        throw TypeError(\"invalid EventListener\");\n    }\n}\n\nfunction firstaddlisteners(ele, event, callarray) {\n    callarray.forEach(call => {\n        ele[eventlistenerssymbol].push([ event, call ]);\n        domaddlisten(ele, event, call);\n    });\n}\n\nfunction removelisteners(ele) {\n    if (ele[eventlistenerssymbol]) {\n        ele[eventlistenerssymbol].forEach(([event, call]) => {\n            domremovelisten(ele, event, call);\n        });\n    }\n}\n\nfunction readdlisteners(ele) {\n    if (ele[eventlistenerssymbol]) {\n        ele[eventlistenerssymbol].forEach(([event, call]) => {\n            domaddlisten(ele, event, call);\n        });\n    }\n}\n\nfunction mount(ele, container) {\n    setelehtml(container, \"\");\n    let eles;\n    if (Array.isArray(ele)) {\n        eles = ele;\n    } else {\n        eles = [ ele ];\n    }\n    eles.forEach(e => appendchild(container, e));\n    return container;\n}\n\nconst Reflect$2 = window.Reflect;\n\nconst {get: get$1, set: set$1} = Reflect$2;\n\nconst valuestring = \"value\";\n\nfunction isobject$1(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isstring$1(a) {\n    return typeof a === \"string\";\n}\n\nfunction objtostylestring(o) {\n    return Object.entries(o).map(([key, value]) => key + \":\" + value).join(\";\");\n}\n\nfunction asserthtmlelement(ele) {\n    if (!(ele instanceof Element)) {\n        throw TypeError(\"invalid HTMLElement!\");\n    } else return true;\n}\n\nfunction createeleattragentreadwrite(ele) {\n    asserthtmlelement(ele);\n    const isinputtextortextareaflag = isinputtextortextarea(ele);\n    var temp = Object.create(null);\n    const outputattrs = new Proxy(temp, {\n        ownKeys() {\n            const keys = attributesownkeys(ele);\n            return isinputtextortextareaflag ? Array.from(new Set([ ...keys, valuestring ])) : keys;\n        },\n        get(target, key) {\n            if (isinputtextortextareaflag && key === valuestring) {\n                return get$1(ele, valuestring);\n            } else {\n                const v = getattribute(ele, String(key));\n                if (v === \"\") {\n                    return true;\n                }\n                if (v === null) {\n                    return;\n                }\n                if (isstring$1(v)) {\n                    try {\n                        return JSON.parse(String(v));\n                    } catch (error) {\n                        return v;\n                    }\n                } else return;\n            }\n        },\n        set(t, key, v) {\n            if (isinputtextortextareaflag && key === valuestring) {\n                return set$1(ele, valuestring, v);\n            } else if (key === \"style\") {\n                setattribute(ele, String(key), isstring$1(v) ? v : isobject$1(v) ? objtostylestring(v) : String(v));\n                return true;\n            } else {\n                if (v === true) {\n                    v = \"\";\n                }\n                setattribute(ele, String(key), isobject$1(v) ? JSON.stringify(v) : String(v));\n                return true;\n            }\n        },\n        deleteProperty(t, k) {\n            removeAttribute(ele, String(k));\n            return true;\n        },\n        has(target, key) {\n            if (isinputtextortextareaflag && key === valuestring) {\n                return true;\n            } else {\n                return hasAttribute(ele, String(key));\n            }\n        },\n        defineProperty() {\n            return false;\n        },\n        getOwnPropertyDescriptor(target, key) {\n            const otherdescipter = {\n                enumerable: true,\n                configurable: true,\n                writable: true\n            };\n            const myvalue = get$1(outputattrs, key);\n            if (typeof myvalue !== \"undefined\") {\n                return {\n                    value: myvalue,\n                    ...otherdescipter\n                };\n            } else {\n                return;\n            }\n        }\n    });\n    return outputattrs;\n}\n\nfunction attributesownkeys(ele) {\n    return ele.getAttributeNames();\n}\n\nfunction getattribute(ele, key) {\n    return ele.getAttribute(key);\n}\n\nfunction geteletagname(ele) {\n    return ele.tagName.toLowerCase();\n}\n\nfunction setattribute(ele, key, value) {\n    return ele.setAttribute(key, value);\n}\n\nfunction removeAttribute(ele, key) {\n    return ele.removeAttribute(key);\n}\n\nfunction hasAttribute(ele, key) {\n    return ele.hasAttribute(key);\n}\n\nfunction isinputtextortextarea(ele) {\n    const tagname = geteletagname(ele);\n    return tagname === \"input\" && get$1(ele, \"type\") === \"text\" || tagname === \"textarea\";\n}\n\nconst bindstatesymbol = Symbol(\"bindstate\");\n\nconst reactivestatesymbol = Symbol(\"reactive\");\n\nconst virtualdomsymbol = Symbol(\"virtualdom\");\n\nfunction throwinvalideletype() {\n    throw TypeError(\"invalid element type!\");\n}\n\nfunction render(vdom, namespace) {\n    if (typeof vdom === \"string\") {\n        return createtextnode(vdom);\n    } else if (vdom instanceof ReactiveState) {\n        const reactive = vdom;\n        const textnode = createtextnode(String(reactive));\n        textnode[reactivestatesymbol] = reactive;\n        reactive[textnodesymbol] = textnode;\n        watch(reactive, state => {\n            changetext(textnode, String(state));\n        });\n        const element = textnode;\n        element[bindstatesymbol] = new Set;\n        element[bindstatesymbol].add(reactive);\n        return textnode;\n    } else if (vdom instanceof Virtualdom && \"type\" in vdom) {\n        const {type: type} = vdom;\n        let element;\n        if (typeof type === \"string\") {\n            if (type === \"script\") {\n                return createnonescript();\n            } else if (type === \"svg\") {\n                element = createsvgelement();\n            } else if (type === \"math\") {\n                element = createmathelement();\n            } else {\n                element = namespace ? createElementNS(namespace, type) : createnativeelement(type);\n            }\n        } else if (typeof type == \"function\") {\n            if (isobject(type[\"defaultProps\"])) {\n                vdom.props = JSON.parse(JSON.stringify({\n                    ...type[\"defaultProps\"],\n                    ...vdom.props\n                }));\n            }\n            const propsjson = JSON.parse(JSON.stringify({\n                ...vdom.props,\n                ...Object.fromEntries(Object.entries(vdom.bindattr).map(([key, value]) => {\n                    return [ key, value.value ];\n                }))\n            }));\n            element = createcostumelemet(type, propsjson, vdom.children, vdom.options);\n        } else {\n            throwinvalideletype();\n        }\n        handleprops(element, vdom);\n        if (typeof type !== \"function\") {\n            mount(vdom.children.map(e => {\n                if (type === \"svg\") {\n                    return render(e, svgnamespace);\n                } else if (type === \"math\") {\n                    return render(e, mathnamespace);\n                } else if (namespace) {\n                    return render(e, namespace);\n                } else {\n                    return render(e);\n                }\n            }), element);\n        }\n        return element;\n    } else {\n        throwinvalideletype();\n    }\n}\n\nfunction handleprops(element, vdom) {\n    ((element, vdom) => {\n        Object.entries(vdom.directives).forEach(([name, value]) => {\n            if (name in directives && typeof directives[name] === \"function\") {\n                directives[name](element, value, vdom);\n            } else {\n                throw new Error(\"invalid directives \" + name);\n            }\n        });\n        const attribute1 = createeleattragentreadwrite(element);\n        Object.assign(attribute1, vdom.props);\n        element[virtualdomsymbol] = vdom;\n        vdom.element = element;\n        Object.entries(vdom.bindattr).forEach(([key, primitivestate]) => {\n            attribute1[key] = primitivestate.value;\n            watch(primitivestate, state => {\n                attribute1[key] = state.value;\n            });\n        });\n        if (!element[eventlistenerssymbol]) {\n            element[eventlistenerssymbol] = [];\n        }\n        Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\n            onevent(element, event, callbacks);\n        });\n    })(element, vdom);\n    if (!element[bindstatesymbol]) {\n        element[bindstatesymbol] = new Set;\n    }\n    [ Object.values(vdom.bindattr), Object.values(vdom.directives) ].flat().filter(e => isReactiveState(e)).forEach(e => element[bindstatesymbol].add(e));\n}\n\nfunction createApp(vdom, container) {\n    const el = container;\n    if (!(isvalidvdom(vdom) || vdom instanceof Node || isarray(vdom) && isNodeArray(vdom))) {\n        console.error(vdom);\n        throw TypeError(\"invalid Virtualdom \");\n    }\n    if (!(el instanceof HTMLElement)) {\n        throw TypeError(\"invalid container HTMLElement!\");\n    }\n    if (el === document.body || el === document.documentElement || el === document.head) {\n        throw Error(\"Do not mount  to <html> or <body> <head>.\");\n    }\n    let elesarray;\n    if (Array.isArray(vdom)) {\n        elesarray = vdom;\n    } else {\n        elesarray = [ vdom ];\n    }\n    if (isvalidvdom(vdom)) {\n        mount(elesarray.map(e => render(e)), container);\n    } else if (vdom instanceof Node || isarray(vdom)) {\n        mount(elesarray, container);\n    }\n    return container;\n}\n\nfunction isNodeArray(array) {\n    return isarray(array) && !array.map(e => e instanceof Node).includes(false);\n}\n\nfunction createRef(init) {\n    return {\n        value: init\n    };\n}\n\nconst Reflect$3 = window.Reflect;\n\nconst {ownKeys: ownKeys$1, deleteProperty: deleteProperty$1, apply: apply$1, construct: construct$1, defineProperty: defineProperty$1, get: get$2, getOwnPropertyDescriptor: getOwnPropertyDescriptor$1, getPrototypeOf: getPrototypeOf$1, has: has$1, set: set$2, setPrototypeOf: setPrototypeOf$1} = Reflect$3;\n\nfunction isobject$2(a) {\n    return typeof a === \"object\" && a !== null;\n}\n\nfunction isfunction$1(a) {\n    return typeof a === \"function\";\n}\n\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\n    if (typeof callback !== \"function\") {\n        throw Error(\"observe callback invalid !\");\n    }\n    if (isfunction$1(target) || isobject$2(target)) {\n        let fakeobj;\n        if (isobject$2(target)) {\n            fakeobj = {};\n        } else {\n            fakeobj = () => {};\n        }\n        setPrototypeOf$1(fakeobj, null);\n        return (fakeobj => {\n            return new Proxy(fakeobj, {\n                defineProperty(t, p, a) {\n                    return defineProperty$1(target, p, a);\n                },\n                deleteProperty(t, p) {\n                    callback(ancestor, [ ...patharray, p ], undefined, get$2(target, p));\n                    return deleteProperty$1(target, p);\n                },\n                ownKeys() {\n                    return ownKeys$1(target);\n                },\n                has(t, p) {\n                    return has$1(target, p);\n                },\n                getPrototypeOf() {\n                    return getPrototypeOf$1(target);\n                },\n                setPrototypeOf(t, v) {\n                    return setPrototypeOf$1(target, v);\n                },\n                construct(t, argumentslist) {\n                    if (typeof target === \"function\") {\n                        return construct$1(target, argumentslist);\n                    }\n                },\n                apply(t, thisarg, argarray) {\n                    if (typeof target === \"function\") {\n                        return apply$1(target, thisarg, argarray);\n                    }\n                },\n                getOwnPropertyDescriptor(t, k) {\n                    var descripter = getOwnPropertyDescriptor$1(target, k);\n                    if (descripter) {\n                        descripter.configurable = true;\n                        return descripter;\n                    } else {\n                        return;\n                    }\n                },\n                set(t, k, v) {\n                    if (typeof callback === \"function\") {\n                        callback(ancestor, [ ...patharray, k ], v, get$2(target, k));\n                    }\n                    return set$2(target, k, v);\n                },\n                get(t, k) {\n                    var value = get$2(target, k);\n                    if (isfunction$1(value) || isobject$2(value)) {\n                        return deepobserveaddpath(value, callback, [ ...patharray, k ], target);\n                    } else {\n                        return value;\n                    }\n                }\n            });\n        })(fakeobj);\n    } else {\n        return target;\n    }\n}\n\nfunction observedeepagent(target, callback) {\n    if (typeof callback !== \"function\") {\n        throw Error(\"observe callback  invalid function \");\n    }\n    if (typeof Proxy !== \"function\") {\n        throw Error(\"Proxy unsupported!\");\n    }\n    if (isfunction$1(target) || isobject$2(target)) {\n        return deepobserveaddpath(target, callback, [], target);\n    } else {\n        return target;\n    }\n}\n\nfunction createstate(init) {\n    if (isprimitive(init)) {\n        return new Proxy(new ReactiveState(init), {\n            defineProperty() {\n                return false;\n            },\n            deleteProperty() {\n                return false;\n            },\n            set(target, key, value) {\n                if (key === textnodesymbol) {\n                    return set(target, key, value);\n                }\n                if (key === \"value\" && isprimitive(value)) {\n                    set(target, key, value);\n                    target[dispatchsymbol]();\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n        });\n    } else if (isReactiveState(init)) {\n        return createstate(init.value);\n    } else if (isobject(init)) {\n        return new Proxy(new ReactiveState(init), {\n            defineProperty() {\n                return false;\n            },\n            getOwnPropertyDescriptor(target, key) {\n                const myvalue = get(target, \"value\");\n                const descripter = getOwnPropertyDescriptor(target, key) || getOwnPropertyDescriptor(myvalue, key);\n                if (descripter) {\n                    descripter.configurable = true;\n                }\n                return descripter;\n            },\n            deleteProperty(target, key) {\n                const myvalue = get(target, \"value\");\n                if (has(myvalue, key)) {\n                    deleteProperty(myvalue, key);\n                    target[dispatchsymbol](key);\n                    return true;\n                } else {\n                    return true;\n                }\n            },\n            has(target, key) {\n                const myvalue = get(target, \"value\");\n                return has(target, key) || has(myvalue, key);\n            },\n            get(target, key) {\n                const value = get(target, \"value\");\n                if (has(target, key)) {\n                    return get(target, key);\n                } else if (has(value, key)) {\n                    return observedeepagent(get(value, key), () => {\n                        target[dispatchsymbol](key);\n                    });\n                }\n            },\n            ownKeys(target) {\n                return Array.from(new Set([ ...ownKeys(target), ...ownKeys(get(target, \"value\")) ]));\n            },\n            set(target, key, value) {\n                if (key === textnodesymbol) {\n                    return set(target, key, value);\n                }\n                const myvalue = get(target, \"value\");\n                if (key === \"value\" && isobject(value)) {\n                    set(target, key, value);\n                    target[dispatchsymbol]();\n                    return true;\n                } else if (!has(target, key)) {\n                    set(myvalue, key, value);\n                    target[dispatchsymbol](key);\n                } else if (key === \"length\") {\n                    set(myvalue, key, value);\n                    target[dispatchsymbol](key);\n                } else {\n                    return false;\n                }\n                return true;\n            }\n        });\n    } else {\n        throw TypeError(\"invalid State\");\n    }\n}\n\nconst attributeChangedCallback = \"attributeChangedCallback\";\n\nclass AttrChange extends HTMLElement {\n    setAttribute(qualifiedName, value) {\n        const oldValue = super.getAttribute(qualifiedName);\n        if (oldValue !== value) {\n            super.setAttribute(qualifiedName, value);\n            if (isfunction(this[attributeChangedCallback])) {\n                this[attributeChangedCallback](qualifiedName, oldValue, value);\n            }\n        }\n    }\n    removeAttribute(qualifiedName) {\n        const oldValue = super.getAttribute(qualifiedName);\n        if (null !== oldValue) {\n            super.removeAttribute(qualifiedName);\n            if (isfunction(this[attributeChangedCallback])) {\n                this[attributeChangedCallback](qualifiedName, oldValue, undefined);\n            }\n        }\n    }\n}\n\nfunction onmounted(ele) {\n    if (isarray(ele)) {\n        ele.forEach(e => {\n            onmounted(e);\n        });\n    } else if (ele instanceof Node) {\n        if (ele[eventlistenerssymbol]) {\n            readdlisteners(ele);\n        }\n        if (ele[bindstatesymbol]) {\n            ele[bindstatesymbol].forEach(state => {\n                rewatch(state);\n            });\n        }\n        onmounted(getdomchildren(ele));\n    }\n}\n\nfunction onunmounted(ele) {\n    if (isarray(ele)) {\n        ele.forEach(e => {\n            onunmounted(e);\n        });\n    } else if (ele instanceof Node) {\n        if (ele[eventlistenerssymbol]) {\n            removelisteners(ele);\n        }\n        if (ele[bindstatesymbol]) {\n            ele[bindstatesymbol].forEach(state => {\n                unwatch(state);\n            });\n        }\n        onunmounted(getdomchildren(ele));\n    }\n}\n\nconst truevdomsymbol = Symbol(\"truevdom\");\n\nconst falsevdomsymbol = Symbol(\"falsevdom\");\n\nconst trueelesymbol = Symbol(\"trueele\");\n\nconst falseelesymbol = Symbol(\"falseele\");\n\nconst handletrue = getsymbol(\"handletrue\");\n\nconst handlefalse = getsymbol(\"handlefalse\");\n\nclass Condition extends AttrChange {\n    constructor(propsjson, children, options) {\n        super();\n        this[truevdomsymbol] = isarray(options.true) ? options.true : [ options.true ];\n        this[falsevdomsymbol] = isarray(options.false) ? options.false : [ options.false ];\n    }\n    [handlefalse]() {\n        if (this[falsevdomsymbol]) {\n            if (!this[falseelesymbol]) {\n                this[falseelesymbol] = this[falsevdomsymbol].map(e => render(e));\n            }\n            const elementtomount = this[falseelesymbol];\n            createApp(elementtomount, this);\n            elementtomount.forEach(e => onmounted(e));\n            if (this[trueelesymbol]) {\n                this[trueelesymbol].forEach(e => onunmounted(e));\n            }\n        }\n    }\n    [handletrue]() {\n        if (this[truevdomsymbol]) {\n            if (!this[trueelesymbol]) {\n                this[trueelesymbol] = this[truevdomsymbol].map(e => render(e));\n            }\n            const elementtomount = this[trueelesymbol];\n            createApp(elementtomount, this);\n            elementtomount.forEach(e => onmounted(e));\n            if (this[falseelesymbol]) {\n                this[falseelesymbol].forEach(e => onunmounted(e));\n            }\n        }\n    }\n    connectedCallback() {\n        const attrs = createeleattragentreadwrite(this);\n        if (true === attrs[\"value\"]) {\n            this[handletrue]();\n        }\n        if (false === attrs[\"value\"]) {\n            this[handlefalse]();\n        }\n    }\n    attributeChangedCallback(name) {\n        if (name === \"value\") {\n            const attrs = createeleattragentreadwrite(this);\n            if (true === attrs[\"value\"]) {\n                this[handletrue]();\n            }\n            if (false === attrs[\"value\"]) {\n                this[handlefalse]();\n            }\n        }\n    }\n}\n\nfunction conditon(conditon, iftrue, iffalse) {\n    if (!isReactiveState(conditon)) {\n        throw TypeError(\"invalid ReactiveState\");\n    }\n    const vdom = new Virtualdom(Condition, {\n        value: conditon\n    });\n    vdom.options = {\n        true: iftrue,\n        false: iffalse\n    };\n    return vdom;\n}\n\nif (typeof HTMLElement !== \"function\" || typeof Proxy !== \"function\" || typeof customElements !== \"object\" || typeof CustomElementRegistry !== \"function\") {\n    throw new TypeError(\" browser not supported !\");\n}\n\nconst Fragment = \"\";\n\nexport { Fragment, conditon as condition, createApp, h as createElement, createRef, createstate as createState, extenddirectives as directives, h, assertvalidvirtualdom as html, watch };\n//# sourceMappingURL=index.js.map\n"],"names":["Reflect$1","window","Reflect","apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf","isobject","a","isstring","isfunction","isarray","Array","isArray","toString","call","replace","toLowerCase","gettagtype","getsymbol","Symbol","isprimitive","isnumber","isboolean","isundefined","_a","_b","_c","isReactiveState","ReactiveState","textnodesymbol","eventtargetsymbol","memlisteners","dispatchsymbol","subscribesymbol","removeallistenerssymbol","addallistenerssymbol","[object Object]","init","this","undefined","EventTarget","TypeError","Object","value","configurable","writable","toStringTag","forEach","callback","addEventListener","String","JSON","stringify","eventname","name","dispatchEvent","Event","push","removeEventListener","toPrimitive","document","seteletext","e","v","textContent","setelehtml","innerHTML","createElementNS","namespace","createtextnode","data","createTextNode","svgnamespace","mathnamespace","domaddlisten","ele","event","getdomchildren","from","childNodes","watch","state","statekey","requestAnimationFrame","directives","ref","html","createhtmlandtextdirective","text","errorname","extenddirectives","options","entries","key","isclassextendsHTMLElement","initclass","prototype","HTMLElement","element","vdom","type","bindattr","eventsarray","onevent","flat","Infinity","concat","target","filter","Boolean","CustomElementRegistry","customElements","customElements$1","CustomElementRegistry$1","elementset","for","elementmap","RandomDefineCustomElement","extendsname","RandomDefineCustomElement$1","length","表","组件状态名","find","elementname","fill","map","i","n","fromCharCode","Math","floor","random","join","getrandomstringandnumber","define","extends","Set","constructor","add","iterator","Virtualdom","props","children","propsentries","assign","fromEntries","test","slice","t","r","u","p","s","h","f","Map","typenormalized","propsnormalized","childrennormalized","trim","arguments","bind","isvalidvdom","flag","includes","assertvalidvirtualdom","args","eventlistenerssymbol","firstaddlisteners","callarray","mount","container","eles","appendChild","appendchild","Reflect$2","get$1","set$1","valuestring","isobject$1","isstring$1","createeleattragentreadwrite","Element","asserthtmlelement","isinputtextortextareaflag","tagname","tagName","geteletagname","isinputtextortextarea","temp","create","outputattrs","Proxy","keys","getAttributeNames","attributesownkeys","getAttribute","getattribute","parse","error","setattribute","o","k","removeAttribute","hasAttribute","otherdescipter","enumerable","myvalue","setAttribute","bindstatesymbol","reactivestatesymbol","virtualdomsymbol","throwinvalideletype","render","reactive","textnode","nodeValue","changetext","createDocumentFragment","createElement","createnativeelement","propsjson","createcostumelemet","Error","attribute1","primitivestate","callbacks","values","handleprops","createApp","el","Node","array","body","documentElement","head","elesarray","createRef","Reflect$3","ownKeys$1","deleteProperty$1","apply$1","construct$1","defineProperty$1","get$2","getOwnPropertyDescriptor$1","getPrototypeOf$1","has$1","set$2","setPrototypeOf$1","isobject$2","isfunction$1","observedeepagent","deepobserveaddpath","patharray","ancestor","fakeobj","argumentslist","thisarg","argarray","descripter","createstate","attributeChangedCallback","AttrChange","qualifiedName","oldValue","super","onmounted","readdlisteners","rewatch","onunmounted","domremovelisten","removelisteners","unwatch","truevdomsymbol","falsevdomsymbol","trueelesymbol","falseelesymbol","handletrue","handlefalse","Condition","true","false","elementtomount","attrs","conditon","iftrue","iffalse","Fragment"],"mappings":"AAAA,MAAMA,EAAYC,OAAOC,SAElBC,MAAOA,EAAOC,UAAWA,EAAWC,eAAgBA,EAAgBC,eAAgBA,EAAgBC,IAAKA,EAAKC,yBAA0BA,EAA0BC,eAAgBA,EAAgBC,IAAKA,EAAKC,aAAcA,EAAcC,QAASA,EAASC,kBAAmBA,EAAmBC,IAAKA,EAAKC,eAAgBA,GAAkBf,EAcnV,SAASgB,EAASC,GACd,MAAoB,iBAANA,GAAwB,OAANA,EAGpC,SAASC,EAASD,GACd,MAAoB,iBAANA,EAGlB,SAASE,EAAWF,GAChB,MAAoB,mBAANA,EAGlB,SAASG,EAAQH,GACb,OAAOA,aAAaI,OAASA,MAAMC,QAAQL,IAAwB,UAOvE,SAAoBA,GAChB,MAAO,GAAGM,SAASC,KAAKP,GAAGQ,QAAQ,WAAY,IAAIA,QAAQ,IAAK,IAAIC,cARnBC,CAAWV,GAGhE,SAASW,EAAUX,GACf,OAAOY,OAAOZ,GAOlB,SAASa,EAAYb,GACjB,OAAOC,EAASD,IAjCpB,SAAkBA,GACd,MAAoB,iBAANA,EAgCQc,CAASd,IA7BnC,SAAmBA,GACf,MAAoB,kBAANA,EA4BuBe,CAAUf,IArCnD,SAAqBA,GACjB,YAAoB,IAANA,EAoCuCgB,CAAYhB,GAGrE,IAAIiB,EAAIC,EAAIC,EAEZ,SAASC,EAAgBpB,GACrB,OAAOA,aAAaqB,EAGxB,MAAMC,EAAiBV,OAAO,YAExBW,EAAoBX,OAAO,eAE3BY,EAAeZ,OAAO,gBAEtBa,EAAiBd,EAAU,YAE3Be,EAAkBf,EAAU,aAE5BgB,EAA0BhB,EAAU,qBAEpCiB,EAAuBjB,EAAU,kBAEvC,MAAMU,EACFQ,YAAYC,GAIR,GAHAC,KAAKd,QAAMe,EACXD,KAAKb,GAAM,IAAIe,YACfF,KAAKZ,GAAM,IACPN,EAAYiB,KAAS/B,EAAS+B,GAO9B,MAAMI,UAAU,iBANhBC,OAAO/C,eAAe2C,KAAM,QAAS,CACjCK,MAAON,EACPO,cAAc,EACdC,UAAU,IAKlBH,OAAO/C,eAAe2C,KAAMnB,OAAO2B,YAAa,CAC5CH,MAAO,gBACPC,cAAc,IAGtBR,CAACD,KACGG,KAAKP,GAAcgB,QAAQ,EAAEJ,EAAOK,MAChCV,KAAKR,GAAmBmB,iBAAiBN,EAAOK,KAGxDZ,UACI,OAAOE,KAAKK,MAEhBP,WACI,MAAMO,EAAQL,KAAKK,MACnB,OAAOvB,EAAYuB,GAASO,OAAOP,GAASrC,EAASqC,GAASQ,KAAKC,UAAUT,GAAS,GAE1FP,EAAEZ,EAAKK,EAAgBJ,EAAKK,EAAmBJ,EAAKK,EAAcC,IAAiBqB,GAC/E,MAAMC,EAAOD,EAAYH,OAAOG,GAAa,QAChC,UAATC,GACAhB,KAAKR,GAAmByB,cAAc,IAAIC,MAAMF,IAEpDhB,KAAKR,GAAmByB,cAAc,IAAIC,MAAM,UAEpDpB,CAACH,GAAiBe,EAAUK,GACxB,MAAMC,EAAOD,EAAYH,OAAOG,GAAa,QAC7Cf,KAAKP,GAAc0B,KAAK,CAAEH,EAAM,IAAMN,EAASV,QAEnDF,CAACF,KACGI,KAAKP,GAAcgB,QAAQ,EAAEJ,EAAOK,MAChCV,KAAKR,GAAmB4B,oBAAoBf,EAAOK,KAG3DZ,CAACjB,OAAOwC,eACJ,MAAMhB,EAAQL,KAAKK,MACnB,OAAOvB,EAAYuB,GAASA,EAAQrC,EAASqC,GAASQ,KAAKC,UAAUT,QAAS,GAItF,MAAMiB,EAAWrE,OAAOqE,SAExB,SAASC,EAAWC,EAAGC,GACnBD,EAAEE,YAAcD,EAGpB,SAASE,EAAWH,EAAGC,GACnBD,EAAEI,UAAYH,EAmBlB,SAASI,EAAgBC,EAAWd,GAChC,OAAOM,EAASO,gBAAgBC,EAAWd,GAG/C,SAASe,EAAeC,GACpB,OAAOV,EAASW,eAAeD,GAGnC,MAAME,EAAe,6BAMrB,MAAMC,EAAgB,qCAMtB,SAASC,EAAaC,EAAKC,EAAO9D,GAC9B6D,EAAI1B,iBAAiB2B,EAAO9D,GAOhC,SAAS+D,EAAeF,GACpB,OAAOhE,MAAMmE,KAAKH,EAAII,YAG1B,SAASC,EAAMC,EAAOjC,EAAUkC,GAC5B,IAAMvD,EAAgBsD,KAAUxE,EAAWuC,GACvC,MAAMP,UAAU,6BAEhByC,EACAD,EAAMhD,GAAiBe,EAAUkC,GAEjCD,EAAMhD,GAAiBe,GAE3BmC,EAAsB,KAClBF,EAAM9C,OAYd,MAAMgD,EAAwB5F,OAAO4F,sBAErC,IAAIC,EAAa,CACbhD,IAAIuC,EAAKU,GACL,GAAkB,iBAAPA,EAGP,MAAM5C,UAAU,eAFhB4C,EAAI1C,MAAQgC,GAKpBvC,KAAKuC,EAAKW,GACNC,EAA2BtB,EAAY,OAAvCsB,CAA+CZ,EAAKW,IAExDlD,KAAKuC,EAAKa,GACND,EAA2B1B,EAAY,OAAvC0B,CAA+CZ,EAAKa,KAI5D,SAASD,EAA2B1B,EAAY4B,GAC5C,OAAO,SAASd,EAAKa,GACjB,GAAmB,iBAARA,EACPL,EAAsB,KAClBtB,EAAWc,EAAKa,SAEjB,CAAA,IAAI7D,EAAgB6D,GAQvB,MAAM/C,UAAU,WAAagD,GAP7BT,EAAMQ,EAAMP,IACRpB,EAAWc,EAAKzB,OAAO+B,MAE3BE,EAAsB,KAClBtB,EAAWc,EAAKzB,OAAOsC,QAQvC,SAASE,EAAiBC,GACtBjD,OAAOkD,QAAQD,GAAS5C,QAAQ,EAAE8C,EAAKlD,MACnC,GAAqB,mBAAVA,EACP,MAAMF,UAAU,qBAEhB2C,EAAWS,GAAOlD,IAsB9B,SAASmD,EAA0BC,GAC/B,SAAUtF,EAAWsF,IAAcA,EAAUC,WAAaD,EAAUC,qBAAqBC,aAlB7FP,EAAiB,CACbtD,MAAM8D,EAASvD,EAAOwD,GAClB,IAAIxE,EAAgBgB,IAAyB,UAAdwD,EAAKC,MAAkC,aAAdD,EAAKC,KAUzD,MAAM3D,UAAU,oCAThB0D,EAAKE,SAAgB,MAAI1D,EACzB,CAAE,SAAU,SAAUI,QAAQM,IAC1B,MACMiD,EAAc,CADLH,EAAKI,QAAQlD,IACGmD,KAAKC,EAAAA,GACpCjH,QAAQY,IAAI+F,EAAKI,QAASlD,EAAWiD,EAAYI,OAAO,CAAE5C,GAC/CnB,EAAMA,MAAQmB,EAAE6C,OAAOhE,QAC7BiE,OAAOC,eA4B5BtH,OAAOuH,sBAAwBjH,EAAIE,EAAeR,OAAOwH,gBAAiB,eAE1E,MAAOA,eAAgBC,EAAkBF,sBAAuBG,GAA2B1H,OAErF2H,EAAa/F,OAAOgG,IAAI,cAExBC,EAAajG,OAAOgG,IAAI,cAE9B,IAAIE,EAA4B,CAACtB,EAAWuB,KAE5C,SAASC,EAA4BxB,EAAWuB,EAAaE,EAAS,GAClE,IAAK1B,EAA0BC,GAC3B,MAAMtD,UAAU,kCAEpB,GAAKuE,EAAiBE,GAAYlH,IAAI+F,GAelC,OAnCiB0B,EAmCMT,EAAiBI,GAnCpBM,EAmCiC3B,EAlClDrD,OAAOkD,QAAQ6B,GAAGE,KAAK5D,GACnBA,EAAE,KAAO2D,GACjB,GAiB+C,CAC9C,MAAME,EAgDd,SAAkCJ,EAAS,GACvC,OAAO7G,MAAM6G,GAAQK,UAAKtF,GAAWuF,IAAI,IARlCjI,EAAIc,MAAM,IAAIkH,UAAKtF,GAAWuF,IAAI,CAAC/D,EAAGgE,IAAM,GAAKA,GAAGD,IAAIE,GAAK9E,OAAO+E,aAAaD,IAAKE,KAAKC,MAAsB,GAAhBD,KAAKE,YAQxCC,KAAK,IAAM,IAAM1H,MAAM6G,GAAQK,UAAKtF,GAAWuF,IAAI,IAJjHjI,EAAIc,MAAM,IAAIkH,UAAKtF,GAAWuF,IAAI,CAAC/D,EAAGgE,IAAMA,GAAIG,KAAKC,MAAsB,GAAhBD,KAAKE,WAAgBvH,SAAS,KAIoDwH,KAAK,IAjDjIC,CAAyBd,GAC7C,OAAIR,EAAiBnH,IAAI+H,GACdL,EAA4BxB,EAAWuB,EAAaE,EAAS,IAEhEF,EACAN,EAAiBuB,OAAOX,EAAa7B,EAAW,CAC5CyC,QAASlB,IAGbN,EAAiBuB,OAAOX,EAAa7B,GAGtC6B,GAjCf,IAAyBH,EAAGC,GAcgCH,CAA4BxB,EAAWuB,GAyB9FN,EAAiBE,KAClBF,EAAiBE,GAAc,IAAIuB,KAGlCzB,EAAiBI,KAClBJ,EAAiBI,GAAc,IAGnCJ,EAAiBuB,OAAS,SAASjF,EAAMoF,EAAa/C,GAClD,IAAKG,EAA0B4C,GAC3B,MAAMjG,UAAU,kCAEpBwE,EAAwBjB,UAAUuC,OAAOzH,KAAKkG,EAAkB1D,EAAMoF,EAAa/C,GACnFqB,EAAiBE,GAAYyB,IAAID,GACjC1B,EAAiBI,GAAY9D,GAAQoF,GAGzC1B,EAAiB7F,OAAOyH,UAAY,KAChC,MAAMhD,EAAUlD,OAAOkD,QAAQoB,EAAiBI,IAChD,OAAOxB,EAAQzE,OAAOyH,UAAU9H,KAAK8E,IAmBzC,MAAMiD,EACFzG,YAAYgE,EAAO,GAAI0C,EAAQ,GAAIC,EAAW,IAC1CzG,KAAKqD,aAAUpD,EACfD,KAAK4D,aAAU3D,EACfD,KAAKwG,MAAQ,GACbxG,KAAKyG,SAAW,GAChBzG,KAAK8C,WAAa,GAClB9C,KAAKiE,QAAU,GACfjE,KAAK+D,SAAW,GAChB,MAAM2C,EAAetG,OAAOkD,QAAQkD,GACpCpG,OAAOuG,OAAO3G,KAAM,CAChB8D,KAAMA,EACNC,SAAU3D,OAAOwG,YAAYF,EAAapC,OAAO,EAAEf,KAAS,WAAWsD,KAAKtD,EAAI,KAAKe,OAAO9C,GAAKnC,EAAgBmC,EAAE,MACnHgF,MAAOpG,OAAOwG,YAAYF,EAAapC,OAAO,EAAEf,KAAS,WAAWsD,KAAKtD,EAAI,KAAKe,OAAO9C,IAAMnC,EAAgBmC,EAAE,MACjHiF,SAAUA,EACVxC,QAAS7D,OAAOwG,YAAYF,EAAapC,OAAO,EAAEf,KAAS,KAAKsD,KAAKtD,EAAI,KAAKiC,IAAI,EAAEjC,EAAKlD,KAAW,CAAEkD,EAAIuD,MAAM,GAAIzG,KACpHyC,WAAY1C,OAAOwG,YAAYF,EAAapC,OAAO,EAAEf,KAAS,KAAKsD,KAAKtD,EAAI,KAAKiC,IAAI,EAAEjC,EAAKlD,KAAW,CAAEkD,EAAIuD,MAAM,GAAIzG,OAE3HD,OAAO/C,eAAe2C,KAAMnB,OAAO2B,YAAa,CAC5CH,MAAO,aACPC,cAAc,KAK1B,IAAIoF,EAAI,SAASqB,EAAGC,EAAGC,EAAGzF,GACtB,IAAK,IAAI0F,EAAI,EAAGA,EAAIF,EAAE9B,OAAQgC,IAAK,CAC/B,IAAIC,EAAIH,EAAEE,GAAIE,EAAI,iBAAmBD,EAAIF,EAAEE,GAAKA,EAAGlJ,EAAI+I,IAAIE,GAC3D,IAAMjJ,EAAIuD,EAAE,GAAK4F,EAAI,IAAMnJ,EAAIuD,EAAE,GAAKpB,OAAOuG,OAAOnF,EAAE,IAAM,GAAI4F,GAAK,IAAMnJ,GAAKuD,EAAE,GAAKA,EAAE,IAAM,IAAIwF,IAAIE,IAAME,EAAI,IAAMnJ,EAAIuD,EAAE,GAAGwF,IAAIE,KAAOE,EAAI,GAAK5F,EAAEL,KAAKlD,EAAI8I,EAAE5J,MAAM,KAAMuI,EAAEqB,EAAGK,EAAGH,EAAG,CAAE,GAAI,QAAWG,GAE7M,OAAO5F,GACRuF,GAAI,SAASrB,GACZ,IAAK,IAAIqB,EAAGC,EAAGC,EAAI,EAAGzF,EAAI,GAAI0F,EAAI,GAAIC,EAAI,CAAE,GAAKC,EAAI,SAAS1B,GAC1D,IAAMuB,IAAMvB,IAAMlE,EAAIA,EAAE/C,QAAQ,uBAAwB,MAAQ0I,EAAEhG,KAAKuE,GAAKlE,EAAG,GAAK,IAAMyF,IAAMvB,GAAKlE,IAAM2F,EAAEhG,KAAKuE,GAAKlE,EAAG,GAC1HyF,EAAI,GAAK,IAAMA,GAAK,QAAUzF,GAAKkE,EAAIyB,EAAEhG,KAAKuE,EAAG,GAAK,IAAMuB,GAAKzF,IAAMkE,EAAIyB,EAAEhG,MAAK,EAAI,EAAGK,GAAKyF,GAAK,KAAOzF,IAAMkE,GAAK,IAAMuB,KAAOE,EAAEhG,KAAKK,EAAGyF,EAAGD,GAC/IC,EAAI,GAAIvB,IAAMyB,EAAEhG,KAAKuE,EAAGuB,EAAGD,GAAIC,EAAI,IAAKzF,EAAI,IAC7CvD,EAAI,EAAGA,EAAIyH,EAAER,OAAQjH,IAAK,CACzBA,IAAM,IAAMgJ,GAAKG,IAAKA,EAAEnJ,IACxB,IAAK,IAAIoJ,EAAI,EAAGA,EAAI3B,EAAEzH,GAAGiH,OAAQmC,IAAKN,EAAIrB,EAAEzH,GAAGoJ,GAAI,IAAMJ,EAAI,MAAQF,GAAKK,IAAKD,EAAI,CAAEA,GACrFF,EAAI,GAAKzF,GAAKuF,EAAI,IAAME,EAAI,OAASzF,GAAK,MAAQuF,GAAKE,EAAI,EAAGzF,EAAI,IAAMA,EAAIuF,EAAIvF,EAAE,GAAK0F,EAAIH,IAAMG,EAAIA,EAAI,GAAK1F,GAAKuF,EAAI,MAAQA,GAAK,MAAQA,EAAIG,EAAIH,EAAI,MAAQA,GAAKK,IACrKH,EAAI,GAAKA,IAAM,MAAQF,GAAKE,EAAI,EAAGD,EAAIxF,EAAGA,EAAI,IAAM,MAAQuF,IAAME,EAAI,GAAK,MAAQvB,EAAEzH,GAAGoJ,EAAI,KAAOD,IACnG,IAAMH,IAAME,EAAIA,EAAE,IAAKF,EAAIE,GAAIA,EAAIA,EAAE,IAAIhG,KAAK8F,EAAG,GAAIA,EAAI,GAAK,MAAQF,GAAK,OAASA,GAAK,OAASA,GAAK,OAASA,GAAKK,IACrHH,EAAI,GAAKzF,GAAKuF,GAAI,IAAME,GAAK,QAAUzF,IAAMyF,EAAI,EAAGE,EAAIA,EAAE,IAE9D,OAAOC,IAAKD,GACbH,GAAI,mBAAqBM,IAAKL,GAAID,GAAI,IAAIM,IAAM,GAAI9F,GAAIwF,GAAI,SAAStB,GACpE,IAAIsB,EAAIC,GAAE1J,IAAImI,GACd,OAAOsB,GAAKC,GAAEnJ,IAAI4H,EAAGsB,EAAID,GAAErB,IAAKsB,GAChC,SAAStB,GACT,IAAK,IAAIsB,EAAI,GAAIxF,EAAI,EAAGA,EAAIkE,EAAER,OAAQ1D,IAAKwF,GAAKtB,EAAElE,GAAG0D,OAAS,IAAMQ,EAAElE,GACtE,OAAOyF,GAAED,KAAOC,GAAED,GAAKD,GAAErB,KAQ7B,SAAS0B,GAAEtD,EAAO,GAAI0C,EAAQ,MAAOC,GACjC,IAAIc,EAAiBrJ,EAAS4F,IAAS3F,EAAW2F,GAAQA,EAAO,GACjE,MAAM0D,EAAkBxJ,EAASwI,GAASA,EAAQ,GAC5CiB,EAAqBhB,EAASvC,KAAK,GAIzC,OAHIhG,EAASqJ,KACTA,EAAiBA,EAAeG,OAAOhJ,eAEvC,KAAO6I,EACAE,EAEJ,IAAIlB,EAAWgB,EAAgBC,EAAiBC,GAG3D,MAAMzE,GAlBN,SAAa+D,GACT,IAAIC,EAAItB,EAAE1F,KAAMwB,GAAEuF,GAAIY,UAAW,IACjC,OAAOX,EAAE9B,OAAS,EAAI8B,EAAIA,EAAE,IAgBfY,KAAKR,IAEtB,SAASS,GAAYpG,GACjB,IAAIqG,GAAO,EACX,GAAI1J,EAAQqD,GAIR,OAHAqG,GAAOrG,EAAE+D,IAAInD,GACFwF,GAAYxF,IACpB0F,UAAS,GAET,GAAiBtG,aAnFJ8E,GAoFhB,GAAIsB,GAAYpG,EAAEgF,UACd,OAAO,MAER,CAAA,GAAIpH,EAAgBoC,GACvB,OAAO,EAEP,GAAIvD,EAASuD,GACT,OAAO,EAGf,OAAOqG,EAGX,SAASE,MAAyBC,GAC9B,MAAMpE,EAAOb,MAAQiF,GACrB,GAAIJ,GAAYhE,GACZ,OAAOA,EAGP,MAAM,IAAI1D,UAAU,uBAI5B,MAAM+H,GAAuBrJ,OAAO,kBAepC,SAASsJ,GAAkB9F,EAAKC,EAAO8F,GACnCA,EAAU3H,QAAQjC,IACd6D,EAAI6F,IAAsB/G,KAAK,CAAEmB,EAAO9D,IACxC4D,EAAaC,EAAKC,EAAO9D,KAoBjC,SAAS6J,GAAMhG,EAAKiG,GAEhB,IAAIC,EAOJ,OARA5G,EAAW2G,EAAW,KAGlBC,EADAlK,MAAMC,QAAQ+D,GACPA,EAEA,CAAEA,IAER5B,QAAQe,IAvXjB,SAAqB8G,EAAWjG,GAC5BiG,EAAUE,YAAYnG,IAsXJoG,CAAYH,EAAW9G,IAClC8G,EAGX,MAAMI,GAAYzL,OAAOC,SAElBK,IAAKoL,GAAO7K,IAAK8K,IAASF,GAE3BG,GAAc,QAEpB,SAASC,GAAW7K,GAChB,MAAoB,iBAANA,GAAwB,OAANA,EAGpC,SAAS8K,GAAW9K,GAChB,MAAoB,iBAANA,EAalB,SAAS+K,GAA4B3G,IANrC,SAA2BA,GACvB,GAAMA,aAAe4G,QAEd,OAAO,EADV,MAAM9I,UAAU,wBAKpB+I,CAAkB7G,GAClB,MAAM8G,EAmGV,SAA+B9G,GAC3B,MAAM+G,EAjBV,SAAuB/G,GACnB,OAAOA,EAAIgH,QAAQ3K,cAgBH4K,CAAcjH,GAC9B,MAAmB,UAAZ+G,GAA8C,SAAvBT,GAAMtG,EAAK,SAAkC,aAAZ+G,EArG7BG,CAAsBlH,GACxD,IAAImH,EAAOpJ,OAAOqJ,OAAO,MACzB,MAAMC,EAAc,IAAIC,MAAMH,EAAM,CAChC1J,UACI,MAAM8J,EAuElB,SAA2BvH,GACvB,OAAOA,EAAIwH,oBAxEUC,CAAkBzH,GAC/B,OAAO8G,EAA4B9K,MAAMmE,KAAK,IAAI2D,IAAI,IAAKyD,EAAMf,MAAkBe,GAEvF9J,IAAIuE,EAAQd,GACR,GAAI4F,GAA6B5F,IAAQsF,GACrC,OAAOF,GAAMtG,EAAKwG,IACf,CACH,MAAMpH,EAoEtB,SAAsBY,EAAKkB,GACvB,OAAOlB,EAAI0H,aAAaxG,GArEFyG,CAAa3H,EAAKzB,OAAO2C,IACnC,GAAU,KAAN9B,EACA,OAAO,EAEX,GAAU,OAANA,EACA,OAEJ,IAAIsH,GAAWtH,GAMR,OALH,IACI,OAAOZ,KAAKoJ,MAAMrJ,OAAOa,IAC3B,MAAOyI,GACL,OAAOzI,KAKvB3B,IAAIiH,EAAGxD,EAAK9B,GACR,OAAI0H,GAA6B5F,IAAQsF,GAC9BD,GAAMvG,EAAKwG,GAAapH,GAChB,UAAR8B,GACP4G,GAAa9H,EAAKzB,OAAO2C,GAAMwF,GAAWtH,GAAKA,EAAIqH,GAAWrH,IA3CpD2I,EA2C0E3I,EA1CzFrB,OAAOkD,QAAQ8G,GAAG5E,IAAI,EAAEjC,EAAKlD,KAAWkD,EAAM,IAAMlD,GAAO0F,KAAK,MA0C8BnF,OAAOa,KACzF,KAEG,IAANA,IACAA,EAAI,IAER0I,GAAa9H,EAAKzB,OAAO2C,GAAMuF,GAAWrH,GAAKZ,KAAKC,UAAUW,GAAKb,OAAOa,KACnE,GAlDvB,IAA0B2I,GAqDlB9M,eAAc,CAACyJ,EAAGsD,KAkD1B,SAAyBhI,EAAKkB,GACnBlB,EAAIiI,gBAAgB/G,GAlDnB+G,CAAgBjI,EAAKzB,OAAOyJ,KACrB,GAEX3M,IAAG,CAAC2G,EAAQd,OACJ4F,GAA6B5F,IAAQsF,KAiDrD,SAAsBxG,EAAKkB,GACvB,OAAOlB,EAAIkI,aAAahH,GA/CLgH,CAAalI,EAAKzB,OAAO2C,IAGxClG,eAAc,KACH,EAEXyC,yBAAyBuE,EAAQd,GAC7B,MAAMiH,EAAiB,CACnBC,YAAY,EACZnK,cAAc,EACdC,UAAU,GAERmK,EAAU/B,GAAMe,EAAanG,GACnC,YAAuB,IAAZmH,EACA,CACHrK,MAAOqK,KACJF,QAGP,KAIZ,OAAOd,EAeX,SAASS,GAAa9H,EAAKkB,EAAKlD,GAC5B,OAAOgC,EAAIsI,aAAapH,EAAKlD,GAgBjC,MAAMuK,GAAkB/L,OAAO,aAEzBgM,GAAsBhM,OAAO,YAE7BiM,GAAmBjM,OAAO,cAEhC,SAASkM,KACL,MAAM5K,UAAU,yBAGpB,SAAS6K,GAAOnH,EAAM/B,GAClB,GAAoB,iBAAT+B,EACP,OAAO9B,EAAe8B,GACnB,GAAIA,aAAgBvE,EAAe,CACtC,MAAM2L,EAAWpH,EACXqH,EAAWnJ,EAAenB,OAAOqK,IACvCC,EAASL,IAAuBI,EAChCA,EAAS1L,GAAkB2L,EAC3BxI,EAAMuI,EAAUtI,KArfxB,SAAoBuI,EAAU7K,GAC1B6K,EAASC,UAAYvK,OAAOP,GAqfpB+K,CAAWF,EAAUtK,OAAO+B,MAEhC,MAAMiB,EAAUsH,EAGhB,OAFAtH,EAAQgH,IAAmB,IAAIzE,IAC/BvC,EAAQgH,IAAiBvE,IAAI4E,GACtBC,EACJ,GAAIrH,aAAgB0C,GAAc,SAAU1C,EAAM,CACrD,MAAOC,KAAMA,GAAQD,EACrB,IAAID,EACJ,GAAoB,iBAATE,EAAmB,CAC1B,GAAa,WAATA,EACA,OAlhBLxC,EAAS+J,yBAohBJzH,EADgB,QAATE,EAvhBZjC,EAAgBK,EAAc,OAyhBT,SAAT4B,EA7fZjC,EAAgBM,EAAe,QAggBhBL,EAAYD,EAAgBC,EAAWgC,GArhBjE,SAA6BA,GACzB,OAAOxC,EAASgK,cAAcxH,GAohBuCyH,CAAoBzH,QAE9E,GAAmB,mBAARA,EAAoB,CAC9B9F,EAAS8F,EAAmB,gBAC5BD,EAAK2C,MAAQ3F,KAAKoJ,MAAMpJ,KAAKC,UAAU,IAChCgD,EAAmB,gBACnBD,EAAK2C,UAGhB,MAAMgF,EAAY3K,KAAKoJ,MAAMpJ,KAAKC,UAAU,IACrC+C,EAAK2C,SACLpG,OAAOwG,YAAYxG,OAAOkD,QAAQO,EAAKE,UAAUyB,IAAI,EAAEjC,EAAKlD,KACpD,CAAEkD,EAAKlD,EAAMA,YAG5BuD,EAtaZ,SAA4BH,EAAW+H,EAAW/E,EAAUpD,GACxD,GAAIG,EAA0BC,GAE1B,OADAsB,EAA0BtB,GACnBrG,EAAUqG,EAAW,CAAE+H,EAAW/E,EAAUpD,IAGnD,MAAMlD,UAAU,kCAgaFsL,CAAmB3H,EAAM0H,EAAW3H,EAAK4C,SAAU5C,EAAKR,cAElE0H,KAgBJ,OAMR,SAAqBnH,EAASC,GAC1B,EAAED,EAASC,KACPzD,OAAOkD,QAAQO,EAAKf,YAAYrC,QAAQ,EAAEO,EAAMX,MAC5C,KAAIW,KAAQ8B,GAA0C,mBAArBA,EAAW9B,IAGxC,MAAM,IAAI0K,MAAM,sBAAwB1K,GAFxC8B,EAAW9B,GAAM4C,EAASvD,EAAOwD,KAKzC,MAAM8H,EAAa3C,GAA4BpF,GAC/CxD,OAAOuG,OAAOgF,EAAY9H,EAAK2C,OAC/B5C,EAAQkH,IAAoBjH,EAC5BA,EAAKD,QAAUA,EACfxD,OAAOkD,QAAQO,EAAKE,UAAUtD,QAAQ,EAAE8C,EAAKqI,MACzCD,EAAWpI,GAAOqI,EAAevL,MACjCqC,EAAMkJ,EAAgBjJ,IAClBgJ,EAAWpI,GAAOZ,EAAMtC,UAG3BuD,EAAQsE,MACTtE,EAAQsE,IAAwB,IAEpC9H,OAAOkD,QAAQO,EAAKI,SAASxD,QAAQ,EAAE6B,EAAOuJ,OAnRtD,SAAiBjI,EAAS7C,EAAWL,GAIjC,GAHKkD,EAAQsE,MACTtE,EAAQsE,IAAwB,IAEZ,mBAAbxH,EACPyH,GAAkBvE,EAAS7C,EAAW,CAAEL,QACrC,CAAA,IAAItC,EAAQsC,GAGf,MAAMP,UAAU,yBAFhBgI,GAAkBvE,EAAS7C,EAAWL,IA6QlCuD,CAAQL,EAAStB,EAAOuJ,MAtBhC,CAwBGjI,EAASC,GACPD,EAAQgH,MACThH,EAAQgH,IAAmB,IAAIzE,KAEnC,CAAE/F,OAAO0L,OAAOjI,EAAKE,UAAW3D,OAAO0L,OAAOjI,EAAKf,aAAcoB,OAAOI,OAAO9C,GAAKnC,EAAgBmC,IAAIf,QAAQe,GAAKoC,EAAQgH,IAAiBvE,IAAI7E,IAjD9IuK,CAAYnI,EAASC,GACD,mBAATC,GACPuE,GAAMxE,EAAK4C,SAASjB,IAAIhE,GACP,QAATsC,EACOkH,GAAOxJ,EAAGU,GACD,SAAT4B,EACAkH,GAAOxJ,EAAGW,GACVL,EACAkJ,GAAOxJ,EAAGM,GAEVkJ,GAAOxJ,IAElBoC,GAEDA,EAEPmH,KAoCR,SAASiB,GAAUnI,EAAMyE,GACrB,MAAM2D,EAAK3D,EACX,KAAMT,GAAYhE,IAASA,aAAgBqI,MAAQ9N,EAAQyF,KAwB1CsI,EAxB+DtI,EAyBzEzF,EAAQ+N,KAAWA,EAAM3G,IAAIhE,GAAKA,aAAa0K,MAAMnE,UAAS,KAvBjE,MAAM5H,UAAU,uBAsBxB,IAAqBgM,EApBjB,KAAMF,aAActI,aAChB,MAAMxD,UAAU,kCAEpB,GAAI8L,IAAO3K,EAAS8K,MAAQH,IAAO3K,EAAS+K,iBAAmBJ,IAAO3K,EAASgL,KAC3E,MAAMZ,MAAM,6CAEhB,IAAIa,EAWJ,OATIA,EADAlO,MAAMC,QAAQuF,GACFA,EAEA,CAAEA,GAEdgE,GAAYhE,GACZwE,GAAMkE,EAAU/G,IAAIhE,GAAKwJ,GAAOxJ,IAAK8G,IAC9BzE,aAAgBqI,MAAQ9N,EAAQyF,KACvCwE,GAAMkE,EAAWjE,GAEdA,EAOX,SAASkE,GAAUzM,GACf,MAAO,CACHM,MAAON,GAIf,MAAM0M,GAAYxP,OAAOC,SAElBU,QAAS8O,GAAWpP,eAAgBqP,GAAkBxP,MAAOyP,GAASxP,UAAWyP,GAAaxP,eAAgByP,GAAkBvP,IAAKwP,GAAOvP,yBAA0BwP,GAA4BvP,eAAgBwP,GAAkBvP,IAAKwP,GAAOpP,IAAKqP,GAAOpP,eAAgBqP,IAAoBX,GAEvS,SAASY,GAAWpP,GAChB,MAAoB,iBAANA,GAAwB,OAANA,EAGpC,SAASqP,GAAarP,GAClB,MAAoB,mBAANA,EA4ElB,SAASsP,GAAiBlJ,EAAQ3D,GAC9B,GAAwB,mBAAbA,EACP,MAAMgL,MAAM,uCAEhB,GAAqB,mBAAV/B,MACP,MAAM+B,MAAM,sBAEhB,OAAI4B,GAAajJ,IAAWgJ,GAAWhJ,GAhF3C,SAASmJ,EAAmBnJ,EAAQ3D,EAAU+M,EAAY,GAAIC,EAAWrJ,GACrE,GAAwB,mBAAb3D,EACP,MAAMgL,MAAM,8BAEhB,GAAI4B,GAAajJ,IAAWgJ,GAAWhJ,GAAS,CAC5C,IAAIsJ,EAOJ,OALIA,EADAN,GAAWhJ,GACD,GAEA,OAEd+I,GAAiBO,EAAS,MACnB,CAACA,GACG,IAAIhE,MAAMgE,EAAS,CACtBtQ,eAAc,CAAC0J,EAAGG,EAAGjJ,IACV6O,GAAiBzI,EAAQ6C,EAAGjJ,GAEvCX,eAAc,CAACyJ,EAAGG,KACdxG,EAASgN,EAAU,IAAKD,EAAWvG,QAAKjH,EAAW8M,GAAM1I,EAAQ6C,IAC1DyF,GAAiBtI,EAAQ6C,IAEpCtJ,QAAO,IACI8O,GAAUrI,GAErB3G,IAAG,CAACqJ,EAAGG,IACIgG,GAAM7I,EAAQ6C,GAEzBzJ,eAAc,IACHwP,GAAiB5I,GAE5BtG,eAAc,CAACgJ,EAAGtF,IACP2L,GAAiB/I,EAAQ5C,GAEpC3B,UAAUiH,EAAG6G,GACT,GAAsB,mBAAXvJ,EACP,OAAOwI,GAAYxI,EAAQuJ,IAGnC9N,MAAMiH,EAAG8G,EAASC,GACd,GAAsB,mBAAXzJ,EACP,OAAOuI,GAAQvI,EAAQwJ,EAASC,IAGxChO,yBAAyBiH,EAAGsD,GACxB,IAAI0D,EAAaf,GAA2B3I,EAAQgG,GACpD,OAAI0D,GACAA,EAAWzN,cAAe,EACnByN,QAEP,GAGRjQ,IAAG,CAACiJ,EAAGsD,EAAG5I,KACkB,mBAAbf,GACPA,EAASgN,EAAU,IAAKD,EAAWpD,GAAK5I,EAAGsL,GAAM1I,EAAQgG,IAEtD8C,GAAM9I,EAAQgG,EAAG5I,IAE5B3B,IAAIiH,EAAGsD,GACH,IAAIhK,EAAQ0M,GAAM1I,EAAQgG,GAC1B,OAAIiD,GAAajN,IAAUgN,GAAWhN,GAC3BmN,EAAmBnN,EAAOK,EAAU,IAAK+M,EAAWpD,GAAKhG,GAEzDhE,KAnDhB,CAuDJsN,GAEH,OAAOtJ,EAYAmJ,CAAmBnJ,EAAQ3D,EAAU,GAAI2D,GAEzCA,EAIf,SAAS2J,GAAYjO,GACjB,GAAIjB,EAAYiB,GACZ,OAAO,IAAI4J,MAAM,IAAIrK,EAAcS,GAAO,CACtC1C,eAAc,KACH,EAEXC,eAAc,KACH,EAEXQ,IAAG,CAACuG,EAAQd,EAAKlD,IACTkD,IAAQhE,EACDzB,EAAIuG,EAAQd,EAAKlD,KAEhB,UAARkD,IAAmBzE,EAAYuB,MAC/BvC,EAAIuG,EAAQd,EAAKlD,GACjBgE,EAAO3E,MACA,KAMhB,GAAIL,EAAgBU,GACvB,OAAOiO,GAAYjO,EAAKM,OACrB,GAAIrC,EAAS+B,GAChB,OAAO,IAAI4J,MAAM,IAAIrK,EAAcS,GAAO,CACtC1C,eAAc,KACH,EAEXyC,yBAAyBuE,EAAQd,GAC7B,MAAMmH,EAAUnN,EAAI8G,EAAQ,SACtB0J,EAAavQ,EAAyB6G,EAAQd,IAAQ/F,EAAyBkN,EAASnH,GAI9F,OAHIwK,IACAA,EAAWzN,cAAe,GAEvByN,GAEXjO,eAAeuE,EAAQd,GACnB,MAAMmH,EAAUnN,EAAI8G,EAAQ,SAC5B,OAAI3G,EAAIgN,EAASnH,KACbjG,EAAeoN,EAASnH,GACxBc,EAAO3E,GAAgB6D,IAChB,IAKfzD,IAAIuE,EAAQd,GACR,MAAMmH,EAAUnN,EAAI8G,EAAQ,SAC5B,OAAO3G,EAAI2G,EAAQd,IAAQ7F,EAAIgN,EAASnH,IAE5CzD,IAAIuE,EAAQd,GACR,MAAMlD,EAAQ9C,EAAI8G,EAAQ,SAC1B,OAAI3G,EAAI2G,EAAQd,GACLhG,EAAI8G,EAAQd,GACZ7F,EAAI2C,EAAOkD,GACXgK,GAAiBhQ,EAAI8C,EAAOkD,GAAM,KACrCc,EAAO3E,GAAgB6D,UAFxB,GAMX3F,QAAQyG,GACGhG,MAAMmE,KAAK,IAAI2D,IAAI,IAAKvI,EAAQyG,MAAYzG,EAAQL,EAAI8G,EAAQ,aAE3EvE,IAAIuE,EAAQd,EAAKlD,GACb,GAAIkD,IAAQhE,EACR,OAAOzB,EAAIuG,EAAQd,EAAKlD,GAE5B,MAAMqK,EAAUnN,EAAI8G,EAAQ,SAC5B,GAAY,UAARd,GAAmBvF,EAASqC,GAG5B,OAFAvC,EAAIuG,EAAQd,EAAKlD,GACjBgE,EAAO3E,MACA,EACJ,GAAKhC,EAAI2G,EAAQd,GAGjB,CAAA,GAAY,WAARA,EAIP,OAAO,EAHPzF,EAAI4M,EAASnH,EAAKlD,GAClBgE,EAAO3E,GAAgB6D,QAJvBzF,EAAI4M,EAASnH,EAAKlD,GAClBgE,EAAO3E,GAAgB6D,GAO3B,OAAO,KAIf,MAAMpD,UAAU,iBAIxB,MAAM8N,GAA2B,2BAEjC,MAAMC,WAAmBvK,YACrB7D,aAAaqO,EAAe9N,GACxB,MAAM+N,EAAWC,MAAMtE,aAAaoE,GAChCC,IAAa/N,IACbgO,MAAM1D,aAAawD,EAAe9N,GAC9BlC,EAAW6B,KAAKiO,MAChBjO,KAAKiO,IAA0BE,EAAeC,EAAU/N,IAIpEP,gBAAgBqO,GACZ,MAAMC,EAAWC,MAAMtE,aAAaoE,GAChC,OAASC,IACTC,MAAM/D,gBAAgB6D,GAClBhQ,EAAW6B,KAAKiO,MAChBjO,KAAKiO,IAA0BE,EAAeC,OAAUnO,KAMxE,SAASqO,GAAUjM,GACXjE,EAAQiE,GACRA,EAAI5B,QAAQe,IACR8M,GAAU9M,KAEPa,aAAe6J,OAClB7J,EAAI6F,KA/fhB,SAAwB7F,GAChBA,EAAI6F,KACJ7F,EAAI6F,IAAsBzH,QAAQ,EAAE6B,EAAO9D,MACvC4D,EAAaC,EAAKC,EAAO9D,KA6fzB+P,CAAelM,GAEfA,EAAIuI,KACJvI,EAAIuI,IAAiBnK,QAAQkC,KAxyBzC,SAAiBA,GACbA,EAAM9C,KAwyBM2O,CAAQ7L,KAGhB2L,GAAU/L,EAAeF,KAIjC,SAASoM,GAAYpM,GACbjE,EAAQiE,GACRA,EAAI5B,QAAQe,IACRiN,GAAYjN,KAETa,aAAe6J,OAClB7J,EAAI6F,KAzhBhB,SAAyB7F,GACjBA,EAAI6F,KACJ7F,EAAI6F,IAAsBzH,QAAQ,EAAE6B,EAAO9D,OAzTnD,SAAyB6D,EAAKC,EAAO9D,GACjC6D,EAAIjB,oBAAoBkB,EAAO9D,GAyTvBkQ,CAAgBrM,EAAKC,EAAO9D,KAuhB5BmQ,CAAgBtM,GAEhBA,EAAIuI,KACJvI,EAAIuI,IAAiBnK,QAAQkC,KA9zBzC,SAAiBA,GACbA,EAAM/C,KA8zBMgP,CAAQjM,KAGhB8L,GAAYlM,EAAeF,KAInC,MAAMwM,GAAiBhQ,OAAO,YAExBiQ,GAAkBjQ,OAAO,aAEzBkQ,GAAgBlQ,OAAO,WAEvBmQ,GAAiBnQ,OAAO,YAExBoQ,GAAarQ,EAAU,cAEvBsQ,GAActQ,EAAU,eAE9B,MAAMuQ,WAAkBjB,GACpBpO,YAAY0L,EAAW/E,EAAUpD,GAC7BgL,QACArO,KAAK6O,IAAkBzQ,EAAQiF,EAAQ+L,MAAQ/L,EAAQ+L,KAAO,CAAE/L,EAAQ+L,MACxEpP,KAAK8O,IAAmB1Q,EAAQiF,EAAQgM,OAAShM,EAAQgM,MAAQ,CAAEhM,EAAQgM,OAE/EvP,CAACoP,MACG,GAAIlP,KAAK8O,IAAkB,CAClB9O,KAAKgP,MACNhP,KAAKgP,IAAkBhP,KAAK8O,IAAiBtJ,IAAIhE,GAAKwJ,GAAOxJ,KAEjE,MAAM8N,EAAiBtP,KAAKgP,IAC5BhD,GAAUsD,EAAgBtP,MAC1BsP,EAAe7O,QAAQe,GAAK8M,GAAU9M,IAClCxB,KAAK+O,KACL/O,KAAK+O,IAAetO,QAAQe,GAAKiN,GAAYjN,KAIzD1B,CAACmP,MACG,GAAIjP,KAAK6O,IAAiB,CACjB7O,KAAK+O,MACN/O,KAAK+O,IAAiB/O,KAAK6O,IAAgBrJ,IAAIhE,GAAKwJ,GAAOxJ,KAE/D,MAAM8N,EAAiBtP,KAAK+O,IAC5B/C,GAAUsD,EAAgBtP,MAC1BsP,EAAe7O,QAAQe,GAAK8M,GAAU9M,IAClCxB,KAAKgP,KACLhP,KAAKgP,IAAgBvO,QAAQe,GAAKiN,GAAYjN,KAI1D1B,oBACI,MAAMyP,EAAQvG,GAA4BhJ,OACtC,IAASuP,EAAa,OACtBvP,KAAKiP,OAEL,IAAUM,EAAa,OACvBvP,KAAKkP,MAGbpP,yBAAyBkB,GACrB,GAAa,UAATA,EAAkB,CAClB,MAAMuO,EAAQvG,GAA4BhJ,OACtC,IAASuP,EAAa,OACtBvP,KAAKiP,OAEL,IAAUM,EAAa,OACvBvP,KAAKkP,QAMrB,SAASM,GAASA,EAAUC,EAAQC,GAChC,IAAKrQ,EAAgBmQ,GACjB,MAAMrP,UAAU,yBAEpB,MAAM0D,EAAO,IAAI0C,EAAW4I,GAAW,CACnC9O,MAAOmP,IAMX,OAJA3L,EAAKR,QAAU,CACX+L,KAAMK,EACNJ,MAAOK,GAEJ7L,EAGX,GAA2B,mBAAhBF,aAA+C,mBAAVgG,OAAkD,iBAAnBlF,gBAAgE,mBAA1BD,sBACjH,MAAM,IAAIrE,UAAU,4BAGxB,MAAMwP,GAAW"}