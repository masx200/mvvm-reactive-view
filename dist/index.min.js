var t,e,r,n=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var o=t[e];n[o[0]]=o[1]}return n};function o(t){return"object"==typeof t&&null!==t}function i(t){return"string"==typeof t}function u(t){return"function"==typeof t}function c(t){return t instanceof Array&&Array.isArray(t)&&"array"===function(t){return{}.toString.call(t).replace("[object ","").replace("]","").toLowerCase()}(t)}function a(t){return Symbol(t)}function f(t){return i(t)||function(t){return"number"==typeof t}(t)||function(t){return"boolean"==typeof t}(t)||function(t){return void 0===t}(t)}function s(t){return t instanceof g}"function"!=typeof Object.fromEntries&&(Object.fromEntries=n),"function"!=typeof Array.prototype.flat&&(Array.prototype.flat=function(t=1){return t<=1?this.reduce((t,e)=>t.concat(e),[]):function t(e){return e.reduce((e,r)=>Array.isArray(r)?e.concat(t(r)):e.concat(r),[])}(this)});const l=Symbol("textnode"),p=Symbol("eventtatget"),y=Symbol("memlisteners"),v=a("dispatch"),d=a("subscribe"),h=a("removeallisteners"),m=a("addallisteners");class g{constructor(n){if(this[t]=void 0,this[e]=new EventTarget,this[r]=[],!f(n)&&!o(n))throw TypeError("invalid State");Object.defineProperty(this,"value",{value:n,configurable:!0,writable:!0}),Object.defineProperty(this,Symbol.toStringTag,{value:"ReactiveState",configurable:!0})}[m](){this[y].forEach(([t,e])=>{this[p].addEventListener(t,e)})}valueOf(){return this.value}toString(){const t=this.value;return f(t)?String(t):o(t)?JSON.stringify(t):""}[(t=l,e=p,r=y,v)](t){const e=t?String(t):"value";"value"!==e&&this[p].dispatchEvent(new Event(e)),this[p].dispatchEvent(new Event("value"))}[d](t,e){const r=e?String(e):"value";this[y].push([r,()=>t(this)])}[h](){this[y].forEach(([t,e])=>{this[p].removeEventListener(t,e)})}[Symbol.toPrimitive](){const t=this.value;return f(t)?t:o(t)?JSON.stringify(t):void 0}}const b=window.document;function w(t,e){t.textContent=e}function E(t,e){t.innerHTML=e}function S(t,e){return b.createElementNS(t,e)}function O(t){return b.createTextNode(t)}const P="http://www.w3.org/2000/svg";const j="http://www.w3.org/1998/Math/MathML";function T(t,e,r){if(!s(t)||!u(e))throw TypeError("invalid state or callback");r?t[d](e,r):t[d](e),A(()=>{t[m]()})}const A=window.requestAnimationFrame;var x={ref(t,e){if("object"!=typeof e)throw TypeError("invalid ref");e.value=t},html(t,e){M(E,"html")(t,e)},text(t,e){M(w,"text")(t,e)}};function M(t,e){return function(r,n){if("string"==typeof n)A(()=>{t(r,n)});else{if(!s(n))throw TypeError("invalid "+e);T(n,e=>{t(r,String(e))}),A(()=>{t(r,String(n))})}}}function L(t){Object.entries(t).forEach(([t,e])=>{if("function"!=typeof e)throw TypeError("invalid directive");x[t]=e})}L({value(t,e,r){if(!s(e)||"input"!==r.type&&"textarea"!==r.type)throw TypeError("invalid ReactiveState or element");r.bindattr.value=e,["change","input"].forEach(t=>{const n=[r.onevent[t]].flat(1/0);Reflect.set(r.onevent,t,n.concat([t=>e.value=t.target.value]).filter(Boolean))})}});const{customElements:N,CustomElementRegistry:C}=window,J=Symbol.for("elementset"),R=Symbol.for("elementmap");function D(t){N[J].has(t)||N.define(Object.keys(Array(26).fill(void 0)).map((t,e)=>97+e).map(t=>String.fromCharCode(t))[Math.floor(26*Math.random())]+"-"+Array.from(String(Math.random())).filter(t=>/\d/.test(t)).join(""),t)}N[J]||(N[J]=new Set),N[R]||(N[R]=new Map),N.define=function(t,e,r){C.prototype.define.call(N,t,e,r),N[J].add(e),N[R].set(t,e)},N[Symbol.iterator]=()=>N[R][Symbol.iterator].call(N[R]);class H{constructor(t="",e={},r=[]){this.element=void 0,this.props={},this.children=[],this.directives={},this.onevent={},this.bindattr={};const n=Object.entries(e);Object.assign(this,{type:t,bindattr:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>s(t[1]))),props:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>!s(t[1]))),children:r,onevent:Object.fromEntries(n.filter(([t])=>/\@/.test(t[0])).map(([t,e])=>[t.slice(1),e])),directives:Object.fromEntries(n.filter(([t])=>/\*/.test(t[0])).map(([t,e])=>[t.slice(1),e]))}),Object.defineProperty(this,Symbol.toStringTag,{value:"virtualdom",configurable:!0})}}var K=function(t,e,r,n){for(var o=1;o<e.length;o++){var i=e[o],u="number"==typeof i?r[i]:i,c=e[++o];1===c?n[0]=u:3===c?n[1]=Object.assign(n[1]||{},u):5===c?(n[1]=n[1]||{})[e[++o]]=u:6===c?n[1][e[++o]]+=u+"":n.push(c?t.apply(null,K(t,u,r,["",null])):u)}return n},k=function(t){for(var e,r,n=1,o="",i="",u=[0],c=function(t){1===n&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(t||o,0):3===n&&(t||o)?(u.push(t||o,1),n=2):2===n&&"..."===o&&t?u.push(t,3):2===n&&o&&!t?u.push(!0,5,o):n>=5&&((o||!t&&5===n)&&(u.push(o,n,r),n=6),t&&(u.push(t,n,r),n=6)),o=""},a=0;a<t.length;a++){a&&(1===n&&c(),c(a));for(var f=0;f<t[a].length;f++)e=t[a][f],1===n?"<"===e?(c(),u=[u],n=3):o+=e:4===n?"--"===o&&">"===e?(n=1,o=""):o=e+o[0]:i?e===i?i="":o+=e:'"'===e||"'"===e?i=e:">"===e?(c(),n=1):n&&("="===e?(n=5,r=o,o=""):"/"===e&&(n<5||">"===t[a][f+1])?(c(),3===n&&(u=u[0]),n=u,(u=u[0]).push(n,2),n=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(c(),n=2):o+=e),3===n&&"!--"===o&&(n=4,u=u[0])}return c(),u},V="function"==typeof Map,z=V?new Map:{},F=V?function(t){var e=z.get(t);return e||z.set(t,e=k(t)),e}:function(t){for(var e="",r=0;r<t.length;r++)e+=t[r].length+"-"+t[r];return z[e]||(z[e]=k(t))};function Z(t="",e={},...r){let n=i(t)||u(t)?t:"";const c=o(e)?e:{},a=r.flat(1);return i(n)&&(n=n.trim().toLowerCase()),""===n?a:new H(n,c,a)}const q=function(t){var e=K(this,F(t),arguments,[]);return e.length>1?e:e[0]}.bind(Z);function B(t){let e=!1;if(c(t))return e=!t.map(t=>B(t)).includes(!1);if(t instanceof H){if(B(t.children))return!0}else{if(s(t))return!0;if(i(t))return!0}return e}function $(...t){const e=q(...t);if(B(e))return e;throw new TypeError("invalid Virtualdom!")}const G=Symbol("eventlisteners");function I(t,e,r){r.forEach(r=>{t[G].push([e,r]),function(t,e,r){t.addEventListener(e,r)}(t,e,r)})}const Q=window.Reflect,{apply:U,construct:W,defineProperty:X,deleteProperty:Y,get:_,getOwnPropertyDescriptor:tt,getPrototypeOf:et,has:rt,isExtensible:nt,ownKeys:ot,preventExtensions:it,set:ut,setPrototypeOf:ct}=Q;function at(t,e,r){if(function(t){return!!(u(t)&&t.prototype&&t.prototype instanceof HTMLElement)}(t))return D(t),W(t,[e,r]);throw TypeError("invalid custom element class !")}function ft(t,e){let r;return e.innerHTML="",(r=Array.isArray(t)?t:[t]).forEach(t=>(function(t,e){t.appendChild(e)})(e,t)),e}const st=window.Reflect,{get:lt,ownKeys:pt,set:yt}=st,vt="value";function dt(t){return"object"==typeof t&&null!==t}function ht(t){return"string"==typeof t}function mt(t){!function(t){if(t instanceof Element)return!0;throw TypeError("invalid HTMLElement!")}(t);const e=function(t){const e=function(t){return t.tagName.toLowerCase()}(t);return"input"===e&&"text"===lt(t,"type")||"textarea"===e}(t);var r=Object.create(null);return new Proxy(r,{ownKeys(){const r=function(t){return pt(t.attributes).filter(t=>!/\d/.test(String(t)[0]))}(t);return e?Array.from(new Set([...r,vt])):r},get(r,n){if(e&&n===vt)return lt(t,vt);{const e=gt(t,String(n));if(!e)return;if(""===e)return!0;if(!ht(e))return;try{return JSON.parse(String(e))}catch(t){return e}}},set(r,n,o){return e&&n===vt?yt(t,vt,o):"style"===n?(bt(t,String(n),ht(o)?o:dt(o)?(i=o,Object.entries(i).map(([t,e])=>t+":"+e).join(";")):String(o)),!0):(!0===o&&(o=""),bt(t,String(n),dt(o)?JSON.stringify(o):String(o)),!0);var i},deleteProperty:(e,r)=>(function(t,e){t.removeAttribute(e)}(t,String(r)),!0),has:(r,n)=>!(!e||n!==vt)||function(t,e){return t.hasAttribute(e)}(t,String(n)),defineProperty:()=>!1,getOwnPropertyDescriptor(r,n){const o={enumerable:!0,configurable:!0,writable:!0};if(e&&n===vt)return{value:lt(t,vt),...o};{let e;return""===gt(t,String(n))&&(e=!0),e?{value:e,...o}:void 0}}})}function gt(t,e){return t.getAttribute(e)}function bt(t,e,r){return t.setAttribute(e,r)}const wt=Symbol("bindstate"),Et=Symbol("reactivestate"),St=Symbol("virtualdom");function Ot(){throw TypeError("invalid element type!")}function Pt(t,e){if("string"==typeof t)return O(t);if(t instanceof g){const e=t,r=O(String(e));return r[Et]=e,e[l]=r,T(e,t=>{!function(t,e){t.nodeValue=String(e)}(r,String(t))}),r}if(t instanceof H&&"type"in t){const{type:r}=t;let n;if("string"==typeof r){if("script"===r)return b.createDocumentFragment();n="svg"===r?S(P,"svg"):"math"===r?S(j,"math"):e?S(e,r):function(t){return b.createElement(t)}(r)}else if("function"==typeof r){o(r.defaultProps)&&(t.props=JSON.parse(JSON.stringify({...r.defaultProps,...t.props})));const e=JSON.parse(JSON.stringify({...t.props,...Object.fromEntries(Object.entries(t.bindattr).map(([t,e])=>[t,e.value]))}));n=at(r,e,t.children)}else Ot();return function(t,e){((t,e)=>{Object.entries(e.directives).forEach(([r,n])=>{if(!(r in x&&"function"==typeof x[r]))throw new Error("invalid directives "+r);x[r](t,n,e)});const r=mt(t);Object.assign(r,e.props),t[St]=e,e.element=t,Object.entries(e.bindattr).forEach(([t,e])=>{r[t]=e.value,T(e,e=>{r[t]=e.value})}),t[G]||(t[G]=[]),Object.entries(e.onevent).forEach(([e,r])=>{!function(t,e,r){if(t[G]||(t[G]=[]),"function"==typeof r)I(t,e,[r]);else{if(!c(r))throw TypeError("invalid EventListener");I(t,e,r)}}(t,e,r)})})(t,e),t[wt]||(t[wt]=new Set);[Object.values(e.bindattr),Object.values(e.directives)].flat().filter(t=>s(t)).forEach(e=>t[wt].add(e))}(n,t),"function"!=typeof r&&ft(t.children.map(t=>"svg"===r?Pt(t,P):"math"===r?Pt(t,j):e?Pt(t,e):Pt(t)),n),n}Ot()}function jt(t,e){const r=e;if(!B(t))throw TypeError("invalid Virtualdom ");if(!(r instanceof HTMLElement))throw TypeError("invalid container HTMLElement!");if(r===b.body||r===b.documentElement||r===b.head)throw Error("Do not mount  to <html> or <body> <head>.");let n;return ft((n=Array.isArray(t)?t:[t]).map(t=>Pt(t)),e),e}function Tt(t){return{value:t}}const At=window.Reflect,{ownKeys:xt,deleteProperty:Mt,apply:Lt,construct:Nt,defineProperty:Ct,get:Jt,getOwnPropertyDescriptor:Rt,getPrototypeOf:Dt,has:Ht,set:Kt,setPrototypeOf:kt}=At;function Vt(t){return"object"==typeof t&&null!==t}function zt(t){return"function"==typeof t}function Ft(t,e){if("function"!=typeof e)throw Error("observe callback  invalid function ");if("function"!=typeof Proxy)throw Error("Proxy unsupported!");return zt(t)||Vt(t)?function t(e,r,n=[],o=e){if("function"!=typeof r)throw Error("observe callback invalid !");if(zt(e)||Vt(e)){let i;return i=Vt(e)?{}:()=>{},kt(i,null),(i=>new Proxy(i,{defineProperty:(t,r,n)=>Ct(e,r,n),deleteProperty:(t,i)=>(r(o,[...n,i],void 0,Jt(e,i)),Mt(e,i)),ownKeys:()=>xt(e),has:(t,r)=>Ht(e,r),getPrototypeOf:()=>Dt(e),setPrototypeOf:(t,r)=>kt(e,r),construct(t,r){if("function"==typeof e)return Nt(e,r)},apply(t,r,n){if("function"==typeof e)return Lt(e,r,n)},getOwnPropertyDescriptor(t,r){var n=Rt(e,r);return n?(n.configurable=!0,n):void 0},set:(t,i,u)=>("function"==typeof r&&r(o,[...n,i],u,Jt(e,i)),Kt(e,i,u)),get(o,i){var u=Jt(e,i);return zt(u)||Vt(u)?t(u,r,[...n,i],e):u}}))(i)}return e}(t,e,[],t):t}function Zt(t){if(f(t))return new Proxy(new g(t),{defineProperty:()=>!1,deleteProperty:()=>!1,set:(t,e,r)=>e===l?ut(t,e,r):!("value"!==e||!f(r))&&(ut(t,e,r),t[v](),!0)});if(s(t))return Zt(t.value);if(o(t))return new Proxy(new g(t),{defineProperty:()=>!1,getOwnPropertyDescriptor(t,e){const r=_(t,"value"),n=tt(t,e)||tt(r,e);return n&&(n.configurable=!0),n},deleteProperty(t,e){const r=_(t,"value");return!rt(r,e)||(Y(r,e),t[v](e),!0)},has(t,e){const r=_(t,"value");return rt(t,e)||rt(r,e)},get(t,e){const r=_(t,"value");return rt(t,e)?_(t,e):rt(r,e)?Ft(_(r,e),()=>{t[v](e)}):void 0},ownKeys:t=>Array.from(new Set([...ot(t),...ot(_(t,"value"))])),set(t,e,r){if(e===l)return ut(t,e,r);const n=_(t,"value");if("value"===e&&o(r))return ut(t,e,r),t[v](),!0;if(rt(t,e)){if("length"!==e)return!1;ut(n,e,r),t[v](e)}else ut(n,e,r),t[v](e);return!0}});throw TypeError("invalid State")}if("function"!=typeof HTMLElement||"function"!=typeof Proxy||"object"!=typeof customElements||"function"!=typeof CustomElementRegistry)throw new TypeError(" browser not supported !");export{jt as createApp,Z as createElemet,Tt as createRef,Zt as createState,L as directives,Z as h,$ as html,T as watch};
//# sourceMappingURL=index.min.js.map
