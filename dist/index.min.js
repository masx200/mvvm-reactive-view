var t=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var o=t[e];n[o[0]]=o[1]}return n};"function"!=typeof Object.fromEntries&&(Object.fromEntries=t),"function"!=typeof Array.prototype.flat&&(Array.prototype.flat=function(t=1){return t<=1?this.reduce((t,e)=>t.concat(e),[]):function t(e){return e.reduce((e,r)=>Array.isArray(r)?e.concat(t(r)):e.concat(r),[])}(this)});var e,r,n=window.Reflect;function o(t){return"object"==typeof t&&null!==t}function i(t){return"string"==typeof t}function s(t){return"function"==typeof t}function u(t){return Symbol(t)}function a(t){return i(t)||function(t){return"number"==typeof t}(t)||function(t){return"boolean"==typeof t}(t)||function(t){return void 0===t}(t)}const c=Symbol("textnode"),f=Symbol("eventtatget"),l=Symbol("memlisteners"),p=u("dispatch"),y=u("subscribe"),v=u("removeallisteners"),h=u("addallisteners"),g={};n.ownKeys(Array.prototype).forEach(t=>{g[t]=Array.prototype[t]});class d{}Object.assign(d.prototype,g),d.prototype.constructor=d,n.deleteProperty(d.prototype,"length");class m extends d{constructor(t){if(super(),this[e]=new EventTarget,this[r]=[],!a(t)&&!o(t))throw TypeError("invalid State");this.value=t,Object.defineProperty(this,Symbol.toStringTag,{value:"ReactiveState"})}[(e=f,r=l,Symbol.toPrimitive)](){let t=this.value;return a(t)?t:o(t)?JSON.stringify(t):void 0}valueOf(){return this.value}toString(){let t=this.value;return a(t)?String(t):o(t)?JSON.stringify(t):""}[p](t){let e=t?String(t):"value";"value"!==e&&this[f].dispatchEvent(new Event(e)),this[f].dispatchEvent(new Event("value"))}[y](t,e){let r=e?String(e):"value";this[l].push([r,()=>t(this)])}[v](){this[l].forEach(([t,e])=>{this[f].removeEventListener(t,e)})}[h](){this[l].forEach(([t,e])=>{this[f].addEventListener(t,e)})}}class b{constructor(t="",e={},r=[]){this.props={},this.children=[],this.directives={},this.onevent={},this.bindattr={};const n=Object.entries(e);Object.assign(this,{type:t,bindattr:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>t[1]instanceof m)),props:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>!(t[1]instanceof m))),children:r,onevent:Object.fromEntries(n.filter(([t])=>/\@/.test(t[0])).map(([t,e])=>[t.slice(1),e])),directives:Object.fromEntries(n.filter(([t])=>/\*/.test(t[0])).map(([t,e])=>[t.slice(1),e]))}),Object.defineProperty(this,Symbol.toStringTag,{value:"virtualdom"})}}var E=function(t,e,r,n){for(var o=1;o<e.length;o++){var i=e[o],s="number"==typeof i?r[i]:i,u=e[++o];1===u?n[0]=s:3===u?n[1]=Object.assign(n[1]||{},s):5===u?(n[1]=n[1]||{})[e[++o]]=s:6===u?n[1][e[++o]]+=s+"":n.push(u?t.apply(null,E(t,s,r,["",null])):s)}return n},w=function(t){for(var e,r,n=1,o="",i="",s=[0],u=function(t){1===n&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(t||o,0):3===n&&(t||o)?(s.push(t||o,1),n=2):2===n&&"..."===o&&t?s.push(t,3):2===n&&o&&!t?s.push(!0,5,o):n>=5&&((o||!t&&5===n)&&(s.push(o,n,r),n=6),t&&(s.push(t,n,r),n=6)),o=""},a=0;a<t.length;a++){a&&(1===n&&u(),u(a));for(var c=0;c<t[a].length;c++)e=t[a][c],1===n?"<"===e?(u(),s=[s],n=3):o+=e:4===n?"--"===o&&">"===e?(n=1,o=""):o=e+o[0]:i?e===i?i="":o+=e:'"'===e||"'"===e?i=e:">"===e?(u(),n=1):n&&("="===e?(n=5,r=o,o=""):"/"===e&&(n<5||">"===t[a][c+1])?(u(),3===n&&(s=s[0]),n=s,(s=s[0]).push(n,2),n=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(u(),n=2):o+=e),3===n&&"!--"===o&&(n=4,s=s[0])}return u(),s},S="function"==typeof Map,O=S?new Map:{},A=S?function(t){var e=O.get(t);return e||O.set(t,e=w(t)),e}:function(t){for(var e="",r=0;r<t.length;r++)e+=t[r].length+"-"+t[r];return O[e]||(O[e]=w(t))};function T(t="",e={},...r){var n=i(t)||s(t)?t:"",u=o(e)?e:{},a=r.flat(1);return"string"==typeof n&&""===n?a:new b(n,u,a)}const P=function(t){var e=E(this,A(t),arguments,[]);return e.length>1?e:e[0]}.bind(T);function j(t){let e=!1;if(Array.isArray(t))e=!t.map(t=>j(t)).includes(!1);else if(t instanceof b){if(j(t.children))return!0}else{if(t instanceof m)return!0;if(i(t))return!0}return e}function x(...t){var e=P(...t);if(j(e))return e;throw new TypeError("invalid Virtualdom!\n"+JSON.stringify(e,null,4))}function L(t,e,r){if(!(t instanceof m&&s(e)))throw TypeError("invalid state or callback");r?t[y](e,r):t[y](e),requestAnimationFrame(()=>{t[h]()})}const N=Symbol("eventlisteners");function M(t,e,r){if("function"==typeof r)H(t,e,[r]);else{if(!((n=r)instanceof Array&&Array.isArray(n)))throw TypeError("invalid EventListener");H(t,e,r)}var n}function H(t,e,r){r.forEach(r=>{t[N].push([e,r]),function(t,e,r){t.addEventListener(e,r)}(t,e,r)})}var K={ref(t,e,r){if("object"!=typeof e)throw TypeError("invalid ref");e.value=t},html(t,e,r){if("string"==typeof e)requestAnimationFrame(()=>{t.innerHTML=e});else{if(!(e instanceof m))throw TypeError("invalid html");L(e,e=>{t.innerHTML=String(e.value)}),requestAnimationFrame(()=>{t.innerHTML=String(e.value)})}},text(t,e,r){if("string"==typeof e)requestAnimationFrame(()=>{t.textContent=e});else{if(!(e instanceof m))throw TypeError("invalid text");L(e,e=>{t.textContent=String(e.value)}),requestAnimationFrame(()=>{t.textContent=String(e.value)})}}};const F=new class extends Array{constructor(){super(),Object.defineProperty(this,Symbol.toStringTag,{value:"setlikearray"})}push(...t){return t.forEach(t=>{(s(t)||o(t))&&(this.includes(t)||super.push(t))}),this.length}};function J(t,e){if(function(t){return!!(s(t)&&t.prototype&&t.prototype instanceof HTMLElement)}(t)){F.push(t);const r=function(t){return"c-"+F.indexOf(t)}(t);return customElements.get(r)===t||customElements.define(r,t),n.construct(t,[e])}throw TypeError("invalid custom element class !")}function q(t){return document.createTextNode(t)}const D="http://www.w3.org/2000/svg";function R(t,e){let r;e.innerHTML="",(r=t instanceof Array?t:[t]).forEach(t=>(function(t,e){t.appendChild(e)})(e,t))}const k=window.Reflect,C="value";function V(t){return"object"==typeof t&&null!==t}function z(t){return"string"==typeof t}const Z=Symbol("reactivestate"),G=Symbol("virtualdom");function I(){throw TypeError("invalid element type!")}function U(t,e){if("string"==typeof t)return q(t);if(t instanceof m){const e=t,r=q(String(e));return r[Z]=e,e[c]=r,L(e,t=>{!function(t,e){t.nodeValue=String(e)}(r,String(t))}),r}if(t instanceof b&&"type"in t){let o;if("string"==typeof t.type){if("script"===t.type)return document.createDocumentFragment();o="svg"===t.type?document.createElementNS(D,"svg"):e?function(t,e){return document.createElementNS(t,e)}(e,t.type):(n=t.type,document.createElement(n))}else"function"==typeof t.type?o=J(t.type,t.children):I();var r=function(t){!function(t){if(t instanceof HTMLElement||t instanceof SVGElement||t instanceof Element)return!0;throw TypeError("invalid HTMLElement!")}(t);const e="INPUT"===t.tagName&&"text"===k.get(t,"type")||"TEXTAREA"===t.tagName;var r=Object.create(null);return new Proxy(r,{ownKeys(){const r=k.ownKeys(t.attributes).filter(t=>!/\d/.test(String(t)[0]));return e?Array.from(new Set([...r,C])):r},get(r,n){if(e&&n===C)return k.get(t,C);var o=t.getAttribute(String(n));if(o&&z(o))try{return JSON.parse(String(o))}catch(t){return o}},set(r,n,o){return e&&n===C?k.set(t,C,o):"style"===n?(t.setAttribute(String(n),z(o)?o:V(o)?(i=o,Object.entries(i).map(([t,e])=>t+":"+e).join(";")):String(o)),!0):(t.setAttribute(String(n),V(o)?JSON.stringify(o):String(o)),!0);var i},deleteProperty:(e,r)=>(t.removeAttribute(String(r)),!0),has:(r,n)=>!(!e||n!==C)||t.hasAttribute(String(n)),defineProperty:()=>!1,getOwnPropertyDescriptor(r,n){const o={enumerable:!0,configurable:!0,writable:!0};if(e&&n===C)return{value:k.get(t,C),...o};var i=t.getAttribute(String(n));return i?{value:i,...o}:void 0}})}(o);return Object.assign(r,t.props),o[G]=t,t.element=o,Object.entries(t.bindattr).forEach(([t,e])=>{r[t]=e.value,L(e,e=>{r[t]=e.value})}),Object.entries(t.directives).forEach(([e,r])=>{if(!(e in K&&"function"==typeof K[e]))throw new Error("invalid directives "+e);K[e](o,r,t)}),o[N]||(o[N]=[]),Object.entries(t.onevent).forEach(([t,e])=>{M(o,t,e)}),"function"!=typeof t.type&&R(t.children.map(r=>"svg"===t.type?U(r,D):e?U(r,e):U(r)),o),o}var n;I()}function X(t,e){const r=e;if(!j(t))throw TypeError("invalid Virtualdom \n"+JSON.stringify(t,null,4));if(!(r instanceof HTMLElement))throw TypeError("invalid container HTMLElement!");if(r===document.body||r===document.documentElement||r===document.head)throw Error("Do not mount  to <html> or <body> <head>.");let n;return R((n=t instanceof Array?t:[t]).map(t=>U(t)),e),e}function $(t){return{value:t}}const B=window.Reflect;function Q(t){return"object"==typeof t&&null!==t}function W(t){return"function"==typeof t}function Y(t){if(a(t))return new Proxy(new m(t),{set:(t,e,r)=>e===c?n.set(t,e,r):!("value"!==e||!a(r))&&(n.set(t,e,r),t[p](),!0)});if(t instanceof m)return Y(t.value);if(o(t))return new Proxy(new m(t),{deleteProperty(t,e){const r=n.get(t,"value");return!n.has(r,e)||(n.deleteProperty(r,e),t[p](e),!0)},has(t,e){const r=n.get(t,"value");return n.has(t,e)||n.has(r,e)},get(t,e){const r=n.get(t,"value");return n.has(t,e)?n.get(t,e):n.has(r,e)?function(t,e){if("function"!=typeof e)throw Error("observe callback is not valid function !");return"function"!=typeof Proxy?(setTimeout(()=>{throw Error("\u4e0d\u652f\u6301Proxy!")},0),t):W(t)||Q(t)?function t(e,r,n=[],o=e){if("function"!=typeof r)throw Error("observe callback is not valid function !");if(W(e)||Q(e)){let i;return i=Q(e)?{}:()=>{},B.setPrototypeOf(i,null),(i=>new Proxy(i,{defineProperty:(t,r,n)=>B.defineProperty(e,r,n),deleteProperty:(t,i)=>(r(o,[...n,i],void 0,B.get(e,i)),B.deleteProperty(e,i)),ownKeys:()=>B.ownKeys(e),has:(t,r)=>B.has(e,r),getPrototypeOf:()=>B.getPrototypeOf(e),setPrototypeOf:(t,r)=>B.setPrototypeOf(e,r),construct(t,r){if("function"==typeof e)return B.construct(e,r)},apply(t,r,n){if("function"==typeof e)return B.apply(e,r,n)},getOwnPropertyDescriptor(t,r){var n=B.getOwnPropertyDescriptor(e,r);return n?(n.configurable=!0,n):void 0},set:(t,i,s)=>("function"==typeof r&&r(o,[...n,i],s,B.get(e,i)),B.set(e,i,s)),get(o,i){var s=B.get(e,i);return W(s)||Q(s)?t(s,r,[...n,i],e):s}}))(i)}return e}(t,e,[],t):t}(n.get(r,e),()=>{t[p](e)}):void 0},ownKeys:t=>Array.from(new Set([...n.ownKeys(t),...n.ownKeys(n.get(t,"value"))])),set(t,e,r){if(e===c)return n.set(t,e,r);const i=n.get(t,"value");if("value"===e&&o(r))return n.set(t,e,r),t[p](),!0;if(n.has(t,e)){if("length"!==e)return!1;n.set(i,e,r),t[p](e)}else n.set(i,e,r),t[p](e);return!0}});throw TypeError("invalid State")}export{X as createApp,T as createElemet,$ as createRef,Y as createState,T as h,x as html,L as watch};
//# sourceMappingURL=index.min.js.map
