var t,e,r,n=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n};function i(t){return"object"==typeof t&&null!==t}function o(t){return"string"==typeof t}function s(t){return"function"==typeof t}function c(t){return Symbol(t)}function a(t){return o(t)||function(t){return"number"==typeof t}(t)||function(t){return"boolean"==typeof t}(t)||function(t){return void 0===t}(t)}"function"!=typeof Object.fromEntries&&(Object.fromEntries=n),"function"!=typeof Array.prototype.flat&&(Array.prototype.flat=function(t=1){return t<=1?this.reduce((t,e)=>t.concat(e),[]):function t(e){return e.reduce((e,r)=>Array.isArray(r)?e.concat(t(r)):e.concat(r),[])}(this)});const u=Symbol("textnode"),f=Symbol("eventtatget"),l=Symbol("memlisteners"),p=c("dispatch"),y=c("subscribe"),v=c("removeallisteners"),h=c("addallisteners");class d{constructor(n){if(this[t]=void 0,this[e]=new EventTarget,this[r]=[],!a(n)&&!i(n))throw TypeError("invalid State");Object.defineProperty(this,"value",{value:n,configurable:!0,writable:!0}),Object.defineProperty(this,Symbol.toStringTag,{value:"ReactiveState",configurable:!0})}[h](){this[l].forEach(([t,e])=>{this[f].addEventListener(t,e)})}valueOf(){return this.value}toString(){const t=this.value;return a(t)?String(t):i(t)?JSON.stringify(t):""}[(t=u,e=f,r=l,p)](t){const e=t?String(t):"value";"value"!==e&&this[f].dispatchEvent(new Event(e)),this[f].dispatchEvent(new Event("value"))}[y](t,e){const r=e?String(e):"value";this[l].push([r,()=>t(this)])}[v](){this[l].forEach(([t,e])=>{this[f].removeEventListener(t,e)})}[Symbol.toPrimitive](){const t=this.value;return a(t)?t:i(t)?JSON.stringify(t):void 0}}const g=window.document;function m(t,e){t.textContent=e}function b(t,e){t.innerHTML=e}function w(t,e){return g.createElementNS(t,e)}function E(t){return g.createTextNode(t)}const S="http://www.w3.org/2000/svg";const O="http://www.w3.org/1998/Math/MathML";function P(t,e,r){if(!(t instanceof d&&s(e)))throw TypeError("invalid state or callback");r?t[y](e,r):t[y](e),T(()=>{t[h]()})}const T=window.requestAnimationFrame;var j={ref(t,e){if("object"!=typeof e)throw TypeError("invalid ref");e.value=t},html(t,e){if("string"==typeof e)T(()=>{b(t,e)});else{if(!(e instanceof d))throw TypeError("invalid html");P(e,e=>{b(t,String(e))}),T(()=>{b(t,String(e))})}},text(t,e){if("string"==typeof e)T(()=>{m(t,e)});else{if(!(e instanceof d))throw TypeError("invalid text");P(e,e=>{m(t,String(e))}),T(()=>{m(t,String(e))})}}};function A(t){Object.entries(t).forEach(([t,e])=>{if("function"!=typeof e)throw TypeError("invalid directive");j[t]=e})}A({value(t,e,r){if(!(e instanceof d)||"input"!==r.type&&"textarea"!==r.type)throw TypeError("invalid ReactiveState or element");r.bindattr.value=e,["change","input"].forEach(t=>{const n=[r.onevent[t]].flat(1/0);r.onevent[t]=[...n,t=>e.value=t.target.value]})}});class x{constructor(t="",e={},r=[]){this.element=void 0,this.props={},this.children=[],this.directives={},this.onevent={},this.bindattr={};const n=Object.entries(e);Object.assign(this,{type:t,bindattr:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>t[1]instanceof d)),props:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>!(t[1]instanceof d))),children:r,onevent:Object.fromEntries(n.filter(([t])=>/\@/.test(t[0])).map(([t,e])=>[t.slice(1),e])),directives:Object.fromEntries(n.filter(([t])=>/\*/.test(t[0])).map(([t,e])=>[t.slice(1),e]))}),Object.defineProperty(this,Symbol.toStringTag,{value:"virtualdom",configurable:!0})}}var L=function(t,e,r,n){for(var i=1;i<e.length;i++){var o=e[i],s="number"==typeof o?r[o]:o,c=e[++i];1===c?n[0]=s:3===c?n[1]=Object.assign(n[1]||{},s):5===c?(n[1]=n[1]||{})[e[++i]]=s:6===c?n[1][e[++i]]+=s+"":n.push(c?t.apply(null,L(t,s,r,["",null])):s)}return n},M=function(t){for(var e,r,n=1,i="",o="",s=[0],c=function(t){1===n&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(t||i,0):3===n&&(t||i)?(s.push(t||i,1),n=2):2===n&&"..."===i&&t?s.push(t,3):2===n&&i&&!t?s.push(!0,5,i):n>=5&&((i||!t&&5===n)&&(s.push(i,n,r),n=6),t&&(s.push(t,n,r),n=6)),i=""},a=0;a<t.length;a++){a&&(1===n&&c(),c(a));for(var u=0;u<t[a].length;u++)e=t[a][u],1===n?"<"===e?(c(),s=[s],n=3):i+=e:4===n?"--"===i&&">"===e?(n=1,i=""):i=e+i[0]:o?e===o?o="":i+=e:'"'===e||"'"===e?o=e:">"===e?(c(),n=1):n&&("="===e?(n=5,r=i,i=""):"/"===e&&(n<5||">"===t[a][u+1])?(c(),3===n&&(s=s[0]),n=s,(s=s[0]).push(n,2),n=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(c(),n=2):i+=e),3===n&&"!--"===i&&(n=4,s=s[0])}return c(),s},N="function"==typeof Map,D=N?new Map:{},H=N?function(t){var e=D.get(t);return e||D.set(t,e=M(t)),e}:function(t){for(var e="",r=0;r<t.length;r++)e+=t[r].length+"-"+t[r];return D[e]||(D[e]=M(t))};function K(t="",e={},...r){let n=o(t)||s(t)?t:"",c=i(e)?e:{};const a=r.flat(1);return"string"==typeof n&&(n=n.trim().toLowerCase()),"string"==typeof n&&""===n?a:(c=Object.fromEntries(Object.entries(c).map(([t,e])=>[t.trim().toLowerCase(),e])),new x(n,c,a))}const R=function(t){var e=L(this,H(t),arguments,[]);return e.length>1?e:e[0]}.bind(K);function C(t){let e=!1;if(Array.isArray(t))e=!t.map(t=>C(t)).includes(!1);else if(t instanceof x){if(C(t.children))return!0}else{if(t instanceof d)return!0;if(o(t))return!0}return e}function J(...t){const e=R(...t);if(C(e))return e;throw new TypeError("invalid Virtualdom!")}const V=Symbol("eventlisteners");function k(t,e,r){if(t[V]||(t[V]=[]),"function"==typeof r)z(t,e,[r]);else{if(!((n=r)instanceof Array&&Array.isArray(n)))throw TypeError("invalid EventListener");z(t,e,r)}var n}function z(t,e,r){r.forEach(r=>{t[V].push([e,r]),function(t,e,r){t.addEventListener(e,r)}(t,e,r)})}const F=window.Reflect,{apply:Z,construct:q,defineProperty:G,deleteProperty:I,get:U,getOwnPropertyDescriptor:X,getPrototypeOf:$,has:B,isExtensible:Q,ownKeys:W,preventExtensions:Y,set:_,setPrototypeOf:tt}=F,et=new class extends Array{push(...t){return t.forEach(t=>{(s(t)||i(t))&&(this.includes(t)||super.push(t))}),this.length}};function rt(t,e){if(function(t){return!!(s(t)&&t.prototype&&t.prototype instanceof HTMLElement)}(t)){et.push(t);const r=function(t){return"c-"+et.indexOf(t)}(t);return customElements.get(r)===t||customElements.define(r,t),q(t,[e])}throw TypeError("invalid custom element class !")}function nt(t,e){let r;e.innerHTML="",(r=Array.isArray(t)?t:[t]).forEach(t=>(function(t,e){t.appendChild(e)})(e,t))}const it=window.Reflect,{get:ot,ownKeys:st,set:ct}=it,at="value";function ut(t){return"object"==typeof t&&null!==t}function ft(t){return"string"==typeof t}function lt(t){!function(t){if(t instanceof HTMLElement||t instanceof SVGElement||t instanceof Element)return!0;throw TypeError("invalid HTMLElement!")}(t);const e="INPUT"===t.tagName&&"text"===ot(t,"type")||"TEXTAREA"===t.tagName;var r=Object.create(null);return new Proxy(r,{ownKeys(){const r=st(t.attributes).filter(t=>!/\d/.test(String(t)[0]));return e?Array.from(new Set([...r,at])):r},get(r,n){if(e&&n===at)return ot(t,at);var i=t.getAttribute(String(n));if(i&&ft(i))try{return JSON.parse(String(i))}catch(t){return i}},set(r,n,i){return e&&n===at?ct(t,at,i):"style"===n?(t.setAttribute(String(n),ft(i)?i:ut(i)?(o=i,Object.entries(o).map(([t,e])=>t+":"+e).join(";")):String(i)),!0):(t.setAttribute(String(n),ut(i)?JSON.stringify(i):String(i)),!0);var o},deleteProperty:(e,r)=>(t.removeAttribute(String(r)),!0),has:(r,n)=>!(!e||n!==at)||t.hasAttribute(String(n)),defineProperty:()=>!1,getOwnPropertyDescriptor(r,n){const i={enumerable:!0,configurable:!0,writable:!0};if(e&&n===at)return{value:ot(t,at),...i};var o=t.getAttribute(String(n));return o?{value:o,...i}:void 0}})}const pt=Symbol("bindstate"),yt=Symbol("reactivestate"),vt=Symbol("virtualdom");function ht(){throw TypeError("invalid element type!")}function dt(t,e){if("string"==typeof t)return E(t);if(t instanceof d){const e=t,r=E(String(e));return r[yt]=e,e[u]=r,P(e,t=>{!function(t,e){t.nodeValue=String(e)}(r,String(t))}),r}if(t instanceof x&&"type"in t){const{type:r}=t;let n;if("string"==typeof r){if("script"===r)return g.createDocumentFragment();n="svg"===r?w(S,"svg"):"math"===r?w(O,"math"):e?w(e,r):function(t){return g.createElement(t)}(r)}else"function"==typeof r?n=rt(r,t.children):ht();return function(t,e){((t,e)=>{Object.entries(e.directives).forEach(([r,n])=>{if(!(r in j&&"function"==typeof j[r]))throw new Error("invalid directives "+r);j[r](t,n,e)});const r=lt(t);Object.assign(r,e.props),t[vt]=e,e.element=t,Object.entries(e.bindattr).forEach(([t,e])=>{r[t]=e.value,P(e,e=>{r[t]=e.value})}),Object.entries(e.onevent).forEach(([e,r])=>{k(t,e,r)})})(t,e),t[pt]||(t[pt]=new Set);[Object.values(e.bindattr),Object.values(e.directives)].flat().filter(t=>t instanceof d).forEach(e=>t[pt].add(e))}(n,t),"function"!=typeof r&&nt(t.children.map(t=>"svg"===r?dt(t,S):"math"===r?dt(t,O):e?dt(t,e):dt(t)),n),n}ht()}function gt(t,e){const r=e;if(!C(t))throw TypeError("invalid Virtualdom ");if(!(r instanceof HTMLElement))throw TypeError("invalid container HTMLElement!");if(r===g.body||r===g.documentElement||r===g.head)throw Error("Do not mount  to <html> or <body> <head>.");let n;return nt((n=Array.isArray(t)?t:[t]).map(t=>dt(t)),e),e}function mt(t){return{value:t}}const bt=window.Reflect,{apply:wt,construct:Et,defineProperty:St,get:Ot,getOwnPropertyDescriptor:Pt,getPrototypeOf:Tt,has:jt,set:At,setPrototypeOf:xt}=bt;function Lt(t){return"object"==typeof t&&null!==t}function Mt(t){return"function"==typeof t}function Nt(t,e){if("function"!=typeof e)throw Error("observe callback is not valid function !");if("function"!=typeof Proxy)throw Error("Proxy unsupported!");return Mt(t)||Lt(t)?function t(e,r,n=[],i=e){if("function"!=typeof r)throw Error("observe callback invalid !");if(Mt(e)||Lt(e)){let o;return o=Lt(e)?{}:()=>{},xt(o,null),(o=>new Proxy(o,{defineProperty:(t,r,n)=>St(e,r,n),deleteProperty:(t,o)=>(r(i,[...n,o],void 0,Ot(e,o)),bt.deleteProperty(e,o)),ownKeys:()=>bt.ownKeys(e),has:(t,r)=>jt(e,r),getPrototypeOf:()=>Tt(e),setPrototypeOf:(t,r)=>xt(e,r),construct(t,r){if("function"==typeof e)return Et(e,r)},apply(t,r,n){if("function"==typeof e)return wt(e,r,n)},getOwnPropertyDescriptor(t,r){var n=Pt(e,r);return n?(n.configurable=!0,n):void 0},set:(t,o,s)=>("function"==typeof r&&r(i,[...n,o],s,Ot(e,o)),At(e,o,s)),get(i,o){var s=Ot(e,o);return Mt(s)||Lt(s)?t(s,r,[...n,o],e):s}}))(o)}return e}(t,e,[],t):t}function Dt(t){if(a(t))return new Proxy(new d(t),{defineProperty:()=>!1,deleteProperty:()=>!1,set:(t,e,r)=>e===u?_(t,e,r):!("value"!==e||!a(r))&&(_(t,e,r),t[p](),!0)});if(t instanceof d)return Dt(t.value);if(i(t))return new Proxy(new d(t),{defineProperty:()=>!1,getOwnPropertyDescriptor(t,e){const r=U(t,"value");return X(t,e)||X(r,e)},deleteProperty(t,e){const r=U(t,"value");return!B(r,e)||(I(r,e),t[p](e),!0)},has(t,e){const r=U(t,"value");return B(t,e)||B(r,e)},get(t,e){const r=U(t,"value");return B(t,e)?U(t,e):B(r,e)?Nt(U(r,e),()=>{t[p](e)}):void 0},ownKeys:t=>Array.from(new Set([...W(t),...W(U(t,"value"))])),set(t,e,r){if(e===u)return _(t,e,r);const n=U(t,"value");if("value"===e&&i(r))return _(t,e,r),t[p](),!0;if(B(t,e)){if("length"!==e)return!1;_(n,e,r),t[p](e)}else _(n,e,r),t[p](e);return!0}});throw TypeError("invalid State")}export{gt as createApp,K as createElemet,mt as createRef,Dt as createState,A as directives,K as h,J as html,P as watch};
//# sourceMappingURL=index.min.js.map
