var t,e,r,n=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var i=t[e];n[i[0]]=i[1]}return n};function i(t){return"object"==typeof t&&null!==t}function o(t){return"string"==typeof t}function s(t){return"function"==typeof t}function u(t){return Symbol(t)}function c(t){return o(t)||function(t){return"number"==typeof t}(t)||function(t){return"boolean"==typeof t}(t)||function(t){return void 0===t}(t)}"function"!=typeof Object.fromEntries&&(Object.fromEntries=n),"function"!=typeof Array.prototype.flat&&(Array.prototype.flat=function(t=1){return t<=1?this.reduce((t,e)=>t.concat(e),[]):function t(e){return e.reduce((e,r)=>Array.isArray(r)?e.concat(t(r)):e.concat(r),[])}(this)});const f=Symbol("textnode"),a=Symbol("eventtatget"),l=Symbol("memlisteners"),p=u("dispatch"),y=u("subscribe"),v=u("removeallisteners"),h=u("addallisteners");class d{constructor(n){if(this[t]=void 0,this[e]=new EventTarget,this[r]=[],!c(n)&&!i(n))throw TypeError("invalid State");this.value=n,Object.defineProperty(this,Symbol.toStringTag,{value:"ReactiveState",configurable:!0})}[h](){this[l].forEach(([t,e])=>{this[a].addEventListener(t,e)})}valueOf(){return this.value}toString(){let t=this.value;return c(t)?String(t):i(t)?JSON.stringify(t):""}[(t=f,e=a,r=l,p)](t){let e=t?String(t):"value";"value"!==e&&this[a].dispatchEvent(new Event(e)),this[a].dispatchEvent(new Event("value"))}[y](t,e){let r=e?String(e):"value";this[l].push([r,()=>t(this)])}[v](){this[l].forEach(([t,e])=>{this[a].removeEventListener(t,e)})}[Symbol.toPrimitive](){let t=this.value;return c(t)?t:i(t)?JSON.stringify(t):void 0}}class g{constructor(t="",e={},r=[]){this.element=void 0,this.props={},this.children=[],this.directives={},this.onevent={},this.bindattr={};const n=Object.entries(e);Object.assign(this,{type:t,bindattr:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>t[1]instanceof d)),props:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>!(t[1]instanceof d))),children:r,onevent:Object.fromEntries(n.filter(([t])=>/\@/.test(t[0])).map(([t,e])=>[t.slice(1),e])),directives:Object.fromEntries(n.filter(([t])=>/\*/.test(t[0])).map(([t,e])=>[t.slice(1),e]))}),Object.defineProperty(this,Symbol.toStringTag,{value:"virtualdom",configurable:!0})}}var m=function(t,e,r,n){for(var i=1;i<e.length;i++){var o=e[i],s="number"==typeof o?r[o]:o,u=e[++i];1===u?n[0]=s:3===u?n[1]=Object.assign(n[1]||{},s):5===u?(n[1]=n[1]||{})[e[++i]]=s:6===u?n[1][e[++i]]+=s+"":n.push(u?t.apply(null,m(t,s,r,["",null])):s)}return n},b=function(t){for(var e,r,n=1,i="",o="",s=[0],u=function(t){1===n&&(t||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(t||i,0):3===n&&(t||i)?(s.push(t||i,1),n=2):2===n&&"..."===i&&t?s.push(t,3):2===n&&i&&!t?s.push(!0,5,i):n>=5&&((i||!t&&5===n)&&(s.push(i,n,r),n=6),t&&(s.push(t,n,r),n=6)),i=""},c=0;c<t.length;c++){c&&(1===n&&u(),u(c));for(var f=0;f<t[c].length;f++)e=t[c][f],1===n?"<"===e?(u(),s=[s],n=3):i+=e:4===n?"--"===i&&">"===e?(n=1,i=""):i=e+i[0]:o?e===o?o="":i+=e:'"'===e||"'"===e?o=e:">"===e?(u(),n=1):n&&("="===e?(n=5,r=i,i=""):"/"===e&&(n<5||">"===t[c][f+1])?(u(),3===n&&(s=s[0]),n=s,(s=s[0]).push(n,2),n=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(u(),n=2):i+=e),3===n&&"!--"===i&&(n=4,s=s[0])}return u(),s},w="function"==typeof Map,E=w?new Map:{},S=w?function(t){var e=E.get(t);return e||E.set(t,e=b(t)),e}:function(t){for(var e="",r=0;r<t.length;r++)e+=t[r].length+"-"+t[r];return E[e]||(E[e]=b(t))};function O(t="",e={},...r){var n=o(t)||s(t)?t:"",u=i(e)?e:{},c=r.flat(1);return"string"==typeof n&&""===n?c:new g(n,u,c)}const P=function(t){var e=m(this,S(t),arguments,[]);return e.length>1?e:e[0]}.bind(O);function T(t){let e=!1;if(Array.isArray(t))e=!t.map(t=>T(t)).includes(!1);else if(t instanceof g){if(T(t.children))return!0}else{if(t instanceof d)return!0;if(o(t))return!0}return e}function A(...t){var e=P(...t);if(T(e))return e;throw new TypeError("invalid Virtualdom!")}function j(t,e,r){if(!(t instanceof d&&s(e)))throw TypeError("invalid state or callback");r?t[y](e,r):t[y](e),x(()=>{t[h]()})}const x=window.requestAnimationFrame;function L(t,e){t.textContent=e}function N(t,e){t.innerHTML=e}var M={ref(t,e,r){if("object"!=typeof e)throw TypeError("invalid ref");e.value=t},html(t,e,r){if("string"==typeof e)x(()=>{N(t,e)});else{if(!(e instanceof d))throw TypeError("invalid html");j(e,e=>{N(t,String(e))}),x(()=>{N(t,String(e))})}},text(t,e,r){if("string"==typeof e)x(()=>{L(t,e)});else{if(!(e instanceof d))throw TypeError("invalid text");j(e,e=>{L(t,String(e))}),x(()=>{L(t,String(e))})}}};const D=window.document;function H(t){return D.createTextNode(t)}const K="http://www.w3.org/2000/svg";const R=Symbol("eventlisteners");function J(t,e,r){if("function"==typeof r)V(t,e,[r]);else{if(!((n=r)instanceof Array&&Array.isArray(n)))throw TypeError("invalid EventListener");V(t,e,r)}var n}function V(t,e,r){r.forEach(r=>{t[R].push([e,r]),function(t,e,r){t.addEventListener(e,r)}(t,e,r)})}const k=window.Reflect,{apply:z,construct:C,defineProperty:F,deleteProperty:Z,get:q,getOwnPropertyDescriptor:G,getPrototypeOf:I,has:U,isExtensible:X,ownKeys:$,preventExtensions:B,set:Q,setPrototypeOf:W}=k;const Y=new class extends Array{push(...t){return t.forEach(t=>{(s(t)||i(t))&&(this.includes(t)||super.push(t))}),this.length}};function _(t,e){if(function(t){return!!(s(t)&&t.prototype&&t.prototype instanceof HTMLElement)}(t)){Y.push(t);const r=function(t){return"c-"+Y.indexOf(t)}(t);return customElements.get(r)===t||customElements.define(r,t),C(t,[e])}throw TypeError("invalid custom element class !")}function tt(t,e){let r;e.innerHTML="",(r=Array.isArray(t)?t:[t]).forEach(t=>(function(t,e){t.appendChild(e)})(e,t))}const et=window.Reflect,rt="value";function nt(t){return"object"==typeof t&&null!==t}function it(t){return"string"==typeof t}const ot=Symbol("reactivestate"),st=Symbol("virtualdom");function ut(){throw TypeError("invalid element type!")}function ct(t,e){if("string"==typeof t)return H(t);if(t instanceof d){const e=t,r=H(String(e));return r[ot]=e,e[f]=r,j(e,t=>{!function(t,e){t.nodeValue=String(e)}(r,String(t))}),r}if(t instanceof g&&"type"in t){const{type:n}=t;let i;if("string"==typeof n){if("script"===n)return D.createDocumentFragment();i="svg"===n?D.createElementNS(K,"svg"):e?function(t,e){return D.createElementNS(t,e)}(e,n):function(t){return D.createElement(t)}(n)}else"function"==typeof n?i=_(n,t.children):ut();var r=function(t){!function(t){if(t instanceof HTMLElement||t instanceof SVGElement||t instanceof Element)return!0;throw TypeError("invalid HTMLElement!")}(t);const e="INPUT"===t.tagName&&"text"===et.get(t,"type")||"TEXTAREA"===t.tagName;var r=Object.create(null);return new Proxy(r,{ownKeys(){const r=et.ownKeys(t.attributes).filter(t=>!/\d/.test(String(t)[0]));return e?Array.from(new Set([...r,rt])):r},get(r,n){if(e&&n===rt)return et.get(t,rt);var i=t.getAttribute(String(n));if(i&&it(i))try{return JSON.parse(String(i))}catch(t){return i}},set(r,n,i){return e&&n===rt?et.set(t,rt,i):"style"===n?(t.setAttribute(String(n),it(i)?i:nt(i)?(o=i,Object.entries(o).map(([t,e])=>t+":"+e).join(";")):String(i)),!0):(t.setAttribute(String(n),nt(i)?JSON.stringify(i):String(i)),!0);var o},deleteProperty:(e,r)=>(t.removeAttribute(String(r)),!0),has:(r,n)=>!(!e||n!==rt)||t.hasAttribute(String(n)),defineProperty:()=>!1,getOwnPropertyDescriptor(r,n){const i={enumerable:!0,configurable:!0,writable:!0};if(e&&n===rt)return{value:et.get(t,rt),...i};var o=t.getAttribute(String(n));return o?{value:o,...i}:void 0}})}(i);return Object.assign(r,t.props),i[st]=t,t.element=i,Object.entries(t.bindattr).forEach(([t,e])=>{r[t]=e.value,j(e,e=>{r[t]=e.value})}),Object.entries(t.directives).forEach(([e,r])=>{if(!(e in M&&"function"==typeof M[e]))throw new Error("invalid directives "+e);M[e](i,r,t)}),i[R]||(i[R]=[]),Object.entries(t.onevent).forEach(([t,e])=>{J(i,t,e)}),"function"!=typeof n&&tt(t.children.map(t=>"svg"===n?ct(t,K):e?ct(t,e):ct(t)),i),i}ut()}function ft(t,e){const r=e;if(!T(t))throw TypeError("invalid Virtualdom ");if(!(r instanceof HTMLElement))throw TypeError("invalid container HTMLElement!");if(r===D.body||r===D.documentElement||r===D.head)throw Error("Do not mount  to <html> or <body> <head>.");let n;return tt((n=Array.isArray(t)?t:[t]).map(t=>ct(t)),e),e}function at(t){return{value:t}}const lt=window.Reflect;function pt(t){return"object"==typeof t&&null!==t}function yt(t){return"function"==typeof t}function vt(t){if(c(t))return new Proxy(new d(t),{defineProperty:()=>!1,deleteProperty:(t,e)=>!1,set:(t,e,r)=>e===f?Q(t,e,r):!("value"!==e||!c(r))&&(Q(t,e,r),t[p](),!0)});if(t instanceof d)return vt(t.value);if(i(t))return new Proxy(new d(t),{defineProperty:()=>!1,getOwnPropertyDescriptor(t,e){const r=q(t,"value");var n=G(t,e)||G(r,e);return n.configurable=!0,n},deleteProperty(t,e){const r=q(t,"value");return!U(r,e)||(Z(r,e),t[p](e),!0)},has(t,e){const r=q(t,"value");return U(t,e)||U(r,e)},get(t,e){const r=q(t,"value");return U(t,e)?q(t,e):U(r,e)?function(t,e){if("function"!=typeof e)throw Error("observe callback is not valid function !");return"function"!=typeof Proxy?(setTimeout(()=>{throw Error("\u4e0d\u652f\u6301Proxy!")},0),t):yt(t)||pt(t)?function t(e,r,n=[],i=e){if("function"!=typeof r)throw Error("observe callback is not valid function !");if(yt(e)||pt(e)){let o;return o=pt(e)?{}:()=>{},lt.setPrototypeOf(o,null),(o=>new Proxy(o,{defineProperty:(t,r,n)=>lt.defineProperty(e,r,n),deleteProperty:(t,o)=>(r(i,[...n,o],void 0,lt.get(e,o)),lt.deleteProperty(e,o)),ownKeys:()=>lt.ownKeys(e),has:(t,r)=>lt.has(e,r),getPrototypeOf:()=>lt.getPrototypeOf(e),setPrototypeOf:(t,r)=>lt.setPrototypeOf(e,r),construct(t,r){if("function"==typeof e)return lt.construct(e,r)},apply(t,r,n){if("function"==typeof e)return lt.apply(e,r,n)},getOwnPropertyDescriptor(t,r){var n=lt.getOwnPropertyDescriptor(e,r);return n?(n.configurable=!0,n):void 0},set:(t,o,s)=>("function"==typeof r&&r(i,[...n,o],s,lt.get(e,o)),lt.set(e,o,s)),get(i,o){var s=lt.get(e,o);return yt(s)||pt(s)?t(s,r,[...n,o],e):s}}))(o)}return e}(t,e,[],t):t}(q(r,e),()=>{t[p](e)}):void 0},ownKeys:t=>Array.from(new Set([...$(t),...$(q(t,"value"))])),set(t,e,r){if(e===f)return Q(t,e,r);const n=q(t,"value");if("value"===e&&i(r))return Q(t,e,r),t[p](),!0;if(U(t,e)){if("length"!==e)return!1;Q(n,e,r),t[p](e)}else Q(n,e,r),t[p](e);return!0}});throw TypeError("invalid State")}export{ft as createApp,O as createElemet,at as createRef,vt as createState,O as h,A as html,j as watch};
//# sourceMappingURL=index.min.js.map
