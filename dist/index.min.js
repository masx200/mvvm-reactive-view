function t(t){return"object"==typeof t&&null!==t}function e(t){return"string"==typeof t}function r(t){return"function"==typeof t}function n(t){return t instanceof Array&&Array.isArray(t)&&"array"===function(t){return{}.toString.call(t).replace("[object ","").replace("]","").toLowerCase()}(t)}function o(t){return Symbol(t)}function i(t){return e(t)||function(t){return"number"==typeof t}(t)||function(t){return"boolean"==typeof t}(t)||function(t){return void 0===t}(t)}var u,s,c;function a(t){return t instanceof m}const f=Symbol("textnode"),l=Symbol("eventtatget"),p=Symbol("memlisteners"),y=o("dispatch"),v=o("subscribe"),d=o("removeallisteners"),h=o("addallisteners");class m{constructor(e){if(this[u]=void 0,this[s]=new EventTarget,this[c]=[],!i(e)&&!t(e))throw TypeError("invalid State");Object.defineProperty(this,"value",{value:e,configurable:!0,writable:!0}),Object.defineProperty(this,Symbol.toStringTag,{value:"ReactiveState",configurable:!0})}[h](){this[p].forEach(([t,e])=>{this[l].addEventListener(t,e)})}valueOf(){return this.value}toString(){const e=this.value;return i(e)?String(e):t(e)?JSON.stringify(e):""}[(u=f,s=l,c=p,y)](t){const e=t?String(t):"value";"value"!==e&&this[l].dispatchEvent(new Event(e)),this[l].dispatchEvent(new Event("value"))}[v](t,e){const r=e?String(e):"value";this[p].push([r,()=>t(this)])}[d](){this[p].forEach(([t,e])=>{this[l].removeEventListener(t,e)})}[Symbol.toPrimitive](){const e=this.value;return i(e)?e:t(e)?JSON.stringify(e):void 0}}const g=window.document;function w(t,e){t.textContent=e}function b(t,e){t.innerHTML=e}function E(t,e){return g.createElementNS(t,e)}function S(t){return g.createTextNode(t)}const O="http://www.w3.org/2000/svg";const P="http://www.w3.org/1998/Math/MathML";function j(t,e,n){if(!a(t)||!r(e))throw TypeError("invalid state or callback");n?t[v](e,n):t[v](e),T(()=>{t[h]()})}const T=window.requestAnimationFrame;var A={ref(t,e){if("object"!=typeof e)throw TypeError("invalid ref");e.value=t},html(t,e){x(b,"html")(t,e)},text(t,e){x(w,"text")(t,e)}};function x(t,e){return function(r,n){if("string"==typeof n)T(()=>{t(r,n)});else{if(!a(n))throw TypeError("invalid "+e);j(n,e=>{t(r,String(e))}),T(()=>{t(r,String(n))})}}}function M(t){Object.entries(t).forEach(([t,e])=>{if("function"!=typeof e)throw TypeError("invalid directive");A[t]=e})}M({value(t,e,r){if(!a(e)||"input"!==r.type&&"textarea"!==r.type)throw TypeError("invalid ReactiveState or element");r.bindattr.value=e,["change","input"].forEach(t=>{const n=[r.onevent[t]].flat(1/0);Reflect.set(r.onevent,t,n.concat([t=>e.value=t.target.value]).filter(Boolean))})}});const L=window.Reflect,{apply:N,construct:C,defineProperty:R,deleteProperty:J,get:D,getOwnPropertyDescriptor:H,getPrototypeOf:K,has:k,isExtensible:V,ownKeys:z,preventExtensions:F,set:Z,setPrototypeOf:q}=L;function B(t){return!!(r(t)&&t.prototype&&t.prototype instanceof HTMLElement)}window.CustomElementRegistry=D(K(window.customElements),"constructor");const{customElements:$,CustomElementRegistry:G}=window,I=Symbol.for("elementset"),Q=Symbol.for("elementmap");var U=(t,e)=>(function t(e,r,n=1){if(!B(e))throw TypeError("invalid custom element class !");if($[I].has(e))return o=$[Q],i=e,Object.entries(o).find(t=>t[1]===i)[0];{const o=function(t=4){return Array(t).fill(void 0).map(()=>D(Array(26).fill(void 0).map((t,e)=>97+e).map(t=>String.fromCharCode(t)),Math.floor(26*Math.random()))).join("")+"-"+Array(t).fill(void 0).map(()=>D(Array(16).fill(void 0).map((t,e)=>e),Math.floor(16*Math.random())).toString(16)).join("")}(n);return $.get(o)?t(e,r,n+1):(r?$.define(o,e,{extends:r}):$.define(o,e),o)}var o,i})(t,e);$[I]||($[I]=new Set),$[Q]||($[Q]={}),$.define=function(t,e,r){if(!B(e))throw TypeError("invalid custom element class !");G.prototype.define.call($,t,e,r),$[I].add(e),$[Q][t]=e},$[Symbol.iterator]=()=>{const t=Object.entries($[Q]);return t[Symbol.iterator].call(t)};class W{constructor(t="",e={},r=[]){this.options=void 0,this.element=void 0,this.props={},this.children=[],this.directives={},this.onevent={},this.bindattr={};const n=Object.entries(e);Object.assign(this,{type:t,bindattr:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>a(t[1]))),props:Object.fromEntries(n.filter(([t])=>/[A-Za-z]/.test(t[0])).filter(t=>!a(t[1]))),children:r,onevent:Object.fromEntries(n.filter(([t])=>/\@/.test(t[0])).map(([t,e])=>[t.slice(1),e])),directives:Object.fromEntries(n.filter(([t])=>/\*/.test(t[0])).map(([t,e])=>[t.slice(1),e]))}),Object.defineProperty(this,Symbol.toStringTag,{value:"virtualdom",configurable:!0})}}var X=function(t,e,r,n){for(var o=1;o<e.length;o++){var i=e[o],u="number"==typeof i?r[i]:i,s=e[++o];1===s?n[0]=u:3===s?n[1]=Object.assign(n[1]||{},u):5===s?(n[1]=n[1]||{})[e[++o]]=u:6===s?n[1][e[++o]]+=u+"":n.push(s?t.apply(null,X(t,u,r,["",null])):u)}return n},Y=function(t){for(var e,r,n=1,o="",i="",u=[0],s=function(t){1===n&&(t||(o=o.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(t||o,0):3===n&&(t||o)?(u.push(t||o,1),n=2):2===n&&"..."===o&&t?u.push(t,3):2===n&&o&&!t?u.push(!0,5,o):n>=5&&((o||!t&&5===n)&&(u.push(o,n,r),n=6),t&&(u.push(t,n,r),n=6)),o=""},c=0;c<t.length;c++){c&&(1===n&&s(),s(c));for(var a=0;a<t[c].length;a++)e=t[c][a],1===n?"<"===e?(s(),u=[u],n=3):o+=e:4===n?"--"===o&&">"===e?(n=1,o=""):o=e+o[0]:i?e===i?i="":o+=e:'"'===e||"'"===e?i=e:">"===e?(s(),n=1):n&&("="===e?(n=5,r=o,o=""):"/"===e&&(n<5||">"===t[c][a+1])?(s(),3===n&&(u=u[0]),n=u,(u=u[0]).push(n,2),n=0):" "===e||"\t"===e||"\n"===e||"\r"===e?(s(),n=2):o+=e),3===n&&"!--"===o&&(n=4,u=u[0])}return s(),u},_="function"==typeof Map,tt=_?new Map:{},et=_?function(t){var e=tt.get(t);return e||tt.set(t,e=Y(t)),e}:function(t){for(var e="",r=0;r<t.length;r++)e+=t[r].length+"-"+t[r];return tt[e]||(tt[e]=Y(t))};function rt(n="",o={},...i){let u=e(n)||r(n)?n:"";const s=t(o)?o:{},c=i.flat(1);return e(u)&&(u=u.trim().toLowerCase()),""===u?c:new W(u,s,c)}const nt=function(t){var e=X(this,et(t),arguments,[]);return e.length>1?e:e[0]}.bind(rt);function ot(t){let r=!1;if(n(t))return r=!t.map(t=>ot(t)).includes(!1);if(t instanceof W){if(ot(t.children))return!0}else{if(a(t))return!0;if(e(t))return!0}return r}function it(...t){const e=nt(...t);if(ot(e))return e;throw new TypeError("invalid Virtualdom!")}const ut=Symbol("eventlisteners");function st(t,e,r){r.forEach(r=>{t[ut].push([e,r]),function(t,e,r){t.addEventListener(e,r)}(t,e,r)})}function ct(t,e){let r;return e.innerHTML="",(r=Array.isArray(t)?t:[t]).forEach(t=>(function(t,e){t.appendChild(e)})(e,t)),e}const at=window.Reflect,{get:ft,ownKeys:lt,set:pt}=at,yt="value";function vt(t){return"object"==typeof t&&null!==t}function dt(t){return"string"==typeof t}function ht(t){!function(t){if(t instanceof Element)return!0;throw TypeError("invalid HTMLElement!")}(t);const e=function(t){const e=function(t){return t.tagName.toLowerCase()}(t);return"input"===e&&"text"===ft(t,"type")||"textarea"===e}(t);var r=Object.create(null);return new Proxy(r,{ownKeys(){const r=function(t){return lt(t.attributes).filter(t=>!/\d/.test(String(t)[0]))}(t);return e?Array.from(new Set([...r,yt])):r},get(r,n){if(e&&n===yt)return ft(t,yt);{const e=mt(t,String(n));if(!e)return;if(""===e)return!0;if(!dt(e))return;try{return JSON.parse(String(e))}catch(t){return e}}},set(r,n,o){return e&&n===yt?pt(t,yt,o):"style"===n?(gt(t,String(n),dt(o)?o:vt(o)?(i=o,Object.entries(i).map(([t,e])=>t+":"+e).join(";")):String(o)),!0):(!0===o&&(o=""),gt(t,String(n),vt(o)?JSON.stringify(o):String(o)),!0);var i},deleteProperty:(e,r)=>(function(t,e){t.removeAttribute(e)}(t,String(r)),!0),has:(r,n)=>!(!e||n!==yt)||function(t,e){return t.hasAttribute(e)}(t,String(n)),defineProperty:()=>!1,getOwnPropertyDescriptor(r,n){const o={enumerable:!0,configurable:!0,writable:!0};if(e&&n===yt)return{value:ft(t,yt),...o};{let e;return""===mt(t,String(n))&&(e=!0),e?{value:e,...o}:void 0}}})}function mt(t,e){return t.getAttribute(e)}function gt(t,e,r){return t.setAttribute(e,r)}const wt=Symbol("bindstate"),bt=Symbol("reactivestate"),Et=Symbol("virtualdom");function St(){throw TypeError("invalid element type!")}function Ot(e,r){if("string"==typeof e)return S(e);if(e instanceof m){const t=e,r=S(String(t));return r[bt]=t,t[f]=r,j(t,t=>{!function(t,e){t.nodeValue=String(e)}(r,String(t))}),r}if(e instanceof W&&"type"in e){const{type:o}=e;let i;if("string"==typeof o){if("script"===o)return g.createDocumentFragment();i="svg"===o?E(O,"svg"):"math"===o?E(P,"math"):r?E(r,o):function(t){return g.createElement(t)}(o)}else if("function"==typeof o){t(o.defaultProps)&&(e.props=JSON.parse(JSON.stringify({...o.defaultProps,...e.props})));const r=JSON.parse(JSON.stringify({...e.props,...Object.fromEntries(Object.entries(e.bindattr).map(([t,e])=>[t,e.value]))}));i=function(t,e,r,n){if(B(t))return U(t),C(t,[e,r,n]);throw TypeError("invalid custom element class !")}(o,r,e.children,e.options)}else St();return function(t,e){((t,e)=>{Object.entries(e.directives).forEach(([r,n])=>{if(!(r in A&&"function"==typeof A[r]))throw new Error("invalid directives "+r);A[r](t,n,e)});const r=ht(t);Object.assign(r,e.props),t[Et]=e,e.element=t,Object.entries(e.bindattr).forEach(([t,e])=>{r[t]=e.value,j(e,e=>{r[t]=e.value})}),t[ut]||(t[ut]=[]),Object.entries(e.onevent).forEach(([e,r])=>{!function(t,e,r){if(t[ut]||(t[ut]=[]),"function"==typeof r)st(t,e,[r]);else{if(!n(r))throw TypeError("invalid EventListener");st(t,e,r)}}(t,e,r)})})(t,e),t[wt]||(t[wt]=new Set);[Object.values(e.bindattr),Object.values(e.directives)].flat().filter(t=>a(t)).forEach(e=>t[wt].add(e))}(i,e),"function"!=typeof o&&ct(e.children.map(t=>"svg"===o?Ot(t,O):"math"===o?Ot(t,P):r?Ot(t,r):Ot(t)),i),i}St()}function Pt(t,e){const r=e;if(!ot(t))throw TypeError("invalid Virtualdom ");if(!(r instanceof HTMLElement))throw TypeError("invalid container HTMLElement!");if(r===g.body||r===g.documentElement||r===g.head)throw Error("Do not mount  to <html> or <body> <head>.");let n;return ct((n=Array.isArray(t)?t:[t]).map(t=>Ot(t)),e),e}function jt(t){return{value:t}}const Tt=window.Reflect,{ownKeys:At,deleteProperty:xt,apply:Mt,construct:Lt,defineProperty:Nt,get:Ct,getOwnPropertyDescriptor:Rt,getPrototypeOf:Jt,has:Dt,set:Ht,setPrototypeOf:Kt}=Tt;function kt(t){return"object"==typeof t&&null!==t}function Vt(t){return"function"==typeof t}function zt(t,e){if("function"!=typeof e)throw Error("observe callback  invalid function ");if("function"!=typeof Proxy)throw Error("Proxy unsupported!");return Vt(t)||kt(t)?function t(e,r,n=[],o=e){if("function"!=typeof r)throw Error("observe callback invalid !");if(Vt(e)||kt(e)){let i;return i=kt(e)?{}:()=>{},Kt(i,null),(i=>new Proxy(i,{defineProperty:(t,r,n)=>Nt(e,r,n),deleteProperty:(t,i)=>(r(o,[...n,i],void 0,Ct(e,i)),xt(e,i)),ownKeys:()=>At(e),has:(t,r)=>Dt(e,r),getPrototypeOf:()=>Jt(e),setPrototypeOf:(t,r)=>Kt(e,r),construct(t,r){if("function"==typeof e)return Lt(e,r)},apply(t,r,n){if("function"==typeof e)return Mt(e,r,n)},getOwnPropertyDescriptor(t,r){var n=Rt(e,r);return n?(n.configurable=!0,n):void 0},set:(t,i,u)=>("function"==typeof r&&r(o,[...n,i],u,Ct(e,i)),Ht(e,i,u)),get(o,i){var u=Ct(e,i);return Vt(u)||kt(u)?t(u,r,[...n,i],e):u}}))(i)}return e}(t,e,[],t):t}function Ft(e){if(i(e))return new Proxy(new m(e),{defineProperty:()=>!1,deleteProperty:()=>!1,set:(t,e,r)=>e===f?Z(t,e,r):!("value"!==e||!i(r))&&(Z(t,e,r),t[y](),!0)});if(a(e))return Ft(e.value);if(t(e))return new Proxy(new m(e),{defineProperty:()=>!1,getOwnPropertyDescriptor(t,e){const r=D(t,"value"),n=H(t,e)||H(r,e);return n&&(n.configurable=!0),n},deleteProperty(t,e){const r=D(t,"value");return!k(r,e)||(J(r,e),t[y](e),!0)},has(t,e){const r=D(t,"value");return k(t,e)||k(r,e)},get(t,e){const r=D(t,"value");return k(t,e)?D(t,e):k(r,e)?zt(D(r,e),()=>{t[y](e)}):void 0},ownKeys:t=>Array.from(new Set([...z(t),...z(D(t,"value"))])),set(e,r,n){if(r===f)return Z(e,r,n);const o=D(e,"value");if("value"===r&&t(n))return Z(e,r,n),e[y](),!0;if(k(e,r)){if("length"!==r)return!1;Z(o,r,n),e[y](r)}else Z(o,r,n),e[y](r);return!0}});throw TypeError("invalid State")}if("function"!=typeof HTMLElement||"function"!=typeof Proxy||"object"!=typeof customElements||"function"!=typeof CustomElementRegistry)throw new TypeError(" browser not supported !");const Zt="";export{Zt as Fragment,Pt as createApp,rt as createElement,jt as createRef,Ft as createState,M as directives,rt as h,it as html,j as watch};
//# sourceMappingURL=index.min.js.map
