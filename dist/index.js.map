{"version":3,"file":"index.js","sources":["../src/UtilTools/isprimitive.ts","../src/UtilTools/util.ts","../src/others/assetbrowser.ts","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../src/life-cycle-context/clearMounted.ts","../src/life-cycle-context/clearUnMounted.ts","../src/life-cycle-context/checkctxandcallbck.ts","../src/life-cycle-context/createlifecyclecontext.ts","../src/life-cycle-context/updated-clear.ts","../src/life-cycle-context/created-clear.ts","../src/life-cycle-context/Component-context.ts","../src/others/cached-map.ts","../src/UtilTools/toArray.ts","../src/life-cycle-context/useststerecord.ts","../src/Reactivity/custom-observer-target.ts","../src/Reactivity/reactivestate.ts","../src/Reactivity/isReactiveState.ts","../src/life-cycle-context/usewatchrecord.ts","../src/Reactivity/rewatch.ts","../src/Reactivity/watchsingle.ts","../src/Reactivity/watch.ts","../src/UtilTools/reflect.ts","../node_modules/@masx200/dom-element-attribute-agent-proxy/dist/index.min.js","../src/life-cycle-context/created-get.ts","../src/life-cycle-context/updated-get.ts","../src/others/addlistener-mount-unmount-updated.ts","../src/others/addcreatedlistner.ts","../src/others/addmountedlistner.ts","../src/others/addunmountedlistner.ts","../src/others/addupdatedlistner.ts","../src/UtilTools/merge-entries.ts","../src/CreateElement/VirtualElement.ts","../src/CreateElement/isvalidvdom.ts","../src/CustomClass/isclassextendsHTMLElement.ts","../src/life-cycle-context/getMounted.ts","../src/life-cycle-context/getUnMounted.ts","../src/UtilTools/dom.ts","../src/MountElement/mount-real-element.ts","../src/AttributeClass/iscomponent.ts","../src/CustomClass/getrandomstringandnumber.ts","../src/CustomClass/CustomElementRegistry.ts","../src/CustomClass/create-costum-elemet.ts","../src/UtilTools/isconnected.ts","../src/Directives/directives.ts","../src/RenderVirtual/applydirects.ts","../src/RenderVirtual/handle-onevent.ts","../src/RenderVirtual/handleprops.ts","../src/RenderVirtual/render-vdom-to-real.ts","../src/MountElement/isNodeArray.ts","../src/MountElement/MountElement.ts","../src/others/combineproxy.ts","../src/Reactivity/readonly-proxy.ts","../src/ScopedCSS/parsecss-transformcss.ts","../src/ScopedCSS/isCSSRule.ts","../src/ScopedCSS/cssrulestocsstext.ts","../src/ScopedCSS/prefix-cssmediarule.ts","../src/ScopedCSS/create-cssurlblob.ts","../src/ScopedCSS/savestyleblob.ts","../src/ScopedCSS/selectoraddprefix.ts","../src/ScopedCSS/transform-prefix-cssrules.ts","../src/ScopedCSS/parsecsstext.ts","../src/ScopedCSS/transformcsstext.ts","../src/ScopedCSS/registercssprefix.ts","../src/ScopedCSS/loadlinkstyle.ts","../src/ScopedCSS/waitloadallstyle.ts","../src/UtilTools/setimmediate.ts","../src/Reactivity/unwatch.ts","../src/life-cycle-context/element-onmount-unmount.ts","../src/AttributeClass/readysymbol.ts","../src/AttributeClass/attr-change.ts","../src/AttributeClass/createComponent.ts","../src/CreateElement/create-element.ts","../src/AttributeClass/conditon.ts","../src/AttributeClass/switchable.ts","../node_modules/htm/dist/htm.module.js","../src/CreateElement/html.ts","../src/others/createref.ts","../src/Directives/extend-directive.ts","../src/Directives/model.ts","../src/Directives/Localchecked.ts","../src/Directives/Localcreated.ts","../src/Reactivity/getproperyread-proxy.ts","../src/Reactivity/computedmany.ts","../src/Reactivity/computed.ts","../src/Directives/generatechildrenvdoms.ts","../src/Directives/localfor.ts","../src/Directives/create-html-and-text-directive.ts","../src/Directives/Localhtml.ts","../src/Directives/Localmounted.ts","../src/Directives/Localref.ts","../src/Directives/Localtext.ts","../src/Directives/Localunmounted.ts","../src/Directives/Localupdated.ts","../src/Directives/Localvalue.ts","../src/Directives/built-in-directs.ts","../src/life-cycle-context/use-created.ts","../src/life-cycle-context/use-updated.ts","../src/life-cycle-context/useMounted.ts","../src/life-cycle-context/useUnMounted.ts","../node_modules/@masx200/deep-observe-agent-proxy/dist/index.min.js","../src/Reactivity/handle-object-state.ts","../src/Reactivity/create-state.ts"],"sourcesContent":["import { isboolean, isnumber, isString, isundefined } from \"./util\";\r\nexport type Primitivetype = string | number | boolean | undefined | bigint;\r\nexport default function(a: any): a is Primitivetype {\r\n    return (\r\n        isString(a) ||\r\n        isnumber(a) ||\r\n        isboolean(a) ||\r\n        isundefined(a) ||\r\n        isbigint(a)\r\n    );\r\n}\r\nexport function isbigint(a: any): a is bigint {\r\n    return typeof a === \"bigint\";\r\n}\r\n","export function issymbol(a: any): a is symbol {\r\n    return typeof a === \"symbol\";\r\n}\r\n\r\nexport { isplainobject };\r\nexport { isfunction as isFunction, isarray as isArray, isstring as isString };\r\nexport { isprimitive };\r\n\r\nconst isplainobject = (a: any): a is Record<any, any> => {\r\n    return (\r\n        !!a &&\r\n        gettagtype(a) === \"Object\" &&\r\n        Reflect.getPrototypeOf(a) === Object.prototype\r\n    );\r\n};\r\n\r\nimport isprimitive from \"./isprimitive\";\r\n\r\nexport function isundefined(a: any): a is void {\r\n    return (!a && a === void 0) || a === null;\r\n}\r\n\r\nexport function isnumber(a: any): a is number {\r\n    return typeof a === \"number\";\r\n}\r\nexport function isboolean(a: any): a is boolean {\r\n    return typeof a === \"boolean\";\r\n}\r\nexport function isobject(a: any): a is Exclude<object, Function> {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\n\r\nexport function isstring(a: any): a is string {\r\n    return typeof a === \"string\";\r\n}\r\nexport function isfunction(a: any): a is Function {\r\n    return typeof a === \"function\";\r\n}\r\n\r\nexport function isarray(a: any): a is Array<any> {\r\n    return Array.isArray(a) && a instanceof Array;\r\n}\r\n\r\nexport function gettagtype(a: any): string {\r\n    return Object.prototype.toString\r\n        .call(a)\r\n        .replace(\"[object \", \"\")\r\n        .replace(\"]\", \"\")\r\n\r\n        .trim();\r\n}\r\n\r\nexport function isSet(a: any): a is Set<any> {\r\n    return a instanceof Set;\r\n}\r\nexport function isMap(a: any): a is Map<any, any> {\r\n    return a instanceof Map;\r\n}\r\nconst camelizeRE = /-(\\w)/g;\r\nexport const camelize = (str: string): string => {\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : \"\"));\r\n};\r\n\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nexport const hyphenate = (str: string): string => {\r\n    return str.replace(hyphenateRE, \"-$1\").toLowerCase();\r\n};\r\n\r\nexport function isWeakMap(a: any): a is WeakMap<any, any> {\r\n    return a instanceof WeakMap;\r\n}\r\n","import { isfunction, isobject } from \"../UtilTools/util\";\r\nconst { HTMLElement, customElements, Proxy } = window;\r\nif (\r\n    !isfunction(HTMLElement) ||\r\n    !isfunction(Proxy) ||\r\n    !isobject(customElements)\r\n    /*||\r\n  \r\n  !isfunction(window.CustomElementRegistry)\r\n  \r\n  \r\n\r\n*/\r\n) {\r\n    console.error(\"Proxy,HTMLElement ,customElements ,browser not supported !\");\r\n    throw new TypeError();\r\n}\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { mountedctx } from \"./Component-context\";\r\n\r\nexport function clearMounted() {\r\n    mountedctx.clear();\r\n}\r\n","import { unmountedctx } from \"./Component-context\";\r\n\r\nexport function clearUnMounted() {\r\n    unmountedctx.clear();\r\n}\r\n","import { isFunction } from \"../UtilTools/util\";\r\nimport { ctxopen, errormessage, invalid_Function } from \"./Component-context\";\r\nexport function checkctxandcallbck(callback: () => void) {\r\n    if (isFunction(callback)) {\r\n        if (ctxopen) {\r\n        } else {\r\n            console.error(errormessage);\r\n            throw Error();\r\n        }\r\n    } else {\r\n        console.error(callback);\r\n        console.error(invalid_Function);\r\n        throw TypeError();\r\n    }\r\n}\r\n","import { checkctxandcallbck } from \"./checkctxandcallbck\";\r\n\r\nexport function createlifecyclecontext() {\r\n    let callbackset = new Set<() => void>();\r\n    const getall = () => {\r\n        return [...callbackset];\r\n    };\r\n    const clear = () => {\r\n        callbackset = new Set();\r\n    };\r\n    const add = (fun: () => void) => {\r\n        checkctxandcallbck(fun);\r\n        callbackset.add(fun);\r\n    };\r\n    return { add, getall, clear };\r\n}\r\n","import { updatedctx } from \"./Component-context\";\r\n\r\nexport function clearupdated() {\r\n    updatedctx.clear();\r\n}\r\n","import { createdctx } from \"./Component-context\";\r\n\r\nexport function clearcreated() {\r\n    createdctx.clear();\r\n}\r\n","export let StateSet: Set<ReactiveState<any>> = new Set();\r\nexport let watchrecord: [ReactiveState<any>, Function][] = [];\r\n/* 记录组件中使用的watch的state和callback,\r\n组件卸载时removeeventlistener,\r\n组件挂载时addeventlistener\r\n*/\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { clearMounted } from \"./clearMounted\";\r\nimport { clearUnMounted } from \"./clearUnMounted\";\r\nimport { createlifecyclecontext } from \"./createlifecyclecontext.js\";\r\nimport { clearupdated } from \"./updated-clear.js\";\r\nimport { clearcreated } from \"./created-clear.js\";\r\nexport function getwatchrecords() {\r\n    return [...watchrecord];\r\n}\r\nfunction clearwatch() {\r\n    watchrecord = [];\r\n}\r\nexport const invalid_Function = \"invalid Function\";\r\nexport const errormessage =\r\n    \"invalid useMounted or useUnMounted out of createComponent\";\r\nexport let ctxopen = false;\r\n\r\nexport function getstates() {\r\n    return [...StateSet];\r\n}\r\nfunction clearstate() {\r\n    StateSet = new Set();\r\n}\r\nexport function openctx() {\r\n    ctxopen = true;\r\n    clearall();\r\n}\r\nexport function closectx() {\r\n    ctxopen = false;\r\n    clearall();\r\n}\r\nfunction clearall() {\r\n    clearcreated();\r\n    clearupdated();\r\n    clearMounted();\r\n    clearUnMounted();\r\n    clearstate();\r\n    clearwatch();\r\n}\r\nexport const mountedctx = createlifecyclecontext();\r\nexport const unmountedctx = createlifecyclecontext();\r\nexport const updatedctx = createlifecyclecontext();\r\nexport const createdctx = createlifecyclecontext();\r\n","import { Htmlelementconstructor } from \"../AttributeClass/createComponent\";\r\nimport { Listener } from \"../Reactivity/custom-observer-target\";\r\nimport { gettercallback } from \"../Reactivity/gettercallback\";\r\n\r\nexport const cached_create_componet = new WeakMap<\r\n    Function,\r\n    Htmlelementconstructor\r\n>();\r\nexport const cached_callback_debounced_watchs = new WeakMap<\r\n    gettercallback<void, any[]>,\r\n    Listener\r\n>();\r\n","import { isArray, isundefined } from \"./util\";\r\n/* export function toArray<T not Array>(a: T): Array<T>;\r\nexport function toArray<T>(a: Array<T>): Array<T>; */\r\ntype Many<T> = T | Array<T>;\r\nexport function toArray<U>(a: Many<U>): Exclude<U, void>[];\r\nexport function toArray(a: any): any[] {\r\n    return (isArray(a) ? a : [a]).flat(1 / 0).filter((a) => !isundefined(a));\r\n}\r\n\r\nArray.prototype.filter;\r\n","import ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { ctxopen, StateSet } from \"./Component-context\";\r\nexport function useststerecord(state: ReactiveState<any>) {\r\n    if (ctxopen) {\r\n        StateSet.add(state);\r\n    }\r\n}\r\n","export default class ObserverTarget {\r\n    Listeners: Set<Listener> = new Set();\r\n    addListener(listener: Listener): void {\r\n        const listenerset: Set<Listener> = this.Listeners;\r\n\r\n        listenerset.add(listener);\r\n    }\r\n    dispatch() {\r\n        const listenerset: Set<Listener> = this.Listeners;\r\n        listenerset.forEach((listener) => {\r\n            Promise.resolve().then(() => {\r\n                listener();\r\n            });\r\n        });\r\n    }\r\n    removeListener(listener: Listener): void {\r\n        const listenerset: Set<Listener> = this.Listeners;\r\n        listenerset.delete(listener);\r\n    }\r\n}\r\nexport interface Listener {\r\n    (): any;\r\n}\r\n","import debounce from \"lodash/debounce\";\r\nimport { useststerecord } from \"../life-cycle-context/useststerecord\";\r\nimport isprimitive, { Primitivetype } from \"../UtilTools/isprimitive\";\r\n// import { defineProperty } from \"../UtilTools/reflect\";\r\nimport { isobject, isSet, gettagtype } from \"../UtilTools/util\";\r\nimport ObserverTarget, { Listener } from \"./custom-observer-target\";\r\n\r\nexport const addonelistner = Symbol(\"addonelistner\");\r\nexport const removeonelistner = Symbol(\"removeonelistner\");\r\n\r\nexport const cancelsubscribe = Symbol(\"cancelsubscribe\");\r\n// const debouncedispatch = Symbol(\"debouncedispatch\");\r\nexport const invalid_primitive_or_object_state =\r\n    \"invalid primitive or object state\";\r\n// const Targetsymbol = Symbol(\"eventtatget\");\r\n// const memlisteners = Symbol(\"memlisteners\");\r\nexport const dispatchsymbol = Symbol(\"dispatch\");\r\nexport const subscribesymbol = Symbol(\"subscribe\");\r\nexport const removeallistenerssymbol = Symbol(\"removeallisteners\");\r\nexport const addallistenerssymbol = Symbol(\"addallisteners\");\r\n// const tagtypesym = Symbol(\"tagtype\");\r\nexport default class ReactiveState<T> {\r\n    constructor(init: { value: T });\r\n    constructor(init: { get: () => T; set?: (v: T) => void });\r\n    constructor(init: { value?: T; get?: () => T; set?: (v: T) => void }) {\r\n        // let getter: undefined | (() => T);\r\n        // let setter: undefined | ((v: T) => void);\r\n\r\n        if (\"value\" in init) {\r\n            let value = init.value;\r\n            this.#tagtypesym = gettagtype(value);\r\n            Object.defineProperty(this, \"value\", {\r\n                configurable: false,\r\n                get: () => value,\r\n                set: (v: T) => {\r\n                    const tag = gettagtype(v);\r\n                    if (tag !== this.#tagtypesym) {\r\n                        throw TypeError();\r\n                    }\r\n                    value = v;\r\n                }\r\n            });\r\n        } else {\r\n            const getter = init.get;\r\n            const setter = init.set;\r\n            if (!getter) {\r\n                throw TypeError();\r\n            }\r\n            this.#tagtypesym = gettagtype(getter());\r\n            if (setter) {\r\n                Object.defineProperty(this, \"value\", {\r\n                    configurable: false,\r\n                    get: getter,\r\n                    set: (v: T) => {\r\n                        const tag = gettagtype(v);\r\n                        if (tag !== this.#tagtypesym) {\r\n                            throw TypeError();\r\n                        }\r\n                        setter(v);\r\n                    }\r\n                });\r\n            } else {\r\n                Object.defineProperty(this, \"value\", {\r\n                    configurable: false,\r\n                    get: getter\r\n                });\r\n            }\r\n        }\r\n\r\n        // this.value = init as any;\r\n\r\n        // defineProperty(this, \"value\", {\r\n        //     value: init,\r\n        //     configurable: true,\r\n        //     writable: true\r\n        // });\r\n\r\n        useststerecord(this);\r\n    }\r\n    #tagtypesym: string;\r\n    value!: T extends Array<any> ? Array<any> : T extends Function ? Function : T extends string ? string : T extends number ? number : T extends boolean ? boolean : T extends void ? void : T extends symbol ? symbol : T extends bigint ? bigint : T extends object ? T : never;\r\n\r\n    readonly [Symbol.toStringTag] = \"ReactiveState\";\r\n\r\n    #debouncedispatch: () => void = (() => {\r\n        const debouncedfun = debounce(() => {\r\n            this.#Targetsymbol.dispatch();\r\n        });\r\n        return () => {\r\n            debouncedfun();\r\n        };\r\n    })();\r\n\r\n    [removeallistenerssymbol]() {\r\n        this.#memlisteners.forEach((callback) => {\r\n            this[removeonelistner](callback);\r\n        });\r\n    }\r\n    [removeonelistner](callback: Listener) {\r\n        this.#Targetsymbol.removeListener(callback);\r\n    }\r\n    [addonelistner](callback: Listener) {\r\n        this.#Targetsymbol.addListener(callback);\r\n    }\r\n    [addallistenerssymbol]() {\r\n        this.#memlisteners.forEach((callback) => {\r\n            this[addonelistner](callback);\r\n        });\r\n    }\r\n\r\n    #Targetsymbol = new ObserverTarget();\r\n    #memlisteners = new Set<Listener>();\r\n\r\n    valueOf = () => {\r\n        return this.value;\r\n    };\r\n    toString() {\r\n        const value = this.valueOf();\r\n        return isprimitive(value)\r\n            ? String(value)\r\n            : isSet(value)\r\n            ? JSON.stringify([...(value as Set<any>)])\r\n            : isobject(value)\r\n            ? JSON.stringify(value)\r\n            : \"\";\r\n    }\r\n\r\n    [dispatchsymbol]() {\r\n        this.#debouncedispatch();\r\n    }\r\n    [subscribesymbol](eventlistener: Listener) {\r\n        this.#memlisteners.add(eventlistener);\r\n        this[addonelistner](eventlistener);\r\n    }\r\n    [cancelsubscribe](eventlistener: Listener) {\r\n        if (eventlistener) {\r\n            this.#memlisteners.delete(eventlistener);\r\n            this[removeonelistner](eventlistener);\r\n        }\r\n    }\r\n\r\n    [Symbol.toPrimitive](): string | undefined | Primitivetype {\r\n        const value = this.valueOf();\r\n        return isprimitive(value)\r\n            ? value\r\n            : isobject(value)\r\n            ? JSON.stringify(value)\r\n            : void 0;\r\n    }\r\n}\r\n","import ReactiveState from \"./reactivestate\";\r\nexport function isReactiveState(a: any): a is ReactiveState<any> {\r\n    return (\r\n        a instanceof ReactiveState && a[Symbol.toStringTag] === \"ReactiveState\"\r\n    );\r\n}\r\n","import ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { ctxopen, watchrecord } from \"./Component-context\";\r\nexport function usewatch(state: ReactiveState<any>, callback: Function) {\r\n    if (ctxopen) {\r\n        watchrecord.push([state, callback]);\r\n    }\r\n}\r\n","import ReactiveState, { addallistenerssymbol } from \"./reactivestate.js\";\r\nexport function rewatch(state: ReactiveState<any>): void {\r\n    state[addallistenerssymbol]();\r\n}\r\n","import { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { invalid_Function } from \"../life-cycle-context/Component-context\";\r\nimport { usewatch } from \"../life-cycle-context/usewatchrecord\";\r\nimport ReactiveState, { subscribesymbol } from \"./reactivestate.js\";\r\nimport { isReactiveState } from \"./isReactiveState\";\r\nimport { isFunction } from \"../UtilTools/util\";\r\nimport { Listener } from \"./custom-observer-target\";\r\nimport { rewatch } from \"./rewatch\";\r\nexport function watchsingle(state: ReactiveState<any>, callback: Listener) {\r\n    if (!(isReactiveState(state) && isFunction(callback))) {\r\n        console.error(state);\r\n        console.error(callback);\r\n        console.error(invalid_ReactiveState + invalid_Function);\r\n        throw TypeError();\r\n    }\r\n    state[subscribesymbol](callback);\r\n    requestAnimationFrame(() => {\r\n        rewatch(state);\r\n    });\r\n    usewatch(state, callback);\r\n}\r\n","import debounce from \"lodash/debounce\";\r\nimport { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { invalid_Function } from \"../life-cycle-context/Component-context\";\r\nimport { cached_callback_debounced_watchs } from \"../others/cached-map\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isarray } from \"../UtilTools/util\";\r\nimport { Listener } from \"./custom-observer-target\";\r\nimport { gettercallback } from \"./gettercallback\";\r\nimport ReactiveState, { cancelsubscribe } from \"./reactivestate.js\";\r\nimport { isReactiveState } from \"./isReactiveState\";\r\nimport { watchsingle } from \"./watchsingle\";\r\nimport { UnWrapState } from \"./unwrapstate\";\r\nimport { UnWrapArray } from \"./UnWrapArray\";\r\n\r\nexport type CancelWatchfun = () => void;\r\nfunction watch<T extends any, Y extends ReactiveState<T>>(\r\n    state: Y,\r\n\r\n    callback: gettercallback<void, [UnWrapState<Y>]>\r\n): CancelWatchfun;\r\nfunction watch<T extends any, Y extends Array<ReactiveState<T>>>(\r\n    state: Y,\r\n\r\n    callback: gettercallback<void, UnWrapState<UnWrapArray<Y>>[]>\r\n): CancelWatchfun;\r\nfunction watch(\r\n    state: ReactiveState<any> | Array<ReactiveState<any>>,\r\n\r\n    callback: gettercallback<any, any[]>\r\n): CancelWatchfun {\r\n    if (isarray(state) || isReactiveState(state)) {\r\n        const statearray: ReactiveState<any>[] = toArray(state);\r\n        if (!statearray.length) {\r\n            console.error(\"Empty array not allowed\");\r\n            throw new Error();\r\n        }\r\n\r\n        const debouncedcallback = debounce(callback);\r\n        const stateandlisteners: [\r\n            ReactiveState<any>,\r\n            Listener\r\n        ][] = statearray.map((state1) => {\r\n            const listener = (() => {\r\n                const cachedfun = cached_callback_debounced_watchs.get(\r\n                    callback\r\n                );\r\n                if (cachedfun) {\r\n                    return cachedfun;\r\n                } else {\r\n                    const listenfun = () => {\r\n                        debouncedcallback(\r\n                            ...statearray.map((r) => r.valueOf())\r\n                        );\r\n                    };\r\n                    cached_callback_debounced_watchs.set(callback, listenfun);\r\n                    return listenfun;\r\n                }\r\n            })();\r\n            watchsingle(\r\n                state1,\r\n\r\n                listener\r\n            );\r\n\r\n            return [state1, listener];\r\n        });\r\n\r\n        const cancelWatch: CancelWatchfun = () => {\r\n            stateandlisteners.forEach(([state, listener]) => {\r\n                state[cancelsubscribe](listener);\r\n            });\r\n        };\r\n        return cancelWatch;\r\n    } else {\r\n        console.error(state);\r\n        console.error(callback);\r\n        console.error(invalid_ReactiveState + invalid_Function);\r\n        throw new TypeError();\r\n    }\r\n}\r\n\r\nexport default watch;\r\nArray.prototype.map;\r\n","import { isMap, isWeakMap } from \"./util\";\r\n\r\nexport const {\r\n    apply,\r\n    construct,\r\n    defineProperty,\r\n    deleteProperty,\r\n\r\n    getOwnPropertyDescriptor,\r\n    getPrototypeOf,\r\n    has,\r\n\r\n    ownKeys,\r\n    preventExtensions\r\n} = Reflect;\r\n\r\nexport function get(\r\n    target: Map<any, any> | WeakMap<any, any>,\r\n    propertyKey: PropertyKey\r\n): any;\r\nexport function get(\r\n    target: Exclude<object, Map<any, any> | WeakMap<any, any>>,\r\n    propertyKey: PropertyKey\r\n): any;\r\nexport function get(target: object, propertyKey: PropertyKey): any {\r\n    if (isMap(target) || isWeakMap(target)) {\r\n        return target.get(propertyKey);\r\n    } else {\r\n        return Reflect.get(target, propertyKey);\r\n    }\r\n}\r\nexport function set(\r\n    target: Map<any, any> | WeakMap<any, any>,\r\n    propertyKey: PropertyKey,\r\n    value: any\r\n): boolean;\r\nexport function set(\r\n    target: Exclude<object, Map<any, any> | WeakMap<any, any>>,\r\n    propertyKey: PropertyKey,\r\n    value: any\r\n): boolean;\r\nexport function set(\r\n    target: object,\r\n    propertyKey: PropertyKey,\r\n    value: any\r\n): boolean {\r\n    if (isMap(target) || isWeakMap(target)) {\r\n        target.set(propertyKey, value);\r\n\r\n        return true;\r\n    } else {\r\n        return Reflect.set(target, propertyKey, value);\r\n    }\r\n}\r\n\r\n/*\r\napply()\r\n对一个函数进行调用操作，同时可以传入一个数组作为调用参数。和 Function.prototype.apply() 功能类似。\r\nconstruct()\r\n对构造函数进行 new 操作，相当于执行 new target(...args)。\r\ndefineProperty()\r\n和 Object.defineProperty() 类似。\r\ndeleteProperty()\r\n作为函数的delete操作符，相当于执行 delete target[name]。\r\n\r\n该方法会返回一个包含有目标对象身上所有可枚举的自身字符串属性以及继承字符串属性的迭代器，for...in 操作遍历到的正是这些属性。\r\nget()\r\n获取对象身上某个属性的值，类似于 target[name]。\r\ngetOwnPropertyDescriptor()\r\n类似于 Object.getOwnPropertyDescriptor()。\r\ngetPrototypeOf()\r\n类似于 Object.getPrototypeOf()。\r\nhas()\r\n判断一个对象是否存在某个属性，和 in 运算符 的功能完全相同。\r\nisExtensible()\r\n类似于 Object.isExtensible().\r\nownKeys()\r\n返回一个包含所有自身属性（不包含继承属性）的数组。(类似于 Object.keys(), 但不会受enumerable影响).\r\npreventExtensions()\r\n类似于 Object.preventExtensions()。返回一个Boolean。\r\nset()\r\n将值分配给属性的函数。返回一个Boolean，如果更新成功，则返回true。\r\nsetPrototypeOf()\r\n类似于 Object.setPrototypeOf()。\r\n*/\r\n","const t=[\"input\",\"textarea\",\"option\",\"select\"];var e=(e,r,n)=>\"value\"===r&&t.includes(e)&&\"button\"!==n||\"selected\"===r&&\"option\"===e||\"checked\"===r&&\"input\"===e||\"muted\"===r&&\"video\"===e;const r=/\\B([A-Z])/g,n=t=>t.replace(r,\"-$1\").toLowerCase(),o=window.String,i=window.Reflect,{get:u,set:c,ownKeys:s}=i,f=\"value\";function a(t){return\"object\"==typeof t&&null!==t}function l(t){return\"string\"==typeof t}function p(t){return t instanceof Set}const y=t=>\"input\"===d(t)&&(\"checkbox\"===u(t,\"type\")||\"radio\"===u(t,\"type\"));function d(t){return t.tagName.toLowerCase()}function w(t,e,r){return t.setAttribute(e,r)}function g(t,e){return t.removeAttribute(e)}export default function(t){!function(t){if(!(t instanceof Element))throw TypeError()}(t);var r=Object.create(null);const i=new Proxy(r,{ownKeys(){const e=function(t){const e=d(t);return\"textarea\"===e||\"select\"===e||\"input\"===e&&\"text\"===u(t,\"type\")}(t),r=function(t){return t.getAttributeNames()}(t);return Array.from(new Set([...r,y(t)?\"checked\":void 0,e?f:void 0].flat(1/0).filter(t=>!!t)))},get(r,n){if(e(d(t),o(n),u(t,\"type\")))return u(t,o(n));{const e=function(t,e){return t.getAttribute(e)}(t,o(n));if(\"\"===e)return!0;if(null===e)return;if(!l(e))return;try{return JSON.parse(o(e))}catch(t){return e}}},set(r,i,s){if(\"function\"==typeof s)throw TypeError();if(e(d(t),o(i),u(t,\"type\")))return c(t,o(i),s);if(\"style\"===i){const e=l(s)?s:a(s)?(y=s,y=JSON.parse(JSON.stringify(y)),Object.entries(y).map(([t,e])=>[n(t).trim(),e]).map(([t,e])=>t+\":\"+e).join(\";\")):o(s);return c(u(t,\"style\"),\"cssText\",e.trim()),!0}if(\"class\"===i&&a(s)){const e=(f=s,Array.isArray(f)?s.join(\" \"):p(s)?[...s].join(\" \"):o(s));return w(t,o(i),e),!0}return!1===s||null==s?(g(t,o(i)),!0):p(s)?(w(t,o(i),JSON.stringify([...s])),!0):(!0===s&&(s=\"\"),w(t,o(i),a(s)?JSON.stringify(s):o(s)),!0);var f,y},deleteProperty:(e,r)=>(g(t,o(r)),!0),has:(t,e)=>s(i).includes(e),defineProperty:()=>!1,getOwnPropertyDescriptor(t,e){const r={enumerable:!0,configurable:!0,writable:!0},n=u(i,e);return void 0!==n?{value:n,...r}:void 0},setPrototypeOf:()=>!1});return i}\n//# sourceMappingURL=index.min.js.map\n","import { createdctx } from \"./Component-context\";\r\n\r\nexport function getcreated(): (() => void)[] {\r\n    return createdctx.getall();\r\n}\r\n","import { updatedctx } from \"./Component-context\";\r\n\r\nexport function getupdated(): (() => void)[] {\r\n    return updatedctx.getall();\r\n}\r\n","const rootnode = document.body;\r\nexport const connectedeventname = Symbol(\"mounted\").toString();\r\nexport const disconnectedeventname = Symbol(\"unmounted\").toString();\r\nconst callback = function(mutations: MutationRecord[]) {\r\n    mutations.forEach(function(record: MutationRecord) {\r\n        console.log(\"Mutation: \", record);\r\n\r\n        const addedNodes = [...record.addedNodes];\r\n        addedNodes.forEach((e) => {\r\n            if (e instanceof Element) {\r\n                const subnodes = [...e.querySelectorAll(\"*\"), e];\r\n                subnodes.forEach((n) => {\r\n                    dispatchconnected(n);\r\n                });\r\n            }\r\n        });\r\n        const removedNodes = [...record.removedNodes];\r\n        removedNodes.forEach((e) => {\r\n            if (e instanceof Element) {\r\n                const subnodes = [...e.querySelectorAll(\"*\"), e];\r\n                subnodes.forEach((n) => {\r\n                    dispatchdisconnected(n);\r\n                });\r\n            }\r\n        });\r\n    });\r\n};\r\nfunction dispatchconnected(e: Node) {\r\n    e.dispatchEvent(new Event(connectedeventname));\r\n}\r\nfunction dispatchdisconnected(e: Node) {\r\n    e.dispatchEvent(new Event(disconnectedeventname));\r\n}\r\nconst mo = new MutationObserver(callback);\r\n\r\nconst option = {\r\n    childList: true,\r\n\r\n    subtree: true\r\n};\r\n\r\nmo.observe(rootnode, option);\r\n\r\nexport const updatedeventname = Symbol(\"updated\").toString();\r\nnew MutationObserver((mutations: MutationRecord[]) => {\r\n    mutations.forEach(function(record: MutationRecord) {\r\n        console.log(\"Mutation: \", record);\r\n        const target = record.target;\r\n        dispatchupdated(target);\r\n    });\r\n}).observe(rootnode, {\r\n    subtree: true,\r\n    attributes: true,\r\n    childList: true,\r\n    characterData: true\r\n});\r\nfunction dispatchupdated(e: Node) {\r\n    e.dispatchEvent(new Event(updatedeventname, { bubbles: true }));\r\n}\r\nexport const createdeventname = Symbol(\"created\").toString();\r\nexport function dispatchcreated(e: Node) {\r\n    e.dispatchEvent(new Event(createdeventname));\r\n}\r\n","import { createdeventname } from \"./addlistener-mount-unmount-updated\";\r\nexport function addcreatedlistner(ele: Element, call: () => void) {\r\n    ele.addEventListener(createdeventname, call, { once: true });\r\n}\r\n","import { connectedeventname } from \"./addlistener-mount-unmount-updated\";\r\nexport function addmountedlistner(ele: Element|Node, call: () => void) {\r\n    ele.addEventListener(connectedeventname, call);\r\n}\r\n","import { disconnectedeventname } from \"./addlistener-mount-unmount-updated\";\r\nexport function addunmountedlistner(ele: Element|Node, call: () => void) {\r\n    ele.addEventListener(disconnectedeventname, call);\r\n}\r\n","import { updatedeventname } from \"./addlistener-mount-unmount-updated\";\r\nexport function addupdatedlistner(ele: Element, call: () => void) {\r\n    ele.addEventListener(updatedeventname, call);\r\n}\r\nexport function addstopupdatelistener(ele: Element) {\r\n    ele.addEventListener(updatedeventname, (e) => {\r\n        if (e.target !== ele && ele.tagName.includes(\"-\")) {\r\n            e.stopPropagation();\r\n        }\r\n    });\r\n}\r\n","/* \r\n        \r\n        [[\"value\",[\"f\",\"f\"]],[\"value\",[\"f\",\"f\"]]]\r\n\r\n\r\n        [[\"value\",[\"f\",\"f\",\"f\",\"f\"]]]\r\n        \r\n        */\r\nexport function merge_entries(a: [string, any][]): [string, any][] {\r\n    const m: { [s: string]: Set<any> } = {};\r\n\r\n    a.forEach(([key, value]) => {\r\n        if (!m[key]) {\r\n            m[key] = new Set();\r\n        }\r\n\r\n        value.forEach((v: any) => {\r\n            m[key].add(v);\r\n        });\r\n    });\r\n    return Object.entries(m).map(([k, v]) => [k, [...v]]);\r\n}\r\n","const VirtualElementSet = new WeakSet<Virtualdom<any>>();\r\nconst Letter_case_and_Chinese = /[A-Za-z\\u4e00-\\u9fa5]/;\r\nimport { Htmlelementconstructor } from \"../CustomClass/customclass\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\n\r\nimport { merge_entries } from \"../UtilTools/merge-entries\";\r\nimport { defineProperty, preventExtensions } from \"../UtilTools/reflect\";\r\nimport { isstring } from \"../UtilTools/util\";\r\nimport { ElementAttrs } from \"./create-element\";\r\nimport { VaildVDom } from \"./isvalidvdom\";\r\n\r\nexport function isVirtualdom(a: any): a is Virtualdom<any> {\r\n    return VirtualElementSet.has(a);\r\n}\r\n\r\nexport type Vdomchildren = Array<VaildVDom>;\r\nexport { createVirtualElement };\r\nfunction createVirtualElement<\r\n    T extends Htmlelementconstructor | string | Function\r\n>(\r\n    type: T,\r\n    props: ElementAttrs = {},\r\n    children: Vdomchildren = []\r\n): Virtualdom<T> {\r\n    props = Object.assign({}, props);\r\n    children = children.flat(1 / 0);\r\n\r\n    const propsentries = Object.entries(props);\r\n    const propsentriesNOTevents = propsentries.filter(\r\n        ([key]) => !(key.startsWith(\"@\") || key.startsWith(\"on\"))\r\n    );\r\n    const Entries_beginning_with_a_letter = propsentriesNOTevents.filter(\r\n        ([key]) => Letter_case_and_Chinese.test(key[0])\r\n    );\r\n    const virtual = Object.create(null);\r\n    const vdom = virtual;\r\n    [\"onevent\", \"type\", \"props\", \"children\", \"directives\", \"bindattr\"].forEach(\r\n        (key) => {\r\n            defineProperty(virtual, key, {\r\n                writable: true,\r\n                enumerable: false\r\n            });\r\n        }\r\n    );\r\n\r\n    Object.assign(virtual, {\r\n        type,\r\n        bindattr: Object.fromEntries(\r\n            Entries_beginning_with_a_letter.filter((e) => isReactiveState(e[1]))\r\n        ),\r\n        props: Object.fromEntries(\r\n            Entries_beginning_with_a_letter.filter(\r\n                (e) => !isReactiveState(e[1])\r\n            ).map(([key, value]) => [\r\n                key,\r\n                isstring(value) ? value.trim() : value\r\n            ])\r\n        ),\r\n        children,\r\n        onevent: Object.fromEntries(\r\n            merge_entries([\r\n                ...propsentries\r\n                    .filter(([key]) => \"@\" == key[0])\r\n                    .map(([key, value]) => [\r\n                        key\r\n                            .slice(1)\r\n                            .toLowerCase()\r\n                            .trim(),\r\n                        [value].flat(1 / 0)\r\n                    ]),\r\n                ...propsentries\r\n                    .filter(([key]) => key.startsWith(\"on\"))\r\n                    .map(([key, value]) => [\r\n                        key\r\n                            .slice(2)\r\n                            .toLowerCase()\r\n                            .trim(),\r\n                        [value].flat(1 / 0)\r\n                    ])\r\n            ] as [string, any][])\r\n        ),\r\n        directives: Object.fromEntries(\r\n            propsentriesNOTevents\r\n                .filter(([key]) => key[0] === \"*\" || key[0] === \"$\")\r\n                .map(([key, value]) => [\r\n                    key\r\n                        .slice(1)\r\n                        .toLowerCase()\r\n                        .trim(),\r\n                    value\r\n                ])\r\n        )\r\n    });\r\n    defineProperty(virtual, Symbol.toStringTag, { value: \"VirtualElement\" });\r\n\r\n    preventExtensions(virtual);\r\n    VirtualElementSet.add(virtual);\r\n\r\n    Object.freeze(vdom);\r\n    return virtual;\r\n}\r\n\r\ninterface Virtualdom<T extends Htmlelementconstructor | string | Function> {\r\n    readonly [Symbol.toStringTag]: \"VirtualElement\";\r\n\r\n    readonly type: T;\r\n    readonly props: ElementAttrs;\r\n    readonly children: Vdomchildren;\r\n    readonly directives: Record<string, any>;\r\n\r\n    readonly onevent: Record<string, Array<EventListener>>;\r\n\r\n    readonly bindattr: Record<string, ReactiveState<any>>;\r\n}\r\nexport default Virtualdom;\r\n","export type VaildVDom =\r\n    | Virtualdom<any>\r\n    | string\r\n    | number\r\n    | Vdomchildren\r\n    | ReactiveState<any>;\r\n\r\nimport Virtualdom, {\r\n    isVirtualdom,\r\n    Vdomchildren\r\n} from \"../CreateElement/VirtualElement\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport { isArray, isnumber, isstring } from \"../UtilTools/util\";\r\n\r\nexport function isvalidvdom(v: any): v is VaildVDom {\r\n    if (isstring(v)) {\r\n        return true;\r\n    }\r\n    if (isnumber(v)) {\r\n        return true;\r\n    }\r\n    let flag = false;\r\n    if (isArray(v)) {\r\n        /*flag = v\r\n        .map((ele: any) => {\r\n          return isvalidvdom(ele);\r\n          \r\n        })\r\n        .includes(false)\r\n        ? false\r\n        : true;\r\n      return flag;*/\r\n\r\n        return v.every((e) => isvalidvdom(e));\r\n    } else if (isVirtualdom(v)) {\r\n        return isvalidvdom(v.children);\r\n        /*  if (isvalidvdom(v.children)) {\r\n        return true;\r\n      } */\r\n    } else if (isReactiveState(v)) {\r\n        return true;\r\n    }\r\n    /*  else {\r\n    } */\r\n    return flag;\r\n}\r\n","import { Htmlelementconstructor } from \"../CustomClass/customclass\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\n\r\nexport function isclassextendsHTMLElement(initclass: {\r\n    prototype: any;\r\n}): initclass is Htmlelementconstructor {\r\n    return !!(\r\n        isfunction(initclass) &&\r\n        initclass.prototype &&\r\n        initclass.prototype instanceof HTMLElement\r\n    );\r\n}\r\n","import { mountedctx } from \"./Component-context\";\r\n\r\nexport function getMounted(): (() => void)[] {\r\n    return mountedctx.getall();\r\n}\r\n","import { unmountedctx } from \"./Component-context\";\r\n\r\nexport function getUnMounted(): (() => void)[] {\r\n    return unmountedctx.getall();\r\n}\r\n","export function seteletext(e: Element | Node, v: string) {\r\n    e.textContent = v;\r\n}\r\nexport function setelehtml(e: Element, v: string) {\r\n    e.innerHTML = v;\r\n}\r\nexport function appendchild(\r\n    container: HTMLElement | SVGSVGElement | SVGElement | Element | Node,\r\n    ele: HTMLElement | SVGElement | Element | Node\r\n) {\r\n    container.appendChild(ele);\r\n}\r\nexport function createsvgelement() {\r\n    return createElementNS(svgnamespace, \"svg\");\r\n}\r\nexport function createnonescript() {\r\n    return createDocumentFragment();\r\n}\r\nexport function createDocumentFragment() {\r\n    return document.createDocumentFragment();\r\n}\r\nexport function createnativeelement(type: string) {\r\n    return document.createElement(type);\r\n}\r\nexport function createElementNS(namespace: string, name: string) {\r\n    return document.createElementNS(namespace, name);\r\n}\r\nexport function createtextnode(data: string | number) {\r\n    return document.createTextNode(String(data));\r\n}\r\nexport const svgnamespace = \"http://www.w3.org/2000/svg\";\r\nexport function changetext(textnode: Text, value: string) {\r\n    textnode.nodeValue = String(value);\r\n}\r\n\r\nexport const mathnamespace = \"http://www.w3.org/1998/Math/MathML\";\r\n\r\nexport function createmathelement() {\r\n    return createElementNS(mathnamespace, \"math\");\r\n}\r\nexport function createComment() {\r\n    return document.createComment(\"\");\r\n}\r\nexport function removeElement(element: Element) {\r\n    element.remove();\r\n}\r\nexport function removeNode(node: Element | Node) {\r\n    let parentNode = node.parentNode;\r\n    if (parentNode) {\r\n        parentNode.removeChild(node);\r\n    }\r\n}\r\nexport function replaceChild(newChild: Node, oldChild: Node) {\r\n    let parentNode = oldChild.parentNode;\r\n    if (parentNode) {\r\n        parentNode.replaceChild(newChild, oldChild);\r\n    }\r\n}\r\n\r\nexport function domaddlisten(\r\n    ele: Element | Node,\r\n    event: string,\r\n    call: EventListener\r\n) {\r\n    ele.addEventListener(event, call);\r\n}\r\n\r\nexport function domremovelisten(\r\n    ele: Element | Node,\r\n    event: string,\r\n    call: EventListener\r\n) {\r\n    ele.removeEventListener(event, call);\r\n}\r\nexport function getchildren(ele: Element) {\r\n    return [...ele.children];\r\n}\r\nexport function getchildNodes(ele: Element | Node) {\r\n    return [...ele.childNodes];\r\n}\r\nexport function getAttribute(ele: Element, name: string) {\r\n    return HTMLElementprototype.getAttribute.call(ele, name);\r\n}\r\nexport function setAttribute(ele: Element, name: string, value: any) {\r\n    HTMLElementprototype.setAttribute.call(ele, name, value);\r\n}\r\nexport function removeAttribute(ele: Element, name: string) {\r\n    HTMLElementprototype.removeAttribute.call(ele, name);\r\n}\r\nconst HTMLElementprototype = HTMLElement.prototype;\r\n\r\nexport function insertfirst(\r\n    container: HTMLElement | Element,\r\n    ele: HTMLElement\r\n) {\r\n    container.insertBefore(ele, container.firstChild);\r\n}\r\nexport function createanotherhtmldocument() {\r\n    return document.implementation.createHTMLDocument(\"\");\r\n}\r\n/* export function getparentNode(ele: Node): Node {\r\n    return ele.parentNode ? ele.parentNode : ele;\r\n  }\r\n   */\r\nexport function querySelectorAll(selector: string) {\r\n    return [...document.querySelectorAll(selector)];\r\n}\r\n","import { appendchild, seteletext } from \"../UtilTools/dom\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nexport default function<\r\n    T extends HTMLElement | SVGSVGElement | SVGElement | Element | Node\r\n>(\r\n    ele:\r\n        | Node\r\n        | Array<\r\n              | HTMLElement\r\n              | Text\r\n              | SVGSVGElement\r\n              | DocumentFragment\r\n              | SVGElement\r\n              | Element\r\n              | Node\r\n          >\r\n        | SVGElement\r\n        | DocumentFragment\r\n        | HTMLElement\r\n        | Text\r\n        | SVGSVGElement\r\n        | Element,\r\n    container: T,\r\n    clear: boolean = true\r\n): T {\r\n    if (clear) {\r\n        seteletext(container, \"\");\r\n    }\r\n\r\n    const eles = toArray(ele);\r\n    eles.forEach((e: Node | HTMLElement | Element | SVGElement) =>\r\n        appendchild(container, e)\r\n    );\r\n    return container;\r\n}\r\nimport mountrealelement from \"./mount-real-element\";\r\nexport { mountrealelement };\r\n","import { get } from \"../UtilTools/reflect\";\r\nimport { isFunction } from \"../UtilTools/util\";\r\nconst componentsymbol = Symbol(\"component\");\r\nexport { componentsymbol };\r\nexport function iscomponent(a: any) {\r\n    return isFunction(a) && get(a, componentsymbol) === componentsymbol;\r\n}\r\n","export { getrandomstringandnumber };\r\nimport { get } from \"../UtilTools/reflect\";\r\n\r\nconst charactorlist = Array(26)\r\n    .fill(undefined)\r\n    .map((v, i) => 97 + i)\r\n    .map((n) => String.fromCharCode(n));\r\n\r\nconst hexnumberlist = Array(16)\r\n    .fill(undefined)\r\n    .map((v, i) => i)\r\n    .map((a) => a.toString(16));\r\n\r\nconst charactorandnumberlist = [\r\n    ...new Set([...hexnumberlist, ...charactorlist])\r\n];\r\n\r\nfunction getrandomcharactor() {\r\n    return get(charactorlist, Math.floor(Math.random() * charactorlist.length));\r\n}\r\nfunction getrandomhexnumberandcharactor() {\r\n    return get(\r\n        charactorandnumberlist,\r\n        Math.floor(Math.random() * charactorandnumberlist.length)\r\n    );\r\n}\r\nfunction getrandomstringandnumber(length = 1) {\r\n    return (\r\n        Array(length)\r\n            .fill(undefined)\r\n            .map(() => getrandomcharactor())\r\n\r\n            .join(\"\") +\r\n        \"-\" +\r\n        Array(length)\r\n            .fill(undefined)\r\n            .map(() => getrandomhexnumberandcharactor())\r\n            .join(\"\")\r\n    );\r\n}\r\n","export const invalid_custom_element_class = \"invalid custom element class !\";\r\n\r\nimport { get, getPrototypeOf, has, set } from \"../UtilTools/reflect\";\r\nimport { isobject } from \"../UtilTools/util\";\r\nimport { getrandomstringandnumber } from \"./getrandomstringandnumber\";\r\nimport { isclassextendsHTMLElement } from \"./isclassextendsHTMLElement\";\r\nif (!isobject(window.customElements)) {\r\n    console.error(\" customElements  not supported !\");\r\n    throw new TypeError();\r\n}\r\n\r\nfunction Usevaluetoquerythekeyfromthetable(\r\n    table: object,\r\n    Componentstatusname: any\r\n): string | undefined {\r\n    const outputentrie = Object.entries(table).find((v) => {\r\n        return v[1] === Componentstatusname;\r\n    });\r\n    return outputentrie ? outputentrie[0] : undefined;\r\n}\r\n\r\ninterface ElementDefinitionOptions {\r\n    extends?: string;\r\n}\r\nwindow.CustomElementRegistry = get(\r\n    getPrototypeOf(window.customElements),\r\n    \"constructor\"\r\n);\r\nconst elementset = Symbol.for(\"elementset\");\r\nconst elementmap = Symbol.for(\"elementmap\");\r\n\r\ninterface CustomElements extends CustomElementRegistry {\r\n    [elementset]: Set<Function>;\r\n    [elementmap]: Record<string, Function>;\r\n}\r\nconst { CustomElementRegistry } = window;\r\nconst customElements = window.customElements as CustomElements;\r\n\r\nif (!has(customElements, elementset)) {\r\n    Reflect.set(customElements, elementset, new Set());\r\n}\r\nif (!has(customElements, elementmap)) {\r\n    Reflect.set(customElements, elementmap, {});\r\n}\r\n\r\nexport default (initclass: Function, extendsname?: string) =>\r\n    RandomDefineCustomElement(initclass, extendsname);\r\n\r\nfunction RandomDefineCustomElement(\r\n    initclass: Function,\r\n    extendsname?: string,\r\n    length = 1\r\n): string | undefined {\r\n    if (!isclassextendsHTMLElement(initclass)) {\r\n        console.error(initclass);\r\n        console.error(invalid_custom_element_class);\r\n        throw TypeError();\r\n    }\r\n\r\n    if (!get(customElements, elementset).has(initclass)) {\r\n        const elementname = getrandomstringandnumber(length);\r\n\r\n        if (customElements.get(elementname)) {\r\n            return RandomDefineCustomElement(\r\n                initclass,\r\n                extendsname,\r\n                length + 1\r\n            );\r\n        } else {\r\n            if (extendsname) {\r\n                customElements.define(elementname, initclass, {\r\n                    extends: extendsname\r\n                });\r\n            } else {\r\n                customElements.define(elementname, initclass);\r\n            }\r\n        }\r\n\r\n        return elementname;\r\n    } else {\r\n        return Usevaluetoquerythekeyfromthetable(\r\n            get(customElements, elementmap),\r\n            initclass\r\n        );\r\n    }\r\n}\r\n\r\n/* customElements.get = function name(name) {\r\n  return customElements[elementmap].get(name);\r\n};\r\n */\r\ncustomElements.define = function(\r\n    name: string,\r\n    constructor: Function,\r\n    options?: ElementDefinitionOptions\r\n): void {\r\n    if (!isclassextendsHTMLElement(constructor)) {\r\n        console.error(constructor);\r\n        console.error(invalid_custom_element_class);\r\n        throw TypeError();\r\n    }\r\n    if (!get(customElements, elementset).has(constructor)) {\r\n        if (has(customElements[elementmap], name)) {\r\n            RandomDefineCustomElement(\r\n                constructor,\r\n                options ? options.extends : undefined\r\n            );\r\n        } else {\r\n            CustomElementRegistry.prototype.define.call(\r\n                customElements,\r\n                name,\r\n                constructor,\r\n                options\r\n            );\r\n            customElements[elementset].add(constructor);\r\n            customElements[elementmap][name] = constructor;\r\n        }\r\n    }\r\n};\r\nset(customElements, Symbol.iterator, () => {\r\n    const entries = Object.entries(customElements[elementmap]);\r\n\r\n    return entries[Symbol.iterator].call(entries);\r\n});\r\n/* customElements[Symbol.iterator] = () => {\r\n  const entries = Object.entries(customElements[elementmap]);\r\n\r\n  return entries[Symbol.iterator].call(entries);\r\n}; */\r\n","import { Htmlelementconstructor, Custom } from \"./customclass\";\r\n\r\nimport RandomDefineCustomElement, {\r\n    invalid_custom_element_class\r\n} from \"./CustomElementRegistry\";\r\nimport { construct } from \"../UtilTools/reflect\";\r\nimport { isclassextendsHTMLElement } from \"./isclassextendsHTMLElement\";\r\nimport { autocreateclass } from \"../AttributeClass/createComponent\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\n\r\nexport function createcostumelemet(\r\n    initclass: Htmlelementconstructor | Custom,\r\n    propsjson?: object,\r\n    children?: any[]\r\n): HTMLElement {\r\n    let type = initclass;\r\n    if (isfunction(type)) {\r\n        type = autocreateclass(type);\r\n    }\r\n    initclass = type;\r\n    if (isclassextendsHTMLElement(initclass)) {\r\n        /*   const elementname =\r\n     getcustomelementname(initclass); */\r\n        /* if (customElements.get(elementname) === initclass) {\r\n    } else {\r\n      customElements.define(elementname, initclass);\r\n    } */\r\n        RandomDefineCustomElement(initclass);\r\n        return construct(initclass, [propsjson, children]);\r\n    } else {\r\n        console.error(initclass);\r\n        console.error(invalid_custom_element_class);\r\n        throw TypeError();\r\n    }\r\n}\r\n","import { isboolean } from \"./util\";\r\n\r\nexport function isconnected(element: Node) {\r\n    const isConnectedstate = element.isConnected;\r\n    if (isboolean(isConnectedstate)) {\r\n        return isConnectedstate;\r\n    } else {\r\n        return document.documentElement === getancestornode(element);\r\n    }\r\n}\r\nfunction getancestornode(node: Node) {\r\n    while (\r\n        node &&\r\n        node.parentNode &&\r\n        node.parentNode !== document\r\n        /*  getparentNode(node) &&\r\n    getparentNode(node) !== node &&\r\n    getparentNode(node) !== document */\r\n    ) {\r\n        node = node.parentNode;\r\n    }\r\n    return node;\r\n}\r\n","export const { requestAnimationFrame } = window;\r\n\r\nimport { ExtendOptions } from \"./extend-directive\";\r\nexport { directive };\r\nconst directive: ExtendOptions = {};\r\nexport default directive;\r\n","import { isfunction } from \"../UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport directives from \"../Directives/directives\";\r\nimport { addmountedlistner } from \"src/others/addmountedlistner\";\r\nimport { addupdatedlistner } from \"src/others/addupdatedlistner\";\r\nimport { addunmountedlistner } from \"src/others/addunmountedlistner\";\r\nconst applydirects = function(element: Element, vdom: Virtualdom<any>) {\r\n    Object.entries(vdom.directives).forEach(([name, value]) => {\r\n        const direfun = directives[name];\r\n        if (isfunction(direfun)) {\r\n            direfun(\r\n                value,\r\n                element,\r\n                vdom,\r\n                (call) => {\r\n                    addmountedlistner(element, call);\r\n                },\r\n                (call) => {\r\n                    addunmountedlistner(element, call);\r\n                },\r\n                (call) => {\r\n                    addupdatedlistner(element, call);\r\n                }\r\n            );\r\n        } else {\r\n            console.error(vdom.directives);\r\n            console.error(\"invalid directives \" + name);\r\n            throw new TypeError();\r\n        }\r\n    });\r\n};\r\nexport { applydirects };\r\n","import onevent from \"./handle-onevent\";\r\nexport { onevent };\r\nimport { invalid_Function } from \"../life-cycle-context/Component-context\";\r\nimport { domaddlisten, domremovelisten } from \"../UtilTools/dom\";\r\nimport { get, has, set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\nexport const eventlistenerssymbol = Symbol(\"eventlisteners\");\r\nexport default function(\r\n    element: Element | Node,\r\n    eventname: string,\r\n    callback: EventListener | Array<EventListener>\r\n) {\r\n    firstaddlisteners(element, eventname, toArray(callback));\r\n}\r\nexport function firstaddlisteners(\r\n    ele: Element | Node,\r\n    event: string,\r\n    callarray: Array<EventListener>\r\n) {\r\n    const element = ele;\r\n    callarray.forEach((call: EventListener) => {\r\n        if (!isfunction(call)) {\r\n            console.error(call);\r\n            console.error(invalid_Function);\r\n            throw TypeError();\r\n        }\r\n\r\n        if (!has(element, eventlistenerssymbol)) {\r\n            set(element, eventlistenerssymbol, []);\r\n        }\r\n        (get(ele, eventlistenerssymbol) as [string, EventListener][]).push([\r\n            event,\r\n            call\r\n        ]);\r\n        domaddlisten(ele, event, call);\r\n    });\r\n}\r\nexport function removelisteners(ele: Element | Node) {\r\n    if (has(ele, eventlistenerssymbol)) {\r\n        (get(ele, eventlistenerssymbol) as [string, EventListener][]).forEach(\r\n            ([event, call]) => {\r\n                domremovelisten(ele, event, call);\r\n            }\r\n        );\r\n    }\r\n}\r\nexport function readdlisteners(ele: Element | Node) {\r\n    if (has(ele, eventlistenerssymbol)) {\r\n        (get(ele, eventlistenerssymbol) as [string, EventListener][]).forEach(\r\n            ([event, call]) => {\r\n                domaddlisten(ele, event, call);\r\n            }\r\n        );\r\n    }\r\n}\r\n","import createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport watch from \"../Reactivity/watch\";\r\nimport { isconnected } from \"../UtilTools/isconnected\";\r\nimport { get, has, set } from \"../UtilTools/reflect\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { onevent } from \"./handle-onevent\";\r\nimport { bindstatesymbol } from \"./render-vdom-to-real\";\r\nimport { addmountedlistner } from \"src/others/addmountedlistner\";\r\nimport { addunmountedlistner } from \"src/others/addunmountedlistner\";\r\nexport function handleprops(\r\n    element: HTMLElement | Element | SVGSVGElement | SVGElement,\r\n    vdom: Virtualdom<any>\r\n) {\r\n    const attribute1: Record<string, any> = createeleattr(element);\r\n    Object.assign(attribute1, vdom.props);\r\n    let cancelarr: undefined | Array<() => void>;\r\n    addmountedlistner(element, () => {\r\n        cancelarr = Object.entries(vdom.bindattr).map(\r\n            ([key, primitivestate]) => {\r\n                attribute1[key] = primitivestate.valueOf();\r\n                return watch(primitivestate, () => {\r\n                    const state = primitivestate;\r\n                    if (isconnected(element)) {\r\n                        attribute1[key] = state.valueOf();\r\n                    }\r\n                });\r\n            }\r\n        );\r\n    });\r\n    addunmountedlistner(element, () => {\r\n        cancelarr &&\r\n            cancelarr.forEach((f) => {\r\n                f();\r\n            });\r\n    });\r\n    Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\r\n        onevent(element, event, callbacks);\r\n    });\r\n\r\n    [...Object.values(vdom.bindattr), ...Object.values(vdom.directives)]\r\n        .flat(1 / 0)\r\n        .filter((e) => isReactiveState(e))\r\n        .forEach((e: ReactiveState<any>) => {\r\n            if (!has(element, bindstatesymbol)) {\r\n                set(element, bindstatesymbol, new Set());\r\n            }\r\n            (get(element, bindstatesymbol) as Set<ReactiveState<any>>).add(e);\r\n        });\r\n}\r\n","import { dispatchcreated } from \"src/others/addlistener-mount-unmount-updated\";\r\nimport { addmountedlistner } from \"src/others/addmountedlistner\";\r\nimport { addunmountedlistner } from \"src/others/addunmountedlistner\";\r\n\r\nimport { autocreateclass } from \"../AttributeClass/createComponent\";\r\nimport { iscomponent } from \"../AttributeClass/iscomponent\";\r\nimport Virtualdom, {\r\n    isVirtualdom,\r\n    Vdomchildren\r\n} from \"../CreateElement/VirtualElement\";\r\nimport { createcostumelemet } from \"../CustomClass/create-costum-elemet\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport watch from \"../Reactivity/watch\";\r\nimport {\r\n    changetext,\r\n    createDocumentFragment,\r\n    createElementNS,\r\n    createmathelement,\r\n    createnativeelement,\r\n    createsvgelement,\r\n    createtextnode,\r\n    mathnamespace,\r\n    svgnamespace\r\n} from \"../UtilTools/dom\";\r\nimport { isconnected } from \"../UtilTools/isconnected\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport {\r\n    isArray,\r\n    isfunction,\r\n    isnumber,\r\n    isobject,\r\n    isstring\r\n} from \"../UtilTools/util\";\r\nimport { applydirects } from \"./applydirects\";\r\nimport { handleprops } from \"./handleprops\";\r\n\r\nexport const bindstatesymbol = Symbol(\"bindstate\");\r\n\r\n/* 为了垃圾回收,所以不要给dom元素添加没必要的属性 */\r\nfunction throwinvalideletype(type?: any): never {\r\n    console.error(type);\r\n    console.error(\"invalid element type!\");\r\n    console.error(invalid_Virtualdom);\r\n    throw TypeError(/*\"invalid element type!\"*/);\r\n}\r\nexport default render;\r\nfunction render(vdom: Virtualdom<\"\">, namespace?: string): Node;\r\nfunction render(\r\n    vdom: string | ReactiveState<any> | number,\r\n    namespace?: string\r\n): Node;\r\n\r\nfunction render(\r\n    vdom: Virtualdom<string | Function>,\r\n    namespace?: string\r\n): Element;\r\n\r\nfunction render(vdom: Vdomchildren, namespace?: string): Array<Node | Element>;\r\nfunction render(\r\n    vdom: Array<string | ReactiveState<any> | number | Virtualdom<\"\">>,\r\n    namespace?: string\r\n): Array<Node>;\r\n\r\nfunction render(\r\n    vdom: Array<Virtualdom<any>>,\r\n    namespace?: string\r\n): Array<Element>;\r\n\r\nfunction render(\r\n    vdom: Virtualdom<any> | string | number | ReactiveState<any> | Vdomchildren,\r\n    namespace?: string\r\n): Array<Node | Element> | Element | Node {\r\n    if (isArray(vdom)) {\r\n        return (vdom as (\r\n            | string\r\n            | number\r\n            | ReactiveState<any>\r\n            | Virtualdom<any>\r\n        )[])\r\n            .map((a) => render(a as any))\r\n            .flat(1 / 0);\r\n    }\r\n    if (isnumber(vdom) || isstring(vdom)) {\r\n        const textnode = createtextnode(vdom);\r\n\r\n        return textnode;\r\n    } else if (isReactiveState(vdom)) {\r\n        const reactive = vdom;\r\n        const textnode = createtextnode(String(reactive));\r\n        const element = textnode;\r\n        let cancel: undefined | (() => void);\r\n        addmountedlistner(element, () => {\r\n            cancel = watch(reactive, () => {\r\n                const state = reactive;\r\n                if (isconnected(element)) {\r\n                    changetext(textnode, String(state));\r\n                }\r\n            });\r\n        });\r\n        addunmountedlistner(element, () => {\r\n            cancel && cancel();\r\n        });\r\n\r\n        set(element, bindstatesymbol, new Set());\r\n\r\n        (get(element, bindstatesymbol) as Set<ReactiveState<any>>).add(\r\n            reactive\r\n        );\r\n\r\n        return textnode;\r\n    } else if (isVirtualdom(vdom)) {\r\n        let { type } = vdom;\r\n        if (isfunction(type)) {\r\n            type = autocreateclass(type);\r\n        }\r\n        let element:\r\n            | Element\r\n            | HTMLElement\r\n            | SVGSVGElement\r\n            | SVGElement\r\n            | undefined = undefined;\r\n        if (typeof type === \"string\") {\r\n            if (type === \"script\") {\r\n                /* 禁止加载脚本 */\r\n                /* 创建一个不能运行代码的script */\r\n                return createElementNS(\"never\", \"script\");\r\n            } else if (type === \"svg\") {\r\n                /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n                element = createsvgelement();\r\n            } else if (type === \"math\") {\r\n                /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n                element = createmathelement();\r\n            } else if (\"\" === type) {\r\n                const fragmentnode = createDocumentFragment();\r\n\r\n                mount(render(vdom.children), fragmentnode);\r\n\r\n                return fragmentnode;\r\n            } else if (type === \"html\") {\r\n                const fragmentelement = createElementNS(\"never\", \"html\");\r\n\r\n                mount(render(vdom.children), fragmentelement);\r\n\r\n                return fragmentelement;\r\n            } else {\r\n                element = namespace\r\n                    ? createElementNS(namespace, type)\r\n                    : createnativeelement(type);\r\n            }\r\n        } else if (typeof type == \"function\") {\r\n            /*static defaultProps = {\r\n        name: 'Omi',\r\n        myAge: 18\r\n  }*/\r\n            if (isobject(type[\"defaultProps\"])) {\r\n                /*  改成了readonly属性 props*/\r\n                Object.assign(\r\n                    vdom.props,\r\n                    JSON.parse(\r\n                        JSON.stringify({\r\n                            ...type[\"defaultProps\"],\r\n                            ...vdom.props\r\n                        })\r\n                    )\r\n                );\r\n                /* vdom.props = JSON.parse(\r\n          JSON.stringify({ ...type[\"defaultProps\"], ...vdom.props })\r\n        ); */\r\n            }\r\n\r\n            const propsjson = JSON.parse(\r\n                JSON.stringify({\r\n                    ...vdom.props,\r\n                    ...Object.fromEntries(\r\n                        Object.entries(vdom.bindattr).map(([key, value]) => {\r\n                            return [key, value.value];\r\n                        })\r\n                    )\r\n                })\r\n            );\r\n            element = createcostumelemet(type, propsjson, vdom.children);\r\n        } else {\r\n            throwinvalideletype(vdom);\r\n        }\r\n        /* 元素已经创建出来了 */\r\n        dispatchcreated(element);\r\n\r\n        applydirects(element, vdom);\r\n        /*  if (element) {\r\n      const attribute1: { [key: string]: any } = createeleattr(element);\r\n      Object.assign(\r\n        attribute1,\r\n\r\n        /* 把属性为false的先不设置 */\r\n\r\n        /* 自定义组件不添加children,而是从构造函数传入 */\r\n        /* web components也可以设置 childnodes,比如说slot */\r\n        /* https:\r\n    /*  */\r\n\r\n        if (\r\n            type &&\r\n            (isfunction(type) || isstring(type))\r\n\r\n            /* typeof type !== \"function\" */\r\n        ) {\r\n            /* 如果自己创造的组件就不加children, */\r\n            if (!iscomponent(type)) {\r\n                if (element) {\r\n                    mount(\r\n                        vdom.children.map((e) => {\r\n                            if (type === \"svg\" && isVirtualdom(e)) {\r\n                                /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n\r\n                                return render(e, svgnamespace);\r\n                            } else if (type === \"math\" && isVirtualdom(e)) {\r\n                                return render(e, mathnamespace);\r\n                            } else if (namespace && isVirtualdom(e)) {\r\n                                return render(e, namespace);\r\n                            } else {\r\n                                return render(e as any) as any;\r\n                            }\r\n                        }),\r\n\r\n                        element\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        /* 对于select元素,设置value属性时,如果没有 找到对应的option元素,则设置失败,\r\n    \r\n    改成先加children,后设attributes,\r\n    */\r\n        if (element) {\r\n            handleprops(element, vdom);\r\n        }\r\n\r\n        return element as Node | Element;\r\n    } else {\r\n        throwinvalideletype(vdom);\r\n    }\r\n\r\n    /* console.error(vdom);\r\n  throw new Error(); */\r\n}\r\nexport { render };\r\n","import { isArray } from \"../UtilTools/util\";\r\n\r\nexport function isNodeArray(arr: any[]): arr is Node[] {\r\n    return !!(isArray(arr) && arr.length && arr.every((a) => isNode(a)));\r\n}\r\nexport function isNode(a: any): a is Node {\r\n    return a instanceof Node;\r\n}\r\n","export const invalid_Virtualdom = \"invalid Virtualdom \";\r\n\r\nimport mount from \"./mount-real-element\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isArray } from \"../UtilTools/util\";\r\nimport { isvalidvdom, VaildVDom } from \"../CreateElement/isvalidvdom\";\r\nimport { isNode, isNodeArray } from \"./isNodeArray\";\r\nexport default function MountElement<T extends Element>(\r\n    vdom: VaildVDom | Node | Element | Array<Node | Element>,\r\n    container: T\r\n): T {\r\n    if (isArray(vdom)) {\r\n        vdom = vdom.flat(Infinity);\r\n        if (!vdom.length) {\r\n            console.error(\"Empty array not allowed\");\r\n            throw new TypeError();\r\n        }\r\n    }\r\n    const el = container;\r\n    if (!(el instanceof HTMLElement)) {\r\n        console.error(el);\r\n        console.error(\"invalid container HTMLElement!\");\r\n        throw TypeError();\r\n    }\r\n\r\n    if (\r\n        el === document.body ||\r\n        el === document.documentElement ||\r\n        el === document.head\r\n    ) {\r\n        console.error(el);\r\n        console.error(\"Do not mount  to <html> or <body> <head>.\");\r\n        throw Error();\r\n    }\r\n\r\n    if (isvalidvdom(vdom)) {\r\n        const elesarray = toArray(vdom);\r\n        mount(render(elesarray), container);\r\n    } else if (isNode(vdom) || isNodeArray(vdom)) {\r\n        const elesarray = toArray(vdom);\r\n        mount(elesarray, container);\r\n    } else {\r\n        console.error(vdom);\r\n        console.error(invalid_Virtualdom);\r\n        throw TypeError();\r\n    }\r\n\r\n    //\r\n    return container;\r\n}\r\n","const proxyset: WeakSet<object> = new WeakSet();\r\nexport function isproxy(a: any): boolean {\r\n    return proxyset.has(a);\r\n}\r\n// export const proxytotarget = new WeakMap<object, object>();\r\nexport const proxytohandler = new WeakMap<object, ProxyHandler<object>>();\r\nexport function combineproxy<T extends object>(\r\n    target: T,\r\n    newhandler: ProxyHandler<T>\r\n): T {\r\n    if (isproxy(target)) {\r\n        const oldhandler = proxytohandler.get(target);\r\n        if (oldhandler) {\r\n            Object.assign(oldhandler, newhandler);\r\n        } else {\r\n            throw new TypeError();\r\n        }\r\n        return target;\r\n    } else {\r\n        const pro = new Proxy(target, newhandler);\r\n        // proxytotarget.set(pro, target);\r\n        proxytohandler.set(pro, newhandler);\r\n        proxyset.add(pro);\r\n        return pro;\r\n    }\r\n}\r\n","import { combineproxy } from \"src/others/combineproxy\";\r\n\r\nexport default function<T extends object>(target: T): T {\r\n    return combineproxy(target, {\r\n        set() {\r\n            return true;\r\n        },\r\n        defineProperty() {\r\n            return false;\r\n        },\r\n        deleteProperty() {\r\n            return false;\r\n        },\r\n        setPrototypeOf() {\r\n            return false;\r\n        }\r\n    });\r\n}\r\n","import createElement from \"../CreateElement/create-element\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\n\r\nconst componentsstylesheet: Map<string, Set<string>> = new Map();\r\n\r\nexport { componentsstylesheet };\r\n\r\nexport function createlinkstylesheet(url: string): HTMLLinkElement {\r\n    return render(\r\n        createElement(\"link\", { href: url, rel: \"stylesheet\" })\r\n    ) as HTMLLinkElement;\r\n}\r\n","import { gettagtype } from \"../UtilTools/util\";\r\n\r\nexport function isCSSStyleRule(a: any): a is CSSStyleRule {\r\n    return gettagtype(a) === \"CSSStyleRule\";\r\n}\r\nexport function isCSSMediaRule(a: any): a is CSSMediaRule {\r\n    return gettagtype(a) === \"CSSMediaRule\";\r\n}\r\nexport function isCSSImportRule(a: any): a is CSSImportRule {\r\n    return gettagtype(a) === \"CSSImportRule\";\r\n}\r\nexport function isCSSRule(a: any): a is CSSRule {\r\n    return a instanceof CSSRule;\r\n}\r\n","export function cssrulestocsstext(cssrules: Array<CSSRule>): string {\r\n    return cssrules.map((c) => c.cssText).join(\"\\n\");\r\n}\r\n","import { prefixcssrules } from \"./transform-prefix-cssrules\";\r\nimport { cssrulestocsstext } from \"./cssrulestocsstext\";\r\n\r\nexport function prefixcssmediarule(cssrule: CSSMediaRule, prefix: string) {\r\n    const rulesarr = prefixcssrules([...cssrule.cssRules], prefix);\r\n    const conditionText = cssrule.conditionText;\r\n    const cssText =\r\n        cssrule.cssText.slice(0, 7) +\r\n        conditionText +\r\n        \"{\" +\r\n        cssrulestocsstext(rulesarr) +\r\n        \"}\";\r\n    return {\r\n        cssText,\r\n        conditionText,\r\n        cssRules: rulesarr,\r\n        [Symbol.toStringTag]: \"CSSMediaRule\"\r\n    };\r\n}\r\n","export { createcssBlob };\r\nfunction createcssBlob(source: string): string {\r\n    const cachedBlob = sourcecssblobCache.get(source);\r\n    if (cachedBlob) {\r\n        return cachedBlob;\r\n    } else {\r\n        const bloburl = URL.createObjectURL(\r\n            new Blob([source], { type: \"text/css\" })\r\n        );\r\n        sourcecssblobCache.set(source, bloburl);\r\n        return bloburl;\r\n    }\r\n}\r\nconst sourcecssblobCache = new Map<string, string>();\r\n","import { componentsstylesheet } from \"./parsecss-transformcss\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport { createcssBlob } from \"./create-cssurlblob\";\r\n\r\nexport function savestyleblob(\r\n    tagname: string,\r\n    csstext?: string,\r\n    urltext?: string\r\n) {\r\n    tagname = tagname.toLowerCase();\r\n    const prefix = tagname;\r\n    if (!get(componentsstylesheet, prefix)) {\r\n        set(componentsstylesheet, tagname, new Set());\r\n    }\r\n    if (csstext) {\r\n        get(componentsstylesheet, prefix).add(createcssBlob(csstext));\r\n    } else if (urltext) {\r\n        get(componentsstylesheet, prefix).add(urltext);\r\n    }\r\n}\r\n","export function selectoraddprefix(cssstylerule: CSSStyleRule, prefix: string) {\r\n    const selectorold = cssstylerule.selectorText;\r\n    const stylebodyold = cssstylerule.cssText.slice(selectorold.length);\r\n    const selectorTextss = selectorold;\r\n\r\n    const selectorarray = selectorTextss.split(\",\");\r\n    const selectoraftertransform = selectorarray\r\n        .map((selectorTextone) => {\r\n            let prefixselector = prefix + \" \" + selectorTextone;\r\n\r\n            if (selectorTextone.startsWith(\"*\")) {\r\n                prefixselector =\r\n                    prefixselector + \",\" + selectorTextone.replace(\"*\", prefix);\r\n            }\r\n            return prefixselector;\r\n        })\r\n        .join(\",\");\r\n\r\n    /*   cssstylerule.selectorText = selectoraftertransform;\r\n    if (cssstylerule.selectorText.startsWith(prefix)) {\r\n      return cssstylerule;\r\n    } else { */\r\n\r\n    return {\r\n        selectorText: selectoraftertransform,\r\n        cssText: selectoraftertransform + stylebodyold,\r\n\r\n        [Symbol.toStringTag]: \"CSSStyleRule\"\r\n    };\r\n\r\n    /*\r\n    const prefixselector = prefix + \" \" + selectorText;\r\n    if (selectorText.startsWith(\"*\")) {\r\n      cssstylerule.selectorText =\r\n        selectorText.replace(\"*\", prefix) + \",\" + prefixselector;\r\n      \r\n\r\n    /* \r\n      *{font-size:80px !important;}\r\n  p{color:blue !important;} \r\n  */\r\n    /* \r\n      \r\n      q-9, q-9 * { font-size: 80px !important; }\r\n  q-9 p { color: blue !important; }\r\n  \r\n      */\r\n    /* } else {\r\n      cssstylerule.selectorText = prefixselector;\r\n    }\r\n  */\r\n}\r\n","import { isCSSImportRule, isCSSMediaRule, isCSSStyleRule } from \"./isCSSRule\";\r\nimport { prefixcssmediarule } from \"./prefix-cssmediarule\";\r\nimport { savestyleblob } from \"./savestyleblob\";\r\nimport { selectoraddprefix } from \"./selectoraddprefix\";\r\n\r\nexport function prefixcssrules(\r\n    cssRulesarray: Array<CSSRule>,\r\n    prefix: string\r\n): Array<CSSRule> {\r\n    return cssRulesarray\r\n        .map((cssrule: CSSRule) => {\r\n            if (isCSSStyleRule(cssrule)) {\r\n                const resultoutput = selectoraddprefix(cssrule, prefix);\r\n\r\n                return resultoutput;\r\n            } else if (isCSSMediaRule(cssrule)) {\r\n                return prefixcssmediarule(cssrule, prefix);\r\n            } else if (isCSSImportRule(cssrule)) {\r\n                savestyleblob(prefix, undefined, cssrule.href);\r\n                return;\r\n            } else {\r\n                return cssrule;\r\n            }\r\n        })\r\n        .filter(Boolean) as Array<CSSRule>;\r\n}\r\n","import { render } from \"../RenderVirtual/render-vdom-to-real\";\r\nimport createElement from \"../CreateElement/create-element\";\r\nimport { createanotherhtmldocument, appendchild } from \"../UtilTools/dom\";\r\nimport { get } from \"../UtilTools/reflect\";\r\n\r\nexport function parsecsstext(text: string): Array<CSSRule> {\r\n    const styleelement = render(\r\n        createElement(\"style\", [text])\r\n    ) as HTMLStyleElement;\r\n\r\n    const otherdocument = createanotherhtmldocument();\r\n    appendchild(otherdocument.documentElement, styleelement);\r\n\r\n    return Array.from(\r\n        get(\r\n            get(styleelement, \"sheet\"),\r\n\r\n            \"cssRules\"\r\n        )\r\n    );\r\n}\r\n","import { prefixcssrules } from \"./transform-prefix-cssrules\";\r\nimport { cssrulestocsstext } from \"./cssrulestocsstext\";\r\nimport { parsecsstext } from \"./parsecsstext\";\r\n\r\nexport function transformcsstext(text: string, prefix: string): string {\r\n    const cachedtext = oldcsstotransformedcss.get(text);\r\n    if (cachedtext) {\r\n        return cachedtext;\r\n    } else {\r\n        const css = text;\r\n        const cssomold = parsecsstext(css);\r\n        const cssomnew = prefixcssrules(cssomold, prefix).filter(Boolean);\r\n\r\n        const cssnewtext = cssrulestocsstext(cssomnew);\r\n\r\n        oldcsstotransformedcss.set(text, cssnewtext);\r\n        return cssnewtext;\r\n    }\r\n}\r\nconst oldcsstotransformedcss = new Map<string, string>();\r\n","import { transformcsstext } from \"./transformcsstext\";\r\nimport { savestyleblob } from \"./savestyleblob\";\r\n\r\nexport function registercssprefix(text: string, prefix: string) {\r\n    const css = text;\r\n    const cssnewtext = transformcsstext(css, prefix);\r\n\r\n    savestyleblob(prefix, cssnewtext);\r\n}\r\n","import { appendchild } from \"../UtilTools/dom\";\r\n\r\nexport function loadlinkstyle(\r\n    stylelinkelement: HTMLElement,\r\n    container: HTMLElement | Element | SVGSVGElement | SVGElement\r\n): Promise<void> {\r\n    return new Promise((rs) => {\r\n        const loaderrorfun = () => {\r\n            stylelinkelement.onload = stylelinkelement.onerror = null;\r\n            rs();\r\n        };\r\n        stylelinkelement.onload = loaderrorfun;\r\n        stylelinkelement.onerror = loaderrorfun;\r\n        appendchild(container, stylelinkelement);\r\n    });\r\n}\r\n","import {\r\n    componentsstylesheet,\r\n    createlinkstylesheet\r\n} from \"./parsecss-transformcss\";\r\nimport { querySelectorAll } from \"../UtilTools/dom\";\r\nimport { get } from \"../UtilTools/reflect\";\r\nimport { loadlinkstyle } from \"./loadlinkstyle\";\r\n\r\nexport function waitloadallstyle(\r\n    prefix: string,\r\n    containerthis: Element | HTMLElement | SVGSVGElement | SVGElement\r\n) {\r\n    return Promise.all(\r\n        [...get(componentsstylesheet, prefix)].map((styleurl) => {\r\n            if (\r\n                querySelectorAll(`link[rel=\"stylesheet\"][href=\"${styleurl}\"]`)\r\n                    .length\r\n            ) {\r\n                return Promise.resolve();\r\n            } else {\r\n                return loadlinkstyle(\r\n                    createlinkstylesheet(styleurl),\r\n                    containerthis\r\n                );\r\n            }\r\n        })\r\n    );\r\n}\r\n","export function setimmediate(fun: Function) {\r\n    return Promise.resolve().then(() => fun());\r\n}\r\n","import ReactiveState, { removeallistenerssymbol } from \"./reactivestate.js\";\r\nexport function unwatch(state: ReactiveState<any>): void {\r\n    state[removeallistenerssymbol]();\r\n}\r\n","import {\r\n    innerstatesymbol,\r\n    innerwatchrecords\r\n} from \"../AttributeClass/createComponent\";\r\n\r\nimport { isNode } from \"../MountElement/isNodeArray\";\r\n\r\nimport ReactiveState, {\r\n    addonelistner,\r\n    dispatchsymbol,\r\n    removeonelistner\r\n} from \"../Reactivity/reactivestate.js\";\r\nimport { rewatch } from \"../Reactivity/rewatch\";\r\nimport { unwatch } from \"../Reactivity/unwatch\";\r\nimport {\r\n    readdlisteners,\r\n    removelisteners\r\n} from \"../RenderVirtual/handle-onevent\";\r\nimport { bindstatesymbol } from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { getchildNodes } from \"../UtilTools/dom\";\r\nimport { get, has } from \"../UtilTools/reflect\";\r\nimport { isArray } from \"../UtilTools/util\";\r\nimport { Listener } from \"src/Reactivity/custom-observer-target\";\r\n\r\nexport function onmounted(ele: Element | Node | Array<Node>) {\r\n    if (isArray(ele)) {\r\n        ele.forEach((e) => {\r\n            onmounted(e);\r\n        });\r\n    } else if (isNode(ele)) {\r\n        readdlisteners(ele);\r\n\r\n        if (has(ele, bindstatesymbol)) {\r\n            (get(ele, bindstatesymbol) as ReactiveState<any>[]).forEach(\r\n                (state: ReactiveState<any>) => {\r\n                    rewatch(state);\r\n\r\n                    state[dispatchsymbol]();\r\n                }\r\n            );\r\n        }\r\n        if (has(ele, innerstatesymbol)) {\r\n            (get(ele, innerstatesymbol) as ReactiveState<any>[]).forEach(\r\n                (state: ReactiveState<any>) => {\r\n                    rewatch(state);\r\n                }\r\n            );\r\n        }\r\n\r\n        /* 记录组件中使用的watch的state和callback,\r\n组件卸载时removeeventlistener,\r\n组件挂载时addeventlistener\r\n*/\r\n        if (has(ele, innerwatchrecords)) {\r\n            const watchrecords = get(ele, innerwatchrecords) as [\r\n                ReactiveState<any>,\r\n                Listener\r\n            ][];\r\n            watchrecords.forEach(([state, eventlistener]) => {\r\n                if (eventlistener) {\r\n                    state[addonelistner](eventlistener);\r\n                }\r\n            });\r\n        }\r\n        onmounted(getchildNodes(ele));\r\n    }\r\n\r\n    //\r\n}\r\nexport function onunmounted(ele: Element | Node | Array<Node>) {\r\n    if (isArray(ele)) {\r\n        ele.forEach((e) => {\r\n            onunmounted(e);\r\n        });\r\n    } else if (isNode(ele)) {\r\n        removelisteners(ele);\r\n\r\n        /*   if (ele[bindstatesymbol]) {\r\n      ele[bindstatesymbol].forEach((state: ReactiveState) => {\r\n        unwatch(state);\r\n      });\r\n */\r\n\r\n        //\r\n\r\n        if (has(ele, innerstatesymbol)) {\r\n            (get(ele, innerstatesymbol) as ReactiveState<any>[]).forEach(\r\n                (state: ReactiveState<any>) => {\r\n                    unwatch(state);\r\n                }\r\n            );\r\n        }\r\n        if (has(ele, innerwatchrecords)) {\r\n            const watchrecords = get(ele, innerwatchrecords) as [\r\n                ReactiveState<any>,\r\n                Listener\r\n            ][];\r\n            watchrecords.forEach(([state, eventlistener]) => {\r\n                if (eventlistener) {\r\n                    state[removeonelistner](eventlistener);\r\n                }\r\n            });\r\n        }\r\n        onunmounted(getchildNodes(ele));\r\n    }\r\n}\r\n","export const readysymbol = Symbol(\"readystate\");\r\n","import createeleattragentreadwrite from \"@masx200/dom-element-attribute-agent-proxy\";\r\n\r\nimport {\r\n    onmounted,\r\n    onunmounted\r\n} from \"../life-cycle-context/element-onmount-unmount\";\r\nimport { get } from \"../UtilTools/reflect\";\r\nimport { isFunction, isfunction, isobject } from \"../UtilTools/util\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nimport { setimmediate } from \"src/UtilTools/setimmediate\";\r\n\r\nexport const attributeChangedCallback = Symbol(\"attributeChanged\");\r\nexport const firstinstalledcallback = Symbol(\"firstinstalled\");\r\n/* \r\n\r\n super.disconnectedCallback();\r\n\r\n 被babel转换之后这句就没了?\r\n\r\n  connectedCallback() {\r\n            \r\n                ))();\r\n            }\r\n            disconnectedCallback() {\r\n               \r\n                ))();\r\n            }\r\n*/\r\nexport function connectedCallback(componentelement: HTMLElement) {\r\n    AttrChange.prototype.connectedCallback.call(componentelement);\r\n}\r\n\r\nexport function disconnectedCallback(componentelement: HTMLElement) {\r\n    AttrChange.prototype.disconnectedCallback.call(componentelement);\r\n}\r\nexport class AttrChange extends HTMLElement {\r\n    disconnectedCallback() {\r\n        setimmediate(() => {\r\n            onunmounted(this);\r\n        });\r\n    }\r\n    connectedCallback() {\r\n        setimmediate(() => {\r\n            if (!this[readysymbol]) {\r\n                this[readysymbol] = true;\r\n                const callback = get(this, firstinstalledcallback);\r\n                if (isfunction(callback)) {\r\n                    setimmediate(() => {\r\n                        callback.call(this);\r\n                    });\r\n                }\r\n            }\r\n            onmounted(this);\r\n        });\r\n    }\r\n    [readysymbol] = false;\r\n\r\n    constructor() {\r\n        super();\r\n        const defaultProps = get(this.constructor, \"defaultProps\");\r\n\r\n        const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n\r\n        if (isobject(defaultProps)) {\r\n            /*     if (!this[attributessymbol]) {\r\n        this[attributessymbol] = {};\r\n      } */\r\n            Object.assign(attrs, defaultProps);\r\n        }\r\n\r\n        new MutationObserver((mutations) => {\r\n            mutations.forEach((mutation) => {\r\n                if (mutation.type == \"attributes\") {\r\n                    console.log(\r\n                        \"The \" +\r\n                            mutation.attributeName +\r\n                            \" attribute was modified.\"\r\n                    );\r\n                    const callback = get(this, attributeChangedCallback);\r\n\r\n                    let qualifiedName = mutation.attributeName;\r\n                    if (qualifiedName && isFunction(callback)) {\r\n                        callback.call(this, qualifiedName);\r\n                    }\r\n                }\r\n            });\r\n        }).observe(this, { attributes: true });\r\n    }\r\n\r\n    /*  defaultProps?: { [key: string]: any } | undefined;\r\n  css?: string | undefined; */\r\n    /* constructor() {\r\n    super();\r\n  } */\r\n\r\n    //\r\n\r\n    /* constructor() {\r\n    super();\r\n  } */\r\n\r\n    /* disconnectedCallback() {\r\n  \r\n} */\r\n    /* connectedCallback() {\r\n  \r\n  updateStyle(this);\r\n} */\r\n    //\r\n\r\n    /* attributeChangedCallback(name, oldValue, newValue) {\r\n  \r\n  updateStyle(this);\r\n} */\r\n}\r\n","import createeleattragentreadwrite from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { getcreated } from \"src/life-cycle-context/created-get\";\r\nimport { getupdated } from \"src/life-cycle-context/updated-get\";\r\nimport { addcreatedlistner } from \"src/others/addcreatedlistner\";\r\nimport { addmountedlistner } from \"src/others/addmountedlistner\";\r\nimport { addunmountedlistner } from \"src/others/addunmountedlistner\";\r\nimport {\r\n    addstopupdatelistener,\r\n    addupdatedlistner\r\n} from \"src/others/addupdatedlistner\";\r\nimport { isvalidvdom } from \"../CreateElement/isvalidvdom\";\r\nimport Virtualdom, { Vdomchildren } from \"../CreateElement/VirtualElement\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\nimport { isclassextendsHTMLElement } from \"../CustomClass/isclassextendsHTMLElement\";\r\nimport {\r\n    closectx,\r\n    getstates,\r\n    getwatchrecords,\r\n    invalid_Function,\r\n    openctx\r\n} from \"../life-cycle-context/Component-context\";\r\nimport { getMounted } from \"../life-cycle-context/getMounted\";\r\nimport { getUnMounted } from \"../life-cycle-context/getUnMounted\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport { cached_create_componet } from \"../others/cached-map\";\r\nimport ReactiveState, { dispatchsymbol } from \"../Reactivity/reactivestate.js\";\r\nimport readonlyproxy from \"../Reactivity/readonly-proxy\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { componentsstylesheet } from \"../ScopedCSS/parsecss-transformcss\";\r\nimport { registercssprefix } from \"../ScopedCSS/registercssprefix\";\r\nimport { waitloadallstyle } from \"../ScopedCSS/waitloadallstyle\";\r\nimport { seteletext } from \"../UtilTools/dom\";\r\nimport { apply, get, set } from \"../UtilTools/reflect\";\r\nimport { setimmediate } from \"../UtilTools/setimmediate\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isfunction, isobject, isstring } from \"../UtilTools/util\";\r\nimport {\r\n    AttrChange,\r\n    attributeChangedCallback,\r\n    connectedCallback,\r\n    disconnectedCallback,\r\n    firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\n\r\nconst waittranformcsssymbol = Symbol(\"waittranformcss\");\r\nexport const innerwatchrecords = Symbol(\"innerwatchrecord\");\r\nexport const innerstatesymbol = Symbol(\"innerstate\");\r\nexport const attributessymbol = Symbol(\"attributes\");\r\nconst elementsymbol = Symbol(\"innerelement\");\r\nconst inner_vdom_symbol = Symbol(\"innervdom\");\r\n\r\nexport interface Htmlelementconstructor {\r\n    new (): HTMLElement;\r\n    prototype: HTMLElement;\r\n    defaultProps?: Record<string, any>;\r\n    css?: string;\r\n}\r\nfunction createComponentold(custfun: Custom): Htmlelementconstructor {\r\n    if (isfunction(custfun)) {\r\n        const cached_class = cached_create_componet.get(custfun);\r\n        if (cached_class) {\r\n            return cached_class;\r\n        }\r\n\r\n        const defaultProps = get(custfun, \"defaultProps\");\r\n        const css = get(custfun, \"css\");\r\n        class Component extends AttrChange {\r\n            [innerwatchrecords]: [ReactiveState<any>, Function][];\r\n            [attributessymbol]: Record<string, ReactiveState<any>> = {};\r\n\r\n            [waittranformcsssymbol]: undefined | (() => Promise<void>);\r\n            constructor(\r\n                propsjson: Record<string, any> = {},\r\n                children: Vdomchildren = []\r\n            ) {\r\n                super();\r\n\r\n                const css = get(this.constructor, \"css\");\r\n\r\n                if (css) {\r\n                    const prefix = this.tagName.toLowerCase();\r\n                    if (!get(componentsstylesheet, prefix)) {\r\n                        set(componentsstylesheet, prefix, new Set());\r\n\r\n                        this[waittranformcsssymbol] = () => {\r\n                            return setimmediate(() => {\r\n                                registercssprefix(css, prefix);\r\n                            });\r\n                        };\r\n                    }\r\n                }\r\n\r\n                const attrs: Record<string, any> = createeleattragentreadwrite(\r\n                    this\r\n                );\r\n\r\n                if (isobject(propsjson)) {\r\n                    Object.assign(attrs, propsjson);\r\n                }\r\n\r\n                const props = attrs;\r\n                openctx();\r\n\r\n                const propattributess = Object.fromEntries(\r\n                    Object.entries(props).map(([key]) => [\r\n                        key,\r\n                        (() => {\r\n                            const attributes = createeleattragentreadwrite(\r\n                                this\r\n                            ) as Record<string, any>;\r\n                            const state = new ReactiveState({\r\n                                get() {\r\n                                    return get(attributes, key);\r\n                                }\r\n                            });\r\n                            // defineProperty(state, \"value\", {\r\n                            //     get() {\r\n                            //         return get(attributes, key);\r\n                            //     }\r\n                            // });\r\n\r\n                            return state;\r\n                        })()\r\n                    ])\r\n                );\r\n                this[attributessymbol] = propattributess;\r\n\r\n                const readonlyprop = readonlyproxy(\r\n                    Object.fromEntries(\r\n                        Object.entries(propattributess).map(([key, value]) => [\r\n                            key,\r\n                            readonlyproxy(value)\r\n                        ])\r\n                    )\r\n                );\r\n\r\n                let possiblyvirtualdom:\r\n                    | string\r\n                    | Virtualdom<any>\r\n                    | ReactiveState<any>\r\n                    | (string | Virtualdom<any> | ReactiveState<any>)[]\r\n                    | any;\r\n                try {\r\n                    possiblyvirtualdom = apply(custfun, undefined, [\r\n                        readonlyprop,\r\n                        children.flat(1 / 0)\r\n                    ]);\r\n                } catch (error) {\r\n                    closectx();\r\n                    console.error(\"error in component\");\r\n                    throw error;\r\n                }\r\n\r\n                possiblyvirtualdom = toArray(possiblyvirtualdom);\r\n                if (isvalidvdom(possiblyvirtualdom)) {\r\n                    const vdomarray = toArray(possiblyvirtualdom);\r\n                    //\r\n                    this[inner_vdom_symbol] = vdomarray\r\n                        .flat(Infinity)\r\n                        .filter(Boolean);\r\n                    const mountedcallbacks = getMounted();\r\n                    const unmountedcallbacks = getUnMounted();\r\n                    const createdcallbacks = getcreated();\r\n                    const updatedcallbacks = getupdated();\r\n                    this[innerstatesymbol] = getstates();\r\n                    this[innerwatchrecords] = getwatchrecords();\r\n                    closectx();\r\n                    mountedcallbacks.forEach((callback) => {\r\n                        addmountedlistner(this, callback);\r\n                    });\r\n                    unmountedcallbacks.forEach((callback) => {\r\n                        addunmountedlistner(this, callback);\r\n                    });\r\n                    createdcallbacks.forEach((callback) => {\r\n                        addcreatedlistner(this, callback);\r\n                    });\r\n                    updatedcallbacks.forEach((callback) => {\r\n                        addupdatedlistner(this, callback);\r\n                    });\r\n                    addstopupdatelistener(this);\r\n                } else {\r\n                    closectx();\r\n                    console.error(possiblyvirtualdom);\r\n                    console.error(invalid_Virtualdom);\r\n                    throw TypeError();\r\n                }\r\n            }\r\n\r\n            [innerstatesymbol]: Array<ReactiveState<any>>;\r\n            static [componentsymbol] = componentsymbol;\r\n            static css = isstring(css) && css ? css : undefined;\r\n            [readysymbol] = false;\r\n\r\n            static defaultProps = isobject(defaultProps)\r\n                ? JSON.parse(JSON.stringify(defaultProps))\r\n                : undefined;\r\n\r\n            [elementsymbol]: Array<Node>;\r\n            [inner_vdom_symbol]: Array<\r\n                Virtualdom<any> | ReactiveState<any> | string | number\r\n            >;\r\n\r\n            [firstinstalledcallback]() {\r\n                const thencallbackfirst = () => {\r\n                    seteletext(this, \"\");\r\n\r\n                    return waitloadallstyle(prefix, document.head);\r\n                };\r\n                const thencallbacksecond = () => {\r\n                    mount(this[elementsymbol], this, false);\r\n                    this[waittranformcsssymbol] = undefined;\r\n                };\r\n                if (!this[elementsymbol]) {\r\n                    const innervdom = this[inner_vdom_symbol];\r\n                    if (innervdom) {\r\n                        this[elementsymbol] = render(innervdom).flat(Infinity);\r\n                        this[inner_vdom_symbol] = [];\r\n                    }\r\n                }\r\n\r\n                const css = get(this.constructor, \"css\");\r\n                const prefix = this.tagName.toLowerCase();\r\n                if (css) {\r\n                    const waitcallback = this[waittranformcsssymbol];\r\n                    if (waitcallback) {\r\n                        waitcallback()\r\n                            .then(thencallbackfirst)\r\n                            .then(thencallbacksecond);\r\n                    } else {\r\n                        Promise.resolve(thencallbackfirst).then(\r\n                            thencallbacksecond\r\n                        );\r\n                    }\r\n                } else {\r\n                    mount(this[elementsymbol], this);\r\n                }\r\n            }\r\n            connectedCallback() {\r\n                setimmediate(() => {\r\n                    connectedCallback(this);\r\n                });\r\n            }\r\n            disconnectedCallback() {\r\n                setimmediate(() => {\r\n                    disconnectedCallback(this);\r\n                });\r\n            }\r\n            [attributeChangedCallback](name: string) {\r\n                if (this[readysymbol]) {\r\n                    {\r\n                        const propreactivestate = this[attributessymbol][name];\r\n\r\n                        if (propreactivestate) {\r\n                            propreactivestate[dispatchsymbol]();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        cached_create_componet.set(custfun, Component);\r\n        return Component;\r\n    } else {\r\n        console.error(custfun);\r\n        console.error(invalid_Function);\r\n        throw TypeError();\r\n    }\r\n}\r\n\r\nconst createComponent = (custfun: Custom | Htmlelementconstructor) =>\r\n    autocreateclass(custfun);\r\nexport default createComponent;\r\nexport function autocreateclass(\r\n    custfun: Custom | Htmlelementconstructor\r\n): Htmlelementconstructor {\r\n    if (isclassextendsHTMLElement(custfun)) {\r\n        return custfun;\r\n    } else if (isfunction(custfun)) {\r\n        return createComponentold(custfun);\r\n    } else {\r\n        throw TypeError();\r\n    }\r\n}\r\nexport { createComponent };\r\n","export default h;\r\n\r\nexport { h };\r\nimport {\r\n    autocreateclass,\r\n    Htmlelementconstructor\r\n} from \"../AttributeClass/createComponent\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { apply } from \"../UtilTools/reflect\";\r\nimport {\r\n    isarray,\r\n    isfunction,\r\n    isplainobject,\r\n    isstring\r\n} from \"../UtilTools/util\";\r\nimport Virtualdom, {\r\n    createVirtualElement,\r\n    Vdomchildren\r\n} from \"./VirtualElement\";\r\ntype styleprop =\r\n    | string\r\n    | object\r\n    | ReactiveState<string>\r\n    | ReactiveState<object>;\r\n\r\ntype classprop =\r\n    | string\r\n    | Set<string>\r\n    | Array<string>\r\n    | ReactiveState<string | Set<string> | Array<string>>;\r\nexport interface ElementAttrs {\r\n    style?: styleprop;\r\n    class?: classprop;\r\n    [key: string]: any;\r\n}\r\n\r\nfunction h<T extends Htmlelementconstructor | string | Custom>(\r\n    type: T,\r\n    propsorchildren?: Vdomchildren,\r\n    ...children: Vdomchildren\r\n): Virtualdom<T>;\r\nfunction h<T extends Vdomchildren>(\r\n    type: \"\",\r\n    propsorchildren?: T,\r\n    ...children: T\r\n): T;\r\nfunction h<T extends Vdomchildren>(\r\n    type: \"\",\r\n    props?: ElementAttrs,\r\n    ...children: T\r\n): T;\r\nfunction h<T extends Htmlelementconstructor | string | Custom>(\r\n    type: T,\r\n    props?: ElementAttrs,\r\n    ...children: Vdomchildren\r\n): Virtualdom<T>;\r\n\r\n/* \r\nh(type,...children)\r\nh(type,children)\r\n*/\r\n\r\nfunction h(\r\n    type?: Htmlelementconstructor | string | Custom,\r\n    propsorchildren?: Vdomchildren | ElementAttrs,\r\n    ...children: Vdomchildren\r\n) {\r\n    if (isfunction(type)) {\r\n        type = autocreateclass(type);\r\n    }\r\n\r\n    if (isarray(propsorchildren)) {\r\n        return apply(createElement, undefined, [\r\n            type,\r\n            undefined,\r\n            [...propsorchildren, ...children].flat(1 / 0)\r\n        ]);\r\n        /*   createElement(\r\n      type,\r\n      undefined,\r\n      [...propsorchildren, ...children].flat(1 / 0)\r\n    ); */\r\n    } else {\r\n        return apply(createElement, undefined, [\r\n            type,\r\n            propsorchildren,\r\n            ...children\r\n        ]);\r\n    }\r\n}\r\nfunction createElement<T extends Vdomchildren>(\r\n    type: \"\",\r\n    props?: ElementAttrs,\r\n    ...children: T\r\n): T;\r\nfunction createElement<T extends Function | string>(\r\n    type: T,\r\n    props?: ElementAttrs,\r\n    ...children: Vdomchildren\r\n): Virtualdom<T>;\r\n\r\n/* function createElement<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T; */\r\n\r\nfunction createElement<T extends Function | string | Htmlelementconstructor>(\r\n    type?: T,\r\n    props: ElementAttrs = {},\r\n    ...children: Vdomchildren\r\n): Virtualdom<T> | Vdomchildren {\r\n    let typenormalized: \"\" | Function | string =\r\n        isstring(type) || isfunction(type) ? type : \"\";\r\n    const propsnormalized = isplainobject(props) ? props : {};\r\n    const childrennormalized: Vdomchildren = children\r\n        .flat(Infinity)\r\n        .map((a) => (a === 0 ? \"0\" : a))\r\n        .filter((a) => !!a);\r\n    if (isstring(typenormalized)) {\r\n        typenormalized = typenormalized.trim().toLowerCase();\r\n    }\r\n\r\n    if (\"\" === typenormalized) {\r\n        return childrennormalized;\r\n    } else {\r\n        /* propsnormalized = Object.fromEntries(\r\n    Object.entries(propsnormalized).map(([key, value]) => [\r\n      key.trim().toLowerCase(),\r\n      value\r\n    ])\r\n  ); */\r\n\r\n        /* return new Virtualdom(\r\n      typenormalized,\r\n      propsnormalized,\r\n      childrennormalized\r\n    ) as Virtualdom<any>;\r\n*/\r\n        return apply(createVirtualElement, undefined, [\r\n            typenormalized,\r\n            propsnormalized,\r\n            childrennormalized\r\n        ]) as Virtualdom<T>;\r\n\r\n        /*  createVirtualElement(\r\n     \r\n    ); */\r\n    }\r\n}\r\n","import watch from \"src/Reactivity/watch\";\r\nimport { get } from \"src/UtilTools/reflect\";\r\nimport { toArray } from \"src/UtilTools/toArray\";\r\n\r\nimport createElement from \"../CreateElement/create-element\";\r\nimport Virtualdom, { isVirtualdom } from \"../CreateElement/VirtualElement\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { replaceChild } from \"../UtilTools/dom\";\r\nimport { isboolean, isstring, isundefined } from \"../UtilTools/util\";\r\nimport {\r\n    AttrChange,\r\n    connectedCallback,\r\n    disconnectedCallback,\r\n    firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { Htmlelementconstructor } from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\n\r\nexport const invalid_ReactiveState = \"invalid ReactiveState\";\r\nconst truevdomsymbol = Symbol(\"truevdom\");\r\nconst falsevdomsymbol = Symbol(\"falsevdom\");\r\nconst trueelesymbol = Symbol(\"trueele\");\r\nconst falseelesymbol = Symbol(\"falseele\");\r\nconst handletrue = Symbol(\"handletrue\");\r\nconst handlefalse = Symbol(\"handlefalse\");\r\nconst currentelementsymbol = Symbol(\"currentelement\");\r\n\r\nconst Condition = function(\r\n    conditon: ReactiveState<boolean> | boolean,\r\n    iftrue?: Virtualdom<any> | string,\r\n    iffalse?: Virtualdom<any> | string\r\n): Virtualdom<Htmlelementconstructor> {\r\n    if (!(isReactiveState(conditon) || isboolean(conditon))) {\r\n        console.error(conditon);\r\n        console.error(invalid_ReactiveState);\r\n        throw TypeError();\r\n    }\r\n    [iftrue, iffalse].forEach((a) => {\r\n        if (!(isundefined(a) || isVirtualdom(a) || isstring(a))) {\r\n            console.error(a);\r\n            console.error(invalid_Virtualdom);\r\n            throw new TypeError();\r\n        }\r\n    });\r\n\r\n    const optionstrue = iftrue;\r\n    const optionsfalse = iffalse;\r\n    class Condition extends AttrChange {\r\n        [currentelementsymbol]: Node = this;\r\n        static [componentsymbol] = componentsymbol;\r\n        [readysymbol] = false;\r\n        [truevdomsymbol]: (Virtualdom<any> | string)[] = toArray(optionstrue);\r\n\r\n        /*isarray(optionstrue)\r\n    ? optionstrue.filter(Boolean)\r\n    : */\r\n\r\n        [falsevdomsymbol]: (Virtualdom<any> | string)[] = toArray(optionsfalse);\r\n\r\n        /* isarray(optionsfalse)\r\n    ? optionsfalse.filter(Boolean)\r\n    : */\r\n\r\n        [falseelesymbol]: Node[];\r\n        [trueelesymbol]: Node[];\r\n\r\n        [handlefalse]() {\r\n            if (!this[falseelesymbol]) {\r\n                this[falseelesymbol] = render(this[falsevdomsymbol]);\r\n\r\n                this[falsevdomsymbol] = [];\r\n            }\r\n\r\n            const elementtomount = this[falseelesymbol][0] || this;\r\n            replaceChild(elementtomount, this[currentelementsymbol]);\r\n            this[currentelementsymbol] = elementtomount;\r\n        }\r\n        [handletrue]() {\r\n            if (!this[trueelesymbol]) {\r\n                this[trueelesymbol] = render(this[truevdomsymbol]);\r\n\r\n                this[truevdomsymbol] = [];\r\n            }\r\n            //\r\n            const elementtomount = this[trueelesymbol][0] || this;\r\n\r\n            replaceChild(elementtomount, this[currentelementsymbol]);\r\n            this[currentelementsymbol] = elementtomount;\r\n        }\r\n        [firstinstalledcallback]() {\r\n            const handleconditionchange = (trueorfalse: boolean) => {\r\n                if (true === trueorfalse) {\r\n                    get(this, handletrue).call(this);\r\n                } else if (!trueorfalse) {\r\n                    get(this, handlefalse).call(this);\r\n                }\r\n            };\r\n\r\n            if (isReactiveState(conditon)) {\r\n                handleconditionchange(conditon.valueOf() as boolean);\r\n                watch(conditon, (trueorfalse: boolean) => {\r\n                    handleconditionchange(trueorfalse);\r\n                });\r\n            } else {\r\n                handleconditionchange(conditon);\r\n            }\r\n        }\r\n        connectedCallback() {\r\n            connectedCallback(this);\r\n\r\n            /*   if (!this[readysymbol]) {\r\n        \r\n        this[readysymbol] = true;\r\n\r\n        const attrs: { [key: string]: any } = createeleattr(this);\r\n        \r\n        if (true === attrs[\"value\"]) {\r\n          get(this, handletrue).call(this);\r\n        }\r\n        if (false === attrs[\"value\"]) {\r\n          get(this, handlefalse).call(this);\r\n          //\r\n        }\r\n      } */\r\n\r\n            //\r\n        }\r\n        disconnectedCallback() {\r\n            disconnectedCallback(this);\r\n        }\r\n    }\r\n\r\n    const vdom = createElement(Condition);\r\n\r\n    return vdom;\r\n};\r\nexport default Condition;\r\nexport { Condition };\r\n","import { h } from \"../CreateElement/create-element\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\nimport { mountrealelement } from \"../MountElement/mount-real-element\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport watch, { CancelWatchfun } from \"../Reactivity/watch\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { setimmediate } from \"../UtilTools/setimmediate\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\nimport {\r\n    AttrChange,\r\n    connectedCallback,\r\n    disconnectedCallback,\r\n    firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { autocreateclass, Htmlelementconstructor } from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\n\r\nconst cancel_watch_symbol = Symbol(\"cancel_watch\");\r\nconst cached_class_element = Symbol(\"cached_class_element\");\r\nconst switch_mount_symbol = Symbol(\"switch_mount\");\r\n\r\nexport { Switchable };\r\nfunction Switchable(\r\n    funstate: ReactiveState<Htmlelementconstructor | Custom>\r\n): Virtualdom<Htmlelementconstructor> {\r\n    if (!isReactiveState(funstate)) {\r\n        console.error(funstate);\r\n        throw new TypeError();\r\n    }\r\n    class Switchable extends AttrChange {\r\n        [cached_class_element] = new WeakMap<\r\n            Htmlelementconstructor,\r\n            Element | Node\r\n        >();\r\n        disconnectedCallback() {\r\n            setimmediate(() => {\r\n                disconnectedCallback(this);\r\n                if (isfunction(this[cancel_watch_symbol])) {\r\n                    this[cancel_watch_symbol]();\r\n                }\r\n            });\r\n        }\r\n        [cancel_watch_symbol]: CancelWatchfun;\r\n        static [componentsymbol] = componentsymbol;\r\n        [readysymbol] = false;\r\n        [switch_mount_symbol](eleclass: Custom | Htmlelementconstructor) {\r\n            eleclass = autocreateclass(eleclass);\r\n            /*  if (!isclassextendsHTMLElement(eleclass)) {\r\n        console.error(eleclass);\r\n        throw new TypeError();\r\n      } */\r\n\r\n            const eleme = this[cached_class_element].get(eleclass);\r\n            if (eleme) {\r\n                mountrealelement(eleme, this);\r\n            } else {\r\n                const elementreal = render(h(eleclass));\r\n\r\n                this[cached_class_element].set(eleclass, elementreal);\r\n                mountrealelement(elementreal, this);\r\n            }\r\n        }\r\n        [firstinstalledcallback]() {\r\n            const callmountswitch = () => {\r\n                this[switch_mount_symbol](\r\n                    funstate.valueOf() as Custom | Htmlelementconstructor\r\n                );\r\n            };\r\n            callmountswitch();\r\n            this[cancel_watch_symbol] = watch(funstate, () => {\r\n                callmountswitch();\r\n            });\r\n        }\r\n        connectedCallback() {\r\n            connectedCallback(this);\r\n            /* if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n      } */\r\n        }\r\n    }\r\n    return h(Switchable);\r\n}\r\nexport default Switchable;\r\n","var n=function(t,s,r,e){var u;s[0]=0;for(var h=1;h<s.length;h++){var p=s[h++],a=s[h]?(s[0]|=p?1:2,r[s[h++]]):s[++h];3===p?e[0]=a:4===p?e[1]=Object.assign(e[1]||{},a):5===p?(e[1]=e[1]||{})[s[++h]]=a:6===p?e[1][s[++h]]+=a+\"\":p?(u=t.apply(a,n(t,a,r,[\"\",null])),e.push(u),a[0]?s[0]|=2:(s[h-2]=0,s[h]=u)):e.push(a)}return e},t=new Map;export default function(s){var r=t.get(this);return r||(r=new Map,t.set(this,r)),(r=n(this,r.get(s)||(r.set(s,r=function(n){for(var t,s,r=1,e=\"\",u=\"\",h=[0],p=function(n){1===r&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?h.push(0,n,e):3===r&&(n||e)?(h.push(3,n,e),r=2):2===r&&\"...\"===e&&n?h.push(4,n,0):2===r&&e&&!n?h.push(5,0,!0,e):r>=5&&((e||!n&&5===r)&&(h.push(r,0,e,s),r=6),n&&(h.push(r,n,0,s),r=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===r&&p(),p(a));for(var l=0;l<n[a].length;l++)t=n[a][l],1===r?\"<\"===t?(p(),h=[h],r=3):e+=t:4===r?\"--\"===e&&\">\"===t?(r=1,e=\"\"):e=t+e[0]:u?t===u?u=\"\":e+=t:'\"'===t||\"'\"===t?u=t:\">\"===t?(p(),r=1):r&&(\"=\"===t?(r=5,s=e,e=\"\"):\"/\"===t&&(r<5||\">\"===n[a][l+1])?(p(),3===r&&(h=h[0]),r=h,(h=h[0]).push(2,0,r),r=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(p(),r=2):e+=t),3===r&&\"!--\"===e&&(r=4,h=h[0])}return p(),h}(s)),r),arguments,[])).length>1?r:r[0]}\n","import htm from \"htm\";\r\n\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport { apply } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport Virtualdom, { Vdomchildren } from \"./VirtualElement\";\r\nimport h from \"./create-element\";\r\nimport { isvalidvdom } from \"./isvalidvdom\";\r\nimport ReactiveState from \"src/Reactivity/reactivestate.js\";\r\n\r\nfunction htmlold(...inargs: any[]): Virtualdom<any> | Vdomchildren {\r\n    return apply(htm, h, inargs);\r\n}\r\n\r\nexport { html };\r\nexport default function html(\r\n    ...args: any[]\r\n): Virtualdom<any> | Vdomchildren | string | number | ReactiveState<any> {\r\n    const prevdom = toArray(htmlold(...args));\r\n\r\n    const vdom = prevdom.length === 1 ? prevdom[0] : prevdom;\r\n    if (isvalidvdom(vdom)) {\r\n        return vdom;\r\n    } else {\r\n        console.error(vdom);\r\n        console.error(invalid_Virtualdom);\r\n        throw new TypeError();\r\n    }\r\n}\r\n","interface Ref<T = any | undefined> {\r\n    value: T | undefined;\r\n}\r\n\r\nexport default function createRef<T = any | undefined>(value?: T): Ref<T> {\r\n    return { value };\r\n}\r\n","import Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { invalid_Function } from \"../life-cycle-context/Component-context\";\r\nimport { isstring } from \"../UtilTools/util\";\r\nimport directives from \"./directives\";\r\nexport interface Extendfun {\r\n    (\r\n        value: unknown,\r\n        element: Element,\r\n        vdom: Virtualdom<any>,\r\n\r\n        onmounted: (call: () => void) => void,\r\n        onunmounted: (call: () => void) => void,\r\n        onupdated: (call: () => void) => void\r\n    ): void;\r\n}\r\nexport interface ExtendOptions {\r\n    [s: string]: Extendfun;\r\n}\r\nexport { extenddirectives };\r\nexport default function extenddirectives(name: string, fun: Extendfun) {\r\n    if (!isstring(name)) {\r\n        console.error(name);\r\n        throw new TypeError();\r\n    }\r\n    if (typeof fun !== \"function\") {\r\n        console.error(fun);\r\n        console.error(invalid_Function);\r\n        throw TypeError();\r\n    } else {\r\n        if (!directives[name]) {\r\n            Reflect.set(directives, name, fun);\r\n        } else {\r\n            console.error(directives);\r\n            console.error(\"can not extend existing directive\");\r\n            throw new Error();\r\n        }\r\n    }\r\n}\r\n","import { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nexport function model(\r\n    types: string[],\r\n    bindattribute: string,\r\n    domprop: string,\r\n    eventnames: string[],\r\n    value: ReactiveState<any>,\r\n    vdom: Virtualdom<any>\r\n) {\r\n    if (!isReactiveState(value)) {\r\n        console.error(value);\r\n        console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n        throw TypeError();\r\n    }\r\n    if (types.includes(vdom.type)) {\r\n        set(vdom.bindattr, bindattribute, value);\r\n        /*  [\r\n      \r\n      \"change\",\r\n      \"input\"\r\n    ]. */\r\n        eventnames.forEach((eventname) => {\r\n            const origin = vdom.onevent[eventname];\r\n            const eventsarray = toArray(origin);\r\n            set(\r\n                vdom.onevent,\r\n                eventname,\r\n                toArray([\r\n                    ...eventsarray,\r\n                    (e: any) => {\r\n                        return (value.value = get(e.target, domprop));\r\n                    }\r\n                ]).filter(Boolean)\r\n            );\r\n        });\r\n    } else {\r\n        console.error(vdom);\r\n        console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n        throw TypeError();\r\n    }\r\n}\r\n","import Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport { querySelectorAll } from \"../UtilTools/dom\";\r\nimport { set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { model } from \"./model\";\r\nexport const Localchecked = (\r\n    value: unknown,\r\n\r\n    element: Element,\r\n    vdom: Virtualdom<any>\r\n): void => {\r\n    if (!isReactiveState(value)) {\r\n        throw new TypeError();\r\n    }\r\n    console.log(element);\r\n    model([\"input\"], \"checked\", \"checked\", [\"change\"], value, vdom);\r\n\r\n    const eventname = \"click\";\r\n    const origin = toArray(vdom.onevent[eventname]);\r\n    const eventsarray = origin;\r\n    const dispatchallsamename: EventListener = (event: Event) => {\r\n        const inputelement = event.target as HTMLInputElement;\r\n        const name = (event.target as HTMLInputElement).name;\r\n        if (name) {\r\n            querySelectorAll(`input[name=${name}]`)\r\n                .filter((ele) => ele !== inputelement)\r\n                .forEach((element) => {\r\n                    element.dispatchEvent(new Event(\"change\"));\r\n                });\r\n        }\r\n    };\r\n    set(\r\n        vdom.onevent,\r\n        eventname,\r\n        toArray([...eventsarray, dispatchallsamename]).filter(Boolean)\r\n    );\r\n};\r\n","import Virtualdom from \"src/CreateElement/VirtualElement\";\r\n\r\nexport const Localcreated = (\r\n    call: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void,\r\n    onupdated: (call: () => void) => void\r\n): void => {\r\n    console.log([call, ele, vdom, onmount, onunmount, onupdated]);\r\n    if (typeof call === \"function\") {\r\n        call();\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import { isFunction, isobject, issymbol } from \"../UtilTools/util\";\r\nimport {\r\n    get,\r\n    has,\r\n    ownKeys,\r\n    getOwnPropertyDescriptor\r\n} from \"../UtilTools/reflect\";\r\nimport { combineproxy } from \"src/others/combineproxy\";\r\n\r\nexport function getproperyreadproxy<T extends object>(a: T): T {\r\n    const __proto__ = \"__proto__\";\r\n\r\n    const target = a;\r\n    return combineproxy(target, {\r\n        getOwnPropertyDescriptor(target, key) {\r\n            if (issymbol(key)) {\r\n                return;\r\n            } else {\r\n                return getOwnPropertyDescriptor(target, key);\r\n            }\r\n        },\r\n        ownKeys(target) {\r\n            let myvalue = get(target, \"value\");\r\n            const myvalueobj = isobject(myvalue) ? myvalue : myvalue[__proto__];\r\n\r\n            return Array.from(\r\n                new Set([...ownKeys(target), ...ownKeys(myvalueobj)])\r\n            );\r\n        },\r\n        has(target, key) {\r\n            const myvalue = get(target, \"value\");\r\n            const myvalueobj = isobject(myvalue) ? myvalue : myvalue[__proto__];\r\n            return has(target, key) || has(myvalueobj, key);\r\n        },\r\n        get(target, key) {\r\n            if (has(target, key)) {\r\n                return get(target, key);\r\n            } else {\r\n                const myvalue = get(target, \"value\");\r\n                const myvalueobj = Object(myvalue);\r\n\r\n                if (has(myvalueobj, key)) {\r\n                    const property = get(myvalueobj, key);\r\n                    return isFunction(property)\r\n                        ? property.bind(myvalueobj)\r\n                        : property;\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n","import { apply } from \"src/UtilTools/reflect\";\r\nimport { isfunction, isobject, isprimitive } from \"src/UtilTools/util\";\r\nimport { SetterFun } from \"./computed\";\r\nimport { getproperyreadproxy } from \"./getproperyread-proxy\";\r\n// import watch, { any } from \"./watch\";\r\nimport { gettercallback } from \"./gettercallback\";\r\nimport ReactiveState, { dispatchsymbol } from \"./reactivestate.js\";\r\nimport { isReactiveState } from \"./isReactiveState\";\r\nimport watch from \"./watch\";\r\nimport { UnWrapState } from \"./unwrapstate\";\r\nimport { UnWrapArray } from \"./UnWrapArray\";\r\nexport function computedmany<T extends any, Y extends ReactiveState<any>[]>(\r\n    state: Y,\r\n    callback: gettercallback<T, UnWrapState<UnWrapArray<Y>>[]>,\r\n    setter?: SetterFun\r\n): ReactiveState<T> {\r\n    const getter = () => {\r\n        const value = apply(\r\n            callback,\r\n            undefined,\r\n            state.map((st) => st.valueOf())\r\n        );\r\n        const possiblevalue = isReactiveState(value) ? value.valueOf() : value;\r\n        if (isobject(possiblevalue) || isprimitive(possiblevalue)) {\r\n            return possiblevalue as T;\r\n        } else {\r\n            console.error(possiblevalue);\r\n            throw TypeError();\r\n        }\r\n    };\r\n    let memorized = getter();\r\n    const reactivestate = new ReactiveState({\r\n        set: isfunction(setter) ? setter : undefined,\r\n        get: getter\r\n    });\r\n    // defineProperty(reactivestate, \"value\", {\r\n    //     set: isfunction(setter) ? setter : undefined,\r\n    //     get: getter,\r\n    //     configurable: true\r\n    // });\r\n    state.forEach((state) => {\r\n        watch(state, () => {\r\n            let newvalue = getter();\r\n            if (newvalue !== memorized) {\r\n                reactivestate[dispatchsymbol]();\r\n                memorized = newvalue;\r\n            }\r\n            //\r\n        });\r\n    });\r\n    return getproperyreadproxy(reactivestate);\r\n}\r\n","import { invalid_ReactiveState } from \"src/AttributeClass/conditon\";\r\nimport { invalid_Function } from \"src/life-cycle-context/Component-context\";\r\nimport { toArray } from \"src/UtilTools/toArray\";\r\nimport { isArray, isFunction } from \"src/UtilTools/util\";\r\nimport { computedmany } from \"./computedmany\";\r\n// import { any } from \"./watch\";\r\nimport { gettercallback } from \"./gettercallback\";\r\nimport ReactiveState from \"./reactivestate.js\";\r\nimport { isReactiveState } from \"./isReactiveState\";\r\nimport { UnWrapState } from \"./unwrapstate\";\r\nimport { UnWrapArray } from \"./UnWrapArray\";\r\nfunction computed<T extends any, Y extends ReactiveState<any>>(\r\n    state: Y,\r\n    callback: gettercallback<T, [UnWrapState<Y>]>,\r\n    setter?: SetterFun\r\n): ReactiveState<T>;\r\nfunction computed<T extends any, Y extends ReactiveState<any>[]>(\r\n    state: Y,\r\n    callback: gettercallback<T, UnWrapState<UnWrapArray<Y>>[]>,\r\n    setter?: SetterFun\r\n): ReactiveState<T>;\r\nfunction computed(\r\n    state: ReactiveState<any> | Array<ReactiveState<any>>,\r\n    callback: gettercallback<any, any[]>,\r\n    setter?: SetterFun\r\n): ReactiveState<any> {\r\n    if (!((isArray(state) || isReactiveState(state)) && isFunction(callback))) {\r\n        console.error(state);\r\n        console.error(callback);\r\n        console.error(invalid_ReactiveState + invalid_Function);\r\n\r\n        throw TypeError();\r\n    }\r\n    const state1array: ReactiveState<any>[] = toArray(state);\r\n    if (!state1array.length) {\r\n        console.error(\"Empty array not allowed\");\r\n        throw new Error();\r\n    }\r\n\r\n    const state1 = computedmany(state1array, callback, setter);\r\n\r\n    return state1;\r\n}\r\nexport default computed;\r\nexport type SetterFun = (v: any) => void;\r\n// export { computed };\r\n","import Virtualdom, { isVirtualdom } from \"src/CreateElement/VirtualElement\";\r\nimport computed from \"src/Reactivity/computed\";\r\nimport ReactiveState from \"src/Reactivity/reactivestate\";\r\nexport function generatechildrenvdoms(\r\n    liststate: ReactiveState<Array<any>>,\r\n    fun: (v: ReactiveState<any>, i: number) => Virtualdom<any>\r\n) {\r\n    const data = liststate.valueOf();\r\n    const childs = new Array(data.length).fill(undefined).map((v, index) => {\r\n        const vdom = Reflect.apply(fun, undefined, [\r\n            computed(liststate, (arr: any[]) => arr[index]),\r\n            index\r\n        ]);\r\n        if (!isVirtualdom(vdom)) {\r\n            throw new TypeError();\r\n        }\r\n        return vdom;\r\n    });\r\n    return childs;\r\n}\r\n","import Virtualdom from \"src/CreateElement/VirtualElement\";\r\nimport { isReactiveState } from \"src/Reactivity/isReactiveState\";\r\nimport watch from \"src/Reactivity/watch\";\r\nimport render from \"src/RenderVirtual/render-vdom-to-real\";\r\nimport { removeNode } from \"src/UtilTools/dom\";\r\nimport { isarray, isfunction } from \"src/UtilTools/util\";\r\nimport { generatechildrenvdoms } from \"./generatechildrenvdoms\";\r\n\r\n/* interface attrfor<T> extends Array<any> {\r\n    0: ReactiveState<Array<T>>;\r\n    1: (v: ReactiveState<T>, i: number) => Virtualdom<any>;\r\n} */\r\nexport const localfor = (\r\n    value: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void,\r\n    onupdated: (call: () => void) => void\r\n) => {\r\n    if (!Array.isArray(value)) {\r\n        throw TypeError();\r\n    }\r\n    const [list, fun] = value;\r\n    if (!isReactiveState(list) || !isfunction(fun)) {\r\n        throw TypeError();\r\n    }\r\n\r\n    vdom.children.length = 0;\r\n    // const childs = generatechildrenvdoms(list, fun);\r\n    // childs.forEach((vd) => {\r\n    //     vdom.children.push(vd);\r\n    // });\r\n    const changecallback = () => {\r\n        const data = list.valueOf();\r\n        if (!isarray(data)) {\r\n            throw TypeError();\r\n        }\r\n        const oldlength = ele.childNodes.length;\r\n        const newlength = data.length;\r\n        const minlength = Math.min(oldlength, newlength);\r\n\r\n        if (newlength < oldlength) {\r\n            ele.childNodes.forEach((n, i) => {\r\n                if (i > minlength - 1) {\r\n                    removeNode(n);\r\n                }\r\n            });\r\n        } else if (newlength > oldlength) {\r\n            const childs = generatechildrenvdoms(list, fun);\r\n\r\n            const nodes = render(childs.slice(minlength));\r\n\r\n            nodes.forEach((n, i) => {\r\n                ele.appendChild(n);\r\n            });\r\n        }\r\n    };\r\n\r\n    console.log(value, ele, vdom, onmount, onunmount, onupdated);\r\n    onmount(changecallback);\r\n    onmount(() => {\r\n        const cancel = watch(list, changecallback);\r\n        onunmount(cancel);\r\n    });\r\n};\r\n","import ReactiveState from \"../Reactivity/reactivestate.js\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport watch from \"../Reactivity/watch\";\r\nimport { isconnected } from \"../UtilTools/isconnected\";\r\nimport { isstring } from \"../UtilTools/util\";\r\n\r\nexport { createhtmlandtextdirective };\r\nfunction createhtmlandtextdirective(\r\n    seteletext: {\r\n        (e: Element, v: string): void;\r\n    },\r\n    errorname: string,\r\n    ele: Element,\r\n    text: string | ReactiveState<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void\r\n) {\r\n    {\r\n        const element = ele;\r\n        if (isstring(text)) {\r\n            requestAnimationFrame(() => {\r\n                seteletext(ele, text);\r\n            });\r\n        } else if (isReactiveState(text)) {\r\n            let cancel: undefined | (() => void);\r\n            onmount(() => {\r\n                cancel = watch(text, () => {\r\n                    const state = text;\r\n                    if (isconnected(element)) {\r\n                        seteletext(ele, String(state));\r\n                    }\r\n                });\r\n            });\r\n            onunmount(() => {\r\n                cancel && cancel();\r\n            });\r\n            requestAnimationFrame(() => {\r\n                seteletext(ele, String(text));\r\n            });\r\n        } else {\r\n            console.error(text);\r\n            console.error(\"invalid \" + errorname);\r\n            throw TypeError();\r\n        }\r\n    }\r\n}\r\n","import Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport { setelehtml } from \"../UtilTools/dom\";\r\nimport { isstring } from \"../UtilTools/util\";\r\nimport { createhtmlandtextdirective } from \"./create-html-and-text-directive\";\r\nexport const Localhtml = (\r\n    html: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void\r\n) => {\r\n    if (isstring(html) || isReactiveState(html)) {\r\n        console.log(vdom);\r\n        vdom.children.length = 0;\r\n        createhtmlandtextdirective(\r\n            setelehtml,\r\n            \"html\",\r\n            ele,\r\n            html,\r\n            onmount,\r\n            onunmount\r\n        );\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import { apply } from \"../UtilTools/reflect\";\r\nimport Virtualdom from \"src/CreateElement/VirtualElement\";\r\nexport const Localmounted = (\r\n    call: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void\r\n): void => {\r\n    console.log([call, ele, vdom, onmount, onunmount]);\r\n    if (typeof call === \"function\") {\r\n        apply(onmount, undefined, [call]);\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { apply, set } from \"../UtilTools/reflect\";\r\nimport { isfunction, isobject } from \"../UtilTools/util\";\r\nexport const Localref = (\r\n    ref: unknown,\r\n    ele: Element,\r\n    _vdom: Virtualdom<any>\r\n) => {\r\n    if (isfunction(ref)) {\r\n        apply(ref, undefined, [ele]);\r\n    } else if (isobject(ref)) {\r\n        set(ref, \"value\", ele);\r\n    } else {\r\n        console.log(_vdom);\r\n        console.error(ref);\r\n        console.error(\"invalid ref\");\r\n        throw TypeError();\r\n    }\r\n};\r\n","import Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport { seteletext } from \"../UtilTools/dom\";\r\nimport { isstring } from \"../UtilTools/util\";\r\nimport { createhtmlandtextdirective } from \"./create-html-and-text-directive\";\r\nexport const Localtext = (\r\n    text: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void\r\n) => {\r\n    if (isstring(text) || isReactiveState(text)) {\r\n        console.log(vdom);\r\n        vdom.children.length = 0;\r\n\r\n        createhtmlandtextdirective(\r\n            seteletext,\r\n            \"text\",\r\n            ele,\r\n            text,\r\n            onmount,\r\n            onunmount\r\n        );\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import { apply } from \"../UtilTools/reflect\";\r\nimport Virtualdom from \"src/CreateElement/VirtualElement\";\r\nexport const Localunmounted = (\r\n    call: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void\r\n): void => {\r\n    console.log([call, ele, vdom, onmount, onunmount]);\r\n    if (typeof call === \"function\") {\r\n        apply(onunmount, undefined, [call]);\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import { apply } from \"../UtilTools/reflect\";\r\nimport Virtualdom from \"src/CreateElement/VirtualElement\";\r\nexport const Localupdated = (\r\n    call: unknown,\r\n    ele: Element,\r\n    vdom: Virtualdom<any>,\r\n    onmount: (call: () => void) => void,\r\n    onunmount: (call: () => void) => void,\r\n    onupdated: (call: () => void) => void\r\n): void => {\r\n    console.log([call, ele, vdom, onmount, onunmount]);\r\n    if (typeof call === \"function\") {\r\n        apply(onupdated, undefined, [call]);\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import { isReactiveState } from \"../Reactivity/isReactiveState\";\r\nimport { model } from \"./model\";\r\nimport Virtualdom from \"src/CreateElement/VirtualElement.js\";\r\nexport const Localvalue = (\r\n    value: unknown,\r\n    element: Element,\r\n    vdom: Virtualdom<any>\r\n): void => {\r\n    if (isReactiveState(value)) {\r\n        console.log(element);\r\n        model(\r\n            [\"input\", \"textarea\", \"select\"],\r\n            \"value\",\r\n            \"value\",\r\n            [\"change\", \"input\"],\r\n            value,\r\n            vdom\r\n        );\r\n    } else {\r\n        throw new TypeError();\r\n    }\r\n};\r\n","import extenddirectives from \"./extend-directive\";\r\nimport { Localchecked } from \"./Localchecked\";\r\nimport { Localcreated } from \"./Localcreated\";\r\nimport { localfor } from \"./localfor\";\r\nimport { Localhtml } from \"./Localhtml\";\r\nimport { Localmounted } from \"./Localmounted\";\r\nimport { Localref } from \"./Localref\";\r\nimport { Localtext } from \"./Localtext\";\r\nimport { Localunmounted } from \"./Localunmounted\";\r\nimport { Localupdated } from \"./Localupdated\";\r\nimport { Localvalue } from \"./Localvalue\";\r\nextenddirectives(\"ref\", Localref);\r\nextenddirectives(\"html\", Localhtml);\r\nextenddirectives(\"text\", Localtext);\r\nextenddirectives(\"value\", Localvalue);\r\nextenddirectives(\"checked\", Localchecked);\r\nconst Directives = extenddirectives;\r\nDirectives(\"mounted\", Localmounted);\r\nDirectives(\"unmounted\", Localunmounted);\r\nDirectives(\"updated\", Localupdated);\r\nDirectives(\"created\", Localcreated);\r\nextenddirectives(\"for\", localfor);\r\n","import { createdctx } from \"./Component-context\";\r\n\r\nexport function useCreated(fun: () => void) {\r\n    createdctx.add(fun);\r\n}\r\n","import { updatedctx } from \"./Component-context\";\r\n\r\nexport function useUpdated(fun: () => void) {\r\n    updatedctx.add(fun);\r\n}\r\n","import { mountedctx } from \"./Component-context\";\r\n\r\nexport function useMounted(fun: () => void) {\r\n    mountedctx.add(fun);\r\n}\r\n","import { unmountedctx } from \"./Component-context\";\r\n\r\nexport function useUnMounted(fun: () => void) {\r\n    unmountedctx.add(fun);\r\n}\r\n","const e=Set.prototype,t=Map.prototype;function r(e){return e instanceof Map}function o(e){return e instanceof Set}function n(e){return Array.isArray(e)}const l=window.Reflect,{ownKeys:i,deleteProperty:c,apply:a,construct:d,defineProperty:f,get:u,getOwnPropertyDescriptor:p,getPrototypeOf:s,has:y,set:v,setPrototypeOf:g}=l;function P(e){return\"object\"==typeof e&&null!==e}function w(e){return\"function\"==typeof e}function S(l,h,O=[],x=l){if(!w(h))throw Error();if(l instanceof Promise||function(e){return e instanceof RegExp}(l)||function(e){return e instanceof Date}(l))return l;if(w(l)||P(l)){let E;return o(l)?(E=new Set([...l]),v(E,\"add\",t=>(e.add.call(l,t),h(x,O,void 0,void 0),e.add.call(E,t))),v(E,\"delete\",t=>(e.delete.call(l,t),h(x,O,void 0,void 0),e.delete.call(E,t))),v(E,\"clear\",()=>(e.clear.call(l),h(x,O,void 0,void 0),e.clear.call(E)))):r(l)?(E=new Map([...l]),v(E,\"clear\",()=>(t.clear.call(l),h(x,O,void 0,void 0),t.clear.call(E))),v(E,\"set\",(e,r)=>(t.set.call(l,e,r),h(x,O,void 0,void 0),t.set.call(E,e,r))),v(E,\"delete\",e=>(t.delete.call(l,e),h(x,O,void 0,void 0),t.delete.call(E,e)))):E=n(l)?[]:w(l)?()=>{}:{},o(l)||r(l)||g(E,null),new Proxy(E,{defineProperty:(e,t,r)=>(h(x,[...O,String(t)],y(r,\"value\")?r.value:w(r.get)?r.get():void 0,u(l,t)),f(l,t,r)),deleteProperty:(e,t)=>(h(x,[...O,String(t)],void 0,u(l,t)),c(l,t)),ownKeys:()=>i(l),has:(e,t)=>y(l,t),getPrototypeOf:()=>s(l),setPrototypeOf:(e,t)=>g(l,t),construct(e,t){if(w(l))return d(l,t)},apply(e,t,r){if(w(l))return a(l,t,r)},getOwnPropertyDescriptor(e,t){var r=p(l,t);return n(l)&&\"length\"===t?r:r?(r.configurable=!0,r):void 0},set:(e,t,r)=>(w(h)&&h(x,[...O,String(t)],r,u(l,t)),v(l,t,r)),get(e,t){var n=u(l,t);return w(n)&&(o(l)||r(l))?u(E,t).bind(E):w(n)||P(n)?S(n,h,[...O,String(t)],l):n}})}return l}export default function(e,t){if(!w(t))throw Error();if(!w(Proxy))throw Error();return w(e)||P(e)?S(e,t):e}\n//# sourceMappingURL=index.min.js.map\n","import deepobserve from \"@masx200/deep-observe-agent-proxy\";\r\nimport { set_prototype } from \"./create-state\";\r\nimport ReactiveState, {\r\n    dispatchsymbol,\r\n    invalid_primitive_or_object_state\r\n} from \"./reactivestate.js\";\r\nimport { isReactiveState } from \"./isReactiveState\";\r\nimport {\r\n    defineProperty,\r\n    deleteProperty,\r\n    get,\r\n    getOwnPropertyDescriptor,\r\n    has,\r\n    ownKeys,\r\n    set\r\n} from \"../UtilTools/reflect\";\r\nimport {\r\n    isArray,\r\n    isarray,\r\n    isobject,\r\n    isplainobject,\r\n    isSet,\r\n    issymbol,\r\n    isfunction\r\n} from \"../UtilTools/util\";\r\nimport watch from \"./watch\";\r\nimport { combineproxy } from \"src/others/combineproxy\";\r\n\r\nexport default function(init: object): ReactiveState<object> {\r\n    let initobj = init;\r\n    const containReactiveState =\r\n        isplainobject(init) &&\r\n        Object.values(init).some((a) => isReactiveState(a));\r\n    const state_entries = Object.entries(init).filter((e) => {\r\n        const a = e[1];\r\n        return isReactiveState(a);\r\n    });\r\n    if (containReactiveState) {\r\n        initobj = Object.assign({}, init);\r\n\r\n        state_entries.forEach(([key, state]) => {\r\n            defineProperty(initobj, key, {\r\n                enumerable: true,\r\n                get() {\r\n                    return state.valueOf();\r\n                },\r\n                set: (nvalue) => {\r\n                    state.value = nvalue;\r\n                },\r\n                configurable: true\r\n            });\r\n        });\r\n    }\r\n    const reactive: ReactiveState<object> = new ReactiveState({\r\n        value: initobj\r\n    });\r\n    if (containReactiveState) {\r\n        state_entries.forEach(([key, state]) => {\r\n            watch(state, () => {\r\n                reactive[dispatchsymbol]();\r\n            });\r\n        });\r\n    }\r\n    // reactive.value = initobj;\r\n\r\n    const objproxyhandler: ProxyHandler<object> = {};\r\n    objproxyhandler.ownKeys = (target) => {\r\n        return Array.from(\r\n            new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n        );\r\n    };\r\n    objproxyhandler.setPrototypeOf = () => {\r\n        return false;\r\n    };\r\n    objproxyhandler.defineProperty = () => {\r\n        return false;\r\n    };\r\n    objproxyhandler.getOwnPropertyDescriptor = (\r\n        target: ReactiveState<object>,\r\n        key\r\n    ) => {\r\n        if (issymbol(key)) {\r\n            return;\r\n        }\r\n        const myvalue = get(target, \"value\");\r\n\r\n        const descripter =\r\n            getOwnPropertyDescriptor(target, key) ||\r\n            getOwnPropertyDescriptor(myvalue, key);\r\n        if (descripter) {\r\n            descripter.configurable = true;\r\n        }\r\n\r\n        return descripter;\r\n    };\r\n    objproxyhandler.deleteProperty = (target: ReactiveState<object>, key) => {\r\n        const myvalue = get(target, \"value\");\r\n        if (has(myvalue, key)) {\r\n            deleteProperty(myvalue, key);\r\n            target[dispatchsymbol]();\r\n            return true;\r\n        } else {\r\n            return true;\r\n        }\r\n    };\r\n    objproxyhandler.has = (target: ReactiveState<object>, key) => {\r\n        const myvalue = get(target, \"value\");\r\n        return has(target, key) || has(myvalue, key);\r\n    };\r\n    objproxyhandler.get = (target: ReactiveState<object>, key) => {\r\n        const value = get(target, \"value\");\r\n        const deepflage = isarray(value) || isplainobject(value);\r\n        if (key === \"value\" && deepflage) {\r\n            return deepobserve(get(target, key), (_target_, patharray) => {\r\n                target[dispatchsymbol]();\r\n            });\r\n        } else if (has(target, key)) {\r\n            return get(target, key);\r\n        } else if (has(value, key)) {\r\n            const resultvalue = get(value, key);\r\n            if (isSet(value)) {\r\n                if (key === \"add\" || key === \"clear\" || key === \"delete\") {\r\n                    switch (key) {\r\n                        case \"add\": {\r\n                            return ((add: any) => {\r\n                                if (!set_prototype.has.call(value, add)) {\r\n                                    const returnvalue = set_prototype[key].call(\r\n                                        value,\r\n                                        add\r\n                                    );\r\n                                    target[dispatchsymbol]();\r\n                                    return returnvalue;\r\n                                }\r\n                                return;\r\n                            }).bind(value);\r\n                        }\r\n\r\n                        case \"delete\": {\r\n                            return ((dele: any) => {\r\n                                if (set_prototype.has.call(value, dele)) {\r\n                                    const returnvalue = set_prototype[key].call(\r\n                                        value,\r\n                                        dele\r\n                                    );\r\n                                    target[dispatchsymbol]();\r\n                                    return returnvalue;\r\n                                }\r\n                                return;\r\n                            }).bind(value);\r\n                        }\r\n\r\n                        case \"clear\": {\r\n                            return (() => {\r\n                                if (value.size) {\r\n                                    const returnvalue = set_prototype[key].call(\r\n                                        value\r\n                                    );\r\n                                    target[dispatchsymbol]();\r\n                                    return returnvalue;\r\n                                }\r\n                                return;\r\n                            }).bind(value);\r\n                        }\r\n                    }\r\n                } else {\r\n                    return isfunction(resultvalue)\r\n                        ? resultvalue.bind(value)\r\n                        : resultvalue;\r\n                }\r\n            } else if (\r\n                deepflage &&\r\n                (isarray(resultvalue) || isplainobject(resultvalue))\r\n            ) {\r\n                return deepobserve(resultvalue, () => {\r\n                    target[dispatchsymbol]();\r\n                });\r\n            } else {\r\n                return resultvalue;\r\n            }\r\n        }\r\n    };\r\n    objproxyhandler.set = (target: ReactiveState<object>, key, value) => {\r\n        if (isReactiveState(value)) {\r\n            value = value.valueOf();\r\n        }\r\n        const myvalue = get(target, \"value\");\r\n\r\n        if (\r\n            key === \"value\" &&\r\n            isobject(value) &&\r\n            ((isArray(init) && isarray(value)) ||\r\n                (!isArray(init) && !isarray(value)))\r\n        ) {\r\n            if (target[key] !== value) {\r\n                set(target, key, value);\r\n                target[dispatchsymbol]();\r\n            }\r\n            return true;\r\n        } else if (!has(target, key)) {\r\n            if (myvalue[key] !== value) {\r\n                set(myvalue, key, value);\r\n                target[dispatchsymbol]();\r\n            }\r\n            return true;\r\n            //\r\n        } else {\r\n            console.error(value);\r\n            console.error(init);\r\n            console.error(invalid_primitive_or_object_state);\r\n            throw TypeError();\r\n        }\r\n    };\r\n    return combineproxy(\r\n        reactive,\r\n\r\n        objproxyhandler\r\n    ) as ReactiveState<object>;\r\n}\r\n","import { set } from \"../UtilTools/reflect\";\r\nimport { isfunction, isobject, isprimitive } from \"../UtilTools/util\";\r\nimport { getproperyreadproxy } from \"./getproperyread-proxy\";\r\n\r\nimport handleobjectstate from \"./handle-object-state\";\r\nimport ReactiveState, {\r\n    dispatchsymbol,\r\n    invalid_primitive_or_object_state\r\n} from \"./reactivestate.js\";\r\nimport { isReactiveState } from \"./isReactiveState\";\r\n// import { any } from \"./watch\";\r\nimport { combineproxy } from \"src/others/combineproxy\";\r\nexport const set_prototype = Set.prototype;\r\n\r\nexport default createState;\r\nexport { createState };\r\nfunction createState<T extends any>(init: ReactiveState<T>): ReactiveState<T>;\r\nfunction createState<T extends any>(\r\n    init: Exclude<T, ReactiveState<any>> | undefined\r\n): ReactiveState<T>;\r\n\r\nfunction createState<T extends any>(\r\n    init: Exclude<T, ReactiveState<any>> | ReactiveState<T> | undefined\r\n) {\r\n    /*   if (!(isprimitive(init) || isobject(init) || isReactiveState(init))) {\r\n    console.error(init);\r\n    console.error(invalid_primitive_or_object_state);\r\n    throw TypeError();\r\n  } */\r\n\r\n    if (isprimitive(init) || isfunction(init)) {\r\n        const handler: ProxyHandler<any> = {\r\n            defineProperty() {\r\n                return false;\r\n            },\r\n            deleteProperty() {\r\n                return false;\r\n            },\r\n            set(target, key, value) {\r\n                /*  if (key === textnodesymbol) {\r\n      return set(target, key, value);\r\n    } */\r\n\r\n                if (\r\n                    key === \"value\" &&\r\n                    ((isprimitive(value) && isprimitive(init)) ||\r\n                        (isfunction(value) && isfunction(init)))\r\n                ) {\r\n                    if (target[key] !== value) {\r\n                        set(target, key, value);\r\n                        target[dispatchsymbol]();\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    console.error(value);\r\n                    console.error(init);\r\n                    console.error(invalid_primitive_or_object_state);\r\n                    throw TypeError();\r\n                }\r\n            },\r\n            setPrototypeOf() {\r\n                return false;\r\n            }\r\n        };\r\n        return getproperyreadproxy(\r\n            combineproxy(new ReactiveState({ value: init }), handler)\r\n        );\r\n    } else if (isReactiveState(init)) {\r\n        return createState(init.valueOf() as any);\r\n    } else if (isobject(init)) {\r\n        //\r\n\r\n        return handleobjectstate(init);\r\n    } else {\r\n        throw Error();\r\n    }\r\n}\r\n"],"names":["a","isString","isnumber","isboolean","isundefined","isbigint","issymbol","isplainobject","gettagtype","Reflect","getPrototypeOf","Object","prototype","isobject","isstring","isfunction","isarray","Array","isArray","toString","call","replace","trim","isSet","Set","isMap","Map","isWeakMap","WeakMap","HTMLElement","customElements","Proxy","window","console","error","TypeError","isObject","value","type","freeGlobal","global","freeSelf","self","root","Function","now","Date","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","undefined","getRawTag","isOwn","tag","unmasked","e","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","test","slice","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","apply","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","this","clearMounted","mountedctx","clear","clearUnMounted","unmountedctx","checkctxandcallbck","callback","isFunction","ctxopen","errormessage","Error","invalid_Function","createlifecyclecontext","callbackset","getall","add","fun","clearupdated","updatedctx","clearcreated","createdctx","StateSet","watchrecord","getwatchrecords","clearwatch","getstates","clearstate","openctx","clearall","closectx","cached_create_componet","cached_callback_debounced_watchs","toArray","flat","filter","useststerecord","state","ObserverTarget","[object Object]","listener","listenerset","Listeners","forEach","Promise","resolve","then","delete","addonelistner","removeonelistner","cancelsubscribe","invalid_primitive_or_object_state","dispatchsymbol","subscribesymbol","removeallistenerssymbol","addallistenerssymbol","ReactiveState","init","_tagtypesym","_debouncedispatch","debouncedfun","__classPrivateFieldGet","dispatch","_Targetsymbol","_memlisteners","__classPrivateFieldSet","defineProperty","configurable","get","set","v","getter","setter","removeListener","addListener","isprimitive","String","JSON","stringify","eventlistener","toPrimitive","isReactiveState","usewatch","push","rewatch","watchsingle","invalid_ReactiveState","requestAnimationFrame","watch","statearray","length","debouncedcallback","stateandlisteners","map","state1","cachedfun","listenfun","r","cancelWatch","construct","deleteProperty","getOwnPropertyDescriptor","has","ownKeys","preventExtensions","target","propertyKey","t","n","includes","toLowerCase","o","i","u","c","s","f","l","p","y","d","tagName","w","setAttribute","g","removeAttribute","Element","create","getAttributeNames","from","getAttribute","parse","entries","join","enumerable","writable","setPrototypeOf","getcreated","getupdated","rootnode","document","body","connectedeventname","disconnectedeventname","mutations","record","log","addedNodes","subnodes","querySelectorAll","dispatchconnected","removedNodes","dispatchdisconnected","dispatchEvent","Event","mo","MutationObserver","option","childList","subtree","observe","updatedeventname","dispatchupdated","attributes","characterData","bubbles","createdeventname","dispatchcreated","addcreatedlistner","ele","addEventListener","once","addmountedlistner","addunmountedlistner","addupdatedlistner","addstopupdatelistener","stopPropagation","merge_entries","m","key","k","VirtualElementSet","WeakSet","Letter_case_and_Chinese","isVirtualdom","createVirtualElement","props","children","assign","propsentries","propsentriesNOTevents","startsWith","Entries_beginning_with_a_letter","virtual","vdom","bindattr","fromEntries","onevent","directives","freeze","isvalidvdom","flag","every","isclassextendsHTMLElement","initclass","getMounted","getUnMounted","seteletext","textContent","setelehtml","innerHTML","appendchild","container","appendChild","createsvgelement","createElementNS","svgnamespace","createDocumentFragment","createnativeelement","createElement","namespace","name","createtextnode","data","createTextNode","changetext","textnode","nodeValue","mathnamespace","createmathelement","removeNode","node","parentNode","removeChild","replaceChild","newChild","oldChild","domaddlisten","event","domremovelisten","removeEventListener","getchildNodes","childNodes","createanotherhtmldocument","implementation","createHTMLDocument","selector","eles","componentsymbol","iscomponent","charactorlist","fill","fromCharCode","hexnumberlist","charactorandnumberlist","getrandomcharactor","floor","random","getrandomhexnumberandcharactor","getrandomstringandnumber","invalid_custom_element_class","Usevaluetoquerythekeyfromthetable","table","Componentstatusname","outputentrie","find","CustomElementRegistry","elementset","for","elementmap","extendsname","RandomDefineCustomElement","elementname","define","extends","constructor","iterator","createcostumelemet","propsjson","autocreateclass","isconnected","element","isConnectedstate","isConnected","documentElement","getancestornode","directive","applydirects","direfun","eventlistenerssymbol","eventname","firstaddlisteners","callarray","removelisteners","readdlisteners","handleprops","attribute1","createeleattr","cancelarr","primitivestate","callbacks","values","bindstatesymbol","throwinvalideletype","invalid_Virtualdom","render","reactive","fragmentnode","mount","fragmentelement","isNodeArray","arr","isNode","Node","MountElement","Infinity","el","head","elesarray","proxyset","isproxy","proxytohandler","combineproxy","newhandler","oldhandler","pro","componentsstylesheet","createlinkstylesheet","url","href","rel","isCSSStyleRule","isCSSMediaRule","isCSSImportRule","cssrulestocsstext","cssrules","cssText","prefixcssmediarule","cssrule","prefix","rulesarr","prefixcssrules","cssRules","conditionText","createcssBlob","source","cachedBlob","sourcecssblobCache","bloburl","URL","createObjectURL","Blob","savestyleblob","tagname","csstext","urltext","selectoraddprefix","cssstylerule","selectorold","selectorText","stylebodyold","selectorTextss","selectorarray","split","selectoraftertransform","selectorTextone","prefixselector","cssRulesarray","resultoutput","Boolean","parsecsstext","text","styleelement","otherdocument","transformcsstext","cachedtext","oldcsstotransformedcss","css","cssomold","cssomnew","cssnewtext","registercssprefix","loadlinkstyle","stylelinkelement","rs","loaderrorfun","onload","onerror","waitloadallstyle","containerthis","all","styleurl","setimmediate","unwatch","onmounted","innerstatesymbol","innerwatchrecords","watchrecords","onunmounted","readysymbol","attributeChangedCallback","firstinstalledcallback","connectedCallback","componentelement","AttrChange","disconnectedCallback","super","defaultProps","attrs","createeleattragentreadwrite","mutation","attributeName","qualifiedName","waittranformcsssymbol","attributessymbol","elementsymbol","inner_vdom_symbol","createComponentold","custfun","cached_class","Component","propattributess","readonlyprop","readonlyproxy","possiblyvirtualdom","vdomarray","mountedcallbacks","unmountedcallbacks","createdcallbacks","updatedcallbacks","thencallbackfirst","thencallbacksecond","innervdom","waitcallback","propreactivestate","createComponent","h","propsorchildren","typenormalized","propsnormalized","childrennormalized","truevdomsymbol","falsevdomsymbol","trueelesymbol","falseelesymbol","handletrue","handlefalse","currentelementsymbol","Condition","conditon","iftrue","iffalse","optionstrue","optionsfalse","elementtomount","handleconditionchange","trueorfalse","cancel_watch_symbol","cached_class_element","switch_mount_symbol","Switchable","funstate","eleclass","eleme","mountrealelement","elementreal","callmountswitch","htmlold","inargs","htm","html","prevdom","createRef","extenddirectives","model","types","bindattribute","domprop","eventnames","origin","eventsarray","Localchecked","dispatchallsamename","inputelement","Localcreated","onmount","onunmount","onupdated","getproperyreadproxy","__proto__","myvalue","myvalueobj","property","bind","computedmany","st","possiblevalue","memorized","reactivestate","newvalue","computed","state1array","generatechildrenvdoms","liststate","childs","index","localfor","list","changecallback","oldlength","newlength","minlength","nodes","createhtmlandtextdirective","errorname","Localhtml","Localmounted","Localref","ref","_vdom","Localtext","Localunmounted","Localupdated","Localvalue","Directives","useCreated","useUpdated","useMounted","useUnMounted","P","S","O","x","RegExp","E","initobj","containReactiveState","some","state_entries","nvalue","objproxyhandler","descripter","deepflage","deepobserve","_target_","patharray","resultvalue","set_prototype","returnvalue","dele","size","createState","handler","handleobjectstate"],"mappings":"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"}