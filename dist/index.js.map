{"version":3,"file":"index.js","sources":["../node_modules/_event-target-shim@5.0.1@event-target-shim/src/event.mjs","../node_modules/_event-target-shim@5.0.1@event-target-shim/src/event-target.mjs","../polyfill/event-target-polyfill.js","../polyfill/custom-elements.min.js","../polyfill/Array-prototype-flat.js","../polyfill/Object-fromEntries.js","../src/UtilTools/isprimitive.ts","../src/UtilTools/util.ts","../src/assetbrowser.ts","../node_modules/_@masx200_dom-element-attribute-agent-proxy@1.2.0@@masx200/dom-element-attribute-agent-proxy/src/mustUseDomProp.ts","../node_modules/_@masx200_dom-element-attribute-agent-proxy@1.2.0@@masx200/dom-element-attribute-agent-proxy/src/index.ts","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../src/cached-map.ts","../src/UtilTools/reflect.ts","../src/mounted-unmounted/Component-context.ts","../src/Reactivity/ReactiveState.ts","../src/UtilTools/merge-entries.ts","../src/CreateElement/VirtualElement.ts","../src/CreateElement/isvalidvdom.ts","../src/CustomClass/isclassextendsHTMLElement.ts","../src/ScopedCSS/isCSSRule.ts","../src/ScopedCSS/cssrulestocsstext.ts","../src/ScopedCSS/prefix-cssmediarule.ts","../src/CustomClass/getrandomstringandnumber.ts","../src/CustomClass/CustomElementRegistry.ts","../src/CustomClass/create-costum-elemet.ts","../src/AttributeClass/iscomponent.ts","../src/UtilTools/dom.ts","../src/UtilTools/toArray.ts","../src/MountElement/mount-real-element.ts","../src/MountElement/isNodeArray.ts","../src/MountElement/MountElement.ts","../src/Reactivity/watch.ts","../src/UtilTools/isconnected.ts","../src/Directives/create-html-and-text-directive.ts","../src/Directives/extend-directive.ts","../src/Directives/directives.ts","../src/RenderVirtual/handle-onevent.ts","../src/RenderVirtual/handle-props.ts","../src/RenderVirtual/render-vdom-to-real.ts","../src/ScopedCSS/parsecss-transformcss.ts","../src/ScopedCSS/create-cssurlblob.ts","../src/ScopedCSS/savestyleblob.ts","../src/ScopedCSS/selectoraddprefix.ts","../src/ScopedCSS/transform-prefix-cssrules.ts","../src/ScopedCSS/parsecsstext.ts","../src/ScopedCSS/transformcsstext.ts","../src/ScopedCSS/registercssprefix.ts","../src/ScopedCSS/loadlinkstyle.ts","../src/ScopedCSS/waitloadallstyle.ts","../src/Reactivity/readonly-proxy.ts","../src/UtilTools/setimmediate.ts","../src/mounted-unmounted/element-onmount-unmount.ts","../src/AttributeClass/readysymbol.ts","../src/AttributeClass/attr-change.ts","../src/AttributeClass/createComponent.ts","../src/CreateElement/create-element.ts","../src/AttributeClass/conditon.ts","../src/asserttype.ts","../src/Reactivity/getproperyread-proxy.ts","../src/Reactivity/computed.ts","../node_modules/_@masx200_deep-observe-agent-proxy@1.2.0@@masx200/deep-observe-agent-proxy/src/index.ts","../src/Reactivity/handle-object-state.ts","../src/Reactivity/create-state.ts","../src/AttributeClass/list-map.ts","../src/AttributeClass/switchable.ts","../src/createref.ts","../node_modules/htm/dist/htm.module.js","../src/CreateElement/html.ts","../src/Directives/model-input-textarea-value-directive-binding.ts"],"sourcesContent":["/**\n * @typedef {object} PrivateData\n * @property {EventTarget} eventTarget The event target.\n * @property {{type:string}} event The original event object.\n * @property {number} eventPhase The current event phase.\n * @property {EventTarget|null} currentTarget The current event target.\n * @property {boolean} canceled The flag to prevent default.\n * @property {boolean} stopped The flag to stop propagation.\n * @property {boolean} immediateStopped The flag to stop propagation immediately.\n * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.\n * @property {number} timeStamp The unix time.\n * @private\n */\n\n/**\n * Private data for event wrappers.\n * @type {WeakMap<Event, PrivateData>}\n * @private\n */\nconst privateData = new WeakMap()\n\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrappers = new WeakMap()\n\n/**\n * Get private data.\n * @param {Event} event The event object to get private data.\n * @returns {PrivateData} The private data of the event.\n * @private\n */\nfunction pd(event) {\n    const retv = privateData.get(event)\n    console.assert(\n        retv != null,\n        \"'this' is expected an Event object, but got\",\n        event\n    )\n    return retv\n}\n\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data {PrivateData} private data.\n */\nfunction setCancelFlag(data) {\n    if (data.passiveListener != null) {\n        if (\n            typeof console !== \"undefined\" &&\n            typeof console.error === \"function\"\n        ) {\n            console.error(\n                \"Unable to preventDefault inside passive event listener invocation.\",\n                data.passiveListener\n            )\n        }\n        return\n    }\n    if (!data.event.cancelable) {\n        return\n    }\n\n    data.canceled = true\n    if (typeof data.event.preventDefault === \"function\") {\n        data.event.preventDefault()\n    }\n}\n\n/**\n * @see https://dom.spec.whatwg.org/#interface-event\n * @private\n */\n/**\n * The event wrapper.\n * @constructor\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Event|{type:string}} event The original event to wrap.\n */\nfunction Event(eventTarget, event) {\n    privateData.set(this, {\n        eventTarget,\n        event,\n        eventPhase: 2,\n        currentTarget: eventTarget,\n        canceled: false,\n        stopped: false,\n        immediateStopped: false,\n        passiveListener: null,\n        timeStamp: event.timeStamp || Date.now(),\n    })\n\n    // https://heycam.github.io/webidl/#Unforgeable\n    Object.defineProperty(this, \"isTrusted\", { value: false, enumerable: true })\n\n    // Define accessors\n    const keys = Object.keys(event)\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in this)) {\n            Object.defineProperty(this, key, defineRedirectDescriptor(key))\n        }\n    }\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEvent.prototype = {\n    /**\n     * The type of this event.\n     * @type {string}\n     */\n    get type() {\n        return pd(this).event.type\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get target() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get currentTarget() {\n        return pd(this).currentTarget\n    },\n\n    /**\n     * @returns {EventTarget[]} The composed path of this event.\n     */\n    composedPath() {\n        const currentTarget = pd(this).currentTarget\n        if (currentTarget == null) {\n            return []\n        }\n        return [currentTarget]\n    },\n\n    /**\n     * Constant of NONE.\n     * @type {number}\n     */\n    get NONE() {\n        return 0\n    },\n\n    /**\n     * Constant of CAPTURING_PHASE.\n     * @type {number}\n     */\n    get CAPTURING_PHASE() {\n        return 1\n    },\n\n    /**\n     * Constant of AT_TARGET.\n     * @type {number}\n     */\n    get AT_TARGET() {\n        return 2\n    },\n\n    /**\n     * Constant of BUBBLING_PHASE.\n     * @type {number}\n     */\n    get BUBBLING_PHASE() {\n        return 3\n    },\n\n    /**\n     * The target of this event.\n     * @type {number}\n     */\n    get eventPhase() {\n        return pd(this).eventPhase\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopPropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.stopPropagation === \"function\") {\n            data.event.stopPropagation()\n        }\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopImmediatePropagation() {\n        const data = pd(this)\n\n        data.stopped = true\n        data.immediateStopped = true\n        if (typeof data.event.stopImmediatePropagation === \"function\") {\n            data.event.stopImmediatePropagation()\n        }\n    },\n\n    /**\n     * The flag to be bubbling.\n     * @type {boolean}\n     */\n    get bubbles() {\n        return Boolean(pd(this).event.bubbles)\n    },\n\n    /**\n     * The flag to be cancelable.\n     * @type {boolean}\n     */\n    get cancelable() {\n        return Boolean(pd(this).event.cancelable)\n    },\n\n    /**\n     * Cancel this event.\n     * @returns {void}\n     */\n    preventDefault() {\n        setCancelFlag(pd(this))\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     */\n    get defaultPrevented() {\n        return pd(this).canceled\n    },\n\n    /**\n     * The flag to be composed.\n     * @type {boolean}\n     */\n    get composed() {\n        return Boolean(pd(this).event.composed)\n    },\n\n    /**\n     * The unix time of this event.\n     * @type {number}\n     */\n    get timeStamp() {\n        return pd(this).timeStamp\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     * @deprecated\n     */\n    get srcElement() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The flag to stop event bubbling.\n     * @type {boolean}\n     * @deprecated\n     */\n    get cancelBubble() {\n        return pd(this).stopped\n    },\n    set cancelBubble(value) {\n        if (!value) {\n            return\n        }\n        const data = pd(this)\n\n        data.stopped = true\n        if (typeof data.event.cancelBubble === \"boolean\") {\n            data.event.cancelBubble = true\n        }\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     * @deprecated\n     */\n    get returnValue() {\n        return !pd(this).canceled\n    },\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag(pd(this))\n        }\n    },\n\n    /**\n     * Initialize this event object. But do nothing under event dispatching.\n     * @param {string} type The event type.\n     * @param {boolean} [bubbles=false] The flag to be possible to bubble up.\n     * @param {boolean} [cancelable=false] The flag to be possible to cancel.\n     * @deprecated\n     */\n    initEvent() {\n        // Do nothing.\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(Event.prototype, \"constructor\", {\n    value: Event,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof window !== \"undefined\" && typeof window.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, window.Event.prototype)\n\n    // Make association for wrappers.\n    wrappers.set(window.Event.prototype, Event)\n}\n\n/**\n * Get the property descriptor to redirect a given property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to redirect the property.\n * @private\n */\nfunction defineRedirectDescriptor(key) {\n    return {\n        get() {\n            return pd(this).event[key]\n        },\n        set(value) {\n            pd(this).event[key] = value\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Get the property descriptor to call a given method property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to call the method property.\n * @private\n */\nfunction defineCallDescriptor(key) {\n    return {\n        value() {\n            const event = pd(this).event\n            return event[key].apply(event, arguments)\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define new wrapper class.\n * @param {Function} BaseEvent The base wrapper class.\n * @param {Object} proto The prototype of the original event.\n * @returns {Function} The defined wrapper class.\n * @private\n */\nfunction defineWrapper(BaseEvent, proto) {\n    const keys = Object.keys(proto)\n    if (keys.length === 0) {\n        return BaseEvent\n    }\n\n    /** CustomEvent */\n    function CustomEvent(eventTarget, event) {\n        BaseEvent.call(this, eventTarget, event)\n    }\n\n    CustomEvent.prototype = Object.create(BaseEvent.prototype, {\n        constructor: { value: CustomEvent, configurable: true, writable: true },\n    })\n\n    // Define accessors.\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i]\n        if (!(key in BaseEvent.prototype)) {\n            const descriptor = Object.getOwnPropertyDescriptor(proto, key)\n            const isFunc = typeof descriptor.value === \"function\"\n            Object.defineProperty(\n                CustomEvent.prototype,\n                key,\n                isFunc\n                    ? defineCallDescriptor(key)\n                    : defineRedirectDescriptor(key)\n            )\n        }\n    }\n\n    return CustomEvent\n}\n\n/**\n * Get the wrapper class of a given prototype.\n * @param {Object} proto The prototype of the original event to get its wrapper.\n * @returns {Function} The wrapper class.\n * @private\n */\nfunction getWrapper(proto) {\n    if (proto == null || proto === Object.prototype) {\n        return Event\n    }\n\n    let wrapper = wrappers.get(proto)\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto)\n        wrappers.set(proto, wrapper)\n    }\n    return wrapper\n}\n\n/**\n * Wrap a given event to management a dispatching.\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Object} event The event to wrap.\n * @returns {Event} The wrapper instance.\n * @private\n */\nexport function wrapEvent(eventTarget, event) {\n    const Wrapper = getWrapper(Object.getPrototypeOf(event))\n    return new Wrapper(eventTarget, event)\n}\n\n/**\n * Get the immediateStopped flag of a given event.\n * @param {Event} event The event to get.\n * @returns {boolean} The flag to stop propagation immediately.\n * @private\n */\nexport function isStopped(event) {\n    return pd(event).immediateStopped\n}\n\n/**\n * Set the current event phase of a given event.\n * @param {Event} event The event to set current target.\n * @param {number} eventPhase New event phase.\n * @returns {void}\n * @private\n */\nexport function setEventPhase(event, eventPhase) {\n    pd(event).eventPhase = eventPhase\n}\n\n/**\n * Set the current target of a given event.\n * @param {Event} event The event to set current target.\n * @param {EventTarget|null} currentTarget New current target.\n * @returns {void}\n * @private\n */\nexport function setCurrentTarget(event, currentTarget) {\n    pd(event).currentTarget = currentTarget\n}\n\n/**\n * Set a passive listener of a given event.\n * @param {Event} event The event to set current target.\n * @param {Function|null} passiveListener New passive listener.\n * @returns {void}\n * @private\n */\nexport function setPassiveListener(event, passiveListener) {\n    pd(event).passiveListener = passiveListener\n}\n","import {\n    isStopped,\n    setCurrentTarget,\n    setEventPhase,\n    setPassiveListener,\n    wrapEvent,\n} from \"./event.mjs\"\n\n/**\n * @typedef {object} ListenerNode\n * @property {Function} listener\n * @property {1|2|3} listenerType\n * @property {boolean} passive\n * @property {boolean} once\n * @property {ListenerNode|null} next\n * @private\n */\n\n/**\n * @type {WeakMap<object, Map<string, ListenerNode>>}\n * @private\n */\nconst listenersMap = new WeakMap()\n\n// Listener types\nconst CAPTURE = 1\nconst BUBBLE = 2\nconst ATTRIBUTE = 3\n\n/**\n * Check whether a given value is an object or not.\n * @param {any} x The value to check.\n * @returns {boolean} `true` if the value is an object.\n */\nfunction isObject(x) {\n    return x !== null && typeof x === \"object\" //eslint-disable-line no-restricted-syntax\n}\n\n/**\n * Get listeners.\n * @param {EventTarget} eventTarget The event target to get.\n * @returns {Map<string, ListenerNode>} The listeners.\n * @private\n */\nfunction getListeners(eventTarget) {\n    const listeners = listenersMap.get(eventTarget)\n    if (listeners == null) {\n        throw new TypeError(\n            \"'this' is expected an EventTarget object, but got another value.\"\n        )\n    }\n    return listeners\n}\n\n/**\n * Get the property descriptor for the event attribute of a given event.\n * @param {string} eventName The event name to get property descriptor.\n * @returns {PropertyDescriptor} The property descriptor.\n * @private\n */\nfunction defineEventAttributeDescriptor(eventName) {\n    return {\n        get() {\n            const listeners = getListeners(this)\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    return node.listener\n                }\n                node = node.next\n            }\n            return null\n        },\n\n        set(listener) {\n            if (typeof listener !== \"function\" && !isObject(listener)) {\n                listener = null // eslint-disable-line no-param-reassign\n            }\n            const listeners = getListeners(this)\n\n            // Traverse to the tail while removing old value.\n            let prev = null\n            let node = listeners.get(eventName)\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    // Remove old value.\n                    if (prev !== null) {\n                        prev.next = node.next\n                    } else if (node.next !== null) {\n                        listeners.set(eventName, node.next)\n                    } else {\n                        listeners.delete(eventName)\n                    }\n                } else {\n                    prev = node\n                }\n\n                node = node.next\n            }\n\n            // Add new value.\n            if (listener !== null) {\n                const newNode = {\n                    listener,\n                    listenerType: ATTRIBUTE,\n                    passive: false,\n                    once: false,\n                    next: null,\n                }\n                if (prev === null) {\n                    listeners.set(eventName, newNode)\n                } else {\n                    prev.next = newNode\n                }\n            }\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define an event attribute (e.g. `eventTarget.onclick`).\n * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.\n * @param {string} eventName The event name to define.\n * @returns {void}\n */\nfunction defineEventAttribute(eventTargetPrototype, eventName) {\n    Object.defineProperty(\n        eventTargetPrototype,\n        `on${eventName}`,\n        defineEventAttributeDescriptor(eventName)\n    )\n}\n\n/**\n * Define a custom EventTarget with event attributes.\n * @param {string[]} eventNames Event names for event attributes.\n * @returns {EventTarget} The custom EventTarget.\n * @private\n */\nfunction defineCustomEventTarget(eventNames) {\n    /** CustomEventTarget */\n    function CustomEventTarget() {\n        EventTarget.call(this)\n    }\n\n    CustomEventTarget.prototype = Object.create(EventTarget.prototype, {\n        constructor: {\n            value: CustomEventTarget,\n            configurable: true,\n            writable: true,\n        },\n    })\n\n    for (let i = 0; i < eventNames.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, eventNames[i])\n    }\n\n    return CustomEventTarget\n}\n\n/**\n * EventTarget.\n *\n * - This is constructor if no arguments.\n * - This is a function which returns a CustomEventTarget constructor if there are arguments.\n *\n * For example:\n *\n *     class A extends EventTarget {}\n *     class B extends EventTarget(\"message\") {}\n *     class C extends EventTarget(\"message\", \"error\") {}\n *     class D extends EventTarget([\"message\", \"error\"]) {}\n */\nfunction EventTarget() {\n    /*eslint-disable consistent-return */\n    if (this instanceof EventTarget) {\n        listenersMap.set(this, new Map())\n        return\n    }\n    if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(arguments[0])\n    }\n    if (arguments.length > 0) {\n        const types = new Array(arguments.length)\n        for (let i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i]\n        }\n        return defineCustomEventTarget(types)\n    }\n    throw new TypeError(\"Cannot call a class as a function\")\n    /*eslint-enable consistent-return */\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEventTarget.prototype = {\n    /**\n     * Add a given listener to this event target.\n     * @param {string} eventName The event name to add.\n     * @param {Function} listener The listener to add.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    addEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n        if (typeof listener !== \"function\" && !isObject(listener)) {\n            throw new TypeError(\"'listener' should be a function or an object.\")\n        }\n\n        const listeners = getListeners(this)\n        const optionsIsObj = isObject(options)\n        const capture = optionsIsObj\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n        const newNode = {\n            listener,\n            listenerType,\n            passive: optionsIsObj && Boolean(options.passive),\n            once: optionsIsObj && Boolean(options.once),\n            next: null,\n        }\n\n        // Set it as the first node if the first node is null.\n        let node = listeners.get(eventName)\n        if (node === undefined) {\n            listeners.set(eventName, newNode)\n            return\n        }\n\n        // Traverse to the tail while checking duplication..\n        let prev = null\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                // Should ignore duplication.\n                return\n            }\n            prev = node\n            node = node.next\n        }\n\n        // Add it.\n        prev.next = newNode\n    },\n\n    /**\n     * Remove a given listener from this event target.\n     * @param {string} eventName The event name to remove.\n     * @param {Function} listener The listener to remove.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    removeEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n\n        const listeners = getListeners(this)\n        const capture = isObject(options)\n            ? Boolean(options.capture)\n            : Boolean(options)\n        const listenerType = capture ? CAPTURE : BUBBLE\n\n        let prev = null\n        let node = listeners.get(eventName)\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n                return\n            }\n\n            prev = node\n            node = node.next\n        }\n    },\n\n    /**\n     * Dispatch a given event.\n     * @param {Event|{type:string}} event The event to dispatch.\n     * @returns {boolean} `false` if canceled.\n     */\n    dispatchEvent(event) {\n        if (event == null || typeof event.type !== \"string\") {\n            throw new TypeError('\"event.type\" should be a string.')\n        }\n\n        // If listeners aren't registered, terminate.\n        const listeners = getListeners(this)\n        const eventName = event.type\n        let node = listeners.get(eventName)\n        if (node == null) {\n            return true\n        }\n\n        // Since we cannot rewrite several properties, so wrap object.\n        const wrappedEvent = wrapEvent(this, event)\n\n        // This doesn't process capturing phase and bubbling phase.\n        // This isn't participating in a tree.\n        let prev = null\n        while (node != null) {\n            // Remove this listener if it's once\n            if (node.once) {\n                if (prev !== null) {\n                    prev.next = node.next\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next)\n                } else {\n                    listeners.delete(eventName)\n                }\n            } else {\n                prev = node\n            }\n\n            // Call this listener\n            setPassiveListener(\n                wrappedEvent,\n                node.passive ? node.listener : null\n            )\n            if (typeof node.listener === \"function\") {\n                try {\n                    node.listener.call(this, wrappedEvent)\n                } catch (err) {\n                    if (\n                        typeof console !== \"undefined\" &&\n                        typeof console.error === \"function\"\n                    ) {\n                        console.error(err)\n                    }\n                }\n            } else if (\n                node.listenerType !== ATTRIBUTE &&\n                typeof node.listener.handleEvent === \"function\"\n            ) {\n                node.listener.handleEvent(wrappedEvent)\n            }\n\n            // Break if `event.stopImmediatePropagation` was called.\n            if (isStopped(wrappedEvent)) {\n                break\n            }\n\n            node = node.next\n        }\n        setPassiveListener(wrappedEvent, null)\n        setEventPhase(wrappedEvent, 0)\n        setCurrentTarget(wrappedEvent, null)\n\n        return !wrappedEvent.defaultPrevented\n    },\n}\n\n// `constructor` is not enumerable.\nObject.defineProperty(EventTarget.prototype, \"constructor\", {\n    value: EventTarget,\n    configurable: true,\n    writable: true,\n})\n\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n) {\n    Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype)\n}\n\nexport { defineEventAttribute, EventTarget }\nexport default EventTarget\n","import event_target from \"event-target-shim/dist/event-target-shim\";\r\n(() => {\r\n  try {\r\n    new EventTarget();\r\n  } catch (e) {\r\n    // Reflect.set()\r\n    window.EventTarget = undefined;\r\n  }\r\n  //   if (\"function\" != typeof EventTarget) {\r\n  (() => {\r\n    if (\"function\" != typeof window.EventTarget) {\r\n      window.EventTarget = event_target;\r\n      // Reflect.set(window, \"EventTarget\", event_target);\r\n      //   window.EventTarget = (event_target as unknown) as EventTarget;\r\n    }\r\n  })();\r\n  //   }\r\n})();\r\n","(() => {\r\n  if (\r\n    \"object\" != typeof window.customElements ||\r\n    typeof window.CustomElementRegistry !== \"function\"\r\n  ) {\r\n    (function() {\r\n      /*\r\n          \r\n           Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\r\n           This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\r\n           The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\r\n           The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\r\n           Code distributed by Google as part of the polymer project is also\r\n           subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\r\n          */\r\n      \"use strict\";\r\n      var aa = new Set(\r\n        \"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph\".split(\r\n          \" \"\r\n        )\r\n      );\r\n      function g(a) {\r\n        var b = aa.has(a);\r\n        a = /^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(a);\r\n        return !b && a;\r\n      }\r\n      function l(a) {\r\n        var b = a.isConnected;\r\n        if (void 0 !== b) return b;\r\n        for (; a && !(a.__CE_isImportDocument || a instanceof Document); )\r\n          a =\r\n            a.parentNode ||\r\n            (window.ShadowRoot && a instanceof ShadowRoot ? a.host : void 0);\r\n        return !(!a || !(a.__CE_isImportDocument || a instanceof Document));\r\n      }\r\n      function n(a, b) {\r\n        for (; b && b !== a && !b.nextSibling; ) b = b.parentNode;\r\n        return b && b !== a ? b.nextSibling : null;\r\n      }\r\n      function p(a, b, d) {\r\n        d = void 0 === d ? new Set() : d;\r\n        for (var c = a; c; ) {\r\n          if (c.nodeType === Node.ELEMENT_NODE) {\r\n            var e = c;\r\n            b(e);\r\n            var f = e.localName;\r\n            if (\"link\" === f && \"import\" === e.getAttribute(\"rel\")) {\r\n              c = e.import;\r\n              if (c instanceof Node && !d.has(c))\r\n                for (d.add(c), c = c.firstChild; c; c = c.nextSibling)\r\n                  p(c, b, d);\r\n              c = n(a, e);\r\n              continue;\r\n            } else if (\"template\" === f) {\r\n              c = n(a, e);\r\n              continue;\r\n            }\r\n            if ((e = e.__CE_shadowRoot))\r\n              for (e = e.firstChild; e; e = e.nextSibling) p(e, b, d);\r\n          }\r\n          c = c.firstChild ? c.firstChild : n(a, c);\r\n        }\r\n      }\r\n      function r(a, b, d) {\r\n        a[b] = d;\r\n      }\r\n      function u() {\r\n        this.a = new Map();\r\n        this.g = new Map();\r\n        this.c = [];\r\n        this.f = [];\r\n        this.b = !1;\r\n      }\r\n      function ba(a, b, d) {\r\n        a.a.set(b, d);\r\n        a.g.set(d.constructorFunction, d);\r\n      }\r\n      function ca(a, b) {\r\n        a.b = !0;\r\n        a.c.push(b);\r\n      }\r\n      function da(a, b) {\r\n        a.b = !0;\r\n        a.f.push(b);\r\n      }\r\n      function v(a, b) {\r\n        a.b &&\r\n          p(b, function(b) {\r\n            return w(a, b);\r\n          });\r\n      }\r\n      function w(a, b) {\r\n        if (a.b && !b.__CE_patched) {\r\n          b.__CE_patched = !0;\r\n          for (var d = 0; d < a.c.length; d++) a.c[d](b);\r\n          for (d = 0; d < a.f.length; d++) a.f[d](b);\r\n        }\r\n      }\r\n      function x(a, b) {\r\n        var d = [];\r\n        p(b, function(b) {\r\n          return d.push(b);\r\n        });\r\n        for (b = 0; b < d.length; b++) {\r\n          var c = d[b];\r\n          1 === c.__CE_state ? a.connectedCallback(c) : y(a, c);\r\n        }\r\n      }\r\n      function z(a, b) {\r\n        var d = [];\r\n        p(b, function(b) {\r\n          return d.push(b);\r\n        });\r\n        for (b = 0; b < d.length; b++) {\r\n          var c = d[b];\r\n          1 === c.__CE_state && a.disconnectedCallback(c);\r\n        }\r\n      }\r\n      function A(a, b, d) {\r\n        d = void 0 === d ? {} : d;\r\n        var c = d.u || new Set(),\r\n          e =\r\n            d.i ||\r\n            function(b) {\r\n              return y(a, b);\r\n            },\r\n          f = [];\r\n        p(\r\n          b,\r\n          function(b) {\r\n            if (\"link\" === b.localName && \"import\" === b.getAttribute(\"rel\")) {\r\n              var d = b.import;\r\n              d instanceof Node &&\r\n                ((d.__CE_isImportDocument = !0), (d.__CE_hasRegistry = !0));\r\n              d && \"complete\" === d.readyState\r\n                ? (d.__CE_documentLoadHandled = !0)\r\n                : b.addEventListener(\"load\", function() {\r\n                    var d = b.import;\r\n                    if (!d.__CE_documentLoadHandled) {\r\n                      d.__CE_documentLoadHandled = !0;\r\n                      var f = new Set(c);\r\n                      f.delete(d);\r\n                      A(a, d, { u: f, i: e });\r\n                    }\r\n                  });\r\n            } else f.push(b);\r\n          },\r\n          c\r\n        );\r\n        if (a.b) for (b = 0; b < f.length; b++) w(a, f[b]);\r\n        for (b = 0; b < f.length; b++) e(f[b]);\r\n      }\r\n      function y(a, b) {\r\n        if (void 0 === b.__CE_state) {\r\n          var d = b.ownerDocument;\r\n          if (d.defaultView || (d.__CE_isImportDocument && d.__CE_hasRegistry))\r\n            if ((d = a.a.get(b.localName))) {\r\n              d.constructionStack.push(b);\r\n              var c = d.constructorFunction;\r\n              try {\r\n                try {\r\n                  if (new c() !== b)\r\n                    throw Error(\r\n                      \"The custom element constructor did not produce the element being upgraded.\"\r\n                    );\r\n                } finally {\r\n                  d.constructionStack.pop();\r\n                }\r\n              } catch (t) {\r\n                throw ((b.__CE_state = 2), t);\r\n              }\r\n              b.__CE_state = 1;\r\n              b.__CE_definition = d;\r\n              if (d.attributeChangedCallback)\r\n                for (d = d.observedAttributes, c = 0; c < d.length; c++) {\r\n                  var e = d[c],\r\n                    f = b.getAttribute(e);\r\n                  null !== f && a.attributeChangedCallback(b, e, null, f, null);\r\n                }\r\n              l(b) && a.connectedCallback(b);\r\n            }\r\n        }\r\n      }\r\n      u.prototype.connectedCallback = function(a) {\r\n        var b = a.__CE_definition;\r\n        b.connectedCallback && b.connectedCallback.call(a);\r\n      };\r\n      u.prototype.disconnectedCallback = function(a) {\r\n        var b = a.__CE_definition;\r\n        b.disconnectedCallback && b.disconnectedCallback.call(a);\r\n      };\r\n      u.prototype.attributeChangedCallback = function(a, b, d, c, e) {\r\n        var f = a.__CE_definition;\r\n        f.attributeChangedCallback &&\r\n          -1 < f.observedAttributes.indexOf(b) &&\r\n          f.attributeChangedCallback.call(a, b, d, c, e);\r\n      };\r\n      function B(a) {\r\n        var b = document;\r\n        this.c = a;\r\n        this.a = b;\r\n        this.b = void 0;\r\n        A(this.c, this.a);\r\n        \"loading\" === this.a.readyState &&\r\n          ((this.b = new MutationObserver(this.f.bind(this))),\r\n          this.b.observe(this.a, { childList: !0, subtree: !0 }));\r\n      }\r\n      function C(a) {\r\n        a.b && a.b.disconnect();\r\n      }\r\n      B.prototype.f = function(a) {\r\n        var b = this.a.readyState;\r\n        (\"interactive\" !== b && \"complete\" !== b) || C(this);\r\n        for (b = 0; b < a.length; b++)\r\n          for (var d = a[b].addedNodes, c = 0; c < d.length; c++)\r\n            A(this.c, d[c]);\r\n      };\r\n      function ea() {\r\n        var a = this;\r\n        this.b = this.a = void 0;\r\n        this.c = new Promise(function(b) {\r\n          a.b = b;\r\n          a.a && b(a.a);\r\n        });\r\n      }\r\n      function D(a) {\r\n        if (a.a) throw Error(\"Already resolved.\");\r\n        a.a = void 0;\r\n        a.b && a.b(void 0);\r\n      }\r\n      function E(a) {\r\n        this.c = !1;\r\n        this.a = a;\r\n        this.j = new Map();\r\n        this.f = function(b) {\r\n          return b();\r\n        };\r\n        this.b = !1;\r\n        this.g = [];\r\n        this.o = new B(a);\r\n      }\r\n      E.prototype.l = function(a, b) {\r\n        var d = this;\r\n        if (!(b instanceof Function))\r\n          throw new TypeError(\"Custom element constructors must be functions.\");\r\n        if (!g(a))\r\n          throw new SyntaxError(\"The element name '\" + a + \"' is not valid.\");\r\n        if (this.a.a.get(a))\r\n          throw Error(\r\n            \"A custom element with name '\" + a + \"' has already been defined.\"\r\n          );\r\n        if (this.c) throw Error(\"A custom element is already being defined.\");\r\n        this.c = !0;\r\n        try {\r\n          var c = function(b) {\r\n              var a = e[b];\r\n              if (void 0 !== a && !(a instanceof Function))\r\n                throw Error(\"The '\" + b + \"' callback must be a function.\");\r\n              return a;\r\n            },\r\n            e = b.prototype;\r\n          if (!(e instanceof Object))\r\n            throw new TypeError(\r\n              \"The custom element constructor's prototype is not an object.\"\r\n            );\r\n          var f = c(\"connectedCallback\");\r\n          var t = c(\"disconnectedCallback\");\r\n          var k = c(\"adoptedCallback\");\r\n          var h = c(\"attributeChangedCallback\");\r\n          var m = b.observedAttributes || [];\r\n        } catch (q) {\r\n          return;\r\n        } finally {\r\n          this.c = !1;\r\n        }\r\n        b = {\r\n          localName: a,\r\n          constructorFunction: b,\r\n          connectedCallback: f,\r\n          disconnectedCallback: t,\r\n          adoptedCallback: k,\r\n          attributeChangedCallback: h,\r\n          observedAttributes: m,\r\n          constructionStack: []\r\n        };\r\n        ba(this.a, a, b);\r\n        this.g.push(b);\r\n        this.b ||\r\n          ((this.b = !0),\r\n          this.f(function() {\r\n            return fa(d);\r\n          }));\r\n      };\r\n      E.prototype.i = function(a) {\r\n        A(this.a, a);\r\n      };\r\n      function fa(a) {\r\n        if (!1 !== a.b) {\r\n          a.b = !1;\r\n          for (var b = a.g, d = [], c = new Map(), e = 0; e < b.length; e++)\r\n            c.set(b[e].localName, []);\r\n          A(a.a, document, {\r\n            i: function(b) {\r\n              if (void 0 === b.__CE_state) {\r\n                var e = b.localName,\r\n                  f = c.get(e);\r\n                f ? f.push(b) : a.a.a.get(e) && d.push(b);\r\n              }\r\n            }\r\n          });\r\n          for (e = 0; e < d.length; e++) y(a.a, d[e]);\r\n          for (; 0 < b.length; ) {\r\n            var f = b.shift();\r\n            e = f.localName;\r\n            f = c.get(f.localName);\r\n            for (var t = 0; t < f.length; t++) y(a.a, f[t]);\r\n            (e = a.j.get(e)) && D(e);\r\n          }\r\n        }\r\n      }\r\n      E.prototype.get = function(a) {\r\n        if ((a = this.a.a.get(a))) return a.constructorFunction;\r\n      };\r\n      E.prototype.m = function(a) {\r\n        if (!g(a))\r\n          return Promise.reject(\r\n            new SyntaxError(\"'\" + a + \"' is not a valid custom element name.\")\r\n          );\r\n        var b = this.j.get(a);\r\n        if (b) return b.c;\r\n        b = new ea();\r\n        this.j.set(a, b);\r\n        this.a.a.get(a) &&\r\n          !this.g.some(function(b) {\r\n            return b.localName === a;\r\n          }) &&\r\n          D(b);\r\n        return b.c;\r\n      };\r\n      E.prototype.s = function(a) {\r\n        C(this.o);\r\n        var b = this.f;\r\n        this.f = function(d) {\r\n          return a(function() {\r\n            return b(d);\r\n          });\r\n        };\r\n      };\r\n      window.CustomElementRegistry = E;\r\n      E.prototype.define = E.prototype.l;\r\n      E.prototype.upgrade = E.prototype.i;\r\n      E.prototype.get = E.prototype.get;\r\n      E.prototype.whenDefined = E.prototype.m;\r\n      E.prototype.polyfillWrapFlushCallback = E.prototype.s;\r\n      var F = window.Document.prototype.createElement,\r\n        G = window.Document.prototype.createElementNS,\r\n        ha = window.Document.prototype.importNode,\r\n        ia = window.Document.prototype.prepend,\r\n        ja = window.Document.prototype.append,\r\n        ka = window.DocumentFragment.prototype.prepend,\r\n        la = window.DocumentFragment.prototype.append,\r\n        H = window.Node.prototype.cloneNode,\r\n        I = window.Node.prototype.appendChild,\r\n        J = window.Node.prototype.insertBefore,\r\n        K = window.Node.prototype.removeChild,\r\n        L = window.Node.prototype.replaceChild,\r\n        M = Object.getOwnPropertyDescriptor(\r\n          window.Node.prototype,\r\n          \"textContent\"\r\n        ),\r\n        N = window.Element.prototype.attachShadow,\r\n        O = Object.getOwnPropertyDescriptor(\r\n          window.Element.prototype,\r\n          \"innerHTML\"\r\n        ),\r\n        P = window.Element.prototype.getAttribute,\r\n        Q = window.Element.prototype.setAttribute,\r\n        R = window.Element.prototype.removeAttribute,\r\n        S = window.Element.prototype.getAttributeNS,\r\n        T = window.Element.prototype.setAttributeNS,\r\n        U = window.Element.prototype.removeAttributeNS,\r\n        ma = window.Element.prototype.insertAdjacentElement,\r\n        na = window.Element.prototype.insertAdjacentHTML,\r\n        oa = window.Element.prototype.prepend,\r\n        pa = window.Element.prototype.append,\r\n        V = window.Element.prototype.before,\r\n        qa = window.Element.prototype.after,\r\n        ra = window.Element.prototype.replaceWith,\r\n        sa = window.Element.prototype.remove,\r\n        ta = window.HTMLElement,\r\n        W = Object.getOwnPropertyDescriptor(\r\n          window.HTMLElement.prototype,\r\n          \"innerHTML\"\r\n        ),\r\n        ua = window.HTMLElement.prototype.insertAdjacentElement,\r\n        va = window.HTMLElement.prototype.insertAdjacentHTML;\r\n      var wa = new (function() {})();\r\n      function xa() {\r\n        var a = X;\r\n        window.HTMLElement = (function() {\r\n          function b() {\r\n            var b = this.constructor,\r\n              c = a.g.get(b);\r\n            if (!c)\r\n              throw Error(\r\n                \"The custom element being constructed was not registered with `customElements`.\"\r\n              );\r\n            var e = c.constructionStack;\r\n            if (0 === e.length)\r\n              return (\r\n                (e = F.call(document, c.localName)),\r\n                Object.setPrototypeOf(e, b.prototype),\r\n                (e.__CE_state = 1),\r\n                (e.__CE_definition = c),\r\n                w(a, e),\r\n                e\r\n              );\r\n            c = e.length - 1;\r\n            var f = e[c];\r\n            if (f === wa)\r\n              throw Error(\r\n                \"The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.\"\r\n              );\r\n            e[c] = wa;\r\n            Object.setPrototypeOf(f, b.prototype);\r\n            w(a, f);\r\n            return f;\r\n          }\r\n          b.prototype = ta.prototype;\r\n          Object.defineProperty(b.prototype, \"constructor\", {\r\n            writable: !0,\r\n            configurable: !0,\r\n            enumerable: !1,\r\n            value: b\r\n          });\r\n          return b;\r\n        })();\r\n      }\r\n      function Y(a, b, d) {\r\n        function c(b) {\r\n          return function(d) {\r\n            for (var e = [], c = 0; c < arguments.length; ++c)\r\n              e[c] = arguments[c];\r\n            c = [];\r\n            for (var f = [], m = 0; m < e.length; m++) {\r\n              var q = e[m];\r\n              q instanceof Element && l(q) && f.push(q);\r\n              if (q instanceof DocumentFragment)\r\n                for (q = q.firstChild; q; q = q.nextSibling) c.push(q);\r\n              else c.push(q);\r\n            }\r\n            b.apply(this, e);\r\n            for (e = 0; e < f.length; e++) z(a, f[e]);\r\n            if (l(this))\r\n              for (e = 0; e < c.length; e++)\r\n                (f = c[e]), f instanceof Element && x(a, f);\r\n          };\r\n        }\r\n        void 0 !== d.h && (b.prepend = c(d.h));\r\n        void 0 !== d.append && (b.append = c(d.append));\r\n      }\r\n      function ya() {\r\n        var a = X;\r\n        r(Document.prototype, \"createElement\", function(b) {\r\n          if (this.__CE_hasRegistry) {\r\n            var d = a.a.get(b);\r\n            if (d) return new d.constructorFunction();\r\n          }\r\n          b = F.call(this, b);\r\n          w(a, b);\r\n          return b;\r\n        });\r\n        r(Document.prototype, \"importNode\", function(b, d) {\r\n          b = ha.call(this, b, !!d);\r\n          this.__CE_hasRegistry ? A(a, b) : v(a, b);\r\n          return b;\r\n        });\r\n        r(Document.prototype, \"createElementNS\", function(b, d) {\r\n          if (\r\n            this.__CE_hasRegistry &&\r\n            (null === b || \"http://www.w3.org/1999/xhtml\" === b)\r\n          ) {\r\n            var c = a.a.get(d);\r\n            if (c) return new c.constructorFunction();\r\n          }\r\n          b = G.call(this, b, d);\r\n          w(a, b);\r\n          return b;\r\n        });\r\n        Y(a, Document.prototype, { h: ia, append: ja });\r\n      }\r\n      function za() {\r\n        function a(a, c) {\r\n          Object.defineProperty(a, \"textContent\", {\r\n            enumerable: c.enumerable,\r\n            configurable: !0,\r\n            get: c.get,\r\n            set: function(a) {\r\n              if (this.nodeType === Node.TEXT_NODE) c.set.call(this, a);\r\n              else {\r\n                var d = void 0;\r\n                if (this.firstChild) {\r\n                  var e = this.childNodes,\r\n                    k = e.length;\r\n                  if (0 < k && l(this)) {\r\n                    d = Array(k);\r\n                    for (var h = 0; h < k; h++) d[h] = e[h];\r\n                  }\r\n                }\r\n                c.set.call(this, a);\r\n                if (d) for (a = 0; a < d.length; a++) z(b, d[a]);\r\n              }\r\n            }\r\n          });\r\n        }\r\n        var b = X;\r\n        r(Node.prototype, \"insertBefore\", function(a, c) {\r\n          if (a instanceof DocumentFragment) {\r\n            var e = Array.prototype.slice.apply(a.childNodes);\r\n            a = J.call(this, a, c);\r\n            if (l(this)) for (c = 0; c < e.length; c++) x(b, e[c]);\r\n            return a;\r\n          }\r\n          e = l(a);\r\n          c = J.call(this, a, c);\r\n          e && z(b, a);\r\n          l(this) && x(b, a);\r\n          return c;\r\n        });\r\n        r(Node.prototype, \"appendChild\", function(a) {\r\n          if (a instanceof DocumentFragment) {\r\n            var c = Array.prototype.slice.apply(a.childNodes);\r\n            a = I.call(this, a);\r\n            if (l(this)) for (var e = 0; e < c.length; e++) x(b, c[e]);\r\n            return a;\r\n          }\r\n          c = l(a);\r\n          e = I.call(this, a);\r\n          c && z(b, a);\r\n          l(this) && x(b, a);\r\n          return e;\r\n        });\r\n        r(Node.prototype, \"cloneNode\", function(a) {\r\n          a = H.call(this, !!a);\r\n          this.ownerDocument.__CE_hasRegistry ? A(b, a) : v(b, a);\r\n          return a;\r\n        });\r\n        r(Node.prototype, \"removeChild\", function(a) {\r\n          var c = l(a),\r\n            e = K.call(this, a);\r\n          c && z(b, a);\r\n          return e;\r\n        });\r\n        r(Node.prototype, \"replaceChild\", function(a, c) {\r\n          if (a instanceof DocumentFragment) {\r\n            var e = Array.prototype.slice.apply(a.childNodes);\r\n            a = L.call(this, a, c);\r\n            if (l(this)) for (z(b, c), c = 0; c < e.length; c++) x(b, e[c]);\r\n            return a;\r\n          }\r\n          e = l(a);\r\n          var f = L.call(this, a, c),\r\n            d = l(this);\r\n          d && z(b, c);\r\n          e && z(b, a);\r\n          d && x(b, a);\r\n          return f;\r\n        });\r\n        M && M.get\r\n          ? a(Node.prototype, M)\r\n          : ca(b, function(b) {\r\n              a(b, {\r\n                enumerable: !0,\r\n                configurable: !0,\r\n                get: function() {\r\n                  for (var a = [], b = 0; b < this.childNodes.length; b++) {\r\n                    var f = this.childNodes[b];\r\n                    f.nodeType !== Node.COMMENT_NODE && a.push(f.textContent);\r\n                  }\r\n                  return a.join(\"\");\r\n                },\r\n                set: function(a) {\r\n                  for (; this.firstChild; ) K.call(this, this.firstChild);\r\n                  null != a &&\r\n                    \"\" !== a &&\r\n                    I.call(this, document.createTextNode(a));\r\n                }\r\n              });\r\n            });\r\n      }\r\n      function Aa(a) {\r\n        function b(b) {\r\n          return function(e) {\r\n            for (var c = [], d = 0; d < arguments.length; ++d)\r\n              c[d] = arguments[d];\r\n            d = [];\r\n            for (var k = [], h = 0; h < c.length; h++) {\r\n              var m = c[h];\r\n              m instanceof Element && l(m) && k.push(m);\r\n              if (m instanceof DocumentFragment)\r\n                for (m = m.firstChild; m; m = m.nextSibling) d.push(m);\r\n              else d.push(m);\r\n            }\r\n            b.apply(this, c);\r\n            for (c = 0; c < k.length; c++) z(a, k[c]);\r\n            if (l(this))\r\n              for (c = 0; c < d.length; c++)\r\n                (k = d[c]), k instanceof Element && x(a, k);\r\n          };\r\n        }\r\n        var d = Element.prototype;\r\n        void 0 !== V && (d.before = b(V));\r\n        void 0 !== V && (d.after = b(qa));\r\n        void 0 !== ra &&\r\n          r(d, \"replaceWith\", function(b) {\r\n            for (var e = [], c = 0; c < arguments.length; ++c)\r\n              e[c] = arguments[c];\r\n            c = [];\r\n            for (var d = [], k = 0; k < e.length; k++) {\r\n              var h = e[k];\r\n              h instanceof Element && l(h) && d.push(h);\r\n              if (h instanceof DocumentFragment)\r\n                for (h = h.firstChild; h; h = h.nextSibling) c.push(h);\r\n              else c.push(h);\r\n            }\r\n            k = l(this);\r\n            ra.apply(this, e);\r\n            for (e = 0; e < d.length; e++) z(a, d[e]);\r\n            if (k)\r\n              for (z(a, this), e = 0; e < c.length; e++)\r\n                (d = c[e]), d instanceof Element && x(a, d);\r\n          });\r\n        void 0 !== sa &&\r\n          r(d, \"remove\", function() {\r\n            var b = l(this);\r\n            sa.call(this);\r\n            b && z(a, this);\r\n          });\r\n      }\r\n      function Ba() {\r\n        function a(a, b) {\r\n          Object.defineProperty(a, \"innerHTML\", {\r\n            enumerable: b.enumerable,\r\n            configurable: !0,\r\n            get: b.get,\r\n            set: function(a) {\r\n              var e = this,\r\n                d = void 0;\r\n              l(this) &&\r\n                ((d = []),\r\n                p(this, function(a) {\r\n                  a !== e && d.push(a);\r\n                }));\r\n              b.set.call(this, a);\r\n              if (d)\r\n                for (var f = 0; f < d.length; f++) {\r\n                  var t = d[f];\r\n                  1 === t.__CE_state && c.disconnectedCallback(t);\r\n                }\r\n              this.ownerDocument.__CE_hasRegistry ? A(c, this) : v(c, this);\r\n              return a;\r\n            }\r\n          });\r\n        }\r\n        function b(a, b) {\r\n          r(a, \"insertAdjacentElement\", function(a, e) {\r\n            var d = l(e);\r\n            a = b.call(this, a, e);\r\n            d && z(c, e);\r\n            l(a) && x(c, e);\r\n            return a;\r\n          });\r\n        }\r\n        function d(a, b) {\r\n          function e(a, b) {\r\n            for (var e = []; a !== b; a = a.nextSibling) e.push(a);\r\n            for (b = 0; b < e.length; b++) A(c, e[b]);\r\n          }\r\n          r(a, \"insertAdjacentHTML\", function(a, c) {\r\n            a = a.toLowerCase();\r\n            if (\"beforebegin\" === a) {\r\n              var d = this.previousSibling;\r\n              b.call(this, a, c);\r\n              e(d || this.parentNode.firstChild, this);\r\n            } else if (\"afterbegin\" === a)\r\n              (d = this.firstChild), b.call(this, a, c), e(this.firstChild, d);\r\n            else if (\"beforeend\" === a)\r\n              (d = this.lastChild),\r\n                b.call(this, a, c),\r\n                e(d || this.firstChild, null);\r\n            else if (\"afterend\" === a)\r\n              (d = this.nextSibling),\r\n                b.call(this, a, c),\r\n                e(this.nextSibling, d);\r\n            else\r\n              throw new SyntaxError(\r\n                \"The value provided (\" +\r\n                  String(a) +\r\n                  \") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.\"\r\n              );\r\n          });\r\n        }\r\n        var c = X;\r\n        N &&\r\n          r(Element.prototype, \"attachShadow\", function(a) {\r\n            a = N.call(this, a);\r\n            var b = c;\r\n            if (b.b && !a.__CE_patched) {\r\n              a.__CE_patched = !0;\r\n              for (var e = 0; e < b.c.length; e++) b.c[e](a);\r\n            }\r\n            return (this.__CE_shadowRoot = a);\r\n          });\r\n        O && O.get\r\n          ? a(Element.prototype, O)\r\n          : W && W.get\r\n          ? a(HTMLElement.prototype, W)\r\n          : da(c, function(b) {\r\n              a(b, {\r\n                enumerable: !0,\r\n                configurable: !0,\r\n                get: function() {\r\n                  return H.call(this, !0).innerHTML;\r\n                },\r\n                set: function(a) {\r\n                  var b = \"template\" === this.localName,\r\n                    c = b ? this.content : this,\r\n                    e = G.call(document, this.namespaceURI, this.localName);\r\n                  for (e.innerHTML = a; 0 < c.childNodes.length; )\r\n                    K.call(c, c.childNodes[0]);\r\n                  for (a = b ? e.content : e; 0 < a.childNodes.length; )\r\n                    I.call(c, a.childNodes[0]);\r\n                }\r\n              });\r\n            });\r\n        r(Element.prototype, \"setAttribute\", function(a, b) {\r\n          if (1 !== this.__CE_state) return Q.call(this, a, b);\r\n          var e = P.call(this, a);\r\n          Q.call(this, a, b);\r\n          b = P.call(this, a);\r\n          c.attributeChangedCallback(this, a, e, b, null);\r\n        });\r\n        r(Element.prototype, \"setAttributeNS\", function(a, b, d) {\r\n          if (1 !== this.__CE_state) return T.call(this, a, b, d);\r\n          var e = S.call(this, a, b);\r\n          T.call(this, a, b, d);\r\n          d = S.call(this, a, b);\r\n          c.attributeChangedCallback(this, b, e, d, a);\r\n        });\r\n        r(Element.prototype, \"removeAttribute\", function(a) {\r\n          if (1 !== this.__CE_state) return R.call(this, a);\r\n          var b = P.call(this, a);\r\n          R.call(this, a);\r\n          null !== b && c.attributeChangedCallback(this, a, b, null, null);\r\n        });\r\n        r(Element.prototype, \"removeAttributeNS\", function(a, b) {\r\n          if (1 !== this.__CE_state) return U.call(this, a, b);\r\n          var d = S.call(this, a, b);\r\n          U.call(this, a, b);\r\n          var e = S.call(this, a, b);\r\n          d !== e && c.attributeChangedCallback(this, b, d, e, a);\r\n        });\r\n        ua\r\n          ? b(HTMLElement.prototype, ua)\r\n          : ma\r\n          ? b(Element.prototype, ma)\r\n          : console.warn(\r\n              \"Custom Elements: `Element#insertAdjacentElement` was not patched.\"\r\n            );\r\n        va\r\n          ? d(HTMLElement.prototype, va)\r\n          : na\r\n          ? d(Element.prototype, na)\r\n          : console.warn(\r\n              \"Custom Elements: `Element#insertAdjacentHTML` was not patched.\"\r\n            );\r\n        Y(c, Element.prototype, { h: oa, append: pa });\r\n        Aa(c);\r\n      }\r\n      var Z = window.customElements;\r\n      if (\r\n        !Z ||\r\n        Z.forcePolyfill ||\r\n        \"function\" != typeof Z.define ||\r\n        \"function\" != typeof Z.get\r\n      ) {\r\n        var X = new u();\r\n        xa();\r\n        ya();\r\n        Y(X, DocumentFragment.prototype, { h: ka, append: la });\r\n        za();\r\n        Ba();\r\n        document.__CE_hasRegistry = !0;\r\n        var customElements = new E(X);\r\n        Object.defineProperty(window, \"customElements\", {\r\n          configurable: !0,\r\n          enumerable: !0,\r\n          value: customElements\r\n        });\r\n      }\r\n    }.call(self));\r\n\r\n    //# sourceMappingURL=custom-elements.min.js.map\r\n\r\n    window.CustomElementRegistry = Reflect.get(\r\n      Reflect.getPrototypeOf(window.customElements),\r\n      \"constructor\"\r\n    );\r\n  }\r\n})();\r\n","(() => {\r\n  function flattenDeep(arr1) {\r\n    return arr1.reduce(\r\n      (acc, val) => acc.concat(Array.isArray(val) ? flattenDeep(val) : val),\r\n\r\n      []\r\n    );\r\n  }\r\n\r\n  function arrayflat(depth = 1) {\r\n    if (depth <= 1) {\r\n      return this.reduce((acc, val) => acc.concat(val), []);\r\n    } else if (depth > 10) {\r\n      return flattenDeep(this);\r\n    } else {\r\n      let result = [...this];\r\n      while (depth >= 1) {\r\n        result = arrayflat.call(result);\r\n        depth--;\r\n      }\r\n      return result;\r\n    }\r\n  }\r\n\r\n  if (typeof Array.prototype.flat !== \"function\") {\r\n    Array.prototype.flat = arrayflat;\r\n  }\r\n})();\r\n","(() => {\r\n  function fromPairs(pairs) {\r\n    var index = -1,\r\n      length = pairs == null ? 0 : pairs.length,\r\n      result = {};\r\n    while (++index < length) {\r\n      var pair = pairs[index];\r\n      result[pair[0]] = pair[1];\r\n    }\r\n    return result;\r\n  }\r\n\r\n  var fromPairs_1 = fromPairs;\r\n\r\n  if (\"function\" !== typeof Object.fromEntries) {\r\n    Object.fromEntries = fromPairs_1;\r\n  }\r\n})();\r\n","import { isboolean, isnumber, isString, isundefined } from \"./util\";\r\nexport type Primitivetype = string | number | boolean | undefined | bigint;\r\nexport default function(a: any): a is Primitivetype {\r\n  return (\r\n    isString(a) || isnumber(a) || isboolean(a) || isundefined(a) || isbigint(a)\r\n    // typeof a === \"bigint\"\r\n  );\r\n}\r\nexport function isbigint(a: any): a is bigint {\r\n  return typeof a === \"bigint\";\r\n}\r\n","export function issymbol(a: any): a is symbol {\r\n  return typeof a === \"symbol\";\r\n  //||gettagtype(a) === \"symbol\";\r\n}\r\n\r\nexport { isplainobject };\r\nexport { isfunction as isFunction, isarray as isArray, isstring as isString };\r\nexport { isprimitive };\r\n\r\nconst isplainobject = (a: any): a is Record<any, any> =>\r\n  isobject(a) && gettagtype(a) === \"Object\";\r\n\r\nimport isprimitive from \"./isprimitive\";\r\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\nexport function isundefined(a: any): a is void {\r\n  return (!a && a === void 0) || a === null;\r\n}\r\n\r\nexport function isnumber(a: any): a is number {\r\n  return typeof a === \"number\";\r\n}\r\nexport function isboolean(a: any): a is boolean {\r\n  return typeof a === \"boolean\";\r\n}\r\nexport function isobject(a: any): a is Exclude<object, Function> {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\n// export function isstring(a: string): true;\r\n// export function isstring(a): boolean;\r\nexport function isstring(a: any): a is string {\r\n  return typeof a === \"string\";\r\n}\r\nexport function isfunction(a: any): a is Function {\r\n  return typeof a === \"function\";\r\n}\r\n\r\nexport function isarray(a: any): a is Array<any> {\r\n  return Array.isArray(a)&&a instanceof Array \r\n//&&  \r\n//&& gettagtype(a) === \"Array\";\r\n}\r\n/* export function getsymbol(a: string) {\r\n  return Symbol(a);\r\n} */\r\nexport function gettagtype(a: any): string {\r\n  return (\r\n    {}.toString\r\n      .call(a)\r\n      .replace(\"[object \", \"\")\r\n      .replace(\"]\", \"\")\r\n      //.toLowerCase()\r\n      .trim()\r\n  );\r\n}\r\n//export function ispromise(a: any): a is Promise<any> {\r\n//  return gettagtype(a) === \"promise\" && isFunction(get(a, \"then\"));\r\n//}\r\nexport function isSet(a: any): a is Set<any> {\r\n  return a instanceof Set;\r\n}\r\nexport function isMap(a: any): a is Map<any, any> {\r\n  return a instanceof Map;\r\n}\r\nconst camelizeRE = /-(\\w)/g;\r\nexport const camelize = (str: string): string => {\r\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : \"\"));\r\n};\r\n\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nexport const hyphenate = (str: string): string => {\r\n  return str.replace(hyphenateRE, \"-$1\").toLowerCase();\r\n};\r\n\r\nexport function isWeakMap(a: any): a is WeakMap<any, any> {\r\n  return a instanceof WeakMap;\r\n}\r\n","import { isfunction, isobject } from \"./UtilTools/util\";\r\nconst { HTMLElement, customElements, Proxy } = window;\r\nif (\r\n  !isfunction(HTMLElement) ||\r\n  //   typeof HTMLElement !== \"function\" ||\r\n  !isfunction(Proxy) ||\r\n  //   typeof Proxy !== \"function\" ||\r\n  !isobject(customElements)\r\n  /*||\r\n  //   typeof customElements !== \"object\" ||\r\n  !isfunction(window.CustomElementRegistry)\r\n  //||\r\n  //   typeof CustomElementRegistry !== \"function\"\r\n\r\n*/\r\n) {\r\n  console.error(\"Proxy,HTMLElement ,customElements ,browser not supported !\");\r\n  throw new TypeError();\r\n}\r\n","const acceptValue = [\"input\", \"textarea\", \"option\", \"select\"];\r\n\r\nexport default (tag: string, attr: string, attrtype: string) => {\r\n  return (\r\n    (attr === \"value\" && acceptValue.includes(tag) && attrtype !== \"button\") ||\r\n    (attr === \"selected\" && tag === \"option\") ||\r\n    (attr === \"checked\" && tag === \"input\") ||\r\n    (attr === \"muted\" && tag === \"video\")\r\n  );\r\n};\r\n","import mustUseDomProp from \"./mustUseDomProp\";\r\n/* const camelizeRE = /-(\\w)/g;\r\nconst camelize = (str: string): string => {\r\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : \"\"));\r\n};\r\n */\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nconst hyphenate = (str: string): string => {\r\n  return str.replace(hyphenateRE, \"-$1\").toLowerCase();\r\n};\r\nconst String = window.String;\r\nconst Reflect = window.Reflect;\r\nconst { get, set, ownKeys } = Reflect;\r\nconst valuestring = \"value\";\r\nfunction isobject(a: any): a is Record<any, any> {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isstring(a: any): a is string {\r\n  return typeof a === \"string\";\r\n}\r\nfunction isArray(a: any): a is Array<any> {\r\n  return Array.isArray(a);\r\n}\r\n\r\nfunction isSet(a: any): a is Set<any> {\r\n  return a instanceof Set;\r\n}\r\n\r\nconst isinputcheckbox = (\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement\r\n) =>\r\n  \"input\" === geteletagname(ele) &&\r\n  (get(ele, \"type\") === \"checkbox\" || get(ele, \"type\") === \"radio\");\r\n\r\n//stylejson\r\nfunction objtostylestring(obj: object): string {\r\n  //style\r\n\r\n  obj = JSON.parse(JSON.stringify(obj));\r\n\r\n  const objentries = Object.entries(obj).map(([key, value]) => [\r\n    hyphenate(key).trim(),\r\n    value\r\n  ]);\r\n\r\n  return objentries.map(([key, value]) => key + \":\" + value).join(\";\");\r\n}\r\nfunction asserthtmlelement(ele: any) {\r\n  if (!(ele instanceof Element)) {\r\n    console.error(ele);\r\n    console.error(\"invalid HTMLElement!\");\r\n    throw TypeError();\r\n  }\r\n}\r\nexport default function createeleattragentreadwrite(\r\n  ele: Element\r\n): Record<string, any> {\r\n  asserthtmlelement(ele);\r\n\r\n  var temp: Record<string, any> = Object.create(null);\r\n\r\n  const outputattrs: Record<string, any> = new Proxy(temp, {\r\n    ownKeys(/* target */) {\r\n      const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n\r\n      const keys = attributesownkeys(ele);\r\n\r\n      return Array.from(\r\n        new Set(\r\n          [\r\n            ...keys,\r\n            isinputcheckbox(ele) ? \"checked\" : undefined,\r\n            isinputtextortextareaflag ? valuestring : undefined\r\n            //Array.from(new Set([...keys, valuestring]))\r\n            //  : keys\r\n          ]\r\n            .flat(Infinity)\r\n            .filter(a => !!a)\r\n        )\r\n      );\r\n    },\r\n    get(target, key) {\r\n      //   const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n\r\n      //   if (isinputcheckbox(ele) && key === \"checked\") {\r\n      //     return get(ele, \"checked\");\r\n      //   }\r\n      //   if (isinputtextortextareaflag && key === valuestring) {\r\n      //     return get(ele, valuestring);\r\n\r\n      //   }\r\n      if (mustUseDomProp(geteletagname(ele), String(key), get(ele, \"type\"))) {\r\n        return get(ele, String(key));\r\n      } else {\r\n        const v = getattribute(ele, String(key));\r\n        // ele.getAttribute(String(key));\r\n        //   console.log(v);\r\n        if (v === \"\") {\r\n          return true;\r\n        }\r\n        /* truebug */\r\n        if (v === null) {\r\n          return;\r\n        }\r\n\r\n        //true\r\n\r\n        if (isstring(v)) {\r\n          try {\r\n            return JSON.parse(String(v)); // v\r\n          } catch (error) {\r\n            return v;\r\n          }\r\n        } else return;\r\n      }\r\n    },\r\n    set(t, key, v) {\r\n      //   const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n\r\n      //\r\n      if (\"function\" === typeof v) {\r\n        console.error(v);\r\n\r\n        console.error(\"Setting properties as functions is not allowed\");\r\n        throw TypeError();\r\n\r\n        // throw TypeError(\"\");\r\n      }\r\n      /* inputcheckbox checked,,checked*/\r\n      /*  if (geteletagname(ele) === \"input\" && key === \"checked\") {\r\n        set(ele, key, v);\r\n        return true;\r\n      }\r\n\r\n      if (isinputtextortextareaflag && key === valuestring) {\r\n        //value,\r\n        return set(ele, valuestring, String(v));\r\n      }  */\r\n\r\n      if (mustUseDomProp(geteletagname(ele), String(key), get(ele, \"type\"))) {\r\n        return set(ele, String(key), v);\r\n      } else if (key === \"style\") {\r\n        const csstext = isstring(v)\r\n          ? v\r\n          : isobject(v)\r\n          ? objtostylestring(v)\r\n          : String(v);\r\n        //csstext\r\n        set(get(ele, \"style\"), \"cssText\", csstext.trim());\r\n        // ele.style.cssText = csstext.trim();\r\n\r\n        //    setattribute(\r\n        //      ele,\r\n        //       String(key),\r\n        //      isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v)\r\n        //     );\r\n        /*   ele.setAttribute(\r\n          String(key),\r\n          isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v)\r\n        ); */\r\n        return true;\r\n      } else if (key === \"class\" && isobject(v)) {\r\n        const classtext = isArray(v)\r\n          ? v.join(\" \")\r\n          : isSet(v)\r\n          ? [...v].join(\" \")\r\n          : String(v);\r\n\r\n        setattribute(ele, String(key), classtext);\r\n        return true;\r\n        /*  if (isArray(v)) {\r\n          setattribute(ele, String(key), v.join(\" \"));\r\n        } else if (isSet(v)) {\r\n          setattribute(ele, String(key), [...v].join(\" \"));\r\n        } else {\r\n          setattribute(ele, String(key), String(v));\r\n        }*/\r\n        //\r\n      } else {\r\n        /* falseattribute */\r\n\r\n        if (false === v || v === null || v === undefined) {\r\n          removeAttribute(ele, String(key));\r\n          return true;\r\n        }\r\n        //true,\r\n        if (isSet(v)) {\r\n          setattribute(ele, String(key), JSON.stringify([...v]));\r\n          return true;\r\n        } else {\r\n          if (v === true) {\r\n            v = \"\";\r\n          }\r\n\r\n          setattribute(\r\n            ele,\r\n            String(key),\r\n            isobject(v) ? JSON.stringify(v) : String(v)\r\n          );\r\n          /*  ele.setAttribute(\r\n          String(key),\r\n          isobject(v) ? JSON.stringify(v) : String(v)\r\n        ); */\r\n          return true;\r\n        }\r\n      }\r\n      //   return true;\r\n    },\r\n    deleteProperty(t, k) {\r\n      removeAttribute(ele, String(k));\r\n      // ele.removeAttribute(String(k));\r\n      return true;\r\n    },\r\n    has(target, key) {\r\n      return ownKeys(outputattrs).includes(key);\r\n      /*\r\nconst isinputtextortextareaflag = isinputtextortextarea(ele);\r\n  \r\n      if (isinputtextortextareaflag && key === valuestring) {\r\n        return true;\r\n      } else {\r\n        return hasAttribute(ele, String(key));\r\n\r\n        // ele.hasAttribute(String(key));\r\n      }\r\n\r\n*/\r\n    },\r\n    defineProperty() {\r\n      return false;\r\n    },\r\n    getOwnPropertyDescriptor(target, key) {\r\n      const otherdescipter = {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      };\r\n      const myvalue: any = get(outputattrs, key);\r\n      if (typeof myvalue !== \"undefined\") {\r\n        return {\r\n          value: myvalue,\r\n          ...otherdescipter\r\n        };\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      /*  if (isinputtextortextareaflag && key === valuestring) {\r\n        return {\r\n          value: get(ele, valuestring),\r\n          ...otherdescipter\r\n          //   enumerable: true,\r\n          //   configurable: true,\r\n          //   writable: true\r\n        };\r\n      } else {\r\n        const attr = getattribute(ele, String(key));\r\n        // ele.getAttribute(String(key));\r\n\r\n        //true\r\n        let outvalue;\r\n        if (attr === \"\") {\r\n          outvalue = true;\r\n        }\r\n        if (outvalue) {\r\n          return {\r\n            value: outvalue,\r\n            ...otherdescipter\r\n            // enumerable: true,\r\n            // configurable: true,\r\n            // writable: true\r\n          };\r\n        } else {\r\n          return;\r\n        }\r\n      } */\r\n    },\r\n    setPrototypeOf() {\r\n      return false;\r\n    }\r\n    /*  setPrototypeOf() {\r\n      return false;\r\n    },\r\n    getPrototypeOf() {\r\n      return null;\r\n    }*/\r\n  });\r\n  return outputattrs;\r\n}\r\nfunction attributesownkeys(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement\r\n): string[] {\r\n  //   return ownKeys(ele.attributes).filter(k => !/\\d/.test(String(k)[0]));\r\n  return ele.getAttributeNames();\r\n}\r\nfunction getattribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string\r\n) {\r\n  return ele.getAttribute(key);\r\n}\r\nfunction geteletagname(ele: Element /* { tagName: string } */) {\r\n  return ele.tagName.toLowerCase();\r\n}\r\nfunction setattribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string,\r\n  value: string\r\n) {\r\n  return ele.setAttribute(key, value);\r\n}\r\nfunction removeAttribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string\r\n) {\r\n  return ele.removeAttribute(key);\r\n}\r\n\r\n/* function hasAttribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string\r\n) {\r\n  return ele.hasAttribute(key);\r\n}\r\n */\r\nfunction isinputtextortextarea(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement\r\n) {\r\n  const tagname = geteletagname(ele);\r\n  return (\r\n    tagname === \"textarea\" ||\r\n    tagname === \"select\" ||\r\n    (tagname === \"input\" && get(ele, \"type\") === \"text\")\r\n\r\n    /* select */\r\n  );\r\n}\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { Htmlelementconstructor } from \"./AttributeClass/createComponent\";\r\nimport { CallbackReactiveState } from \"./Reactivity/watch\";\r\n\r\nexport const cached_callback_eventlistner = new WeakMap<\r\n  Function,\r\n  EventListener\r\n>();\r\nexport const cached_create_componet = new WeakMap<\r\n  Function,\r\n  Htmlelementconstructor\r\n>();\r\nexport const cached_callback_debounced_watchs = new WeakMap<\r\n  CallbackReactiveState,\r\n  Function\r\n>();\r\n","import { isMap, isWeakMap } from \"./util\";\r\n\r\n// const { Reflect } = window;\r\n// export default Reflect;\r\nexport const {\r\n  apply,\r\n  construct,\r\n  defineProperty,\r\n  deleteProperty,\r\n  //   get,\r\n  getOwnPropertyDescriptor,\r\n  getPrototypeOf,\r\n  has,\r\n\r\n  //   isExtensible,\r\n  ownKeys,\r\n  preventExtensions\r\n  //   set\r\n  //   setPrototypeOf\r\n} = Reflect;\r\n/* getsetreflect.getreflect.setmap.setmap.get */\r\nexport function get(\r\n  target: Map<any, any> | WeakMap<any, any>,\r\n  propertyKey: PropertyKey\r\n): any;\r\nexport function get(\r\n  target: Exclude<object, Map<any, any> | WeakMap<any, any>>,\r\n  propertyKey: PropertyKey\r\n): //   receiver?: any\r\nany;\r\nexport function get(\r\n  target: object,\r\n  propertyKey: PropertyKey\r\n  //   receiver?: any\r\n): any {\r\n  if (isMap(target) || isWeakMap(target)) {\r\n    // debugger;\r\n    return target.get(propertyKey);\r\n  } else {\r\n    // debugger;\r\n    return Reflect.get(target, propertyKey /* , receiver */);\r\n  }\r\n}\r\nexport function set(\r\n  target: Map<any, any> | WeakMap<any, any>,\r\n  propertyKey: PropertyKey,\r\n  value: any\r\n): boolean;\r\nexport function set(\r\n  target: Exclude<object, Map<any, any> | WeakMap<any, any>>,\r\n  propertyKey: PropertyKey,\r\n  value: any\r\n): //   receiver?: any\r\nboolean;\r\nexport function set(\r\n  target: object,\r\n  propertyKey: PropertyKey,\r\n  value: any\r\n  //   receiver?: any\r\n): boolean {\r\n  if (isMap(target) || isWeakMap(target)) {\r\n    target.set(propertyKey, value);\r\n    // debugger;\r\n    return true;\r\n  } else {\r\n    // debugger;\r\n    return Reflect.set(target, propertyKey, value /* , receiver */);\r\n  }\r\n}\r\n\r\n// export {};\r\n/*\r\napply()\r\n Function.prototype.apply() \r\nconstruct()\r\n new  new target(...args)\r\ndefineProperty()\r\n Object.defineProperty() \r\ndeleteProperty()\r\ndelete delete target[name]\r\n//Reflect.enumerate()\r\nfor...in \r\nget()\r\n target[name]\r\ngetOwnPropertyDescriptor()\r\n Object.getOwnPropertyDescriptor()\r\ngetPrototypeOf()\r\n Object.getPrototypeOf()\r\nhas()\r\n in  \r\nisExtensible()\r\n Object.isExtensible().\r\nownKeys()\r\n( Object.keys(), enumerable).\r\npreventExtensions()\r\n Object.preventExtensions()Boolean\r\nset()\r\nBooleantrue\r\nsetPrototypeOf()\r\n Object.setPrototypeOf()\r\n*/\r\n","let watchrecord: [ReactiveState<any>, Function][] = [];\r\n/* watchstatecallback,\r\nremoveeventlistener,\r\naddeventlistener\r\n*/\r\nimport ReactiveState from \"../Reactivity/ReactiveState\";\r\nimport { isFunction } from \"../UtilTools/util\";\r\nexport function getwatchrecords() {\r\n  return [...watchrecord];\r\n}\r\nexport function usewatch(state: ReactiveState<any>, callback: Function) {\r\n  if (ctxopen) {\r\n    watchrecord.push([state, callback]);\r\n  }\r\n}\r\nfunction clearwatch() {\r\n  watchrecord = [];\r\n}\r\nexport const invalid_Function = \"invalid Function\";\r\nconst errormessage =\r\n  \"invalid useMounted or useUnMounted out of createComponent\";\r\nlet ctxopen = false;\r\nlet MountedSet: Set<Function> = new Set();\r\nlet UnMountedSet: Set<Function> = new Set();\r\nlet StateSet: Set<ReactiveState<any>> = new Set();\r\n/*  ReactiveState*/\r\n\r\nexport function getstates() {\r\n  return [...StateSet];\r\n}\r\nexport function recordusestste(state: ReactiveState<any>) {\r\n  if (ctxopen) {\r\n    StateSet.add(state);\r\n  }\r\n}\r\nexport function getMounted() {\r\n  return [...MountedSet];\r\n}\r\nexport function getUnMounted() {\r\n  return [...UnMountedSet];\r\n}\r\nexport function useMounted(fun: Function) {\r\n  if (isFunction(fun)) {\r\n    if (ctxopen) {\r\n      MountedSet.add(fun);\r\n    } else {\r\n      //console.error()\r\n      console.error(errormessage);\r\n      throw Error();\r\n    }\r\n  } else {\r\n    console.error(fun);\r\n    console.error(invalid_Function);\r\n    throw TypeError();\r\n  }\r\n}\r\n\r\nexport function useUnMounted(fun: Function) {\r\n  if (isFunction(fun)) {\r\n    if (ctxopen) {\r\n      UnMountedSet.add(fun);\r\n    } else {\r\n      console.error(errormessage);\r\n      throw Error();\r\n      //throw Error(errormessage);\r\n    }\r\n  } else {\r\n    console.error(fun);\r\n    console.error(invalid_Function);\r\n    throw TypeError();\r\n    //throw TypeError(invalid_Function);\r\n  }\r\n}\r\nexport function clearMounted() {\r\n  MountedSet = new Set();\r\n}\r\n\r\nfunction clearstate() {\r\n  StateSet = new Set();\r\n}\r\nexport function clearUnMounted() {\r\n  UnMountedSet = new Set();\r\n}\r\nexport function openctx() {\r\n  ctxopen = true;\r\n  clearall();\r\n}\r\nexport function closectx() {\r\n  ctxopen = false;\r\n  clearall();\r\n}\r\nfunction clearall() {\r\n  clearMounted();\r\n  clearUnMounted();\r\n  clearstate();\r\n  clearwatch();\r\n}\r\n","const EventTarget = window.EventTarget;\r\nimport debounce from \"lodash/debounce\";\r\nimport { cached_callback_eventlistner } from \"../cached-map\";\r\n// import Reflect from \"./reflect\";\r\nimport isprimitive, { Primitivetype } from \"../UtilTools/isprimitive\";\r\nimport { defineProperty } from \"../UtilTools/reflect\";\r\nimport { isobject, isSet } from \"../UtilTools/util\";\r\nimport { UnwrapedState } from \"./watch\";\r\nimport { recordusestste } from \"src/mounted-unmounted/Component-context\";\r\nexport const addonelistner = Symbol(\"addonelistner\");\r\nexport const removeonelistner = Symbol(\"removeonelistner\");\r\n// import { Primitive } from 'lodash';\r\n// export const callbackmap = Symbol(\"callbackmap\");\r\nexport const cancelsubscribe = Symbol(\"cancelsubscribe\");\r\nconst debouncedispatch = Symbol(\"debouncedispatch\");\r\nexport const invalid_primitive_or_object_state =\r\n  \"invalid primitive or object state\";\r\nexport function isReactiveState(a: any): a is ReactiveState<any> {\r\n  return (\r\n    a instanceof ReactiveState && a[Symbol.toStringTag] === \"ReactiveState\"\r\n  );\r\n}\r\n// export const textnodesymbol = Symbol(\"textnode\");\r\nexport const changetextnodesymbol = Symbol(\"changetextnode\");\r\nexport const eventtargetsymbol = Symbol(\"eventtatget\");\r\nexport const memlisteners = Symbol(\"memlisteners\");\r\nexport const dispatchsymbol = Symbol(\"dispatch\");\r\nexport const subscribesymbol = Symbol(\"subscribe\");\r\nexport const removeallistenerssymbol = Symbol(\"removeallisteners\");\r\nexport const addallistenerssymbol = Symbol(\"addallisteners\");\r\n/* const forkarryaprototype = {};\r\nownKeys(Array.prototype).forEach(key => {\r\n  forkarryaprototype[key] = Array.prototype[key];\r\n}); */\r\n/* class forkarray {}\r\nObject.assign(forkarray.prototype, forkarryaprototype);\r\nforkarray.prototype.constructor = forkarray;\r\ndeleteProperty(forkarray.prototype, \"length\"); */\r\n/* extends forkarray  */\r\n\r\nexport default class ReactiveState<T extends UnwrapedState> {\r\n  value: T extends Array<any>\r\n    ? Array<any>\r\n    : T extends Function\r\n    ? Function\r\n    : T extends Primitivetype\r\n    ? Primitivetype\r\n    : object;\r\n  //extends Primitivetype ? Primitivetype : Exclude<object, Function>;\r\n  //   [callbackmap] = new Map<Function, EventListener>();\r\n\r\n  readonly [Symbol.toStringTag] = \"ReactiveState\";\r\n\r\n  constructor(init?: T) {\r\n    //super();\r\n    // this.value = undefined;\r\n\r\n    // if (isprimitive(init) || isobject(init)) {\r\n    this.value = init as any; //as T; /* extends Primitivetype\r\n    //  ? Primitivetype\r\n    //  : Exclude<object, Function>; */\r\n    defineProperty(this, \"value\", {\r\n      value: init,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n\r\n    // this.value = init;\r\n    // } else {\r\n    //   console.error(init);\r\n    //   console.error(invalid_primitive_or_object_state);\r\n    //   throw TypeError();\r\n    // }\r\n    // this[eventtargetsymbol] = new EventTarget();\r\n\r\n    /*\r\n  //  Object.defineProperty(this, Symbol.toStringTag, {\r\n //     value: \"ReactiveState\",\r\n   //   configurable: true\r\n    //});\r\n\r\n*/\r\n    recordusestste(this);\r\n    const debouncedfun = debounce((eventname?: string) => {\r\n      const name = eventname ? String(eventname) : \"value\";\r\n\r\n      this[eventtargetsymbol].dispatchEvent(\r\n        new CustomEvent(\"value\", { detail: name })\r\n      );\r\n    });\r\n    this[debouncedispatch] = (eventname?: string) => {\r\n      debouncedfun(eventname);\r\n    };\r\n  }\r\n  [debouncedispatch]: (eventname?: string | undefined) => void;\r\n  /* get [Symbol.toStringTag]() {\r\n  //  return \"ReativeState\";\r\n\r\n} */\r\n  [removeallistenerssymbol]() {\r\n    this[memlisteners].forEach(callback => {\r\n      this[removeonelistner](callback);\r\n    });\r\n  }\r\n  [removeonelistner](callback: EventListener) {\r\n    const name = \"value\";\r\n    this[eventtargetsymbol].removeEventListener(name, callback);\r\n  }\r\n  [addonelistner](callback: EventListener) {\r\n    const name = \"value\";\r\n    this[eventtargetsymbol].addEventListener(name, callback);\r\n  }\r\n  [addallistenerssymbol]() {\r\n    // const name = \"value\";\r\n    this[memlisteners].forEach(callback => {\r\n      this[addonelistner](callback);\r\n      //   this[eventtargetsymbol].addEventListener(name, callback);\r\n    });\r\n  }\r\n  /*  [changetextnodesymbol](textnode: Text) {\r\n    this[textnodesymbol] = textnode;\r\n  } */\r\n  // [textnodesymbol]: Text | undefined;\r\n  /*  [changetextnodesymbol](textnode: Text) {\r\n      this[textnodesymbol] = textnode;\r\n    } */\r\n  // [textnodesymbol]: Text | undefined;\r\n\r\n  [eventtargetsymbol] = new EventTarget();\r\n  [memlisteners] = new Set<EventListener>();\r\n\r\n  //this\r\n  valueOf = () => {\r\n    return this.value;\r\n  };\r\n  toString() {\r\n    const value = this.valueOf();\r\n    return isprimitive(value)\r\n      ? String(value)\r\n      : isSet(value)\r\n      ? JSON.stringify([...(value as Set<any>)])\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : \"\";\r\n  }\r\n\r\n  [dispatchsymbol](eventname?: string) {\r\n    //\r\n\r\n    this[debouncedispatch](eventname);\r\n  }\r\n  [subscribesymbol](\r\n    callback: Function\r\n    /*, eventname?: string*/\r\n  ) {\r\n    let eventlistener: EventListener;\r\n    const possiblecallback = cached_callback_eventlistner.get(callback);\r\n    if (possiblecallback) {\r\n      eventlistener = possiblecallback;\r\n    } else {\r\n      //\r\n      eventlistener = () => callback(/* this.valueOf() */);\r\n\r\n      cached_callback_eventlistner.set(callback, eventlistener);\r\n    }\r\n    // this[eventtargetsymbol].addEventListener(\"value\", callback);\r\n    // const name = eventname ? String(eventname) : \"value\";\r\n    //  const name = \"value\";\r\n    this[memlisteners].add(eventlistener);\r\n  }\r\n  [cancelsubscribe](callback: Function) {\r\n    const eventlistener = cached_callback_eventlistner.get(callback);\r\n    /*  if (!eventlistener) {\r\n      throw new Error();\r\n    } */\r\n    if (eventlistener) {\r\n      this[memlisteners].delete(eventlistener);\r\n      this[removeonelistner](eventlistener);\r\n    }\r\n  }\r\n\r\n  [Symbol.toPrimitive](): string | undefined | Primitivetype {\r\n    //return this.value;\r\n    const value = this.valueOf();\r\n    return isprimitive(value)\r\n      ? value\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : void 0;\r\n  }\r\n}\r\n/* Reflect.defineProperty(ReactiveState.prototype, Symbol.toStringTag, {\r\n  value: \"ReactiveState\"\r\n}); */\r\n","/* \r\n        \r\n        [[\"value\",[\"f\",\"f\"]],[\"value\",[\"f\",\"f\"]]]\r\n\r\n\r\n        [[\"value\",[\"f\",\"f\",\"f\",\"f\"]]]\r\n        \r\n        */\r\nexport function merge_entries(\r\n  a: [string, any][] /* Array<[any, Array<any>]> */\r\n): [string, any][] {\r\n  const m: { [s: string]: Set<any> } = {};\r\n\r\n  a.forEach(([key, value]) => {\r\n    if (!m[key]) {\r\n      m[key] = new Set();\r\n    }\r\n    // m[key] && (m[key] = new Set());\r\n\r\n    value.forEach((v: any) => {\r\n      m[key].add(v);\r\n    });\r\n  });\r\n  return Object.entries(m).map(([k, v]) => [k, [...v]]);\r\n}\r\n","const VirtualElementSet = new WeakSet<Virtualdom<any>>();\r\nconst Letter_case_and_Chinese = /[A-Za-z\\u4e00-\\u9fa5]/;\r\nimport { Class } from \"../CustomClass/customclass\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\n//// import { Class } from \"./rendervdomtoreal\";\r\nimport { merge_entries } from \"../UtilTools/merge-entries\";\r\nimport { defineProperty, preventExtensions } from \"../UtilTools/reflect\";\r\nimport { isstring } from \"../UtilTools/util\";\r\nimport { ElementAttrs } from \"./create-element\";\r\nimport { VaildVDom } from \"./isvalidvdom\";\r\n// //export function isVirtualdom(a: any): a is Virtualdom<any> {\r\n//   return a instanceof Virtualdom;\r\n// }//\r\nexport function isVirtualdom(a: any): a is Virtualdom<any> {\r\n  return VirtualElementSet.has(a);\r\n  /*   isobject(a) &&\r\n    // has(a, isvirtualelement) &&\r\n    get(a, isvirtualelement) === isvirtualelement */\r\n}\r\n// export const isvirtualelement = Symbol(\"isvirtualelement\");\r\nexport type Vdomchildren = Array<VaildVDom>;\r\nexport { createVirtualElement };\r\nfunction createVirtualElement<T extends Class | string | Function>(\r\n  type: T,\r\n  props: ElementAttrs = {},\r\n  children: Vdomchildren = []\r\n): Virtualdom<T> {\r\n  props = Object.assign({}, props);\r\n  children = children.flat(1 / 0);\r\n\r\n  const propsentries = Object.entries(props);\r\n  const propsentriesNOTevents = propsentries.filter(\r\n    ([key]) => !(key.startsWith(\"@\") || key.startsWith(\"on\"))\r\n  );\r\n  const Entries_beginning_with_a_letter = propsentriesNOTevents.filter(\r\n    ([key]) => Letter_case_and_Chinese.test(key[0])\r\n  );\r\n  const virtual = Object.create(null);\r\n  const vdom = virtual;\r\n  [\r\n    \"onevent\",\r\n    \"element\",\r\n    \"type\",\r\n    \"props\",\r\n    \"children\",\r\n    \"directives\",\r\n    \"bindattr\"\r\n  ].forEach(key => {\r\n    defineProperty(virtual, key, {\r\n      //   enumerable: false,\r\n      writable: true\r\n    });\r\n  });\r\n  //   [\"type\", \"props\", \"children\", \"directives\", \"bindattr\"].forEach(key => {\r\n  //     defineProperty(virtual, key, {\r\n  //       enumerable: true,\r\n  //       writable: true\r\n  //     });\r\n  //   });\r\n  vdom.element = [];\r\n  Object.assign(virtual, {\r\n    type,\r\n    bindattr: Object.fromEntries(\r\n      Entries_beginning_with_a_letter.filter(e => isReactiveState(e[1]))\r\n    ),\r\n    props: Object.fromEntries(\r\n      Entries_beginning_with_a_letter.filter(e => !isReactiveState(e[1])).map(\r\n        ([key, value]) => [key, isstring(value) ? value.trim() : value]\r\n      )\r\n    ),\r\n    children,\r\n    onevent: Object.fromEntries(\r\n      merge_entries([\r\n        ...propsentries\r\n          .filter(([key]) => \"@\" == key[0])\r\n          .map(([key, value]) => [\r\n            key\r\n              .slice(1)\r\n              .toLowerCase()\r\n              .trim(),\r\n            [value].flat(1 / 0)\r\n          ]),\r\n        ...propsentries\r\n          .filter(([key]) => key.startsWith(\"on\"))\r\n          .map(([key, value]) => [\r\n            key\r\n              .slice(2)\r\n              .toLowerCase()\r\n              .trim(),\r\n            [value].flat(1 / 0)\r\n          ])\r\n      ] as [string, any][])\r\n    ),\r\n    directives: Object.fromEntries(\r\n      propsentriesNOTevents\r\n        .filter(([key]) => key[0] === \"*\" || key[0] === \"_\" || key[0] === \"$\")\r\n        .map(([key, value]) => [\r\n          key\r\n            .slice(1)\r\n            .toLowerCase()\r\n            .trim(),\r\n          value\r\n        ])\r\n    )\r\n  });\r\n  defineProperty(virtual, Symbol.toStringTag, { value: \"VirtualElement\" });\r\n  //   virtual[Symbol.toStringTag] = \"VirtualElement\";\r\n  //   virtual[isvirtualelement] = isvirtualelement;\r\n  //   defineProperty(virtual, isvirtualelement, { value: isvirtualelement });\r\n  preventExtensions(virtual);\r\n  VirtualElementSet.add(virtual);\r\n\r\n  Object.freeze(vdom);\r\n  return virtual;\r\n}\r\n// JSON.stringify\r\ninterface Virtualdom<T extends Class | string | Function> {\r\n  //   readonly [isvirtualelement]: unique symbol;\r\n  readonly [Symbol.toStringTag]: \"VirtualElement\";\r\n  readonly element: Element[];\r\n  readonly type: T;\r\n  readonly props: ElementAttrs;\r\n  readonly children: Vdomchildren;\r\n  readonly directives: Record<string, any>;\r\n  //   { [key: string]: any };\r\n  readonly onevent: Record<string, Array<EventListener>>;\r\n  //   {\r\n  //     [key: string]: Array<EventListener>;\r\n  //   };\r\n  readonly bindattr: Record<string, ReactiveState<any>>;\r\n  /* {\r\n    [key: string]: ReactiveState<any>;\r\n  }; */\r\n}\r\nexport default Virtualdom;\r\n// //export default class Virtualdom<T extends Class | string | Function> {\r\n//   [Symbol.toStringTag] = \"VirtualElement\";\r\n//   // get [Symbol.toStringTag]() {\r\n//     return \"VirtualElement\";\r\n//   // } //\r\n// //   options: any |undefined\r\n// //  element: undefined | Element | Node;\r\n//   type: T | undefined;\r\n//   props: ElementAttrs = {};\r\n//   children: Vdomchildren = [];\r\n//   directives: object = {};\r\n//   onevent: { [key: string]: Array<EventListener> } = {};\r\n//   bindattr: { [key: string]: ReactiveState<any> } = {};\r\n//   constructor(type: T, props: ElementAttrs = {}, children: Vdomchildren = []) {\r\n//     //\r\n//     props = { ...props };\r\n//     const Letter_case_and_Chinese = /[A-Za-z\\u4e00-\\u9fa5]/;\r\n//     // console.log(type, props, children);\r\n//     //on\r\n//     const propsentries = Object.entries(props);\r\n//     //\r\n// .map(([key, value]) => [\r\n// key.startsWith(\"on\")?key.replace(\"on\",\"@\")key\r\n// ,\r\n// value\r\n\r\n// ]);\r\n// //\r\n// //   const propsentriesNOTevents = propsentries.filter(\r\n//       ([key]) => !(key.startsWith(\"@\") || key.startsWith(\"on\"))\r\n//     );\r\n//     const Entries_beginning_with_a_letter = propsentriesNOTevents.filter(([key]) =>\r\n//       Letter_case_and_Chinese.test(key[0])\r\n//     );\r\n\r\n//     Object.assign(this, {\r\n//       type,\r\n//       bindattr: Object.fromEntries(\r\n//         //   propsentriesNOTevents\r\n//           .filter(([key]) => Letter_case_and_Chinese.test(key[0])) //\r\n// //    Entries_beginning_with_a_letter.filter(\r\n//           e => isReactiveState(e[1])\r\n//           // e[1] instanceof ReactiveState\r\n//         )\r\n//       ),\r\n//       props: Object.fromEntries(\r\n//         //   propsentriesNOTevents\r\n//           .filter(([key]) => Letter_case_and_Chinese.test(key[0])) //\r\n// //  Entries_beginning_with_a_letter.filter(\r\n//           e => !isReactiveState(e[1])\r\n//           //    e[1] instanceof ReactiveState\r\n//         )\r\n//       ),\r\n//       children: children.flat(1 / 0),\r\n//       onevent: Object.fromEntries(\r\n//         // entries\r\n//         [\r\n//         ['value',[f,f]]\r\n//         ,\r\n//         ['value',[f,f]]\r\n//       ]\r\n//         \r\n\r\n//          [\r\n//         ['value',[f,f,f,f]]\r\n//          ]\r\n//         //\r\n\r\n// //\r\n\r\n//         [[\"value\",[\"f\",\"f\"]],[\"value\",[\"f\",\"f\"]]]\r\n\r\n//         [[\"value\",[\"f\",\"f\",\"f\",\"f\"]]]\r\n\r\n//         //\r\n// //     merge_entries([\r\n//           ...propsentries\r\n//             .filter(([key]) => /\\@/.test(key[0]))\r\n//             .map(([key, value]) => [\r\n//               //\r\n//               key\r\n//                 .slice(1)\r\n//                 .toLowerCase()\r\n//                 .trim(),\r\n//               //\r\n//               [value].flat(1 / 0)\r\n//             ]),\r\n//           ...propsentries\r\n//             .filter(([key]) => key.startsWith(\"on\"))\r\n//             .map(([key, value]) => [\r\n//               //\r\n//               key\r\n//                 .slice(2)\r\n//                 .toLowerCase()\r\n//                 .trim(),\r\n//               //\r\n//               [value].flat(1 / 0)\r\n//             ])\r\n//         ])\r\n//       ),\r\n\r\n//       //\"*\"\"_\"\r\n//       directives: Object.fromEntries(\r\n//         propsentriesNOTevents\r\n//         //  .filter(([key]) => /\\//\r\n// //.test(key[0]) || key[0].startsWith(\"_\"))\r\n//         //  .map(([key, value]) => [\r\n//             //\r\n//             key\r\n//               .slice(1)\r\n//               .toLowerCase()\r\n//               .trim(),\r\n\r\n//             value\r\n//           ])\r\n//       )\r\n//     });\r\n//     //\r\n//  Object.defineProperty(this, Symbol.toStringTag, {\r\n//       value: \"virtualdom\",\r\n//       configurable: true\r\n//     });\r\n// //\r\n// //  }\r\n// }//\r\n// // defineProperty(Virtualdom.prototype, Symbol.toStringTag, {\r\n//   value: \"VirtualElement\"\r\n// });\r\n//  //\r\n","export type VaildVDom =\r\n  | Virtualdom<any>\r\n  | string\r\n  | number\r\n  | Vdomchildren\r\n  | ReactiveState<any>;\r\n// import { VaildVDom } from \"./isvalidvdom\";\r\nimport Virtualdom, {\r\n  isVirtualdom,\r\n  Vdomchildren\r\n} from \"../CreateElement/VirtualElement\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { isArray, isnumber, isstring } from \"../UtilTools/util\";\r\n\r\nexport function isvalidvdom(v: any): v is VaildVDom {\r\n  if (isstring(v)) {\r\n    return true;\r\n  }\r\n  if (isnumber(v)) {\r\n    return true;\r\n  }\r\n  let flag = false;\r\n  if (isArray(v)) {\r\n    /*flag = v\r\n        .map((ele: any) => {\r\n          return isvalidvdom(ele);\r\n          //isstring(ele) || ele instanceof Virtualdom;\r\n        })\r\n        .includes(false)\r\n        ? false\r\n        : true;\r\n      return flag;*/\r\n    //https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every\r\n    //\r\n    /* children */\r\n    return /* !! */ /* v.length */ /* && */ v.every(e => isvalidvdom(e));\r\n  } else if (\r\n    isVirtualdom(v)\r\n    // v instanceof Virtualdom\r\n  ) {\r\n    return isvalidvdom(v.children);\r\n    /*  if (isvalidvdom(v.children)) {\r\n        return true;\r\n      } */\r\n  } else if (\r\n    isReactiveState(v)\r\n    //  v instanceof ReactiveState\r\n  ) {\r\n    return true;\r\n  }\r\n  /*  else {\r\n    } */\r\n  return flag;\r\n}\r\n","import { Class } from \"../CustomClass/customclass\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\n\r\nexport function isclassextendsHTMLElement(initclass: {\r\n  prototype: any;\r\n}): initclass is Class {\r\n  return !!(\r\n    isfunction(initclass) &&\r\n    initclass.prototype &&\r\n    initclass.prototype instanceof HTMLElement\r\n  );\r\n}\r\n","import { gettagtype } from \"src/UtilTools/util\";\r\n\r\nexport function isCSSStyleRule(a: any): a is CSSStyleRule {\r\n  return gettagtype(a) === \"CSSStyleRule\";\r\n}\r\nexport function isCSSMediaRule(a: any): a is CSSMediaRule {\r\n  return gettagtype(a) === \"CSSMediaRule\";\r\n}\r\nexport function isCSSImportRule(a: any): a is CSSImportRule {\r\n  return gettagtype(a) === \"CSSImportRule\";\r\n}\r\nexport function isCSSRule(a: any): a is CSSRule {\r\n  return a instanceof CSSRule;\r\n}\r\n","export function cssrulestocsstext(cssrules: Array<CSSRule>): string {\r\n  return cssrules.map(c => c.cssText).join(\"\\n\");\r\n  // .replace(/\\n/g, \"\");\r\n}\r\n","import { prefixcssrules } from \"./transform-prefix-cssrules\";\r\nimport { cssrulestocsstext } from \"./cssrulestocsstext\";\r\n\r\nexport function prefixcssmediarule(cssrule: CSSMediaRule, prefix: string) {\r\n  const rulesarr = prefixcssrules([...cssrule.cssRules], prefix);\r\n  const conditionText = cssrule.conditionText;\r\n  const cssText =\r\n    cssrule.cssText.slice(0, 7) +\r\n    conditionText +\r\n    \"{\" +\r\n    cssrulestocsstext(rulesarr) +\r\n    \"}\";\r\n  return {\r\n    cssText,\r\n    conditionText,\r\n    cssRules: rulesarr,\r\n    [Symbol.toStringTag]: \"CSSMediaRule\"\r\n  };\r\n}\r\n","export { getrandomstringandnumber };\r\nimport { get } from \"src/UtilTools/reflect\";\r\n\r\nconst charactorlist = Array(26)\r\n  .fill(undefined)\r\n  .map((v, i) => 97 + i)\r\n  .map(n => String.fromCharCode(n));\r\n\r\nconst hexnumberlist = Array(16)\r\n  .fill(undefined)\r\n  .map((v, i) => i)\r\n  .map(a => a.toString(16));\r\n\r\nconst charactorandnumberlist = [\r\n  ...new Set([...hexnumberlist, ...charactorlist])\r\n];\r\n\r\nfunction getrandomcharactor() {\r\n  return get(\r\n    //  Array(26)\r\n    //  .fill(undefined)\r\n    //  .map((v, i) => 97 + i)\r\n    // .map(n => String.fromCharCode(n))\r\n    charactorlist,\r\n    Math.floor(Math.random() * charactorlist.length)\r\n  );\r\n}\r\nfunction getrandomhexnumberandcharactor() {\r\n  return get(\r\n    // Array(16)\r\n    //  .fill(undefined)\r\n    // .map((v, i) => i)\r\n    charactorandnumberlist,\r\n    Math.floor(Math.random() * charactorandnumberlist.length)\r\n  );\r\n\r\n  //.toString(16);\r\n}\r\nfunction getrandomstringandnumber(length = 1) {\r\n  return (\r\n    Array(length)\r\n      .fill(undefined)\r\n      .map(() => getrandomcharactor())\r\n\r\n      .join(\"\") +\r\n    \"-\" +\r\n    Array(length)\r\n      .fill(undefined)\r\n      .map(() => getrandomhexnumberandcharactor())\r\n      .join(\"\")\r\n  );\r\n}\r\n","export const invalid_custom_element_class = \"invalid custom element class !\";\r\n// import { isclassextendsHTMLElement } from \"./CustomElement/create-costum-elemet\";\r\nimport { get, getPrototypeOf, has, set } from \"../UtilTools/reflect\";\r\nimport { isobject } from \"../UtilTools/util\";\r\nimport { getrandomstringandnumber } from \"./getrandomstringandnumber\";\r\nimport { isclassextendsHTMLElement } from \"./isclassextendsHTMLElement\";\r\nif (\r\n  //   typeof Proxy !== \"function\" ||\r\n  !isobject(window.customElements) //||\r\n  //   typeof customElements !== \"object\" ||\r\n\r\n  //||\r\n  //   typeof CustomElementRegistry !== \"function\"\r\n) {\r\n  console.error(\" customElements  not supported !\");\r\n  throw new TypeError();\r\n}\r\n\r\nfunction Usevaluetoquerythekeyfromthetable(\r\n  table: object,\r\n  Componentstatusname: any\r\n): string | undefined {\r\n  const outputentrie = Object.entries(table).find(v => {\r\n    return v[1] === Componentstatusname;\r\n  });\r\n  return outputentrie ? outputentrie[0] : undefined;\r\n}\r\n\r\ninterface ElementDefinitionOptions {\r\n  extends?: string;\r\n}\r\nwindow.CustomElementRegistry = get(\r\n  getPrototypeOf(window.customElements),\r\n  \"constructor\"\r\n);\r\nconst elementset = Symbol.for(\"elementset\");\r\nconst elementmap = Symbol.for(\"elementmap\");\r\n\r\ninterface CustomElements extends CustomElementRegistry {\r\n  [elementset]: Set<Function>;\r\n  [elementmap]: Record<string, Function>;\r\n}\r\nconst { CustomElementRegistry } = window;\r\nconst customElements = window.customElements as CustomElements;\r\n// export default customElements;\r\n\r\nif (!has(customElements, elementset)) {\r\n  Reflect.set(customElements, elementset, new Set());\r\n  //   assert(elementset in customElements);\r\n  //   customElements[elementset] = new Set();\r\n}\r\nif (!has(customElements, elementmap)) {\r\n  Reflect.set(customElements, elementmap, {});\r\n  //   customElements[elementmap] = {};\r\n}\r\n// debugger;\r\nexport default (initclass: Function, extendsname?: string) =>\r\n  RandomDefineCustomElement(initclass, extendsname);\r\n\r\nfunction RandomDefineCustomElement(\r\n  initclass: Function,\r\n  extendsname?: string,\r\n  length = 1\r\n): string | undefined {\r\n  if (!isclassextendsHTMLElement(initclass)) {\r\n    console.error(initclass);\r\n    console.error(invalid_custom_element_class);\r\n    throw TypeError();\r\n  }\r\n\r\n  //\r\n  //   console.log(get(customElements, elementset));\r\n  //   debugger;\r\n  if (!get(customElements, elementset).has(initclass)) {\r\n    const elementname = getrandomstringandnumber(length);\r\n\r\n    if (customElements.get(elementname)) {\r\n      return RandomDefineCustomElement(initclass, extendsname, length + 1);\r\n    } else {\r\n      if (extendsname) {\r\n        customElements.define(elementname, initclass, { extends: extendsname });\r\n      } else {\r\n        customElements.define(elementname, initclass);\r\n      }\r\n    }\r\n\r\n    return elementname;\r\n  } else {\r\n    return Usevaluetoquerythekeyfromthetable(\r\n      get(customElements, elementmap),\r\n      initclass\r\n    );\r\n  }\r\n\r\n  //\r\n}\r\n\r\n/* customElements.get = function name(name) {\r\n  return customElements[elementmap].get(name);\r\n};\r\n */\r\ncustomElements.define = function(\r\n  name: string,\r\n  constructor: Function,\r\n  options?: ElementDefinitionOptions\r\n): void {\r\n  if (!isclassextendsHTMLElement(constructor)) {\r\n    console.error(constructor);\r\n    console.error(invalid_custom_element_class);\r\n    throw TypeError();\r\n  }\r\n  if (!get(customElements, elementset).has(constructor)) {\r\n    if (has(customElements[elementmap], name)) {\r\n      /*  */\r\n      RandomDefineCustomElement(\r\n        constructor,\r\n        options ? options.extends : undefined\r\n      );\r\n    } else {\r\n      CustomElementRegistry.prototype.define.call(\r\n        customElements,\r\n        name,\r\n        constructor,\r\n        options\r\n      );\r\n      customElements[elementset].add(constructor);\r\n      customElements[elementmap][name] = constructor;\r\n    }\r\n  }\r\n};\r\nset(customElements, Symbol.iterator, () => {\r\n  const entries = Object.entries(customElements[elementmap]);\r\n\r\n  return entries[Symbol.iterator].call(entries);\r\n});\r\n/* customElements[Symbol.iterator] = () => {\r\n  const entries = Object.entries(customElements[elementmap]);\r\n\r\n  return entries[Symbol.iterator].call(entries);\r\n}; */\r\n","import { Class, Custom } from \"./customclass\";\r\n//import setlikearray from \"./setlikearay\";\r\n// const customElementsarray = new Set;\r\nimport RandomDefineCustomElement, {\r\n  invalid_custom_element_class\r\n} from \"./CustomElementRegistry\";\r\nimport { construct } from \"../UtilTools/reflect\";\r\nimport { isclassextendsHTMLElement } from \"./isclassextendsHTMLElement\";\r\nimport { autocreateclass } from \"src/AttributeClass/createComponent\";\r\nimport { isfunction } from \"src/UtilTools/util\";\r\n\r\n// import Reflect from \"./reflect\";\r\n\r\n// import { Class } from \"./rendervdomtoreal\";\r\n\r\nexport function createcostumelemet(\r\n  initclass: Class | Custom,\r\n  propsjson?: object,\r\n  children?: any[]\r\n  //   options?: any\r\n): HTMLElement {\r\n  let type = initclass;\r\n  if (isfunction(type)) {\r\n    type = autocreateclass(type);\r\n    // debugger;\r\n  }\r\n  initclass = type;\r\n  if (isclassextendsHTMLElement(initclass)) {\r\n    // customElementsarray.push(initclass);\r\n    /*   const elementname =\r\n     getcustomelementname(initclass); */\r\n    /* if (customElements.get(elementname) === initclass) {\r\n    } else {\r\n      customElements.define(elementname, initclass);\r\n    } */\r\n    RandomDefineCustomElement(initclass);\r\n    return construct(initclass, [propsjson, children /* , options */]); // (children);\r\n  } else {\r\n    console.error(initclass);\r\n    console.error(invalid_custom_element_class);\r\n    throw TypeError();\r\n  }\r\n}\r\n","import { get } from \"../UtilTools/reflect\";\r\nimport { isFunction } from \"../UtilTools/util\";\r\nconst componentsymbol = Symbol(\"component\");\r\nexport { componentsymbol };\r\nexport function iscomponent(a: any) {\r\n  return (\r\n    isFunction(a) &&\r\n    //  has(a, componentsymbol) &&\r\n    get(a, componentsymbol) === componentsymbol\r\n  );\r\n}\r\n","// const document = window.document;\r\n//import { seteletext, setelehtml } from \"./directives\";\r\n//export { seteletext, setelehtml };\r\n\r\nexport function seteletext(e: Element | Node, v: string) {\r\n  e.textContent = v;\r\n}\r\nexport function setelehtml(e: Element, v: string) {\r\n  e.innerHTML = v;\r\n}\r\nexport function appendchild(\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element | Node,\r\n  ele: HTMLElement | SVGElement | Element | Node\r\n) {\r\n  container.appendChild(ele);\r\n}\r\nexport function createsvgelement() {\r\n  return createElementNS(svgnamespace, \"svg\");\r\n}\r\nexport function createnonescript() {\r\n  return createDocumentFragment();\r\n}\r\nexport function createDocumentFragment() {\r\n  return document.createDocumentFragment();\r\n}\r\nexport function createnativeelement(type: string) {\r\n  return document.createElement(type);\r\n}\r\nexport function createElementNS(namespace: string, name: string) {\r\n  return document.createElementNS(namespace, name);\r\n}\r\nexport function createtextnode(data: string | number) {\r\n  return document.createTextNode(String(data));\r\n}\r\nexport const svgnamespace = \"http://www.w3.org/2000/svg\";\r\nexport function changetext(textnode: Text, value: string) {\r\n  textnode.nodeValue = String(value);\r\n}\r\n// export default document;\r\n\r\nexport const mathnamespace = \"http://www.w3.org/1998/Math/MathML\";\r\n\r\nexport function createmathelement() {\r\n  return createElementNS(mathnamespace, \"math\");\r\n}\r\nexport function createComment() {\r\n  return document.createComment(\"\");\r\n}\r\nexport function removeElement(element: Element) {\r\n  element.remove();\r\n}\r\nexport function removeNode(node: Element | Node) {\r\n  //   node.remove();\r\n  let parentNode = node.parentNode;\r\n  if (parentNode) {\r\n    parentNode.removeChild(node);\r\n  }\r\n}\r\nexport function replaceChild(newChild: Node, oldChild: Node) {\r\n  let parentNode = oldChild.parentNode;\r\n  if (parentNode) {\r\n    parentNode.replaceChild(newChild, oldChild);\r\n  }\r\n}\r\n\r\nexport function domaddlisten(\r\n  ele: Element | Node,\r\n  event: string,\r\n  call: EventListener\r\n) {\r\n  ele.addEventListener(event, call);\r\n}\r\n\r\nexport function domremovelisten(\r\n  ele: Element | Node,\r\n  event: string,\r\n  call: EventListener\r\n) {\r\n  ele.removeEventListener(event, call);\r\n}\r\nexport function getchildren(ele: Element) {\r\n  return [...ele.children];\r\n}\r\nexport function getchildNodes(ele: Element | Node) {\r\n  return [...ele.childNodes];\r\n}\r\nexport function getAttribute(ele: Element, name: string) {\r\n  return HTMLElementprototype.getAttribute.call(ele, name);\r\n}\r\nexport function setAttribute(ele: Element, name: string, value: any) {\r\n  HTMLElementprototype.setAttribute.call(ele, name, value);\r\n}\r\nexport function removeAttribute(ele: Element, name: string) {\r\n  HTMLElementprototype.removeAttribute.call(ele, name);\r\n}\r\nconst HTMLElementprototype = HTMLElement.prototype;\r\n\r\nexport function insertfirst(\r\n  container: HTMLElement | Element,\r\n  ele: HTMLElement\r\n) {\r\n  container.insertBefore(ele, container.firstChild);\r\n}\r\nexport function createanotherhtmldocument() {\r\n  return document.implementation.createHTMLDocument(\"\");\r\n}\r\n/* export function getparentNode(ele: Node): Node {\r\n  return ele.parentNode ? ele.parentNode : ele;\r\n}\r\n */\r\nexport function querySelectorAll(selector: string) {\r\n  return [...document.querySelectorAll(selector)];\r\n}\r\n","import { isArray, isundefined } from \"./util\";\r\n/* export function toArray<T not Array>(a: T): Array<T>;\r\nexport function toArray<T>(a: Array<T>): Array<T>; */\r\n// export function toArray<T>(a: Array<T>): Array<T>;\r\nexport function toArray(a: any): any[] {\r\n  return (isArray(a) ? a : [a]).flat(1 / 0).filter(a => !isundefined(a));\r\n}\r\n","import { appendchild, /* setelehtml,  */ seteletext } from \"../UtilTools/dom\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nexport default function<\r\n  T extends HTMLElement | SVGSVGElement | SVGElement | Element | Node\r\n>(\r\n  ele:\r\n    | Node\r\n    | Array<\r\n        | HTMLElement\r\n        | Text\r\n        | SVGSVGElement\r\n        | DocumentFragment\r\n        | SVGElement\r\n        | Element\r\n        | Node\r\n      >\r\n    | SVGElement\r\n    | DocumentFragment\r\n    | HTMLElement\r\n    | Text\r\n    | SVGSVGElement\r\n    | Element,\r\n  container: T,\r\n  clear: boolean = true\r\n): T {\r\n  if (clear) {\r\n    seteletext(container, \"\");\r\n  }\r\n  //   container.innerHTML = \"\";\r\n  /*  let eles: Array<any>;\r\n  if (Array.isArray(ele)) {\r\n    eles = ele;\r\n  } else {\r\n    // appendchild(container, ele);\r\n    eles = [ele];\r\n  } */\r\n  const eles = toArray(ele).flat(Infinity);\r\n  eles.forEach((e: Node | HTMLElement | Element | SVGElement) =>\r\n    appendchild(container, e)\r\n  );\r\n  return container;\r\n}\r\nimport mountrealelement from \"./mount-real-element\";\r\nexport { mountrealelement };\r\n","import { isArray } from \"src/UtilTools/util\";\r\n\r\nexport function isNodeArray(arr: any[]): arr is Node[] {\r\n  //https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every\r\n  //\r\n  return !!(isArray(arr) && arr.length && arr.every(a => isNode(a)));\r\n  //!array.map(e => e instanceof Node).includes(false);\r\n}\r\nexport function isNode(a: any): a is Node {\r\n  return a instanceof Node;\r\n}\r\n","export const invalid_Virtualdom = \"invalid Virtualdom \";\r\n// import { VaildVDom } from \"../AttributeClass/conditon\";\r\n// import document from \"./UtilTools/dom\";\r\n// import { isvalidvdom } from \"./CreateElement/html\";\r\nimport mount from \"./mount-real-element\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isArray } from \"../UtilTools/util\";\r\nimport { isvalidvdom, VaildVDom } from \"../CreateElement/isvalidvdom\";\r\nimport { isNode, isNodeArray } from \"./isNodeArray\";\r\nexport default function MountElement<T extends Element>(\r\n  vdom: VaildVDom | Node | Element | Array<Node | Element>,\r\n  container: T\r\n): T {\r\n  if (isArray(vdom)) {\r\n    vdom = vdom.flat(Infinity);\r\n    if (!vdom.length) {\r\n      //\r\n      console.error(\"Empty array not allowed\");\r\n      throw new TypeError();\r\n    }\r\n  }\r\n  const el = container;\r\n  if (!(el instanceof HTMLElement)) {\r\n    console.error(el);\r\n    console.error(\"invalid container HTMLElement!\");\r\n    throw TypeError();\r\n  }\r\n\r\n  if (\r\n    el === document.body ||\r\n    el === document.documentElement ||\r\n    el === document.head\r\n  ) {\r\n    console.error(el);\r\n    console.error(\"Do not mount  to <html> or <body> <head>.\");\r\n    throw Error();\r\n  }\r\n  /*   if (\r\n    !(\r\n      isvalidvdom(vdom) ||\r\n      vdom instanceof Node ||\r\n      (isArray(vdom) && isNodeArray(vdom))\r\n    )\r\n  ) {\r\n    console.error(vdom);\r\n    throw TypeError(invalid_Virtualdom);\r\n  } */\r\n\r\n  /*   let elesarray: Array<any>;\r\n  if (Array.isArray(vdom)) {\r\n    elesarray = vdom;\r\n  } else {\r\n    elesarray = [vdom];\r\n  } */\r\n  const elesarray = toArray(vdom);\r\n  if (isvalidvdom(vdom)) {\r\n    // mount(elesarray.map(e => render(e)), container);\r\n    mount(render(elesarray), container);\r\n  } else if (isNode(vdom) /*  instanceof Node */ || isNodeArray(vdom)) {\r\n    mount(elesarray, container);\r\n  } else {\r\n    console.error(vdom);\r\n    console.error(invalid_Virtualdom);\r\n    throw TypeError();\r\n  }\r\n\r\n  //\r\n  return container;\r\n}\r\n","import debounce from \"lodash/debounce\";\r\nimport { cached_callback_debounced_watchs } from \"../cached-map\";\r\nimport { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport {\r\n  invalid_Function,\r\n  usewatch\r\n} from \"../mounted-unmounted/Component-context\";\r\nimport ReactiveState, {\r\n  addallistenerssymbol,\r\n  cancelsubscribe,\r\n  isReactiveState,\r\n  removeallistenerssymbol,\r\n  subscribesymbol\r\n} from \"./ReactiveState\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\n//import { requestAnimationFrame } from \"./directives\";\r\nimport { isarray, isFunction } from \"../UtilTools/util\";\r\nexport type CancelWatchfun = () => void;\r\nexport type UnwrapedState = any; //Primitivetype | Exclude<object, Function>;\r\n\r\nexport interface CallbackReactiveState /* <\r\n  \r\n> */ {\r\n  (...args: UnwrapedState[]): any;\r\n}\r\n\r\nexport function watch<T extends UnwrapedState>(\r\n  state: ReactiveState<T> | Array<ReactiveState<T>>,\r\n\r\n  callback: CallbackReactiveState\r\n): CancelWatchfun {\r\n  if (isarray(state) || isReactiveState(state)) {\r\n    const statearray: ReactiveState<any>[] = toArray(state);\r\n    if (!statearray.length) {\r\n      console.error(\"Empty array not allowed\");\r\n      throw new Error();\r\n    }\r\n    /* watchcallback */\r\n    const debouncedcallback = debounce(callback);\r\n    const stateandlisteners: [ReactiveState<any>, Function][] = statearray.map(\r\n      state1 => {\r\n        const listener: Function = (() => {\r\n          /* callbacklistener */\r\n          const cachedfun = cached_callback_debounced_watchs.get(callback);\r\n          if (cachedfun) {\r\n            return cachedfun;\r\n          } else {\r\n            const listenfun = () => {\r\n              //watch\r\n              debouncedcallback(...statearray.map(r => r.valueOf()));\r\n            };\r\n            cached_callback_debounced_watchs.set(callback, listenfun);\r\n            return listenfun;\r\n          }\r\n        })();\r\n        watchsingle(\r\n          state1,\r\n\r\n          listener\r\n        );\r\n\r\n        return [state1, listener];\r\n      }\r\n    );\r\n\r\n    const cancelWatch: CancelWatchfun = () => {\r\n      stateandlisteners.forEach(([state, listener]) => {\r\n        state[cancelsubscribe](listener);\r\n      });\r\n    };\r\n    return cancelWatch;\r\n  }\r\n  //  else if (isReactiveState(state)) {\r\n  //  watchsingle(state, callback);\r\n  ////return watch(toArray(state),callback)\r\n  // }\r\n  else {\r\n    console.error(state);\r\n    console.error(callback);\r\n    console.error(invalid_ReactiveState + invalid_Function);\r\n    throw new TypeError();\r\n  }\r\n}\r\n\r\nfunction watchsingle(\r\n  state: ReactiveState<any>,\r\n  callback: Function\r\n  //  statekey?: string\r\n) {\r\n  if (\r\n    !(\r\n      isReactiveState(state) &&\r\n      // state instanceof ReactiveState\r\n      isFunction(callback)\r\n    )\r\n  ) {\r\n    console.error(state);\r\n    console.error(callback);\r\n    console.error(invalid_ReactiveState + invalid_Function);\r\n\r\n    throw TypeError();\r\n  }\r\n\r\n  state[subscribesymbol](callback);\r\n\r\n  //  if (statekey) {\r\n\r\n  //   state[subscribesymbol](callback, statekey);\r\n  // } else {\r\n\r\n  //  }\r\n\r\n  requestAnimationFrame(() => {\r\n    rewatch(state);\r\n    // state[addallistenerssymbol]();\r\n  });\r\n\r\n  usewatch(state, callback);\r\n}\r\nexport function unwatch(state: ReactiveState<any>): void {\r\n  state[removeallistenerssymbol]();\r\n}\r\n\r\nexport function rewatch(state: ReactiveState<any>): void {\r\n  state[addallistenerssymbol]();\r\n}\r\nexport default watch;\r\n","import { isboolean } from \"./util\";\r\n\r\n// import { getparentNode } from \"./dom\";\r\n\r\nexport function isconnected(element: Node) {\r\n  /* edge  element.isConnected,*/\r\n  const isConnectedstate = element.isConnected;\r\n  if (isboolean(isConnectedstate)) {\r\n    return isConnectedstate;\r\n  } else {\r\n    return document.documentElement === getancestornode(element);\r\n  }\r\n}\r\nfunction getancestornode(node: Node) {\r\n  while (\r\n    node &&\r\n    node.parentNode &&\r\n    node.parentNode !== document\r\n    /*  getparentNode(node) &&\r\n    getparentNode(node) !== node &&\r\n    getparentNode(node) !== document */\r\n  ) {\r\n    //   if(getparentNode(node)){}\r\n    node = node.parentNode; // getparentNode(node);\r\n  }\r\n  return node;\r\n}\r\n","import ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { watch } from \"src/Reactivity/watch\";\r\nimport { isconnected } from \"src/UtilTools/isconnected\";\r\nimport { isstring } from \"src/UtilTools/util\";\r\n\r\nexport { createhtmlandtextdirective };\r\nfunction createhtmlandtextdirective(seteletext: Function, errorname: string) {\r\n  return function(ele: Element, text: string | ReactiveState<any>) {\r\n    const element = ele;\r\n    if (\r\n      isstring(text)\r\n      //typeof text == \"string\"\r\n    ) {\r\n      requestAnimationFrame(() => {\r\n        seteletext(ele, text);\r\n        /*    ele.textContent = text;*/\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (\r\n      isReactiveState(text)\r\n      //  text instanceof ReactiveState\r\n    ) {\r\n      //   const ReactiveState = text;\r\n      watch(text, (/* state: { value: any } */) => {\r\n        const state = text;\r\n        if (isconnected(element)) {\r\n          seteletext(ele, String(state));\r\n        }\r\n        /* ele.textContent = String(state);*/\r\n      });\r\n      //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.textContent = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"text\");\r\n        seteletext(ele, String(text));\r\n\r\n        /*  ele.textContent = String(text);*/\r\n      });\r\n    } else {\r\n      console.error(text);\r\n      console.error(\"invalid \" + errorname);\r\n      throw TypeError();\r\n    }\r\n  };\r\n}\r\n","import { invalid_Function } from \"../mounted-unmounted/Component-context\";\r\nimport directives from \"./directives\";\r\nimport { isplainobject } from \"../UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nexport interface Extendfun {\r\n  (\r\n    value: any,\r\n    element: Element,\r\n\r\n    vdom: Virtualdom<any>\r\n  ): void;\r\n}\r\nexport interface ExtendOptions {\r\n  [s: string]: Extendfun;\r\n}\r\nexport { extenddirectives };\r\nexport default function extenddirectives(options: ExtendOptions = {}) {\r\n  if (!isplainobject(options)) {\r\n    console.error(options);\r\n    throw new TypeError();\r\n  }\r\n  Object.entries(options).forEach(([key, value]) => {\r\n    if (typeof value !== \"function\") {\r\n      console.error(value);\r\n      console.error(invalid_Function);\r\n      throw TypeError();\r\n    } else {\r\n      if (!directives[key]) {\r\n        Reflect.set(directives, key, value);\r\n      } else {\r\n        console.error(directives);\r\n        console.error(\"do not extend existing directive\");\r\n        throw new Error();\r\n      }\r\n    }\r\n  });\r\n  return directives;\r\n}\r\n","export const { requestAnimationFrame } = window;\r\nimport ReactiveState from \"../Reactivity/ReactiveState\";\r\nimport { setelehtml, seteletext } from \"../UtilTools/dom\";\r\nimport { apply, set } from \"../UtilTools/reflect\";\r\nimport { isfunction, isobject } from \"../UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { createhtmlandtextdirective } from \"./create-html-and-text-directive\";\r\nimport extenddirectives, { ExtendOptions } from \"./extend-directive\";\r\nexport { directive };\r\nconst directive: ExtendOptions = {\r\n  ref(ref: object | Function, ele: Element, _vdom: Virtualdom<any>) {\r\n    if (isfunction(ref)) {\r\n      apply(ref as Function, undefined, [ele]);\r\n      // ref(ele)\r\n      //   ref.call(undefined, ele);\r\n    } else if (isobject(ref)) {\r\n      set(ref as object, \"value\", ele);\r\n      //   ref.value = ele;\r\n    } else {\r\n      console.log(_vdom);\r\n      console.error(ref);\r\n      console.error(\"invalid ref\");\r\n      throw TypeError();\r\n    }\r\n  }\r\n};\r\nextenddirectives({\r\n  html(\r\n    html: string | ReactiveState<any>,\r\n    ele: Element,\r\n\r\n    _vdom: Virtualdom<any>\r\n  ) {\r\n    console.log(_vdom);\r\n    createhtmlandtextdirective(setelehtml, \"html\")(ele, html);\r\n\r\n    // ele.innerHTML = html;\r\n    // console.log(ele.outerHTML);\r\n    /*  if (typeof html == \"string\") {\r\n          requestAnimationFrame(() => {\r\n            setelehtml(ele, html);\r\n    \r\n            /* ele.innerHTML = html;*/\r\n    //   console.log(ele.outerHTML);\r\n    /*     });\r\n        } else if (html instanceof ReactiveState) {\r\n          //   const ReactiveState = html;\r\n          watch(html, (state: { value: any }) => {\r\n            /*ele.innerHTML = String(state);*/\r\n    /*\r\n            setelehtml(ele, String(state));\r\n          });\r\n          //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n          //     ele.innerHTML = String(state.value);\r\n          //   });\r\n          requestAnimationFrame(() => {\r\n            // console.log(\"html\");\r\n            /*  ele.innerHTML = String(html);*/\r\n    /*\r\n      //      setelehtml(ele, String(html));\r\n     //     });\r\n      //  } else {\r\n    \r\n    //console.error()\r\n      //    throw TypeError(\"invalid html\");\r\n     //   }\r\n    \r\n    */\r\n  },\r\n  text(\r\n    text: string | ReactiveState<any>,\r\n    ele: Element,\r\n    _vdom: Virtualdom<any>\r\n  ) {\r\n    console.log(_vdom);\r\n    createhtmlandtextdirective(seteletext, \"text\")(ele, text);\r\n\r\n    /*\r\n    \r\n      // ele.textContent = text;\r\n        // console.log(ele.outerHTML);\r\n        if (typeof text == \"string\") {\r\n          requestAnimationFrame(() => {\r\n            seteletext(ele, text);\r\n            /*    ele.textContent = text;*/\r\n    /*      //   console.log(ele.outerHTML);\r\n          });\r\n        } else if (text instanceof ReactiveState) {\r\n          //   const ReactiveState = text;\r\n          watch(text, (state: { value: any }) => {\r\n            seteletext(ele, String(state));\r\n    \r\n            /* ele.textContent = String(state);*/\r\n    /*   });\r\n          //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n          //     ele.textContent = String(state.value);\r\n          //   });\r\n          requestAnimationFrame(() => {\r\n            // console.log(\"text\");\r\n            seteletext(ele, String(text));\r\n    \r\n            /*  ele.textContent = String(text);*/\r\n    /*    });\r\n       // } else {\r\n      //    throw TypeError(\"invalid text\");\r\n     //   }\r\n    \r\n    */\r\n  }\r\n});\r\n\r\nexport default directive;\r\n","import onevent /*  eventlistenerssymbol  */ from \"./handle-onevent\";\r\nexport { onevent };\r\nimport { invalid_Function } from \"../mounted-unmounted/Component-context\";\r\nimport { domaddlisten, domremovelisten } from \"../UtilTools/dom\";\r\nimport { get, has, set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { /* isArray, */ isfunction } from \"../UtilTools/util\";\r\nexport const eventlistenerssymbol = Symbol(\"eventlisteners\");\r\nexport default function(\r\n  element: Element | Node,\r\n  eventname: string,\r\n  callback: EventListener | Array<EventListener>\r\n) {\r\n  /* if (!element[eventlistenerssymbol]) {\r\n    element[eventlistenerssymbol] = [];\r\n  }\r\n*/\r\n  firstaddlisteners(element, eventname, toArray(callback));\r\n  /*\r\n//  if (isfunction(callback)) {\r\n//    firstaddlisteners(element, eventname, [callback]);\r\n//  } else if (isArray(callback)) {\r\n//    firstaddlisteners(element, eventname, callback);\r\n // } else {\r\n //   console.error(callback);\r\n //   throw TypeError(invalid_Function);\r\n // }\r\n*/\r\n}\r\nexport function firstaddlisteners(\r\n  ele: Element | Node,\r\n  event: string,\r\n  callarray: Array<EventListener>\r\n) {\r\n  const element = ele;\r\n  callarray.forEach((call: EventListener) => {\r\n    if (!isfunction(call)) {\r\n      console.error(call);\r\n      console.error(invalid_Function);\r\n      throw TypeError();\r\n    }\r\n\r\n    if (!has(element, eventlistenerssymbol)) {\r\n      set(element, eventlistenerssymbol, []);\r\n      //   element[eventlistenerssymbol] = [];\r\n    }\r\n    (get(ele, eventlistenerssymbol) as [string, EventListener][])\r\n      /* ele[eventlistenerssymbol] */\r\n      .push([event, call]);\r\n    domaddlisten(ele, event, call);\r\n  });\r\n}\r\nexport function removelisteners(\r\n  ele: Element | Node\r\n  //   event: string,\r\n  //   callarray: Array<EventListener>\r\n) {\r\n  // const element = ele;\r\n  if (has(ele, eventlistenerssymbol)) {\r\n    (get(ele, eventlistenerssymbol) as [string, EventListener][])\r\n      /*   ele[eventlistenerssymbol] */\r\n\r\n      .forEach(([event, call]) => {\r\n        //   ele[eventlistenerssymbol].push([event, call]);\r\n        domremovelisten(ele, event, call);\r\n      });\r\n  }\r\n}\r\nexport function readdlisteners(\r\n  ele: Element | Node\r\n  //   event: string,\r\n  //   callarray: Array<EventListener>\r\n) {\r\n  if (has(ele, eventlistenerssymbol)) {\r\n    (get(ele, eventlistenerssymbol) as [string, EventListener][]).forEach(\r\n      ([event, call]) => {\r\n        //   ele[eventlistenerssymbol].push([event, call]);\r\n        domaddlisten(ele, event, call);\r\n      }\r\n    );\r\n  }\r\n}\r\n","import createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport watch from \"src/Reactivity/watch\";\r\nimport { isconnected } from \"src/UtilTools/isconnected\";\r\nimport { get, has, set } from \"src/UtilTools/reflect\";\r\nimport { isfunction } from \"src/UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport directives from \"../Directives/directives\";\r\nimport { onevent } from \"./handle-onevent\";\r\nimport { bindstatesymbol /* virtualdomsymbol */ } from \"./render-vdom-to-real\";\r\n\r\nexport default handleprops;\r\nfunction handleprops(\r\n  element: HTMLElement | Element | SVGSVGElement | SVGElement,\r\n  vdom: Virtualdom<any>\r\n) {\r\n  /* if (!vdom.element) {\r\n    vdom.element = element;\r\n  }\r\n */\r\n  vdom.element.push(element);\r\n  /*  if (vdom.element.length > 1) {\r\n    console.log(vdom);\r\n  } */\r\n  ((element, vdom) => {\r\n    Object.entries(vdom.directives).forEach(([name, value]) => {\r\n      if (\r\n        isfunction(\r\n          directives[name]\r\n        ) /* typeof directives[name] === \"function\" */\r\n        /*name in directives &&*/\r\n      ) {\r\n        directives[name](value, element, vdom);\r\n      } else {\r\n        console.error(vdom.directives);\r\n        console.error(\"invalid directives \" + name);\r\n        throw new Error();\r\n      }\r\n    });\r\n\r\n    const attribute1: Record<string, any> = createeleattr(element);\r\n    Object.assign(\r\n      attribute1,\r\n\r\n      /* false */\r\n      vdom.props\r\n      // Object.fromEntries(Object.entries(vdom.props).filter())\r\n    );\r\n    /*  */\r\n    // set(element, virtualdomsymbol, vdom);\r\n    // element[virtualdomsymbol] = vdom;\r\n    /* ,dom */\r\n\r\n    /*  */\r\n\r\n    Object.entries(vdom.bindattr).forEach(([key, primitivestate]) => {\r\n      attribute1[key] = primitivestate.valueOf();\r\n      watch(primitivestate, (/* state: ReactiveState<any> */) => {\r\n        const state = primitivestate;\r\n        if (isconnected(element)) {\r\n          attribute1[key] = state.valueOf();\r\n        }\r\n      });\r\n      /*     primitivestate[subscribesymbol]();\r\n        requestAnimationFrame(() => {\r\n          primitivestate[addallistenerssymbol]();\r\n        }); */\r\n    });\r\n\r\n    /*  */\r\n\r\n    /*  if (!element[eventlistenerssymbol]) {\r\n        element[eventlistenerssymbol] = [];\r\n      }\r\n  */\r\n    Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\r\n      onevent(element, event, callbacks);\r\n    });\r\n  })(element, vdom);\r\n  /*  if (!element[bindstatesymbol]) {\r\n      element[bindstatesymbol] = new Set();\r\n    }\r\n  */\r\n  [...Object.values(vdom.bindattr), ...Object.values(vdom.directives)]\r\n    .flat(1 / 0)\r\n    .filter(\r\n      e => isReactiveState(e)\r\n      // e instanceof ReactiveState\r\n    )\r\n\r\n    .forEach((e: ReactiveState<any>) => {\r\n      if (!has(element, bindstatesymbol)) {\r\n        set(element, bindstatesymbol, new Set());\r\n        // element[bindstatesymbol] = new Set();\r\n      }\r\n      (get(element, bindstatesymbol) as Set<ReactiveState<any>>).add(e);\r\n      //   element[bindstatesymbol].add(e);\r\n    });\r\n}\r\n","export { render };\r\nimport { createcostumelemet } from \"../CustomClass/create-costum-elemet\";\r\nimport { iscomponent } from \"../AttributeClass/iscomponent\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { watch } from \"../Reactivity/watch\";\r\nimport {\r\n  changetext,\r\n  createDocumentFragment,\r\n  createElementNS,\r\n  createmathelement,\r\n  //   createnonescript,\r\n  createnativeelement,\r\n  createsvgelement,\r\n  createtextnode,\r\n  mathnamespace,\r\n  svgnamespace\r\n} from \"../UtilTools/dom\";\r\nimport { isconnected } from \"../UtilTools/isconnected\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport {\r\n  isArray,\r\n  isfunction,\r\n  isnumber,\r\n  isobject,\r\n  isstring\r\n} from \"../UtilTools/util\";\r\nimport Virtualdom, {\r\n  isVirtualdom,\r\n  Vdomchildren\r\n} from \"../CreateElement/VirtualElement\";\r\nimport handleprops from \"./handle-props\";\r\nimport { autocreateclass } from \"src/AttributeClass/createComponent\";\r\n\r\nexport const bindstatesymbol = Symbol(\"bindstate\");\r\n\r\n// export const reactivestatesymbol = Symbol(\"reactive\");\r\n// export const virtualdomsymbol = Symbol(\"virtualelement\");\r\n/* ,dom */\r\nfunction throwinvalideletype(type?: any): never {\r\n  console.error(type);\r\n  console.error(\"invalid element type!\");\r\n  console.error(invalid_Virtualdom);\r\n  throw TypeError(/*\"invalid element type!\"*/);\r\n}\r\nexport default function render(\r\n  vdom: Virtualdom<string | Function>,\r\n  namespace?: string\r\n): Element;\r\nexport default function render(\r\n  vdom: Virtualdom<\"script\" | \"\" | \"html\">,\r\n  namespace?: string\r\n): Node;\r\nexport default function render(\r\n  vdom: Vdomchildren,\r\n  namespace?: string\r\n): Array<Node | Element>;\r\nexport default function render(\r\n  vdom: string | ReactiveState<any> | number,\r\n  namespace?: string\r\n): Node;\r\nexport default function render(\r\n  vdom: Array<Virtualdom<any>>,\r\n  namespace?: string\r\n): Array<Element>;\r\nexport default function render(\r\n  vdom: Array<string | ReactiveState<any> | number>,\r\n  namespace?: string\r\n): Array<Node>;\r\nexport default function render(\r\n  vdom: Virtualdom<any> | string | number | ReactiveState<any> | Vdomchildren,\r\n  namespace?: string\r\n): Array<Node | Element> | Element | Node {\r\n  if (isArray(vdom)) {\r\n    return (vdom as (string | number | ReactiveState<any> | Virtualdom<any>)[])\r\n      .map(a => render(a as any))\r\n      .flat(1 / 0);\r\n  }\r\n  if (isnumber(vdom) || isstring(vdom)) {\r\n    const textnode = createtextnode(vdom);\r\n    // set(textnode, virtualdomsymbol, vdom);\r\n    // textnode[virtualdomsymbol] = vdom;\r\n    return textnode;\r\n\r\n    // } else if (typeof vdom === \"string\") {\r\n    // return createtextnode(vdom);\r\n  } else if (isReactiveState(vdom) /*instanceof ReactiveState*/) {\r\n    const reactive = vdom;\r\n    const textnode = createtextnode(String(reactive));\r\n    // set(textnode, virtualdomsymbol, vdom);\r\n    // textnode[virtualdomsymbol] = reactive;\r\n\r\n    //textnode[reactivestatesymbol] = reactive;\r\n    /*  try {\r\n      reactive[textnodesymbol] = textnode;\r\n    } catch (error) {\r\n      console.warn(error);\r\n    } */\r\n\r\n    watch(reactive, (/* state: ReactiveState<any> */) => {\r\n      const state = reactive;\r\n      if (isconnected(element)) {\r\n        changetext(textnode, String(state));\r\n      }\r\n    });\r\n    const element = textnode;\r\n    set(element, bindstatesymbol, new Set());\r\n    // element[bindstatesymbol] = new Set();\r\n    (get(element, bindstatesymbol) as Set<ReactiveState<any>>).add(reactive);\r\n    // element[bindstatesymbol].add(reactive);\r\n    return textnode;\r\n  } else if (\r\n    isVirtualdom(vdom)\r\n    //vdom instanceof Virtualdom && \"type\" in vdom\r\n  ) {\r\n    let { type } = vdom;\r\n    if (isfunction(type)) {\r\n      type = autocreateclass(type);\r\n      // debugger;\r\n    }\r\n    let element:\r\n      | Element\r\n      | HTMLElement\r\n      | SVGSVGElement\r\n      | SVGElement\r\n      | undefined = undefined;\r\n    if (typeof type === \"string\") {\r\n      if (type === \"script\") {\r\n        /*  */\r\n\r\n        return createDocumentFragment();\r\n      } else if (type === \"svg\") {\r\n        /* svg?svg */\r\n        element = createsvgelement();\r\n      } else if (type === \"math\") {\r\n        /* svg?svg */\r\n        element = createmathelement();\r\n      } else if (\"\" === type || type === \"html\") {\r\n        const fragmentnode = createDocumentFragment();\r\n\r\n        mount(render(vdom.children), fragmentnode);\r\n\r\n        return fragmentnode;\r\n        //html\r\n        // return render(vdom.children);\r\n        // element = createDocumentFragment();\r\n      } else {\r\n        element = namespace\r\n          ? createElementNS(namespace, type)\r\n          : createnativeelement(type);\r\n      }\r\n    } else if (typeof type == \"function\") {\r\n      //props\r\n\r\n      /*static defaultProps = {\r\n        name: 'Omi',\r\n        myAge: 18\r\n  }*/\r\n      if (isobject(type[\"defaultProps\"])) {\r\n        /*  readonly props*/\r\n        Object.assign(\r\n          vdom.props,\r\n          JSON.parse(JSON.stringify({ ...type[\"defaultProps\"], ...vdom.props }))\r\n        );\r\n        /* vdom.props = JSON.parse(\r\n          JSON.stringify({ ...type[\"defaultProps\"], ...vdom.props })\r\n        ); */\r\n      }\r\n\r\n      const propsjson = JSON.parse(\r\n        JSON.stringify({\r\n          ...vdom.props,\r\n          ...Object.fromEntries(\r\n            Object.entries(vdom.bindattr).map(([key, value]) => {\r\n              return [key, value.value];\r\n            })\r\n          )\r\n        })\r\n      );\r\n      element = createcostumelemet(\r\n        type,\r\n        propsjson,\r\n        vdom.children\r\n        // vdom.options\r\n      );\r\n    } else {\r\n      throwinvalideletype(vdom);\r\n      // throw TypeError(\"invalid element type!\");\r\n    }\r\n    /*  if (element) {\r\n      const attribute1: { [key: string]: any } = createeleattr(element);\r\n      Object.assign(\r\n        attribute1,\r\n\r\n        /* false */\r\n    //     vdom.props\r\n    //     // Object.fromEntries(Object.entries(vdom.props).filter())\r\n    //   );\r\n    // } */\r\n    // apply(handleprops)\r\n\r\n    /* children, */\r\n    /* web components childnodes,slot */\r\n    /* https://webkit.org/blog/4096/introducing-shadow-dom-api/ */\r\n    /*  */\r\n    /* https://developer.mozilla.org/zh-CN/docs/Web/API/Element/slot */\r\n    if (\r\n      type &&\r\n      (isfunction(type) || isstring(type))\r\n      // /\r\n      //   /\r\n\r\n      /* typeof type !== \"function\" */\r\n    ) {\r\n      /* children, */\r\n      if (\r\n        !iscomponent(type)\r\n        // componentsymbol !== type[componentsymbol]\r\n      ) {\r\n        if (element) {\r\n          mount(\r\n            vdom.children.map(e => {\r\n              if (type === \"svg\" && isVirtualdom(e)) {\r\n                /* svg?svg */\r\n                //   element.innerHTML = element.innerHTML;\r\n                return render(e, svgnamespace);\r\n              } else if (type === \"math\" && isVirtualdom(e)) {\r\n                return render(e, mathnamespace);\r\n              } else if (namespace && isVirtualdom(e)) {\r\n                return render(e, namespace);\r\n              } else {\r\n                return render(e as any) as any;\r\n              }\r\n            }),\r\n\r\n            element\r\n          );\r\n          //   return element;\r\n        }\r\n      }\r\n    }\r\n    /* select,value, option,,\r\n    \r\n    children,attributes,\r\n    */\r\n    if (element) {\r\n      handleprops(element, vdom);\r\n    }\r\n\r\n    return element as Node | Element;\r\n  } else {\r\n    throwinvalideletype(vdom);\r\n    // throw TypeError(\"invalid element type!\");\r\n  }\r\n  //   throw Error();\r\n  //   throwinvalideletype();\r\n\r\n  /* console.error(vdom);\r\n  throw new Error(); */\r\n  //   return;\r\n  //   throw new Error();\r\n}\r\n","import createElement from \"../CreateElement/create-element\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\n\r\nconst componentsstylesheet: Map<string, Set<string>> = new Map();\r\n// { [key: string]: Set<string> }\r\n\r\nexport { componentsstylesheet };\r\n\r\nexport function createlinkstylesheet(url: string): HTMLLinkElement {\r\n  return render(\r\n    createElement(\"link\", { href: url, rel: \"stylesheet\" })\r\n  ) as HTMLLinkElement;\r\n}\r\n","export { createcssBlob };\r\nfunction createcssBlob(source: string): string {\r\n  const cachedBlob = sourcecssblobCache.get(source);\r\n  if (cachedBlob) {\r\n    return cachedBlob;\r\n  } else {\r\n    const bloburl = URL.createObjectURL(\r\n      new Blob([source], { type: \"text/css\" })\r\n    );\r\n    sourcecssblobCache.set(source, bloburl);\r\n    return bloburl;\r\n  }\r\n}\r\nconst sourcecssblobCache = new Map<string, string>();\r\n","import { componentsstylesheet } from \"./parsecss-transformcss\";\r\nimport { get, set } from \"src/UtilTools/reflect\";\r\nimport { createcssBlob } from \"./create-cssurlblob\";\r\n\r\nexport function savestyleblob(\r\n  tagname: string,\r\n  csstext?: string,\r\n  urltext?: string\r\n) {\r\n  tagname = tagname.toLowerCase();\r\n  const prefix = tagname;\r\n  if (\r\n    !get(componentsstylesheet, prefix)\r\n    // componentsstylesheet[tagname]\r\n  ) {\r\n    set(componentsstylesheet, tagname, new Set());\r\n    // componentsstylesheet[tagname] = ;\r\n  }\r\n  if (csstext) {\r\n    get(componentsstylesheet, prefix).add(createcssBlob(csstext));\r\n  } else if (urltext) {\r\n    get(componentsstylesheet, prefix).add(urltext);\r\n  }\r\n}\r\n","// import { get } from \"src/UtilTools/reflect\";\r\n/*  selectoraddprefix,*/\r\nexport function selectoraddprefix(cssstylerule: CSSStyleRule, prefix: string) {\r\n  /* Edge CSSStyleRuleselectorText?*/\r\n  //css \r\n  //h1,p,h3,div\r\n  const selectorold = cssstylerule.selectorText;\r\n  const stylebodyold = cssstylerule.cssText.slice(selectorold.length);\r\n  const selectorTextss = selectorold;\r\n\r\n  const selectorarray = selectorTextss.split(\",\");\r\n  const selectoraftertransform = selectorarray\r\n    .map(selectorTextone => {\r\n      let prefixselector = prefix + \" \" + selectorTextone;\r\n\r\n      if (selectorTextone.startsWith(\"*\")) {\r\n        prefixselector =\r\n          prefixselector + \",\" + selectorTextone.replace(\"*\", prefix);\r\n      }\r\n      return prefixselector;\r\n    })\r\n    .join(\",\");\r\n\r\n  /*   cssstylerule.selectorText = selectoraftertransform;\r\n    if (cssstylerule.selectorText.startsWith(prefix)) {\r\n      return cssstylerule;\r\n    } else { */\r\n  // console.trace();\r\n  return {\r\n    /* , */\r\n    // type: cssstylerule.type,\r\n    // parentRule: cssstylerule.parentRule,\r\n    // parentStyleSheet: cssstylerule.parentStyleSheet,\r\n    // style: cssstylerule.style,\r\n    // styleMap: get(cssstylerule, \"styleMap\"),\r\n    selectorText: selectoraftertransform,\r\n    cssText: selectoraftertransform + stylebodyold,\r\n    // cssText: selectoraftertransform + stylebodyold,\r\n    // selectorText: selectoraftertransform,\r\n    [Symbol.toStringTag]: \"CSSStyleRule\"\r\n  };\r\n  // }\r\n\r\n  /*\r\n    const prefixselector = prefix + \" \" + selectorText;\r\n    if (selectorText.startsWith(\"*\")) {\r\n      cssstylerule.selectorText =\r\n        selectorText.replace(\"*\", prefix) + \",\" + prefixselector;\r\n      /* '* ',selectorrule*/\r\n\r\n  /* \r\n      *{font-size:80px !important;}\r\n  p{color:blue !important;} \r\n  */\r\n  /* \r\n      \r\n      q-9, q-9 * { font-size: 80px !important; }\r\n  q-9 p { color: blue !important; }\r\n  \r\n      */\r\n  /* } else {\r\n      cssstylerule.selectorText = prefixselector;\r\n    }\r\n  */\r\n}\r\n","import {\r\n  isCSSImportRule,\r\n  isCSSMediaRule,\r\n  //   isCSSRule,\r\n  isCSSStyleRule\r\n} from \"./isCSSRule\";\r\nimport { prefixcssmediarule } from \"./prefix-cssmediarule\";\r\nimport { savestyleblob } from \"./savestyleblob\";\r\nimport { selectoraddprefix } from \"./selectoraddprefix\";\r\n// import { isundefined } from \"src/UtilTools/util\";\r\n\r\nexport function prefixcssrules(\r\n  cssRulesarray: Array<CSSRule>,\r\n  prefix: string\r\n): Array<CSSRule> {\r\n  return cssRulesarray\r\n    .map((cssrule: CSSRule) => {\r\n      if (isCSSStyleRule(cssrule)) {\r\n        const resultoutput = selectoraddprefix(cssrule, prefix);\r\n        // console.log(resultoutput);\r\n        return resultoutput;\r\n      } else if (isCSSMediaRule(cssrule)) {\r\n        /*  selectoraddprefix,*/\r\n\r\n        // return cssrule;\r\n\r\n        return prefixcssmediarule(cssrule, prefix);\r\n      } else if (isCSSImportRule(cssrule)) {\r\n        //url\r\n        savestyleblob(prefix, undefined, cssrule.href);\r\n        return;\r\n      } else {\r\n        return cssrule;\r\n      }\r\n    })\r\n    .filter(Boolean) as Array<CSSRule>;\r\n}\r\n","import { render } from \"src/RenderVirtual/render-vdom-to-real\";\r\nimport createElement from \"src/CreateElement/create-element\";\r\nimport { createanotherhtmldocument, appendchild } from \"src/UtilTools/dom\";\r\nimport { get } from \"src/UtilTools/reflect\";\r\n\r\nexport function parsecsstext(text: string): Array<CSSRule> {\r\n  const styleelement = render(\r\n    createElement(\"style\", [text])\r\n  ) as HTMLStyleElement;\r\n  //   console.dir(styleelement);\r\n  /* documentsheet */\r\n  //const otherdocument = document.implementation.createHTMLDocument(\"\");\r\n  const otherdocument = createanotherhtmldocument();\r\n  appendchild(otherdocument.documentElement, styleelement);\r\n  //otherdocument.firstElementChild.appendChild(styleelement);\r\n  return Array.from(\r\n    get(\r\n      get(styleelement, \"sheet\"),\r\n\r\n      \"cssRules\"\r\n    )\r\n  );\r\n}\r\n","// import { parsecsstext } from \"./parsecss-transformcss\";\r\nimport { prefixcssrules } from \"./transform-prefix-cssrules\";\r\nimport { cssrulestocsstext } from \"./cssrulestocsstext\";\r\nimport { parsecsstext } from \"./parsecsstext\";\r\n\r\nexport function transformcsstext(text: string, prefix: string): string {\r\n  const cachedtext = oldcsstotransformedcss.get(text);\r\n  if (cachedtext) {\r\n    return cachedtext;\r\n  } else {\r\n    const css = text;\r\n    const cssomold = parsecsstext(css);\r\n    const cssomnew = prefixcssrules(cssomold, prefix).filter(Boolean);\r\n    //   console.log(cssomnew);\r\n    //   console.log([css, prefix, cssomold, cssomnew]);\r\n    const cssnewtext = cssrulestocsstext(cssomnew);\r\n    //   console.log([text, cssomold, cssomnew, cssnewtext]);\r\n    oldcsstotransformedcss.set(text, cssnewtext);\r\n    return cssnewtext;\r\n  }\r\n}\r\nconst oldcsstotransformedcss = new Map<string, string>();\r\n","import { transformcsstext } from \"./transformcsstext\";\r\nimport { savestyleblob } from \"./savestyleblob\";\r\n// import { savestyleblob } from \"./parsecss-transformcss\";\r\n\r\nexport function registercssprefix(text: string, prefix: string) {\r\n  //   debugger;\r\n  //   console.trace();\r\n  const css = text;\r\n  const cssnewtext = transformcsstext(css, prefix);\r\n  //   cssnewtext.forEach(url => {\r\n  /* cssurl */\r\n  savestyleblob(prefix, cssnewtext);\r\n  //   });\r\n}\r\n","import { appendchild } from \"src/UtilTools/dom\";\r\n\r\nexport function loadlinkstyle(\r\n  stylelinkelement: HTMLElement,\r\n  container: HTMLElement | Element | SVGSVGElement | SVGElement\r\n): Promise<void> {\r\n  return new Promise(rs => {\r\n    const loaderrorfun = () => {\r\n      stylelinkelement.onload = stylelinkelement.onerror = null;\r\n      rs();\r\n      //   console.log(stylelinkelement.href);\r\n    };\r\n    stylelinkelement.onload = loaderrorfun;\r\n    stylelinkelement.onerror = loaderrorfun;\r\n    appendchild(container, stylelinkelement);\r\n  });\r\n}\r\n","import {\r\n  componentsstylesheet,\r\n  createlinkstylesheet\r\n  //   loadlinkstyle\r\n} from \"./parsecss-transformcss\";\r\nimport { querySelectorAll } from \"src/UtilTools/dom\";\r\nimport { get } from \"src/UtilTools/reflect\";\r\nimport { loadlinkstyle } from \"./loadlinkstyle\";\r\n\r\nexport function waitloadallstyle(\r\n  prefix: string,\r\n  containerthis: Element | HTMLElement | SVGSVGElement | SVGElement\r\n) {\r\n  return Promise.all(\r\n    [...get(componentsstylesheet, prefix)].map(styleurl => {\r\n      if (\r\n        querySelectorAll(`link[rel=\"stylesheet\"][href=\"${styleurl}\"]`).length\r\n      ) {\r\n        return Promise.resolve();\r\n      } else {\r\n        /* linkstylesheet, */\r\n        return loadlinkstyle(createlinkstylesheet(styleurl), containerthis);\r\n      }\r\n    })\r\n  );\r\n}\r\n","export default function<T extends object>(target: T): T {\r\n  return new Proxy(target, {\r\n    set() {\r\n      return true;\r\n    },\r\n    defineProperty() {\r\n      return false;\r\n    },\r\n    deleteProperty() {\r\n      return false;\r\n    },\r\n    setPrototypeOf() {\r\n      return false;\r\n    }\r\n  });\r\n}\r\n","export function setimmediate(fun: Function) {\r\n  return Promise.resolve().then(() => fun());\r\n}\r\n","import {\r\n  innerstatesymbol,\r\n  innerwatchrecords\r\n} from \"../AttributeClass/createComponent\";\r\nimport { cached_callback_eventlistner } from \"../cached-map\";\r\nimport { isNode } from \"../MountElement/isNodeArray\";\r\n// import { isNode } from \"./MountElement/MountElement\";\r\nimport ReactiveState, {\r\n  addonelistner,\r\n  dispatchsymbol,\r\n  //   callbackmap,\r\n  removeonelistner\r\n} from \"../Reactivity/ReactiveState\";\r\nimport { rewatch /* , unwatch */, unwatch } from \"../Reactivity/watch\";\r\nimport {\r\n  readdlisteners,\r\n  removelisteners\r\n} from \"../RenderVirtual/handle-onevent\";\r\nimport { bindstatesymbol } from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { getchildNodes } from \"../UtilTools/dom\";\r\nimport { get, has } from \"../UtilTools/reflect\";\r\nimport { isArray } from \"../UtilTools/util\";\r\n\r\nexport function onmounted(ele: Element | Node | Array<Node>) {\r\n  if (isArray(ele)) {\r\n    ele.forEach(e => {\r\n      onmounted(e);\r\n    });\r\n  } else if (\r\n    isNode(ele)\r\n    //   ele instanceof Node\r\n  ) {\r\n    // if (has(ele, eventlistenerssymbol)) {\r\n    readdlisteners(ele);\r\n    // }\r\n    //\r\n    if (\r\n      has(ele, bindstatesymbol)\r\n      // ele[bindstatesymbol]\r\n    ) {\r\n      (get(ele, bindstatesymbol) as ReactiveState<any>[])\r\n\r\n        /*  ele[bindstatesymbol] */\r\n        .forEach((state: ReactiveState<any>) => {\r\n          rewatch(state);\r\n\r\n          /* dom */\r\n          state[dispatchsymbol]();\r\n        });\r\n    }\r\n    if (\r\n      has(ele, innerstatesymbol)\r\n      //   ele[innerstatesymbol]\r\n    ) {\r\n      (get(ele, innerstatesymbol) as ReactiveState<any>[]).forEach(\r\n        (state: ReactiveState<any>) => {\r\n          rewatch(state);\r\n        }\r\n      );\r\n    }\r\n    // readdlisteners(ele);\r\n    /* watchstatecallback,\r\nremoveeventlistener,\r\naddeventlistener\r\n*/\r\n    if (has(ele, innerwatchrecords)) {\r\n      const watchrecords = get(ele, innerwatchrecords) as [\r\n        ReactiveState<any>,\r\n        Function\r\n      ][];\r\n      watchrecords.forEach(([state, callback]) => {\r\n        const eventlistener = cached_callback_eventlistner.get(callback);\r\n        /*   if (!eventlistener) {\r\n          throw new Error();\r\n        } */\r\n        if (eventlistener) {\r\n          state[addonelistner](eventlistener);\r\n        }\r\n      });\r\n    }\r\n    onmounted(getchildNodes(ele));\r\n  }\r\n\r\n  //\r\n}\r\nexport function onunmounted(ele: Element | Node | Array<Node>) {\r\n  if (isArray(ele)) {\r\n    ele.forEach(e => {\r\n      onunmounted(e);\r\n    });\r\n  } else if (\r\n    isNode(ele)\r\n    //   ele instanceof Node\r\n  ) {\r\n    // if (\r\n    //   has(ele, eventlistenerssymbol)\r\n    //   // ele[eventlistenerssymbol]\r\n    // ) {\r\n    removelisteners(ele);\r\n    // }\r\n    /*   if (ele[bindstatesymbol]) {\r\n      ele[bindstatesymbol].forEach((state: ReactiveState) => {\r\n        unwatch(state);\r\n      });\r\n */\r\n    // readdlisteners(ele);\r\n    // }\r\n    //\r\n    /* unwatch ReactiveState*/\r\n    if (\r\n      has(ele, innerstatesymbol)\r\n      // ele[innerstatesymbol]\r\n    ) {\r\n      (get(ele, innerstatesymbol) as ReactiveState<any>[]).forEach(\r\n        (state: ReactiveState<any>) => {\r\n          unwatch(state);\r\n        }\r\n      );\r\n    }\r\n    if (has(ele, innerwatchrecords)) {\r\n      const watchrecords = get(ele, innerwatchrecords) as [\r\n        ReactiveState<any>,\r\n        Function\r\n      ][];\r\n      watchrecords.forEach(([state, callback]) => {\r\n        const eventlistener = cached_callback_eventlistner.get(callback);\r\n        /*  if (!eventlistener) {\r\n          throw new Error();\r\n        } */\r\n        if (eventlistener) {\r\n          state[removeonelistner](eventlistener);\r\n        }\r\n      });\r\n    }\r\n    onunmounted(getchildNodes(ele));\r\n  }\r\n}\r\n","export const readysymbol = Symbol(\"readystate\");\r\n","import createeleattragentreadwrite from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { setimmediate } from \"src/UtilTools/setimmediate\";\r\nimport {\r\n  onmounted,\r\n  onunmounted\r\n} from \"../mounted-unmounted/element-onmount-unmount\";\r\nimport { get } from \"../UtilTools/reflect\";\r\nimport { isFunction, isfunction, isobject } from \"../UtilTools/util\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nexport const attributeChangedCallback = Symbol(\"attributeChanged\");\r\nexport const firstinstalledcallback = Symbol(\"firstinstalled\");\r\n/* \r\n\r\n super.disconnectedCallback();\r\n\r\n babel?\r\n\r\n  connectedCallback() {\r\n            //    return _asyncToGenerator((function*() {}\r\n                ))();\r\n            }\r\n            disconnectedCallback() {\r\n               // return _asyncToGenerator((function*() {}\r\n                ))();\r\n            }\r\n*/\r\nexport function connectedCallback(componentelement: HTMLElement) {\r\n  AttrChange.prototype.connectedCallback.call(componentelement);\r\n}\r\n\r\nexport function disconnectedCallback(componentelement: HTMLElement) {\r\n  AttrChange.prototype.disconnectedCallback.call(componentelement);\r\n}\r\nexport class AttrChange extends HTMLElement {\r\n  //   abstract [firstinstalledcallback]();\r\n  disconnectedCallback() {\r\n    setimmediate(() => {\r\n      onunmounted(this);\r\n    });\r\n  }\r\n  connectedCallback() {\r\n    setimmediate(() => {\r\n      if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n        const callback = get(this, firstinstalledcallback);\r\n        if (isfunction(callback)) {\r\n          // get(this,firstinstalledcallback)\r\n          setimmediate(() => {\r\n            callback.call(this);\r\n          });\r\n        }\r\n      }\r\n      onmounted(this);\r\n    });\r\n\r\n    // onmounted(this);\r\n  }\r\n  [readysymbol] = false;\r\n  // [attributessymbol]: Record<string, ReactiveState<any>>;\r\n  constructor() {\r\n    super();\r\n    const defaultProps = get(this.constructor, \"defaultProps\");\r\n    // this.constructor[\"defaultProps\"];\r\n    const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n    //   const props = {};\r\n    if (isobject(defaultProps)) {\r\n      /*     if (!this[attributessymbol]) {\r\n        this[attributessymbol] = {};\r\n      } */\r\n      Object.assign(attrs, defaultProps);\r\n      // Object.assign(props, this.constructor[\"defaultProps\"]);\r\n    }\r\n\r\n    // mutation observer setattribute\r\n    new MutationObserver(mutations => {\r\n      mutations.forEach(mutation => {\r\n        if (mutation.type == \"attributes\") {\r\n          console.log(\r\n            \"The \" + mutation.attributeName + \" attribute was modified.\"\r\n          );\r\n          const callback = get(this, attributeChangedCallback);\r\n\r\n          let qualifiedName = mutation.attributeName;\r\n          if (\r\n            qualifiedName &&\r\n            isFunction(\r\n              callback\r\n              // this[attributeChangedCallback]\r\n            )\r\n          ) {\r\n            // setimmediate(() => {\r\n            callback.call(this, qualifiedName);\r\n            // });\r\n          }\r\n        }\r\n      });\r\n    }).observe(this, { attributes: true });\r\n  }\r\n  //   [attributeChangedCallback](name?: string): void;\r\n  // prototype!: HTMLElement;\r\n  /*  defaultProps?: { [key: string]: any } | undefined;\r\n  css?: string | undefined; */\r\n  /* constructor() {\r\n    super();\r\n  } */\r\n\r\n  /* seteletext,children */\r\n  //   get textContent() {\r\n  //     return String(super.textContent || \"\");\r\n  //   }\r\n  //   set textContent(_a: string) {\r\n  //     console.trace();\r\n  //     // return;\r\n  //   }\r\n  //   get innerHTML() {\r\n  //     return super.innerHTML;\r\n  //   }\r\n  //   set innerHTML(_a: string) {\r\n  //     // return;\r\n  //   }\r\n  //   get innerText() {\r\n  //     return super.innerText;\r\n  //   }\r\n  //   set innerText(_a: string) {\r\n  //     // return;\r\n  //   }\r\n  // [attributeChangedCallback](\r\n  //   name: string\r\n\r\n  /* _name?: any, _oldValue?: any, _newValue?: any */\r\n  // ) {\r\n  //   noop(name);\r\n  //\r\n  //  }\r\n  /* constructor() {\r\n    super();\r\n  } */\r\n\r\n  //innerhtmlinnertexttextcontent\r\n  /* disconnectedCallback() {\r\n  //console.log('Custom square element removed from page.');\r\n} */\r\n  /* connectedCallback() {\r\n  //console.log('Custom square element added to page.');\r\n  updateStyle(this);\r\n} */\r\n  //\r\n  //   connectedCallback(){}\r\n  /* attributeChangedCallback(name, oldValue, newValue) {\r\n  //console.log('Custom square element attributes changed.');\r\n  updateStyle(this);\r\n} */\r\n  //   setAttribute(qualifiedName: string, value: string) {\r\n  //     const callback = get(this, attributeChangedCallback);\r\n  //     const oldValue = getAttribute(this, qualifiedName);\r\n  //     // super.getAttribute(qualifiedName);\r\n\r\n  //     if (oldValue !== value) {\r\n  //       setAttribute(this, qualifiedName, value);\r\n  //       //   super.setAttribute(qualifiedName, value);\r\n  //       if (\r\n  //         isFunction(\r\n  //           callback\r\n  //           // this[attributeChangedCallback]\r\n  //         )\r\n  //       ) {\r\n  //         // setimmediate(() => {\r\n  //         callback.call(this, qualifiedName, oldValue, value);\r\n  //         // });\r\n  //       }\r\n  //     }\r\n  //   }\r\n  //   removeAttribute(qualifiedName: string) {\r\n  //     const callback = get(this, attributeChangedCallback);\r\n  //     const oldValue = getAttribute(this, qualifiedName);\r\n\r\n  //     if (null !== oldValue) {\r\n  //       //   super.removeAttribute(qualifiedName);\r\n  //       removeAttribute(this, qualifiedName);\r\n  //       if (isFunction(callback)) {\r\n  //         // setimmediate(() => {\r\n  //         callback.call(this, qualifiedName, oldValue, undefined);\r\n  //         // });\r\n  //       }\r\n  //     }\r\n  //   }\r\n}\r\n","const waittranformcsssymbol = Symbol(\"waittranformcss\");\r\nexport const innerwatchrecords = Symbol(\"innerwatchrecord\");\r\nexport const innerstatesymbol = Symbol(\"innerstate\");\r\nimport createeleattragentreadwrite from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { isvalidvdom } from \"src/CreateElement/isvalidvdom\";\r\nimport { isclassextendsHTMLElement } from \"src/CustomClass/isclassextendsHTMLElement\";\r\nimport { registercssprefix } from \"src/ScopedCSS/registercssprefix\";\r\nimport { waitloadallstyle } from \"src/ScopedCSS/waitloadallstyle\";\r\nimport { cached_create_componet } from \"../cached-map\";\r\n// import { Class } from \"./rendervdomtoreal\";\r\nimport Virtualdom, { Vdomchildren } from \"../CreateElement/VirtualElement\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\nimport {\r\n  closectx,\r\n  getMounted,\r\n  getstates,\r\n  getUnMounted,\r\n  getwatchrecords,\r\n  invalid_Function,\r\n  openctx\r\n} from \"../mounted-unmounted/Component-context\";\r\n// import { isvalidvdom } from \"../CreateElement/html\";\r\n// import { Promise } from \"q\";\r\n// import { inflate } from \"zlib\";\r\n// import { componentsymbol } from \"./iscomponent\";\r\n// import { insertfirst } from \"./dom\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport {\r\n  /* createApp, */ invalid_Virtualdom\r\n} from \"../MountElement/MountElement\";\r\nimport ReactiveState, {\r\n  dispatchsymbol /* , { dispatchsymbol } */\r\n} from \"../Reactivity/ReactiveState\";\r\nimport readonlyproxy from \"../Reactivity/readonly-proxy\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport {\r\n  /* parsecsstext,\r\n                        prefixcssrules,\r\n                        cssrulestocsstext, */\r\n  //   savestyleblob,\r\n  componentsstylesheet\r\n  //   createlinkstylesheet,\r\n  //   transformcsstext,\r\n  //   registercssprefix\r\n  /*  loadlinkstyle,\r\n                        createlinkstylesheet */\r\n  //   savestyleblob\r\n  //   waitloadallstyle\r\n} from \"../ScopedCSS/parsecss-transformcss\";\r\nimport { seteletext } from \"../UtilTools/dom\";\r\nimport { apply, defineProperty, get, set } from \"../UtilTools/reflect\";\r\nimport { setimmediate } from \"../UtilTools/setimmediate\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isfunction, isobject, isstring } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  attributeChangedCallback,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport createcomponent from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nexport const attributessymbol = Symbol(\"attributes\");\r\nconst elementsymbol = Symbol(\"innerelement\");\r\nconst inner_vdom_symbol = Symbol(\"innervdom\");\r\nconst mountedsymbol = Symbol(\"mounted\");\r\nconst unmountedsymbol = Symbol(\"unmounted\");\r\nexport interface Htmlelementconstructor {\r\n  new (): HTMLElement;\r\n  prototype: HTMLElement;\r\n  defaultProps?: Record<string, any>;\r\n  css?: string;\r\n}\r\nfunction createComponent(custfun: Custom): Htmlelementconstructor {\r\n  if (isfunction(custfun)) {\r\n    const cached_class = cached_create_componet.get(custfun);\r\n    if (cached_class) {\r\n      return cached_class;\r\n    }\r\n\r\n    const defaultProps = get(custfun, \"defaultProps\"); //custfun[\"defaultProps\"];\r\n    const css = get(custfun, \"css\");\r\n    class Component extends AttrChange {\r\n      [innerwatchrecords]: [ReactiveState<any>, Function][];\r\n      [attributessymbol]: Record<string, ReactiveState<any>> = {};\r\n      // new (propsjson?: object | undefined, children?: any[] | undefined): HTMLElement\r\n\r\n      //   constructor(...args: any[]);\r\n\r\n      [waittranformcsssymbol]: undefined | (() => Promise<void>);\r\n      constructor(\r\n        propsjson: Record<string, any> = {},\r\n        children: Vdomchildren = [] /* , options?: any */ //   : HTMLElement;\r\n      ) {\r\n        super();\r\n        // this[attributessymbol] = {};\r\n        const css = get(this.constructor, \"css\");\r\n\r\n        if (css) {\r\n          const prefix = this.tagName.toLowerCase();\r\n          if (\r\n            !get(componentsstylesheet, prefix)\r\n            /*  componentsstylesheet[prefix] */\r\n          ) {\r\n            set(componentsstylesheet, prefix, new Set());\r\n            /* css */\r\n            // console.trace();\r\n            this[waittranformcsssymbol] = () => {\r\n              return setimmediate(() => {\r\n                registercssprefix(css, prefix);\r\n              });\r\n            };\r\n\r\n            /* csscssom ,,,blob,link-stylesheet,*/\r\n            /* const cssomold = parsecsstext(css);\r\n                const cssomnew = prefixcssrules(cssomold, prefix);\r\n                //   console.log([css, prefix, cssomold, cssomnew]);\r\n                const cssnewtext = cssrulestocsstext(cssomnew); */\r\n            // const cssnewtext = transformcsstext(css, prefix);\r\n            // savestyleblob(prefix, cssnewtext);\r\n            // console.log(cssnewtext, componentsstylesheet);\r\n          }\r\n        }\r\n        // const defaultProps = get(this.constructor, \"defaultProps\");\r\n        // this.constructor[\"defaultProps\"];\r\n        const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n        //   const props = {};\r\n        /*    if (isobject(defaultProps)) {\r\n          Object.assign(attrs, defaultProps);\r\n          // Object.assign(props, this.constructor[\"defaultProps\"]);\r\n        } */\r\n        if (isobject(propsjson)) {\r\n          Object.assign(attrs, propsjson);\r\n          // Object.assign(props, propsjson);\r\n        }\r\n        // console.log({ ...attrs });\r\n        //   this[attributessymbol] = createeleattragentreadwrite(this);\r\n        // const props = createeleattragentreadwrite(this);/\r\n        const props = attrs;\r\n        openctx();\r\n\r\n        const thisattributess = Object.fromEntries(\r\n          Object.entries(props).map(([key]) => [\r\n            key,\r\n            (() => {\r\n              /* getterattribute */\r\n              const attributes = createeleattragentreadwrite(this) as Record<\r\n                string,\r\n                any\r\n              >;\r\n              const state = new ReactiveState();\r\n              defineProperty(state, \"value\", {\r\n                get() {\r\n                  return get(attributes, key);\r\n                },\r\n                configurable: true\r\n              });\r\n              //   usestste(state);\r\n              return state;\r\n            })()\r\n          ])\r\n        );\r\n        this[attributessymbol] = thisattributess;\r\n        // console.log({ props, thisattributess });\r\n        // debugger;\r\n        /* attributesreactivestatesinnerstates */\r\n        const readonlyprop = readonlyproxy(\r\n          Object.fromEntries(\r\n            Object.entries(thisattributess).map(([key, value]) => [\r\n              key,\r\n              readonlyproxy(value)\r\n            ])\r\n          )\r\n        );\r\n\r\n        let possiblyvirtualdom:\r\n          | string\r\n          | Virtualdom<any>\r\n          | ReactiveState<any>\r\n          | (string | Virtualdom<any> | ReactiveState<any>)[]\r\n          | any;\r\n        try {\r\n          possiblyvirtualdom = apply(custfun, undefined, [\r\n            readonlyprop,\r\n            children.flat(1 / 0)\r\n          ]);\r\n          /* custfun.call(\r\n            undefined,\r\n            //propsreactivestatevalue\r\n            // readonlyproxy(thisattributess),\r\n            readonlyprop,\r\n            children */\r\n          // );\r\n        } catch (error) {\r\n          closectx();\r\n          console.error(\"error in component\");\r\n          throw error;\r\n        }\r\n        /* \r\n        if (isArray(possiblyvirtualdom)) {\r\n          possiblyvirtualdom = possiblyvirtualdom\r\n            .flat(Infinity)\r\n            .filter(Boolean);\r\n        } */\r\n        possiblyvirtualdom = toArray(possiblyvirtualdom);\r\n        if (isvalidvdom(possiblyvirtualdom)) {\r\n          const vdomarray /* isArray(possiblyvirtualdom)\r\n                ? possiblyvirtualdom\r\n                : [possiblyvirtualdom]; */ = toArray(\r\n            possiblyvirtualdom\r\n          );\r\n          //\r\n          this[inner_vdom_symbol] = vdomarray.flat(Infinity).filter(Boolean);\r\n          this[mountedsymbol] = getMounted();\r\n          this[unmountedsymbol] = getUnMounted();\r\n          this[innerstatesymbol] = getstates();\r\n          this[innerwatchrecords] = getwatchrecords();\r\n          closectx();\r\n        } else {\r\n          closectx();\r\n          console.error(possiblyvirtualdom);\r\n          console.error(invalid_Virtualdom);\r\n          throw TypeError();\r\n        }\r\n\r\n        //   this[mountedsymbol] = getMounted();\r\n        //   this[unmountedsymbol] = getUnMounted();\r\n      }\r\n      //   prototype!: HTMLElement;\r\n      //   defaultProps?: { [key: string]: any } | undefined;\r\n      //  css?: string | undefined;\r\n      [innerstatesymbol]: Array<ReactiveState<any>>;\r\n      static [componentsymbol] = componentsymbol;\r\n      static css = isstring(css) && css ? css : undefined;\r\n      [readysymbol] = false;\r\n      [mountedsymbol]: Array<Function>;\r\n      [unmountedsymbol]: Array<Function>;\r\n      static defaultProps = isobject(defaultProps)\r\n        ? JSON.parse(JSON.stringify(defaultProps))\r\n        : undefined;\r\n\r\n      [elementsymbol]: Array<Node>;\r\n      [inner_vdom_symbol]: Array<\r\n        Virtualdom<any> | ReactiveState<any> | string | number\r\n      >;\r\n      // | undefined;\r\n      [firstinstalledcallback]() {\r\n        const thencallbackfirst = () => {\r\n          /* css */\r\n          seteletext(this, \"\");\r\n          /* link style sheethead */\r\n          return waitloadallstyle(prefix, document.head);\r\n        };\r\n        const thencallbacksecond = () => {\r\n          //   console.log(\"style load all\");\r\n          //   console.log(\"mount1\");\r\n          mount(this[elementsymbol], this, false);\r\n          this[waittranformcsssymbol] = undefined;\r\n        };\r\n        if (!this[elementsymbol]) {\r\n          const innervdom = this[inner_vdom_symbol];\r\n          if (innervdom) {\r\n            this[elementsymbol] = render(innervdom).flat(Infinity);\r\n            this[inner_vdom_symbol] = [];\r\n            /*,  */\r\n          }\r\n        }\r\n\r\n        const css = get(this.constructor, \"css\");\r\n        const prefix = this.tagName.toLowerCase();\r\n        if (css /*  && componentsstylesheet[prefix] */) {\r\n          const waitcallback = this[waittranformcsssymbol];\r\n          if (waitcallback) {\r\n            waitcallback()\r\n              .then(thencallbackfirst)\r\n              .then(thencallbacksecond);\r\n          } else {\r\n            Promise.resolve(thencallbackfirst).then(thencallbacksecond);\r\n          }\r\n\r\n          /*  children */\r\n\r\n          /* css, */\r\n          /* css@import */\r\n          /*  */\r\n          //   console.log(componentsstylesheet[prefix]);\r\n          // if (componentsstylesheet[prefix]) {\r\n          /* const stylelinkelement = createlinkstylesheet(\r\n              componentsstylesheet[prefix]\r\n            ); */\r\n          /*   stylelinkelement.onload = () => {\r\n              mount(this[elementsymbol], this, false);\r\n            };\r\n            stylelinkelement.onerror = () => {\r\n              mount(this[elementsymbol], this, false);\r\n            }; */\r\n          // insertfirst(this, stylelinkelement);\r\n          // }\r\n          /*  Promise.all(\r\n              [...componentsstylesheet[prefix]].map(styleurl =>\r\n                loadlinkstyle(createlinkstylesheet(styleurl), this)\r\n              )\r\n            )\r\n*/\r\n        } else {\r\n          // console.log(\"mount2\");\r\n          mount(this[elementsymbol], this);\r\n        }\r\n      }\r\n      connectedCallback() {\r\n        setimmediate(() => {\r\n          connectedCallback(this);\r\n          // if (!this[elementsymbol]) {\r\n          //   this[elementsymbol] = render(this[vdomsymbol]).flat(Infinity);\r\n          // }\r\n          //    /*  if (!this[readysymbol]) {\r\n          //       this[readysymbol] = true;\r\n          //       /*  */\r\n          //       //   mount(this[elementsymbol], this, false);\r\n          //     } */\r\n          //mounted callback \r\n          this[mountedsymbol].forEach(f => {\r\n            setimmediate(f);\r\n          });\r\n        });\r\n\r\n        // onmounted(this);\r\n        // super.connectedCallback();\r\n      }\r\n      disconnectedCallback() {\r\n        setimmediate(() => {\r\n          disconnectedCallback(this);\r\n          this[unmountedsymbol].forEach(f => {\r\n            setimmediate(f);\r\n          });\r\n        });\r\n\r\n        // onunmounted(this);\r\n        // super.disconnectedCallback();\r\n      }\r\n      [attributeChangedCallback](\r\n        name: string /* , oldValue: any, newValue: any */\r\n      ) {\r\n        // console.log(this[attributessymbol]);\r\n        // if (!this[attributessymbol]) {\r\n        //   this[attributessymbol] = {};\r\n        // }\r\n        if (this[readysymbol]) {\r\n          {\r\n            const propreactivestate = this[attributessymbol][name];\r\n            /*   const attributes = createeleattragentreadwrite(this) as Record<\r\n              string,\r\n              any\r\n            >; */\r\n            if (propreactivestate) {\r\n              /* getterattribute */\r\n              propreactivestate[dispatchsymbol]();\r\n              //   propreactivestate[\"value\"] = attributes[name];\r\n\r\n              /* ReactiveState */\r\n              /*   set(\r\n            get(this, attributessymbol)[name],\r\n            \"value,\",\r\n            (createeleattragentreadwrite(this) as { [key: string]: any })[\r\n              name\r\n            ] as any */\r\n              //   );\r\n              /*   this[attributessymbol][name].value = createeleattragentreadwrite(\r\n            this\r\n          )[name]; */\r\n              //   this[attributessymbol][name][dispatchsymbol]();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    cached_create_componet.set(custfun, Component);\r\n    return Component;\r\n  } else {\r\n    console.error(custfun);\r\n    console.error(invalid_Function);\r\n    throw TypeError();\r\n  }\r\n}\r\nexport { createcomponent as createComponent };\r\nexport default (custfun: Custom | Htmlelementconstructor) =>\r\n  autocreateclass(custfun);\r\nexport function autocreateclass(\r\n  custfun: Custom | Htmlelementconstructor\r\n): Htmlelementconstructor {\r\n  if (isclassextendsHTMLElement(custfun)) {\r\n    return custfun;\r\n  } else if (isfunction(custfun)) {\r\n    return createComponent(custfun);\r\n  } else {\r\n    throw TypeError();\r\n  }\r\n}\r\n","import h from \"./create-element\";\r\nexport { h };\r\nimport { Class, Custom } from \"../CustomClass/customclass\";\r\nimport ReactiveState from \"../Reactivity/ReactiveState\";\r\nimport { apply } from \"../UtilTools/reflect\";\r\nimport {\r\n  isarray,\r\n  isfunction,\r\n  isplainobject,\r\n  isstring\r\n} from \"../UtilTools/util\";\r\nimport Virtualdom, {\r\n  createVirtualElement,\r\n  Vdomchildren\r\n} from \"./VirtualElement\";\r\nimport {\r\n  autocreateclass,\r\n  Htmlelementconstructor\r\n} from \"../AttributeClass/createComponent\";\r\ntype styleprop =\r\n  | string\r\n  | object\r\n  | ReactiveState<string>\r\n  | ReactiveState<object>;\r\n\r\ntype classprop =\r\n  | string\r\n  | Set<string>\r\n  | Array<string>\r\n  | ReactiveState<string | Set<string> | Array<string>>;\r\nexport interface ElementAttrs {\r\n  style?: styleprop;\r\n  class?: classprop;\r\n  [key: string]: any;\r\n}\r\n\r\nexport default function<T extends Htmlelementconstructor | string | Custom>(\r\n  type: T,\r\n  propsorchildren?: Vdomchildren,\r\n  ...children: Vdomchildren\r\n): Virtualdom<T>;\r\nexport default function<T extends Vdomchildren>(\r\n  type: \"\",\r\n  propsorchildren?: T,\r\n  ...children: T\r\n): T;\r\nexport default function<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T;\r\nexport default function<T extends Htmlelementconstructor | string | Custom>(\r\n  type: T,\r\n  props?: ElementAttrs,\r\n  ...children: Vdomchildren\r\n): Virtualdom<T>;\r\n// \r\n/* \r\nh(type,...children)\r\nh(type,children)\r\n*/\r\n\r\nexport default function(\r\n  type?: Htmlelementconstructor | string | Custom,\r\n  propsorchildren?: Vdomchildren | ElementAttrs,\r\n  ...children: Vdomchildren\r\n) {\r\n  if (isfunction(type)) {\r\n    type = autocreateclass(type);\r\n    // debugger;\r\n  }\r\n\r\n  if (isarray(propsorchildren)) {\r\n    return apply(createElement, undefined, [\r\n      type,\r\n      undefined,\r\n      [...propsorchildren, ...children].flat(1 / 0)\r\n    ]);\r\n    /*   createElement(\r\n      type,\r\n      undefined,\r\n      [...propsorchildren, ...children].flat(1 / 0)\r\n    ); */\r\n  } else {\r\n    return apply(createElement, undefined, [\r\n      type,\r\n      propsorchildren,\r\n      ...children\r\n    ]); // createElement(...arguments);\r\n  }\r\n}\r\nfunction createElement<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T;\r\nfunction createElement<T extends Function | string>(\r\n  type: T,\r\n  props?: ElementAttrs,\r\n  ...children: Vdomchildren\r\n): Virtualdom<T>;\r\n\r\n/* function createElement<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T; */\r\n\r\nfunction createElement<T extends Function | string | Class>(\r\n  type?: T,\r\n  props: ElementAttrs = {},\r\n  ...children: Vdomchildren\r\n): Virtualdom<T> | Vdomchildren {\r\n  // | Array<Virtualdom | string>\r\n  // if(isarray()){}\r\n  /* add fragment element */\r\n  //   console.log(type, props, children);\r\n  let typenormalized: \"\" | Function | string =\r\n    isstring(type) || isfunction(type) ? type : \"\";\r\n  const propsnormalized = isplainobject(props) ? props : {};\r\n  const childrennormalized: Vdomchildren = children\r\n    .flat(Infinity)\r\n    .map(a => (a === 0 ? \"0\" : a))\r\n    .filter(a => !!a);\r\n  if (\r\n    isstring(typenormalized)\r\n    //   typeof typenormalized === \"string\"\r\n  ) {\r\n    typenormalized = typenormalized.trim().toLowerCase();\r\n  }\r\n\r\n  if (\r\n    //typeof typenormalized === \"string\" &&\r\n\r\n    \"\" === typenormalized\r\n  ) {\r\n    return childrennormalized;\r\n  } else {\r\n    /* propsnormalized = Object.fromEntries(\r\n    Object.entries(propsnormalized).map(([key, value]) => [\r\n      key.trim().toLowerCase(),\r\n      value\r\n    ])\r\n  ); */\r\n\r\n    /* return new Virtualdom(\r\n      typenormalized,\r\n      propsnormalized,\r\n      childrennormalized\r\n    ) as Virtualdom<any>;\r\n*/\r\n    return apply(createVirtualElement, undefined, [\r\n      typenormalized,\r\n      propsnormalized,\r\n      childrennormalized\r\n    ]) as Virtualdom<T>;\r\n\r\n    /*  createVirtualElement(\r\n     \r\n    ); */\r\n  }\r\n}\r\n","// declare interface Array<T> {\r\n//   flat(arg0: number): any[];\r\n// }\r\nimport createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { isvalidvdom, VaildVDom } from \"../CreateElement/isvalidvdom\";\r\nimport createElement from \"../CreateElement/create-element\";\r\n// import createElement from \"./createelement\";\r\nimport Virtualdom, { Vdomchildren } from \"../CreateElement/VirtualElement\";\r\n// const readysymbol = Symbol(\"ready\");\r\nimport {\r\n  onmounted,\r\n  onunmounted\r\n} from \"../mounted-unmounted/element-onmount-unmount\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { setelehtml } from \"../UtilTools/dom\";\r\nimport { get } from \"../UtilTools/reflect\";\r\n// import mount from \"./mount\";\r\nimport { isboolean, isundefined } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  attributeChangedCallback,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { Htmlelementconstructor } from \"./createComponent\";\r\n// import { isvalidvdom } from \"../CreateElement/html\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\n\r\n// import { readysymbol } from \"./createComponent\";\r\nexport const invalid_ReactiveState = \"invalid ReactiveState\";\r\nconst truevdomsymbol = Symbol(\"truevdom\");\r\nconst falsevdomsymbol = Symbol(\"falsevdom\");\r\nconst trueelesymbol = Symbol(\"trueele\");\r\nconst falseelesymbol = Symbol(\"falseele\");\r\nconst handletrue = Symbol(\"handletrue\");\r\nconst handlefalse = Symbol(\"handlefalse\");\r\n\r\nexport default function(\r\n  conditon: ReactiveState<boolean> | boolean,\r\n  iftrue?: VaildVDom,\r\n  iffalse?: VaildVDom\r\n): Virtualdom<Htmlelementconstructor> {\r\n  if (!(isReactiveState(conditon) || isboolean(conditon))) {\r\n    console.error(conditon);\r\n    console.error(invalid_ReactiveState);\r\n    throw TypeError();\r\n  }\r\n  [iftrue, iffalse].forEach(a => {\r\n    if (!(isundefined(a) || isvalidvdom(a))) {\r\n      console.error(a);\r\n      console.error(invalid_Virtualdom);\r\n      throw new TypeError();\r\n    }\r\n  });\r\n  const options = { true: iftrue, false: iffalse };\r\n  const optionstrue = get(options, \"true\");\r\n  const optionsfalse = get(options, \"false\");\r\n  class Condition extends AttrChange {\r\n    // prototype!: HTMLElement;\r\n    // defaultProps?: { [key: string]: any } | undefined;\r\n    // css?: string | undefined;\r\n    static [componentsymbol] = componentsymbol;\r\n    [readysymbol] = false;\r\n    [truevdomsymbol]: Vdomchildren = [optionstrue].flat(1 / 0).filter(Boolean);\r\n    /*isarray(optionstrue)\r\n    ? optionstrue.filter(Boolean)\r\n    : */\r\n\r\n    [falsevdomsymbol]: Vdomchildren = [optionsfalse]\r\n      .flat(1 / 0)\r\n      .filter(Boolean);\r\n    /* isarray(optionsfalse)\r\n    ? optionsfalse.filter(Boolean)\r\n    : */\r\n\r\n    //  /*    constructor() /* propsjson?: object, children?: any[], options: object = {} */ {\r\n    //       super();\r\n    //       // if(){}\r\n\r\n    //       this[truevdomsymbol] =\r\n    //         /*isarray(optionstrue)\r\n    //         ? optionstrue.filter(Boolean)\r\n    //         : */\r\n    //         [optionstrue].flat(1 / 0).filter(Boolean);\r\n    //       this[falsevdomsymbol] =\r\n    //         /* isarray(optionsfalse)\r\n    //         ? optionsfalse.filter(Boolean)\r\n    //         : */\r\n\r\n    //         [optionsfalse].flat(1 / 0).filter(Boolean);\r\n    //       // optionsfalse;\r\n    //     } */\r\n    [falseelesymbol]: Node[];\r\n    [trueelesymbol]: Node[];\r\n    // [truevdomsymbol]: any[];\r\n    // [falsevdomsymbol]: any[];\r\n    //   [readysymbol] = false;\r\n    [handlefalse]() {\r\n      setelehtml(this, \"\");\r\n      if (this[falsevdomsymbol]) {\r\n        if (!this[falseelesymbol]) {\r\n          // } else {\r\n          this[falseelesymbol] = render(this[falsevdomsymbol]);\r\n          // this[falsevdomsymbol].map(e => render(e));\r\n          this[falsevdomsymbol] = [];\r\n        }\r\n      }\r\n      //   mount(this[falseelesymbol], this);\r\n      const elementtomount = this[falseelesymbol];\r\n      mount(elementtomount, this);\r\n      // elementtomount.forEach(e => onmounted(e));\r\n      onmounted(elementtomount);\r\n      if (this[trueelesymbol]) {\r\n        onunmounted(this[trueelesymbol]);\r\n        //   this[trueelesymbol].forEach(e => onunmounted(e));\r\n      }\r\n      //   }\r\n    }\r\n    [handletrue]() {\r\n      setelehtml(this, \"\");\r\n      if (this[truevdomsymbol]) {\r\n        if (!this[trueelesymbol]) {\r\n          this[trueelesymbol] = render(this[truevdomsymbol]);\r\n\r\n          // this[truevdomsymbol].map(e => render(e));\r\n          /*  */\r\n          this[truevdomsymbol] = [];\r\n        }\r\n      }\r\n      //\r\n      //   mount(this[trueelesymbol], this);\r\n      const elementtomount = this[trueelesymbol];\r\n      mount(elementtomount, this);\r\n      onmounted(elementtomount);\r\n      // elementtomount.forEach(e => onmounted(e));\r\n      if (this[falseelesymbol]) {\r\n        onunmounted(this[falseelesymbol]);\r\n        //   this[falseelesymbol].forEach(e => onunmounted(e));\r\n      }\r\n      //   }\r\n    }\r\n    [firstinstalledcallback]() {\r\n      const attrs: { [key: string]: any } = createeleattr(this);\r\n      // console.log(attrs);\r\n      if (true === attrs[\"value\"]) {\r\n        get(this, handletrue).call(this);\r\n      } else if (!attrs[\"value\"]) {\r\n        /* \"@masx200/dom-element-attribute-agent-proxy\"\r\n      false,undefined\r\n      */\r\n        get(this, handlefalse).call(this);\r\n        //\r\n      }\r\n    }\r\n    connectedCallback() {\r\n      connectedCallback(this);\r\n      //   super.connectedCallback();\r\n\r\n      /*   if (!this[readysymbol]) {\r\n        // createApp(this[elementsymbol], this);\r\n        this[readysymbol] = true;\r\n\r\n        const attrs: { [key: string]: any } = createeleattr(this);\r\n        // console.log(attrs);\r\n        if (true === attrs[\"value\"]) {\r\n          get(this, handletrue).call(this);\r\n        }\r\n        if (false === attrs[\"value\"]) {\r\n          get(this, handlefalse).call(this);\r\n          //\r\n        }\r\n      } */\r\n      //   onmounted(this);\r\n      //\r\n    }\r\n    disconnectedCallback() {\r\n      disconnectedCallback(this);\r\n      //   onunmounted(this);\r\n      //   super.connectedCallback();\r\n    }\r\n\r\n    [attributeChangedCallback](\r\n      name: string /* , oldValue: any, newValue: any */\r\n    ) {\r\n      if (this[readysymbol]) {\r\n        // console.log(name, oldValue, newValue);\r\n        if (name === \"value\") {\r\n          const attrs: Record<string, any> = createeleattr(this);\r\n          //   console.log(attrs);\r\n          if (true === attrs[\"value\"]) {\r\n            this[handletrue]();\r\n            //\r\n          } else if (!attrs[\"value\"]) {\r\n            this[handlefalse]();\r\n            //\r\n          }\r\n        }\r\n\r\n        //\r\n      }\r\n    }\r\n  }\r\n  /* vdom.options = { true: iftrue, false: iffalse }; */\r\n  const vdom = createElement(Condition, { value: conditon });\r\n  return vdom;\r\n  /*  */\r\n}\r\n","export function asserttype(con: boolean) :asserts con{\r\n  if (!con) {\r\n    throw new TypeError();\r\n  }\r\n}\r\n","import { isFunction, isobject, issymbol } from \"src/UtilTools/util\";\r\nimport {\r\n  get,\r\n  has,\r\n  ownKeys,\r\n  getOwnPropertyDescriptor\r\n} from \"src/UtilTools/reflect\";\r\n\r\nexport function getproperyreadproxy<T extends object>(a: T): T {\r\n  const __proto__ = \"__proto__\";\r\n  /*  */\r\n  //   const target = isobject(a) ? a : getPrototypeOf(a);\r\n  const target = a;\r\n  return new Proxy(target, {\r\n    getOwnPropertyDescriptor(target, key) {\r\n      //symbolundefined\r\n      if (issymbol(key)) {\r\n        return;\r\n      } else {\r\n        return getOwnPropertyDescriptor(target, key);\r\n      }\r\n    },\r\n    ownKeys(target) {\r\n      let myvalue = get(target, \"value\");\r\n      const myvalueobj = isobject(myvalue) ? myvalue : myvalue[__proto__];\r\n      //   return ownKeys(target);\r\n      return Array.from(new Set([...ownKeys(target), ...ownKeys(myvalueobj)]));\r\n\r\n      /* Array.from(\r\n          new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n        ); */\r\n    },\r\n    has(target, key) {\r\n      const myvalue = get(target, \"value\");\r\n      const myvalueobj = isobject(myvalue) ? myvalue : myvalue[__proto__];\r\n      return has(target, key) || has(myvalueobj, key);\r\n    },\r\n    get(target, key) {\r\n      if (has(target, key)) {\r\n        return get(target, key);\r\n      } else {\r\n        const myvalue = get(target, \"value\");\r\n        const myvalueobj = /*  isobject(myvalue) ? myvalue :  */ Object(\r\n          myvalue\r\n        );\r\n\r\n        if (has(myvalueobj, key)) {\r\n          /* string,number,this */\r\n          const property = get(myvalueobj, key);\r\n          return isFunction(property) ? property.bind(myvalueobj) : property;\r\n        }\r\n      }\r\n      //   return get(target, key);\r\n      /*  const myvalue = get(target, \"value\");\r\n  \r\n        if (has(target, key)) {\r\n          return get(target, key);\r\n        } else if (has(myvalue, key)) {\r\n          return get(myvalue, key);\r\n        } */\r\n    }\r\n  });\r\n}\r\n","/* interface CallbackReactiveState<\r\n \r\n> {\r\n  (...args: T[]): any;\r\n} */\r\nimport { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { invalid_Function } from \"../mounted-unmounted/Component-context\";\r\nimport {\r\n  apply,\r\n  //   getPrototypeOf\r\n  //   set\r\n  defineProperty\r\n} from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport {\r\n  isArray,\r\n  isFunction,\r\n  isfunction,\r\n  isobject,\r\n  isprimitive\r\n} from \"../UtilTools/util\";\r\nimport computed from \"./computed\";\r\nimport { getproperyreadproxy } from \"./getproperyread-proxy\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  isReactiveState\r\n} from \"./ReactiveState\";\r\nimport { CallbackReactiveState, UnwrapedState, watch } from \"./watch\";\r\n\r\n//const { defineProperty } = Object;\r\nexport default function<T extends UnwrapedState>(\r\n  state: ReactiveState<T> | Array<ReactiveState<T>>,\r\n  callback: CallbackReactiveState,\r\n  setter?: SetterFun\r\n): ReactiveState<any> {\r\n  if (\r\n    !(\r\n      (isArray(state) || isReactiveState(state)) &&\r\n      // state instanceof ReactiveState\r\n      isFunction(callback)\r\n    )\r\n  ) {\r\n    console.error(state);\r\n    console.error(callback);\r\n    console.error(invalid_ReactiveState + invalid_Function);\r\n\r\n    throw TypeError();\r\n  }\r\n  const state1array: ReactiveState<T>[] =\r\n    //   if (isReactiveState(state)) {\r\n    toArray(state);\r\n  if (!state1array.length) {\r\n    console.error(\"Empty array not allowed\");\r\n    throw new Error();\r\n  }\r\n  /*  state1 = Arraycomputed(\r\n      toArray(state),\r\n\r\n      callback\r\n    ); */\r\n  //   } else if (isArray(state)) {\r\n  //     state1array = state;\r\n  //     // state1 = Arraycomputed(state, callback);\r\n  //   } else {\r\n  //     state1array = Array.from(state);\r\n  //   }\r\n  const state1 = Arraycomputed(state1array, callback, setter);\r\n  //   usestste(state1);\r\n  return state1;\r\n}\r\ntype SetterFun = (v: any) => void;\r\nfunction Arraycomputed<T extends UnwrapedState>(\r\n  state: ReactiveState<T>[],\r\n  callback: CallbackReactiveState,\r\n  setter?: SetterFun\r\n): ReactiveState<any> {\r\n  const reactivestate = new ReactiveState();\r\n  const getter = () => {\r\n    //\r\n    const value = apply(callback, undefined, state.map(st => st.valueOf()));\r\n    // callback(...state.map(st => st.valueOf()));\r\n    const possiblevalue = isReactiveState(value) ? value.valueOf() : value;\r\n\r\n    if (isobject(possiblevalue) || isprimitive(possiblevalue)) {\r\n      return possiblevalue;\r\n    } else {\r\n      console.error(possiblevalue);\r\n      throw TypeError();\r\n    }\r\n  };\r\n\r\n  let memorized = getter();\r\n\r\n  // if (isFunction(memorized)) {\r\n  //   console.error(memorized);\r\n  //   throw new TypeError();\r\n  // }\r\n  defineProperty(reactivestate, \"value\", {\r\n    set: isfunction(setter) ? setter : undefined,\r\n    get: getter,\r\n    configurable: true\r\n  });\r\n\r\n  state.forEach(state => {\r\n    watch(state, () => {\r\n      let newvalue = getter();\r\n      if (newvalue !== memorized) {\r\n        reactivestate[dispatchsymbol]();\r\n\r\n        memorized = newvalue;\r\n      }\r\n      //\r\n    });\r\n  });\r\n\r\n  return getproperyreadproxy(reactivestate);\r\n}\r\n\r\n// export function getproperyreadproxy<T extends object>(a: T): T;\r\n\r\nexport { computed };\r\n","const Setprototype = Set.prototype;\r\nconst Mapprototype = Map.prototype;\r\nfunction ispromise(a: any): a is Promise<any> {\r\n  return a instanceof Promise;\r\n}\r\nfunction isdate(a: any): a is Date {\r\n  return a instanceof Date;\r\n}\r\nfunction isregexp(a: any): a is RegExp {\r\n  return a instanceof RegExp;\r\n}\r\nfunction isMap(a: any): a is Map<any, any> {\r\n  return a instanceof Map;\r\n}\r\nfunction isSet(a: any): a is Set<any> {\r\n  return a instanceof Set;\r\n}\r\nfunction isArray(a: any): a is any[] {\r\n  return Array.isArray(a);\r\n}\r\n\"use strict\";\r\nconst Reflect = window.Reflect;\r\nconst {\r\n  ownKeys,\r\n  deleteProperty,\r\n  apply,\r\n  construct,\r\n  defineProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  getPrototypeOf,\r\n  has,\r\n\r\n  set,\r\n  setPrototypeOf\r\n} = Reflect;\r\nfunction isobject(a: any): a is Exclude<object, Function> {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a: any): a is Function {\r\n  return typeof a === \"function\";\r\n}\r\n/* API\r\nfunction deepobserveagent(target: Object | Function, callback: callback): any;\r\n\r\ninterface callback {\r\n  (\r\n    target: Object | Function,\r\n    patharray: Array<any>,\r\n    newvalue: any,\r\n    oldvalue: any\r\n  ): void;\r\n}\r\n\r\n*/\r\ninterface Callback<\r\n  T extends object | Function | any[] | Set<any> | Map<any, any>\r\n> {\r\n  (target: T, patharray: Array<string>, newvalue: any, oldvalue: any): void;\r\n}\r\nfunction deepobserveaddpath<\r\n  T extends object | Function | any[] | Set<any> | Map<any, any>\r\n>(\r\n  target: T,\r\n  callback: Callback<T>,\r\n  patharray: Array<string> = [],\r\n  ancestor = target\r\n): T {\r\n  if (\r\n    !isfunction(callback)\r\n\r\n    //typeof callback !== \"function\"\r\n  ) {\r\n    console.error(callback);\r\n    console.error(\"observe callback invalid !\");\r\n    throw Error();\r\n\r\n    //throw Error(\"callback not defined!\");\r\n    // setTimeout(() => {\r\n    // }, 0);\r\n\r\n    // callback(t, k, v);\r\n  }\r\n\r\n  /* promise,date,regexp,, */\r\n\r\n  if (ispromise(target) || isregexp(target) || isdate(target)) {\r\n    return target;\r\n  }\r\n  if (isfunction(target) || isobject(target)) {\r\n    //\r\n\r\n    let fakeobj: T;\r\n    if (isSet(target)) {\r\n      fakeobj = new Set([...target]) as any;\r\n      set(fakeobj, \"add\", (value: any) => {\r\n        Setprototype.add.call(target, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n\r\n        return Setprototype.add.call(fakeobj, value);\r\n      });\r\n      set(fakeobj, \"delete\", (value: any) => {\r\n        Setprototype.delete.call(target, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Setprototype.delete.call(fakeobj, value);\r\n      });\r\n      set(fakeobj, \"clear\", () => {\r\n        Setprototype.clear.call(target);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Setprototype.clear.call(fakeobj);\r\n      });\r\n      //   fakeobj.add = () => {};\r\n    } else if (isMap(target)) {\r\n      fakeobj = new Map([...target]) as any;\r\n      set(fakeobj, \"clear\", () => {\r\n        Mapprototype.clear.call(target);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Mapprototype.clear.call(fakeobj);\r\n      });\r\n      set(fakeobj, \"set\", (key: any, value: any) => {\r\n        Mapprototype.set.call(target, key, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Mapprototype.set.call(fakeobj, key, value);\r\n      });\r\n      set(fakeobj, \"delete\", (value: any) => {\r\n        Mapprototype.delete.call(target, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Mapprototype.delete.call(fakeobj, value);\r\n      });\r\n    } else if (isArray(target)) {\r\n      fakeobj = [] as T;\r\n      /* VM462:1 Uncaught TypeError: 'getOwnPropertyDescriptor' on proxy: trap returned descriptor for property 'length' that is incompatible with the existing property in the proxy target\r\n    at Function.getOwnPropertyDescriptors (<anonymous>)\r\n    at <anonymous>:1:8 */\r\n    } else if (isfunction(target)) {\r\n      fakeobj = (() => {}) as T;\r\n    } else {\r\n      fakeobj = {} as T;\r\n    }\r\n    if (!isSet(target) && !isMap(target)) {\r\n      setPrototypeOf(fakeobj, null);\r\n    }\r\n    // return (fakeobj => {\r\n    return new Proxy(fakeobj, {\r\n      defineProperty(t, p, a) {\r\n        callback(\r\n          ancestor,\r\n          [...patharray, String(p)],\r\n          //valuegetter\r\n          has(a, \"value\") ? a.value : isfunction(a.get) ? a.get() : undefined,\r\n          get(target, p)\r\n        );\r\n        return defineProperty(target, p, a);\r\n      },\r\n      deleteProperty(t, p) {\r\n        callback(\r\n          ancestor,\r\n          [...patharray, String(p)],\r\n          undefined,\r\n          get(target, p)\r\n\r\n          //target[p]\r\n        );\r\n        return deleteProperty(target, p);\r\n      },\r\n      ownKeys(/*  t*/) {\r\n        return ownKeys(target);\r\n      },\r\n      has(t, p) {\r\n        return has(target, p);\r\n      },\r\n      getPrototypeOf(/* t */) {\r\n        return getPrototypeOf(target);\r\n      },\r\n      setPrototypeOf(t, v) {\r\n        return setPrototypeOf(target, v);\r\n      },\r\n      construct(t, argumentslist) {\r\n        if (\r\n          isfunction(target)\r\n          //typeof target === \"function\"\r\n        ) {\r\n          return construct(target, argumentslist);\r\n        }\r\n      },\r\n      apply(t, thisarg, argarray) {\r\n        /* index.ts:153 Uncaught TypeError: Method Set.prototype.values called on incompatible receiver [object Object] */\r\n        if (isfunction(target)) {\r\n          /*  if (isSet(thisarg) || isMap(thisarg)) {\r\n            const result = apply(target, thisarg, argarray);\r\n            if (\r\n              target === Setprototype.delete ||\r\n              target === Setprototype.add ||\r\n              target === Setprototype.clear ||\r\n              (target === Mapprototype.set ||\r\n                target === Mapprototype.clear ||\r\n                target === Mapprototype.delete)\r\n            ) {\r\n              callback(ancestor, patharray, undefined, undefined);\r\n            }\r\n\r\n            return result;\r\n          } else { */\r\n          return apply(target, thisarg, argarray);\r\n        }\r\n        //   debugger;\r\n        // }\r\n      },\r\n      /* TypeError: 'get' on proxy: property 'prototype' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '[object Symbol]' but got '[object Object]') */\r\n      getOwnPropertyDescriptor(t, k) {\r\n        var descripter = getOwnPropertyDescriptor(target, k);\r\n        if (isArray(target) && k === \"length\") {\r\n          return descripter;\r\n        } else {\r\n          if (descripter) {\r\n            descripter.configurable = true;\r\n            return descripter;\r\n          } else {\r\n            return;\r\n          }\r\n        }\r\n      },\r\n      //   return {\r\n      //     ...getOwnPropertyDescriptor(t, k),\r\n      //     ...{ configurable: true, writable: true }\r\n      //   };\r\n      // },\r\n\r\n      /* \r\n          https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor\r\n           TypeError\r\n  \r\n  getOwnPropertyDescriptor  object  undefined\r\n  \r\n  \r\n  \r\n  \r\n  Object.getOwnPropertyDescriptortarget Object.defineProperty  */\r\n\r\n      /* https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set\r\n  \r\n  proxyTypeError:\r\n  \r\n  \r\n  setundefined\r\n  setfalse TypeError \r\n  */\r\n      set(t, k, v) {\r\n        // console.log(\"set\", [t, k, v]);\r\n        if (\r\n          isfunction(callback)\r\n          //typeof callback === \"function\"\r\n        ) {\r\n          //throw Error(\"callback not defined!\");\r\n          callback(\r\n            ancestor,\r\n            [...patharray, String(k)] /* patharray.concat(k) */,\r\n            v,\r\n            get(target, k)\r\n            // target[k]\r\n          );\r\n        }\r\n\r\n        return set(target, k, v);\r\n        // return true;\r\n        /* Uncaught TypeError: 'set' on proxy: trap returned truish for property 'prototype' which exists in the proxy target as a non-configurable and non-writable data property with a different value */\r\n      },\r\n\r\n      /* \r\n          https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get\r\n          proxy TypeError:\r\n  \r\n  \r\n  getundefinedundefined */\r\n      get(t, k) {\r\n        // console.log(\"get\", [t, k]);\r\n        var value = get(target, k);\r\n\r\n        if (isfunction(value) && (isSet(target) || isMap(target))) {\r\n          return get(fakeobj, k).bind(fakeobj);\r\n        }\r\n        if (isfunction(value) || isobject(value)) {\r\n          // var descripter = getOwnPropertyDescriptor(t, k);\r\n          // /* descripter  undefined */\r\n          // if (\r\n          //   descripter &&\r\n          //   descripter.writable === false &&\r\n          //   descripter.configurable === false\r\n          // ) {\r\n          //   console.warn(\r\n          //     `!\\n\\n\\n`,\r\n          //     [t, k, value]\r\n          //   );\r\n          //   return value;\r\n          // } else {\r\n          return deepobserveaddpath(\r\n            value,\r\n            callback,\r\n            [...patharray, String(k)],\r\n            //  patharray.concat(k),\r\n            target\r\n          );\r\n          // }\r\n        } else {\r\n          return value;\r\n        }\r\n      }\r\n    });\r\n    // })(fakeobj);\r\n  } else {\r\n    return target;\r\n  }\r\n}\r\nexport default function observedeepagent<\r\n  T extends object | Function | any[] | Set<any> | Map<any, any>\r\n>(target: T, callback: Callback<T>): T {\r\n  if (\r\n    !isfunction(callback)\r\n    //typeof callback !== \"function\"\r\n  ) {\r\n    console.error(callback);\r\n    console.error(\"observe callback  invalid function !\");\r\n    throw Error();\r\n\r\n    //throw Error(\"callback not defined!\");\r\n    // setTimeout(() => {\r\n    // }, 0);\r\n\r\n    // callback(t, k, v);\r\n  }\r\n  if (\r\n    !isfunction(Proxy)\r\n    //typeof Proxy !== \"function\"\r\n  ) {\r\n    console.error(\"Proxy unsupported!\");\r\n    throw Error();\r\n\r\n    //setTimeout(() => {\r\n\r\n    // }, 0);\r\n    // return target;\r\n  }\r\n\r\n  // else\r\n  if (isfunction(target) || isobject(target)) {\r\n    return deepobserveaddpath(target, callback /*, [], target*/);\r\n  } else {\r\n    return target;\r\n  }\r\n}\r\n","import deepobserve from \"@masx200/deep-observe-agent-proxy\";\r\nimport { set_prototype } from \"./create-state\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  invalid_primitive_or_object_state,\r\n  isReactiveState\r\n} from \"./ReactiveState\";\r\nimport {\r\n  defineProperty,\r\n  deleteProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  has,\r\n  ownKeys,\r\n  set\r\n} from \"../UtilTools/reflect\";\r\nimport {\r\n  isArray,\r\n  isarray,\r\n  isobject,\r\n  isplainobject,\r\n  isSet,\r\n  issymbol,\r\n  isfunction\r\n} from \"../UtilTools/util\";\r\nimport { watch } from \"./watch\";\r\n\r\nexport default function(init: object): ReactiveState<object> {\r\n  const reactive: ReactiveState<object> = new ReactiveState(init);\r\n\r\n  let initobj = init;\r\n  const containReactiveState =\r\n    isplainobject(init) && Object.values(init).some(a => isReactiveState(a));\r\n  const state_entries = Object.entries(init).filter(e => {\r\n    const a = e[1];\r\n    return isReactiveState(a);\r\n  });\r\n  if (containReactiveState) {\r\n    initobj = Object.assign({}, init);\r\n    // initobj = { ...init };\r\n    state_entries.forEach(([key, state]) => {\r\n      defineProperty(initobj, key, {\r\n        enumerable: true,\r\n        get() {\r\n          return state.valueOf();\r\n        },\r\n        set: nvalue => {\r\n          state.value = nvalue;\r\n        },\r\n        configurable: true\r\n      });\r\n    });\r\n  }\r\n  //   const inittype = isfunction(init)\r\n  //   ? \"function\"\r\n  //   : isprimitive(init)\r\n  //   ? \"primitive\"\r\n  //   : /* isobject(init)\r\n  //   ? \"object\" */\r\n  //     /* : */ void 0;\r\n  if (containReactiveState) {\r\n    state_entries.forEach(([key, state]) => {\r\n      watch(state, () => {\r\n        reactive[dispatchsymbol](String(key));\r\n      });\r\n    });\r\n    // console.log(reactive);\r\n  }\r\n  reactive.value = initobj;\r\n\r\n  const objproxyhandler: ProxyHandler<object> = {};\r\n  objproxyhandler.ownKeys = target => {\r\n    return Array.from(\r\n      new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n    );\r\n  };\r\n  objproxyhandler.setPrototypeOf = () => {\r\n    return false;\r\n  };\r\n  objproxyhandler.defineProperty = () => {\r\n    return false;\r\n  };\r\n  objproxyhandler.getOwnPropertyDescriptor = (\r\n    target: ReactiveState<object>,\r\n    key\r\n  ) => {\r\n    //symbolundefined\r\n    if (issymbol(key)) {\r\n      return;\r\n    }\r\n    const myvalue = get(target, \"value\");\r\n\r\n    const descripter =\r\n      getOwnPropertyDescriptor(target, key) ||\r\n      getOwnPropertyDescriptor(myvalue, key);\r\n    if (descripter) {\r\n      descripter.configurable = true;\r\n    }\r\n\r\n    return descripter;\r\n  };\r\n  objproxyhandler.deleteProperty = (target: ReactiveState<object>, key) => {\r\n    const myvalue = get(target, \"value\");\r\n    if (has(myvalue, key)) {\r\n      deleteProperty(myvalue, key);\r\n      target[dispatchsymbol](String(key));\r\n      return true;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n  objproxyhandler.has = (target: ReactiveState<object>, key) => {\r\n    const myvalue = get(target, \"value\");\r\n    return has(target, key) || has(myvalue, key);\r\n  };\r\n  objproxyhandler.get = (target: ReactiveState<object>, key) => {\r\n    const value = get(target, \"value\");\r\n    const deepflage = isarray(value) || isplainobject(value);\r\n    if (key === \"value\" && deepflage) {\r\n      return deepobserve(get(target, key), (_target_, patharray) => {\r\n        target[dispatchsymbol](patharray[0]);\r\n      });\r\n    } else if (has(target, key)) {\r\n      return get(target, key);\r\n    } else if (has(value, key)) {\r\n      const resultvalue = get(value, key);\r\n      if (isSet(value)) {\r\n        if (key === \"add\" || key === \"clear\" || key === \"delete\") {\r\n          switch (key) {\r\n            case \"add\": {\r\n              return ((add: any) => {\r\n                if (!set_prototype.has.call(value, add)) {\r\n                  const returnvalue = set_prototype[key].call(value, add);\r\n                  target[dispatchsymbol]();\r\n                  return returnvalue;\r\n                }\r\n                return;\r\n              }).bind(value);\r\n            }\r\n            // break;\r\n            case \"delete\": {\r\n              return ((dele: any) => {\r\n                if (set_prototype.has.call(value, dele)) {\r\n                  const returnvalue = set_prototype[key].call(value, dele);\r\n                  target[dispatchsymbol]();\r\n                  return returnvalue;\r\n                }\r\n                return;\r\n              }).bind(value);\r\n            }\r\n            // break;\r\n            case \"clear\": {\r\n              return (() => {\r\n                if (value.size) {\r\n                  const returnvalue = set_prototype[key].call(value);\r\n                  target[dispatchsymbol]();\r\n                  return returnvalue;\r\n                }\r\n                return;\r\n              }).bind(value);\r\n            }\r\n            // break;\r\n          }\r\n        } else {\r\n          /* VM1933:1 Uncaught TypeError: Method Set.prototype.values called on incompatible receiver [object Object] */\r\n          return isfunction(resultvalue)\r\n            ? resultvalue.bind(value)\r\n            : resultvalue;\r\n        }\r\n      } else if (\r\n        deepflage &&\r\n        (isarray(resultvalue) || isplainobject(resultvalue))\r\n      ) {\r\n        return deepobserve(resultvalue, () => {\r\n          target[dispatchsymbol](String(key));\r\n        });\r\n      } else {\r\n        return resultvalue;\r\n      }\r\n    }\r\n  };\r\n  objproxyhandler.set = (target: ReactiveState<object>, key, value) => {\r\n    if (isReactiveState(value)) {\r\n      // isReactiveState\r\n      value = value.valueOf();\r\n    }\r\n    const myvalue = get(target, \"value\");\r\n    /* , */\r\n    if (\r\n      key === \"value\" &&\r\n      isobject(value) &&\r\n      ((isArray(init) && isarray(value)) || (!isArray(init) && !isarray(value)))\r\n    ) {\r\n      if (target[key] !== value) {\r\n        set(target, key, value);\r\n        target[dispatchsymbol]();\r\n      }\r\n      return true;\r\n    } else if (!has(target, key)) {\r\n      if (myvalue[key] !== value) {\r\n        set(myvalue, key, value);\r\n        target[dispatchsymbol](String(key));\r\n      }\r\n      return true;\r\n      //\r\n    } else {\r\n      console.error(value);\r\n      console.error(init);\r\n      console.error(invalid_primitive_or_object_state);\r\n      throw TypeError();\r\n      //   return false;\r\n    }\r\n    // return true;\r\n  };\r\n  return new Proxy(\r\n    reactive,\r\n\r\n    objproxyhandler\r\n  ) as ReactiveState<object>;\r\n}\r\n","// import deepobserve from \"deep-observe-agent-proxy\";\r\nimport { set } from \"../UtilTools/reflect\";\r\nimport { isfunction, isobject, isprimitive } from \"../UtilTools/util\";\r\nimport { getproperyreadproxy } from \"./getproperyread-proxy\";\r\n// import { getproperyreadproxy } from \"./computed\";\r\nimport handleobjectstate from \"./handle-object-state\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  invalid_primitive_or_object_state,\r\n  // textnodesymbol,\r\n  isReactiveState\r\n} from \"./ReactiveState\";\r\nimport { UnwrapedState } from \"./watch\";\r\nexport const set_prototype = Set.prototype;\r\n\r\nexport default function<T extends UnwrapedState>(\r\n  init: ReactiveState<T>\r\n): ReactiveState<T>;\r\nexport default function<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | undefined\r\n): ReactiveState<T>;\r\nexport default function<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | ReactiveState<T> | undefined\r\n): ReactiveState<T> {\r\n  /*  ReactiveState*/\r\n  const state: ReactiveState<T> = createstate(init as any) as ReactiveState<T>;\r\n  //   usestste(state);\r\n  return state;\r\n}\r\n\r\nfunction createstate<T extends UnwrapedState>(\r\n  init: ReactiveState<T>\r\n): ReactiveState<T>;\r\nfunction createstate<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | undefined\r\n): ReactiveState<T>;\r\n\r\nfunction createstate<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | ReactiveState<T> | undefined\r\n) {\r\n  /*   if (!(isprimitive(init) || isobject(init) || isReactiveState(init))) {\r\n    console.error(init);\r\n    console.error(invalid_primitive_or_object_state);\r\n    throw TypeError();\r\n  } */\r\n  // /*   const inittype = isfunction(init)\r\n  //     ? \"function\"\r\n  //     : isprimitive(init)\r\n  //     ? \"primitive\"\r\n  //     : /* isobject(init)\r\n  //     ? \"object\" */\r\n  //       /* : */ void 0; */\r\n  if (isprimitive(init) || isfunction(init)) {\r\n    return getproperyreadproxy(\r\n      new Proxy(new ReactiveState(init), {\r\n        defineProperty() {\r\n          return false;\r\n        },\r\n        deleteProperty() {\r\n          return false;\r\n        },\r\n        set(target, key, value) {\r\n          /*  if (key === textnodesymbol) {\r\n          return set(target, key, value);\r\n        } */\r\n\r\n          /* , */\r\n          if (\r\n            key === \"value\" &&\r\n            ((isprimitive(value) && isprimitive(init)) ||\r\n              (isfunction(value) && isfunction(init)))\r\n          ) {\r\n            if (target[key] !== value) {\r\n              /*  */\r\n              set(target, key, value);\r\n              target[dispatchsymbol]();\r\n            }\r\n            return true;\r\n          } else {\r\n            console.error(value);\r\n            console.error(init);\r\n            console.error(invalid_primitive_or_object_state);\r\n            throw TypeError();\r\n            // return false;\r\n          }\r\n        },\r\n        setPrototypeOf() {\r\n          return false;\r\n        }\r\n      })\r\n    );\r\n  } else if (\r\n    isReactiveState(init)\r\n    // init instanceof ReactiveState\r\n  ) {\r\n    // init ReactiveState ReactiveState\r\n    return createstate(init.valueOf() as any);\r\n  } else if (isobject(init)) {\r\n    // ReactiveState ReactiveState\r\n    //ReactiveState1=createstate( {aaaaa:ReactiveState2})\r\n    //\r\n    // else {\r\n    //   console.error(init);\r\n    //console.error(invalid_primitive_or_object_state)\r\n    //  throw TypeError();\r\n    //throw TypeError(\"invalid State\");\r\n    // }\r\n    return handleobjectstate(init);\r\n  } else {\r\n    throw Error();\r\n  }\r\n}\r\n\r\n// /*\r\n// let initobj=init\r\n// const containReactiveState=(isplainobject(init))&&Object.values(init).map(a=>isReactiveState(a)).includes(true)\r\n// const state_entries=Object.entries(init).filter(([key,a])=>isReactiveState(a))\r\n\r\n// if(\r\n// containReactiveState\r\n// ){\r\n\r\n// initobj={...init}\r\n\r\n// state_entries\r\n// .forEach(\r\n// ([key,state])=>{\r\n\r\n// defineProperty(initobj,key,{\r\n// enumerable:true,\r\n// get(){\r\n\r\n// return state.valueOf()\r\n\r\n// },\r\n// configurable: true\r\n\r\n// })\r\n\r\n// })\r\n\r\n// }\r\n// let reactive\r\n// =new ReactiveState(\r\n\r\n// initobj\r\n\r\n// )\r\n\r\n// if(containReactiveState){\r\n// state_entries.forEach(\r\n// ([key,state])=>{\r\n\r\n// watch(state,()=>{\r\n\r\n// reactive[dispatchsymbol](String(key));\r\n\r\n// })\r\n// }\r\n// )\r\n// }\r\n\r\n//     return new Proxy(\r\n// reactive\r\n\r\n// , {\r\n//     ownKeys(target) {\r\n//     return Array.from(\r\n//       new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n//     );\r\n//   }\r\n//   ,\r\n//   setPrototypeOf() {\r\n//     return false;\r\n//   },\r\n//       defineProperty() {\r\n//         return false;\r\n//       },\r\n//       getOwnPropertyDescriptor(target, key) {\r\n//         const myvalue = get(target, \"value\");\r\n\r\n//         const descripter =\r\n//           getOwnPropertyDescriptor(target, key) ||\r\n//           getOwnPropertyDescriptor(myvalue, key);\r\n//         if (descripter) {\r\n//           descripter.configurable = true;\r\n//         }\r\n\r\n//         return descripter;\r\n//       },\r\n//       deleteProperty(target, key) {\r\n//         const myvalue = get(target, \"value\");\r\n//         if (has(myvalue, key)) {\r\n//           deleteProperty(myvalue, key);\r\n//           target[dispatchsymbol](String(key));\r\n//           return true;\r\n//         } else {\r\n//           return true;\r\n//         }\r\n//       },\r\n//       has(target, key) {\r\n//         const myvalue = get(target, \"value\");\r\n//         return has(target, key) || has(myvalue, key);\r\n//       },\r\n//       get(target, key) {\r\n//         const value = get(target, \"value\");\r\n\r\n//         if (\r\n//           key === \"value\" &&\r\n//           (isarray(value)  || isplainobject(value))\r\n//         ) {\r\n//           return deepobserve(get(target, key), (_target_, patharray) => {\r\n//             target[dispatchsymbol](patharray[0]);\r\n//           });\r\n//         } else if (has(target, key)) {\r\n//           return get(target, key);\r\n//         } else if (has(value, key)) {\r\n//           if (isSet(value) ) {\r\n//             const myvalue = value;\r\n//             if (key === \"add\") {\r\n//               return (add: any) => {\r\n//                 if (!set_prototype.has.call(myvalue, add)) {\r\n//                   const returnvalue = set_prototype[key].call(myvalue, add);\r\n//                   target[dispatchsymbol]();\r\n//                   return returnvalue;\r\n//                 }\r\n//               };\r\n//             } else if (key === \"delete\") {\r\n//               return (dele: any) => {\r\n//                 if (\r\n// set_prototype.has.call(myvalue, dele)) {\r\n//                   const returnvalue = set_prototype[key].call(myvalue, dele);\r\n//                   target[dispatchsymbol]();\r\n//                   return returnvalue;\r\n//                 }\r\n//               }\r\n// else if (key === \"clear\") {\r\n//               return () => {\r\n//                 if (value.length) {\r\n//                   const returnvalue = set_prototype[key].call(myvalue);\r\n//                   target[dispatchsymbol]();\r\n//                   return returnvalue;\r\n//                 }\r\n//               }\r\n// else {\r\n\r\n// return  get(value, key)\r\n// }\r\n\r\n//             }\r\n//           } else {\r\n// //arrayplainobject\r\n// if(\r\n// (isarray(value)  || isplainobject(value))\r\n// ){\r\n// return deepobserve(get(value, key), () => {\r\n//               target[dispatchsymbol](String(key));\r\n//             });\r\n// }\r\n// else{\r\n// return get(value, key)\r\n// }\r\n\r\n//           }\r\n\r\n//           /*  */\r\n//         }\r\n//     }},\r\n\r\n//     set(target, key, value)\r\n//      {\r\n\r\n// if(isReactiveState(value)){\r\n// // isReactiveState\r\n// value=value.valueOf()\r\n\r\n// }\r\n//       /*   if (key === textnodesymbol) {\r\n//         return set(target, key, value);\r\n//       } */\r\n//       const myvalue = get(target, \"value\");\r\n//       if (key === \"value\" && isobject(value)) {\r\n//         // if (target[key] !== value) {\r\n//         set(target, key, value);\r\n//         target[dispatchsymbol]();\r\n\r\n//         // }\r\n//         return true;\r\n//       } else if (!has(target, key)) {\r\n//         set(myvalue, key, value);\r\n//         target[dispatchsymbol](String(key));\r\n\r\n//         //\r\n//       } else if (key === \"length\") {\r\n//         set(myvalue, key, value);\r\n//         target[dispatchsymbol](key);\r\n//       } else {\r\n//         return false;\r\n//       }\r\n//       return true;\r\n\r\n//     }\r\n\r\n// }) */\r\n","import createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { asserttype } from \"src/asserttype\";\r\nimport { setimmediate } from \"src/UtilTools/setimmediate\";\r\nimport createElement from \"../CreateElement/create-element\";\r\nimport Virtualdom, { isVirtualdom } from \"../CreateElement/VirtualElement\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport computed from \"../Reactivity/computed\";\r\nimport createstate from \"../Reactivity/create-state\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { appendchild, getchildren, removeElement } from \"../UtilTools/dom\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport { isArray, isfunction, isSet } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  attributeChangedCallback,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\n// import { VaildVDom } from \"./conditon\";\r\nimport { Htmlelementconstructor } from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nexport { ListMap };\r\nexport default ListMap;\r\nconst listvalueattr = Symbol(\"listvalueattr\");\r\n// const listlengthsymbol = Symbol(\"listlength\");\r\nconst listinnervdom = Symbol(\"listinnervdom\");\r\nconst listinnerelement = Symbol(\"listinnerelement\");\r\n/*  */\r\n// const cached_vdom_symbol = Symbol(\"cached_vdom\");\r\nconst cached_realele = Symbol(\"cached_realele\");\r\nfunction ListMap(\r\n  list: any[] | Set<any> | ReactiveState<any[] | Set<any>>,\r\n  mapfun: (value: ReactiveState<any>, index: number) => Virtualdom<any>\r\n): Virtualdom<Htmlelementconstructor> {\r\n  if (!isArray(list) && !isSet(list) && !isReactiveState(list)) {\r\n    console.error(list);\r\n    throw new TypeError();\r\n  }\r\n  if (!isfunction(mapfun)) {\r\n    console.error(mapfun);\r\n    throw new TypeError();\r\n  }\r\n\r\n  const ITEMfactory = (value: ReactiveState<any>, index: number) => {\r\n    const possiblevdom = mapfun(value, index);\r\n    asserttype(isVirtualdom(possiblevdom));\r\n    return possiblevdom;\r\n  };\r\n  function indextovdom(index: number, thiscom: ListMap) {\r\n    /* indexelement, */\r\n    // index => {\r\n    /* const cached_vdom1 = get(thiscom[cached_vdom_symbol], index);\r\n    if (cached_vdom1) {\r\n      return cached_vdom1;\r\n    } else { */\r\n    const vdom = ITEMfactory(\r\n      computed(thiscom[listvalueattr], v => (v as any[])[index] as any),\r\n\r\n      index\r\n    );\r\n    //   set(thiscom[cached_vdom_symbol], index, vdom);\r\n    return vdom;\r\n    // }\r\n    //   }\r\n  }\r\n  //   const itemclass = createComponent(\r\n  //     Object.assign(\r\n  //       (\r\n  //         props: Record<string, ReactiveState<any>>,\r\n  //         children: [(0 | undefined)?]\r\n  //       ) => {\r\n  //         const { value: propvalue /* , index: propindex */ } = props as {\r\n  //           value: ReactiveState<any>;\r\n  //           //   index: ReactiveState<any>;\r\n  //         };\r\n  //         // const myprops = {propvalue,}\r\n  //         const value = propvalue; //myprops.value;\r\n  //         const [propindex = 0] = children;\r\n  //         const index = Number(propindex); //myprops.index.valueOf() as number;\r\n  //         return mapfun(value, index);\r\n  //       },\r\n  //       { defaultProps: { /*  index: 0, */ value: undefined } }\r\n  //     ) as Custom\r\n  //     //,/* {defaultProps:{\r\n\r\n  //     //  value\r\n  //     // }} */\r\n  //   );\r\n  /* class */\r\n  //   const itemtagname = RandomDefineCustomElement(itemclass);\r\n  //   const ITEMfactory = (value: ReactiveState<any>, index: number) =>\r\n  //     createElement(itemclass, { value }, index);\r\n  //   console.log(ITEMfactory);\r\n  class ListMap extends AttrChange {\r\n    // /* constructor() {\r\n    //   super();\r\n    //   /*    const defaultProps = get(this.constructor, \"defaultProps\");\r\n    //   // this.constructor[\"defaultProps\"];\r\n    //   const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n    //   //   const props = {};\r\n    //   if (isobject(defaultProps)) {\r\n    //     Object.assign(attrs, defaultProps);\r\n    //     // Object.assign(props, this.constructor[\"defaultProps\"]);\r\n    //   } */\r\n    // } */\r\n    static defaultProps = { value: [] };\r\n    // [cached_vdom_symbol]: Map<number, Virtualdom<any>> = new Map();\r\n    [cached_realele]: Map<number, Element> = new Map();\r\n    [listvalueattr] = createstate([]);\r\n    // [listlengthsymbol]: number;\r\n    [listinnerelement]: Array<Element | Node>;\r\n    [listinnervdom]: Array<Virtualdom<any>>; //Virtualdom<Htmlelementconstructor>[];\r\n    static [componentsymbol] = componentsymbol;\r\n    [readysymbol] = false;\r\n    [attributeChangedCallback](name: string) {\r\n      if (this[readysymbol]) {\r\n        if (name === \"value\") {\r\n          const attrs = createeleattr(this);\r\n          const value = attrs[\"value\"];\r\n\r\n          if (!isArray(value)) {\r\n            console.log(value);\r\n            throw new TypeError();\r\n          }\r\n          // this[listlengthsymbol] = value.length;\r\n          /*  */\r\n          set(this[listvalueattr], \"value\", value);\r\n          //  [] = ;\r\n          const domchildren = getchildren(this);\r\n          const newlength = value.length;\r\n          const oldlength = domchildren.length;\r\n          if (newlength > oldlength) {\r\n            const numindexs = Array(newlength)\r\n              .fill(undefined)\r\n              .map((v, i) => i)\r\n              .slice(oldlength);\r\n\r\n            // const vdomstoadd: Array<Virtualdom<any>> = numindexs.map();\r\n            const realelementstoadd: Element[] = numindexs.map(index => {\r\n              //   const index = i + oldlength;\r\n              //   const index = Number(vdom.children[0]);\r\n\r\n              //   const index = vdom.props.index;\r\n\r\n              const cached_element = get(this[cached_realele], index);\r\n              /* element */\r\n              if (cached_element) {\r\n                return cached_element;\r\n              } else {\r\n                const vdom = indextovdom(index, this);\r\n                const element = render(vdom);\r\n                set(this[cached_realele], index, element);\r\n                return element;\r\n              }\r\n            });\r\n            /* this[listinnervdom].push(...vdomstoadd);\r\n            this[listinnerelement].push(...realelementstoadd); */\r\n            realelementstoadd.forEach(element => appendchild(this, element));\r\n          } else if (newlength < oldlength) {\r\n            /*  */\r\n            /*  this[listinnervdom] = this[listinnervdom].slice(0, newlength);\r\n            this[listinnerelement] = this[listinnerelement].slice(0, newlength); */\r\n            getchildren(this)\r\n              .slice(newlength)\r\n              .forEach(element => removeElement(element));\r\n          }\r\n        }\r\n      }\r\n    }\r\n    disconnectedCallback() {\r\n      //   onunmounted(this);\r\n      //   super.disconnectedCallback();\r\n\r\n      setimmediate(() => {\r\n        disconnectedCallback(this);\r\n        /* if (itemtagname) {\r\n          querySelectorAll(itemtagname).forEach(e => removeNode(e));\r\n        } */\r\n      });\r\n    }\r\n    [firstinstalledcallback]() {\r\n      const attrs = createeleattr(this);\r\n      const value: any[] = attrs[\"value\"];\r\n\r\n      if (!isArray(value)) {\r\n        console.log(value);\r\n        throw new TypeError();\r\n      }\r\n      /*  */\r\n      // this[listvalueattr][\"value\"] = value;\r\n      set(this[listvalueattr], \"value\", value);\r\n      this[listinnervdom] = value.map((v, index) =>\r\n        ITEMfactory(\r\n          computed(this[listvalueattr], v => (v as any[])[index] as any),\r\n\r\n          index\r\n        )\r\n      );\r\n      this[listinnerelement] = render(this[listinnervdom]);\r\n      // /*   Object.entries(this[listinnervdom]).forEach(([key, value]) => {\r\n      //     /*  this[cached_vdom_symbol]Map*/\r\n      //     set(this[cached_vdom_symbol], key, value);\r\n      //   }); */\r\n      Object.entries(this[listinnerelement]).forEach(([key, value]) => {\r\n        /* this[cached_realele] Map\r\n         */\r\n        set(this[cached_realele], Number(key), value);\r\n      });\r\n      //   Object.assign(this[cached_vdom_symbol], this[listinnervdom]);\r\n      //   Object.assign(this[cached_realele], this[listinnerelement]);\r\n      mount(this[listinnerelement], this);\r\n\r\n      /* , */\r\n      this[listinnerelement] = [];\r\n      this[listinnervdom] = [];\r\n    }\r\n    connectedCallback() {\r\n      /*   if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n\r\n       \r\n        // this[listlengthsymbol] = value.length;\r\n      } */\r\n      //   onmounted(this);\r\n      connectedCallback(this);\r\n    }\r\n  }\r\n  return createElement(ListMap, { value: list });\r\n}\r\n","import { setimmediate } from \"src/UtilTools/setimmediate\";\r\nimport { h } from \"../CreateElement/create-element\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\n// import { isclassextendsHTMLElement } from \"../CustomElement/create-costum-elemet\";\r\nimport { mountrealelement } from \"../MountElement/mount-real-element\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { CancelWatchfun, watch } from \"../Reactivity/watch\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { autocreateclass, Htmlelementconstructor } from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nconst cancel_watch_symbol = Symbol(\"cancel_watch\");\r\nconst cached_class_element = Symbol(\"cached_class_element\");\r\nconst switch_mount_symbol = Symbol(\"switch_mount\");\r\n// const current_element_class = Symbol(\"current_element_class\");\r\nexport { Switchable };\r\nfunction Switchable(\r\n  funstate: ReactiveState<Htmlelementconstructor | Custom>\r\n): Virtualdom<Htmlelementconstructor> {\r\n  if (!isReactiveState(funstate)) {\r\n    console.error(funstate);\r\n    throw new TypeError();\r\n  }\r\n  class Switchable extends AttrChange {\r\n    // [current_element_class]: Htmlelementconstructor;\r\n    [cached_class_element] = new WeakMap<Htmlelementconstructor, Element>();\r\n    disconnectedCallback() {\r\n      //   onunmounted(this);\r\n      //   super.disconnectedCallback();\r\n      setimmediate(() => {\r\n        disconnectedCallback(this);\r\n        if (isfunction(this[cancel_watch_symbol])) {\r\n          this[cancel_watch_symbol]();\r\n        }\r\n      });\r\n    }\r\n    [cancel_watch_symbol]: CancelWatchfun;\r\n    static [componentsymbol] = componentsymbol;\r\n    [readysymbol] = false;\r\n    [switch_mount_symbol](eleclass: Custom | Htmlelementconstructor) {\r\n      eleclass = autocreateclass(eleclass);\r\n      /*  if (!isclassextendsHTMLElement(eleclass)) {\r\n        console.error(eleclass);\r\n        throw new TypeError();\r\n      } */\r\n      //   this[current_element_class] = eleclass;\r\n      const eleme = this[cached_class_element].get(eleclass);\r\n      if (eleme) {\r\n        mountrealelement(eleme, this);\r\n        // return;\r\n      } else {\r\n        const elementreal = render(h(eleclass));\r\n\r\n        this[cached_class_element].set(eleclass, elementreal);\r\n        mountrealelement(elementreal, this);\r\n        // return;\r\n      }\r\n    }\r\n    [firstinstalledcallback]() {\r\n      const callmountswitch = () => {\r\n        this[switch_mount_symbol](funstate.valueOf() as\r\n          | Custom\r\n          | Htmlelementconstructor);\r\n      };\r\n      callmountswitch();\r\n      this[cancel_watch_symbol] = watch(funstate, () => {\r\n        callmountswitch();\r\n      });\r\n    }\r\n    connectedCallback() {\r\n      connectedCallback(this);\r\n      /* if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n      } */\r\n      //   onmounted(this);\r\n    }\r\n  }\r\n  return h(Switchable);\r\n}\r\nexport default Switchable;\r\n","interface Ref<T = any | undefined> {\r\n  value: T | undefined;\r\n}\r\n\r\nexport default function createRef<T = any | undefined>(value?: T): Ref<T> {\r\n  return { value };\r\n}\r\n","var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","import htm from \"htm\";\r\n// import htm from \"../types/htm\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport { apply } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport Virtualdom, { Vdomchildren } from \"./VirtualElement\";\r\nimport h from \"./create-element\";\r\nimport { isvalidvdom } from \"./isvalidvdom\";\r\n\r\n// const html = htm.bind(h);\r\n// function html(\r\n//   strings?: TemplateStringsArray,\r\n//   ...values: any[]\r\n// ): Virtualdom<any>;\r\nfunction html(...inargs: any[]): Virtualdom<any> | Vdomchildren {\r\n  // return (htm as HTM).call(h, ...inargs);\r\n\r\n  return apply(htm /* as HTM */, h, inargs);\r\n}\r\n\r\n/* vdom */\r\n\r\nexport default function(\r\n  strings?: TemplateStringsArray,\r\n  ...values: any[]\r\n): Virtualdom<any> | Vdomchildren;\r\nexport default function(...args: any[]) {\r\n  const prevdom = toArray(html(...args));\r\n\r\n  const vdom = prevdom.length === 1 ? prevdom[0] : prevdom;\r\n  if (isvalidvdom(vdom)) {\r\n    return vdom;\r\n  } else {\r\n    console.error(vdom);\r\n    console.error(invalid_Virtualdom);\r\n    throw new TypeError();\r\n  }\r\n}\r\n\r\n// declare const htm: (\r\n//   strings?: TemplateStringsArray,\r\n//   ...values: any[]\r\n// ) => Virtualdom<any>;\r\n/* declare module \"htm/dist/htm.module\" {\r\n  const htm: (\r\n    strings?: TemplateStringsArray,\r\n    ...values: any[]\r\n  ) => Virtualdom<any>;\r\n  export default htm;\r\n} */\r\n/* interface HTM {\r\n  (strings?: TemplateStringsArray, ...values: any[]): Virtualdom<any>;\r\n} */\r\n","import { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { querySelectorAll } from \"../UtilTools/dom\";\r\nimport directives from \"./extend-directive\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState, {\r\n  // ReactiveState,\r\n  isReactiveState\r\n} from \"../Reactivity/ReactiveState\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\ndirectives({\r\n  value(value, element, vdom) {\r\n    model(\r\n      [\"input\", \"textarea\", \"select\"],\r\n      \"value\",\r\n      \"value\",\r\n      [\"change\", \"input\"],\r\n      value,\r\n      vdom\r\n    );\r\n  },\r\n  checked(value, element, vdom) {\r\n    model([\"input\"], \"checked\", \"checked\", [\"change\"], value, vdom);\r\n\r\n    /* nameinput,radio,,,change */\r\n    const eventname = \"click\";\r\n    const origin = toArray(vdom.onevent[eventname]);\r\n    const eventsarray = origin;\r\n    const dispatchallsamename: EventListener = (event: Event) => {\r\n      const inputelement = event.target as HTMLInputElement;\r\n      const name = (event.target as HTMLInputElement).name;\r\n      if (name) {\r\n        querySelectorAll(`input[name=${name}]`)\r\n          /* inputelement */\r\n          .filter(ele => ele !== inputelement)\r\n\r\n          .forEach(element => {\r\n            element.dispatchEvent(new Event(\"change\"));\r\n          });\r\n      }\r\n    };\r\n\r\n    set(\r\n      vdom.onevent,\r\n      eventname,\r\n      toArray([...eventsarray, dispatchallsamename]).filter(Boolean)\r\n    );\r\n  }\r\n});\r\nfunction model(\r\n  types: string[],\r\n  bindattribute: string,\r\n  domprop: string,\r\n  eventnames: string[],\r\n  value: ReactiveState<any>,\r\n  vdom: Virtualdom<any>\r\n) {\r\n  if (!isReactiveState(value)) {\r\n    console.error(value);\r\n    console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n    throw TypeError();\r\n  }\r\n  if (types.includes(vdom.type)) {\r\n    // const vdom = virtualdom;\r\n    set(vdom.bindattr, bindattribute, value);\r\n    /*  [\r\n      // vdom.bindattr[\"checked\"] = value;\r\n      \"change\",\r\n      \"input\"\r\n    ]. */\r\n\r\n    eventnames.forEach(eventname => {\r\n      const origin = vdom.onevent[eventname];\r\n\r\n      const eventsarray = toArray(origin);\r\n\r\n      set(\r\n        vdom.onevent,\r\n        eventname,\r\n        toArray([\r\n          ...eventsarray,\r\n\r\n          (e: any) => {\r\n            return (value.value = get(e.target, domprop));\r\n          }\r\n        ]).filter(Boolean)\r\n      );\r\n    });\r\n  } else {\r\n    console.error(vdom);\r\n    console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n    throw TypeError();\r\n  }\r\n}\r\n\r\n/* directives({\r\n  value(_element: Element, value: ReactiveState<any>, vdom: Virtualdom<any>) {\r\n    // console.log(vdom);\r\n    if (\r\n      isReactiveState(value) &&\r\n      //   value instanceof ReactiveState\r\n\r\n      (vdom.type === \"input\" ||\r\n        vdom.type === \"textarea\" ||\r\n        vdom.type === \"select\")\r\n    ) {\r\n      vdom.bindattr[\"value\"] = value;\r\n      [\"change\", \"input\"].forEach(eventname => {\r\n        const origin = vdom.onevent[eventname];\r\n\r\n        const eventsarray = toArray(origin);\r\n\r\n        set(\r\n          vdom.onevent,\r\n          eventname,\r\n          [\r\n            ...eventsarray,\r\n\r\n            (e: any) => {\r\n              return (value.value = e.target.value);\r\n            }\r\n          ].filter(Boolean)\r\n        );\r\n      });\r\n    } else {\r\n      console.log(_element);\r\n      console.error(value);\r\n      console.error(vdom);\r\n      console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n      throw TypeError();\r\n    }\r\n  }\r\n});\r\ndirectives({\r\n  checked(_element: Element, value: ReactiveState<any>, vdom: Virtualdom<any>) {\r\n    // console.log(vdom);\r\n    if (\r\n      isReactiveState(value) &&\r\n      //   value instanceof ReactiveState\r\n\r\n      vdom.type === \"input\"\r\n    ) {\r\n      vdom.bindattr[\"checked\"] = value;\r\n      [\"change\", \"input\"].forEach(eventname => {\r\n        const origin = vdom.onevent[eventname];\r\n\r\n        const eventsarray = toArray(origin);\r\n\r\n        set(\r\n          vdom.onevent,\r\n          eventname,\r\n          [\r\n            ...eventsarray,\r\n\r\n            (e: any) => {\r\n              return (value.value = e.target.checked);\r\n            }\r\n          ].filter(Boolean)\r\n        );\r\n      });\r\n    } else {\r\n      console.log(_element);\r\n      console.error(value);\r\n      console.error(vdom);\r\n      console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n      throw TypeError();\r\n      //throw TypeError(invalid_ReactiveState + invalid_Virtualdom);\r\n    }\r\n  }\r\n}); */\r\n"],"names":["privateData","WeakMap","wrappers","pd","event","retv","get","console","assert","setCancelFlag","data","passiveListener","error","cancelable","canceled","preventDefault","Event","eventTarget","set","this","eventPhase","currentTarget","stopped","immediateStopped","timeStamp","Date","now","Object","defineProperty","value","enumerable","keys","i","length","key","defineRedirectDescriptor","prototype","type","target","[object Object]","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","stopPropagation","stopImmediatePropagation","bubbles","Boolean","defaultPrevented","composed","srcElement","cancelBubble","returnValue","configurable","writable","window","setPrototypeOf","defineCallDescriptor","apply","arguments","defineWrapper","BaseEvent","proto","CustomEvent","call","create","constructor","descriptor","getOwnPropertyDescriptor","isFunc","getWrapper","wrapper","getPrototypeOf","wrapEvent","Wrapper","isStopped","setEventPhase","setCurrentTarget","setPassiveListener","listenersMap","CAPTURE","BUBBLE","ATTRIBUTE","isObject","x","getListeners","listeners","TypeError","defineEventAttributeDescriptor","eventName","node","listenerType","listener","next","prev","delete","newNode","passive","once","defineEventAttribute","eventTargetPrototype","defineCustomEventTarget","eventNames","CustomEventTarget","EventTarget","Map","Array","isArray","types","options","optionsIsObj","capture","undefined","wrappedEvent","err","handleEvent","e","event_target","customElements","CustomElementRegistry","aa","Set","split","g","a","b","has","test","l","isConnected","__CE_isImportDocument","Document","parentNode","ShadowRoot","host","n","nextSibling","p","d","c","nodeType","Node","ELEMENT_NODE","f","localName","getAttribute","import","add","firstChild","__CE_shadowRoot","r","u","ba","constructorFunction","ca","push","da","v","w","__CE_patched","__CE_state","connectedCallback","y","z","disconnectedCallback","A","__CE_hasRegistry","readyState","__CE_documentLoadHandled","addEventListener","ownerDocument","defaultView","constructionStack","Error","pop","t","__CE_definition","attributeChangedCallback","observedAttributes","indexOf","B","document","MutationObserver","bind","observe","childList","subtree","C","disconnect","addedNodes","ea","Promise","D","E","j","o","Function","SyntaxError","k","h","m","q","adoptedCallback","fa","shift","reject","some","s","define","upgrade","whenDefined","polyfillWrapFlushCallback","F","createElement","G","createElementNS","ha","importNode","ia","prepend","ja","append","ka","DocumentFragment","la","H","cloneNode","I","appendChild","J","insertBefore","K","removeChild","L","replaceChild","M","N","Element","attachShadow","O","P","Q","setAttribute","R","removeAttribute","S","getAttributeNS","T","setAttributeNS","U","removeAttributeNS","ma","insertAdjacentElement","na","insertAdjacentHTML","oa","pa","V","before","qa","after","ra","replaceWith","sa","remove","ta","HTMLElement","W","ua","va","wa","xa","X","Y","ya","za","TEXT_NODE","childNodes","slice","COMMENT_NODE","textContent","join","createTextNode","Aa","Ba","toLowerCase","previousSibling","lastChild","String","innerHTML","content","namespaceURI","warn","Z","forcePolyfill","self","Reflect","flattenDeep","arr1","reduce","acc","val","concat","arrayflat","depth","result","flat","fromPairs","pairs","index","pair","fromPairs_1","fromEntries","isString","isnumber","isboolean","isundefined","isbigint","issymbol","isplainobject","isobject","gettagtype","isstring","isfunction","isarray","toString","replace","trim","isSet","isMap","isWeakMap","Proxy","acceptValue","tag","attr","attrtype","includes","hyphenateRE","hyphenate","str","ownKeys","valuestring","isinputcheckbox","ele","geteletagname","objtostylestring","obj","JSON","parse","stringify","objentries","entries","map","asserthtmlelement","createeleattragentreadwrite","temp","outputattrs","isinputtextortextareaflag","isinputtextortextarea","attributesownkeys","from","Infinity","filter","mustUseDomProp","getattribute","csstext","classtext","setattribute","otherdescipter","myvalue","getAttributeNames","tagName","tagname","freeGlobal","global","freeSelf","root","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","getRawTag","isOwn","unmasked","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","cached_callback_eventlistner","cached_create_componet","cached_callback_debounced_watchs","construct","deleteProperty","preventExtensions","propertyKey","watchrecord","getwatchrecords","usewatch","state","callback","ctxopen","clearwatch","invalid_Function","errormessage","MountedSet","UnMountedSet","StateSet","getstates","recordusestste","getMounted","getUnMounted","useMounted","fun","isFunction","useUnMounted","clearMounted","clearstate","clearUnMounted","openctx","clearall","closectx","addonelistner","removeonelistner","cancelsubscribe","debouncedispatch","invalid_primitive_or_object_state","isReactiveState","ReactiveState","eventtargetsymbol","memlisteners","dispatchsymbol","subscribesymbol","removeallistenerssymbol","addallistenerssymbol","init","debouncedfun","eventname","name","dispatchEvent","detail","forEach","removeEventListener","isprimitive","eventlistener","possiblecallback","toPrimitive","merge_entries","VirtualElementSet","WeakSet","Letter_case_and_Chinese","isVirtualdom","createVirtualElement","props","children","assign","propsentries","propsentriesNOTevents","startsWith","Entries_beginning_with_a_letter","virtual","vdom","element","bindattr","onevent","directives","freeze","isvalidvdom","flag","every","isclassextendsHTMLElement","initclass","isCSSStyleRule","isCSSMediaRule","isCSSImportRule","cssrulestocsstext","cssrules","cssText","prefixcssmediarule","cssrule","prefix","rulesarr","prefixcssrules","cssRules","conditionText","charactorlist","fill","fromCharCode","hexnumberlist","charactorandnumberlist","getrandomcharactor","floor","random","getrandomhexnumberandcharactor","getrandomstringandnumber","invalid_custom_element_class","Usevaluetoquerythekeyfromthetable","table","Componentstatusname","outputentrie","find","elementset","for","elementmap","extendsname","RandomDefineCustomElement","elementname","extends","iterator","createcostumelemet","propsjson","autocreateclass","componentsymbol","iscomponent","seteletext","setelehtml","appendchild","container","createsvgelement","svgnamespace","createDocumentFragment","createnativeelement","namespace","createtextnode","changetext","textnode","nodeValue","mathnamespace","createmathelement","removeElement","domaddlisten","domremovelisten","getchildren","getchildNodes","createanotherhtmldocument","implementation","createHTMLDocument","querySelectorAll","selector","toArray","clear","eles","isNodeArray","arr","isNode","invalid_Virtualdom","MountElement","el","body","documentElement","head","elesarray","mount","render","watch","statearray","debouncedcallback","stateandlisteners","state1","cachedfun","listenfun","watchsingle","cancelWatch","invalid_ReactiveState","requestAnimationFrame","rewatch","unwatch","isconnected","isConnectedstate","getancestornode","createhtmlandtextdirective","errorname","text","extenddirectives","directive","ref","_vdom","log","html","eventlistenerssymbol","firstaddlisteners","callarray","removelisteners","readdlisteners","handleprops","attribute1","createeleattr","primitivestate","callbacks","values","bindstatesymbol","throwinvalideletype","reactive","fragmentnode","componentsstylesheet","createlinkstylesheet","url","href","rel","createcssBlob","source","cachedBlob","sourcecssblobCache","bloburl","URL","createObjectURL","Blob","savestyleblob","urltext","selectoraddprefix","cssstylerule","selectorold","selectorText","stylebodyold","selectorTextss","selectorarray","selectoraftertransform","selectorTextone","prefixselector","cssRulesarray","resultoutput","parsecsstext","styleelement","otherdocument","transformcsstext","cachedtext","oldcsstotransformedcss","css","cssomold","cssomnew","cssnewtext","registercssprefix","loadlinkstyle","stylelinkelement","rs","loaderrorfun","onload","onerror","waitloadallstyle","containerthis","all","styleurl","resolve","setimmediate","then","onmounted","innerstatesymbol","innerwatchrecords","watchrecords","onunmounted","readysymbol","firstinstalledcallback","componentelement","AttrChange","super","defaultProps","attrs","mutations","mutation","attributeName","qualifiedName","attributes","waittranformcsssymbol","attributessymbol","elementsymbol","inner_vdom_symbol","mountedsymbol","unmountedsymbol","createComponent","custfun","cached_class","Component","thisattributess","readonlyprop","readonlyproxy","possiblyvirtualdom","vdomarray","thencallbackfirst","thencallbacksecond","innervdom","waitcallback","propreactivestate","propsorchildren","typenormalized","propsnormalized","childrennormalized","truevdomsymbol","falsevdomsymbol","trueelesymbol","falseelesymbol","handletrue","handlefalse","conditon","iftrue","iffalse","true","false","optionstrue","optionsfalse","Condition","elementtomount","asserttype","con","getproperyreadproxy","__proto__","myvalueobj","property","setter","state1array","Arraycomputed","reactivestate","getter","st","possiblevalue","memorized","newvalue","Setprototype","Mapprototype","ispromise","isdate","isregexp","RegExp","deepobserveaddpath","patharray","ancestor","fakeobj","argumentslist","thisarg","argarray","descripter","observedeepagent","initobj","containReactiveState","state_entries","nvalue","objproxyhandler","deepflage","deepobserve","_target_","resultvalue","set_prototype","returnvalue","dele","size","createstate","handleobjectstate","listvalueattr","listinnervdom","listinnerelement","cached_realele","ListMap","list","mapfun","ITEMfactory","possiblevdom","indextovdom","thiscom","computed","domchildren","newlength","oldlength","numindexs","realelementstoadd","cached_element","Number","cancel_watch_symbol","cached_class_element","switch_mount_symbol","Switchable","funstate","eleclass","eleme","mountrealelement","elementreal","callmountswitch","createRef","inargs","htm","prevdom","model","origin","eventsarray","dispatchallsamename","inputelement","bindattribute","domprop","eventnames"],"mappings":";;;;;;;;;;AAmBA,MAAMA,cAAc,IAAIC;;AAOxB,MAAMC,WAAW,IAAID;;AAQrB,SAASE,GAAGC;IACR,MAAMC,OAAOL,YAAYM,IAAIF;IAC7BG,QAAQC,OACJH,QAAQ,MACR,+CACAD;IAEJ,OAAOC;;;AAOX,SAASI,cAAcC;IACnB,IAAIA,KAAKC,mBAAmB,MAAM;QAC9B,WACWJ,YAAY,sBACZA,QAAQK,UAAU,YAC3B;YACEL,QAAQK,MACJ,sEACAF,KAAKC;;QAGb;;IAEJ,KAAKD,KAAKN,MAAMS,YAAY;QACxB;;IAGJH,KAAKI,WAAW;IAChB,WAAWJ,KAAKN,MAAMW,mBAAmB,YAAY;QACjDL,KAAKN,MAAMW;;;;AAcnB,SAASC,QAAMC,aAAab;IACxBJ,YAAYkB,IAAIC,MAAM;QAClBF,aAAAA;QACAb,OAAAA;QACAgB,YAAY;QACZC,eAAeJ;QACfH,UAAU;QACVQ,SAAS;QACTC,kBAAkB;QAClBZ,iBAAiB;QACjBa,WAAWpB,MAAMoB,aAAaC,KAAKC;;IAIvCC,OAAOC,eAAeT,MAAM,aAAa;QAAEU,OAAO;QAAOC,YAAY;;IAGrE,MAAMC,OAAOJ,OAAOI,KAAK3B;IACzB,KAAK,IAAI4B,IAAI,GAAGA,IAAID,KAAKE,UAAUD,GAAG;QAClC,MAAME,MAAMH,KAAKC;QACjB,MAAME,OAAOf,OAAO;YAChBQ,OAAOC,eAAeT,MAAMe,KAAKC,yBAAyBD;;;;;AAMtElB,QAAMoB,YAAY;IAKdC;QACI,OAAOlC,GAAGgB,MAAMf,MAAMiC;;IAO1BC;QACI,OAAOnC,GAAGgB,MAAMF;;IAOpBI;QACI,OAAOlB,GAAGgB,MAAME;;IAMpBkB;QACI,MAAMlB,gBAAgBlB,GAAGgB,MAAME;QAC/B,IAAIA,iBAAiB,MAAM;YACvB,OAAO;;QAEX,OAAO,EAACA;;IAOZmB;QACI,OAAO;;IAOXC;QACI,OAAO;;IAOXC;QACI,OAAO;;IAOXC;QACI,OAAO;;IAOXvB;QACI,OAAOjB,GAAGgB,MAAMC;;IAOpBmB;QACI,MAAM7B,OAAOP,GAAGgB;QAEhBT,KAAKY,UAAU;QACf,WAAWZ,KAAKN,MAAMwC,oBAAoB,YAAY;YAClDlC,KAAKN,MAAMwC;;;IAQnBL;QACI,MAAM7B,OAAOP,GAAGgB;QAEhBT,KAAKY,UAAU;QACfZ,KAAKa,mBAAmB;QACxB,WAAWb,KAAKN,MAAMyC,6BAA6B,YAAY;YAC3DnC,KAAKN,MAAMyC;;;IAQnBC;QACI,OAAOC,QAAQ5C,GAAGgB,MAAMf,MAAM0C;;IAOlCjC;QACI,OAAOkC,QAAQ5C,GAAGgB,MAAMf,MAAMS;;IAOlC0B;QACI9B,cAAcN,GAAGgB;;IAOrB6B;QACI,OAAO7C,GAAGgB,MAAML;;IAOpBmC;QACI,OAAOF,QAAQ5C,GAAGgB,MAAMf,MAAM6C;;IAOlCzB;QACI,OAAOrB,GAAGgB,MAAMK;;IAQpB0B;QACI,OAAO/C,GAAGgB,MAAMF;;IAQpBkC;QACI,OAAOhD,GAAGgB,MAAMG;;IAEpB6B,iBAAiBtB;QACb,KAAKA,OAAO;YACR;;QAEJ,MAAMnB,OAAOP,GAAGgB;QAEhBT,KAAKY,UAAU;QACf,WAAWZ,KAAKN,MAAM+C,iBAAiB,WAAW;YAC9CzC,KAAKN,MAAM+C,eAAe;;;IASlCC;QACI,QAAQjD,GAAGgB,MAAML;;IAErBsC,gBAAgBvB;QACZ,KAAKA,OAAO;YACRpB,cAAcN,GAAGgB;;;IAWzBoB;;;AAMJZ,OAAOC,eAAeZ,QAAMoB,WAAW,eAAe;IAClDP,OAAOb;IACPqC,cAAc;IACdC,UAAU;;;AAId,WAAWC,WAAW,sBAAsBA,OAAOvC,UAAU,aAAa;IACtEW,OAAO6B,eAAexC,QAAMoB,WAAWmB,OAAOvC,MAAMoB;IAGpDlC,SAASgB,IAAIqC,OAAOvC,MAAMoB,WAAWpB;;;AASzC,SAASmB,yBAAyBD;IAC9B,OAAO;QACHK;YACI,OAAOpC,GAAGgB,MAAMf,MAAM8B;;QAE1BK,IAAIV;YACA1B,GAAGgB,MAAMf,MAAM8B,OAAOL;;QAE1BwB,cAAc;QACdvB,YAAY;;;;AAUpB,SAAS2B,qBAAqBvB;IAC1B,OAAO;QACHK;YACI,MAAMnC,QAAQD,GAAGgB,MAAMf;YACvB,OAAOA,MAAM8B,KAAKwB,MAAMtD,OAAOuD;;QAEnCN,cAAc;QACdvB,YAAY;;;;AAWpB,SAAS8B,cAAcC,WAAWC;IAC9B,MAAM/B,OAAOJ,OAAOI,KAAK+B;IACzB,IAAI/B,KAAKE,WAAW,GAAG;QACnB,OAAO4B;;IAIX,SAASE,YAAY9C,aAAab;QAC9ByD,UAAUG,KAAK7C,MAAMF,aAAab;;IAGtC2D,YAAY3B,YAAYT,OAAOsC,OAAOJ,UAAUzB,WAAW;QACvD8B,aAAa;YAAErC,OAAOkC;YAAaV,cAAc;YAAMC,UAAU;;;IAIrE,KAAK,IAAItB,IAAI,GAAGA,IAAID,KAAKE,UAAUD,GAAG;QAClC,MAAME,MAAMH,KAAKC;QACjB,MAAME,OAAO2B,UAAUzB,YAAY;YAC/B,MAAM+B,aAAaxC,OAAOyC,yBAAyBN,OAAO5B;YAC1D,MAAMmC,gBAAgBF,WAAWtC,UAAU;YAC3CF,OAAOC,eACHmC,YAAY3B,WACZF,KACAmC,SACMZ,qBAAqBvB,OACrBC,yBAAyBD;;;IAK3C,OAAO6B;;;AASX,SAASO,WAAWR;IAChB,IAAIA,SAAS,QAAQA,UAAUnC,OAAOS,WAAW;QAC7C,OAAOpB;;IAGX,IAAIuD,UAAUrE,SAASI,IAAIwD;IAC3B,IAAIS,WAAW,MAAM;QACjBA,UAAUX,cAAcU,WAAW3C,OAAO6C,eAAeV,SAASA;QAClE5D,SAASgB,IAAI4C,OAAOS;;IAExB,OAAOA;;;AAUJ,SAASE,UAAUxD,aAAab;IACnC,MAAMsE,UAAUJ,WAAW3C,OAAO6C,eAAepE;IACjD,OAAO,IAAIsE,QAAQzD,aAAab;;;AAS7B,SAASuE,UAAUvE;IACtB,OAAOD,GAAGC,OAAOmB;;;AAUd,SAASqD,cAAcxE,OAAOgB;IACjCjB,GAAGC,OAAOgB,aAAaA;;;AAUpB,SAASyD,iBAAiBzE,OAAOiB;IACpClB,GAAGC,OAAOiB,gBAAgBA;;;AAUvB,SAASyD,mBAAmB1E,OAAOO;IACtCR,GAAGC,OAAOO,kBAAkBA;;;ACvchC,MAAMoE,eAAe,IAAI9E;;AAGzB,MAAM+E,UAAU;;AAChB,MAAMC,SAAS;;AACf,MAAMC,YAAY;;AAOlB,SAASC,SAASC;IACd,OAAOA,MAAM,eAAeA,MAAM;;;AAStC,SAASC,aAAapE;IAClB,MAAMqE,YAAYP,aAAazE,IAAIW;IACnC,IAAIqE,aAAa,MAAM;QACnB,MAAM,IAAIC,UACN;;IAGR,OAAOD;;;AASX,SAASE,+BAA+BC;IACpC,OAAO;QACHlD;YACI,MAAM+C,YAAYD,aAAalE;YAC/B,IAAIuE,OAAOJ,UAAUhF,IAAImF;YACzB,OAAOC,QAAQ,MAAM;gBACjB,IAAIA,KAAKC,iBAAiBT,WAAW;oBACjC,OAAOQ,KAAKE;;gBAEhBF,OAAOA,KAAKG;;YAEhB,OAAO;;QAGXtD,IAAIqD;YACA,WAAWA,aAAa,eAAeT,SAASS,WAAW;gBACvDA,WAAW;;YAEf,MAAMN,YAAYD,aAAalE;YAG/B,IAAI2E,OAAO;YACX,IAAIJ,OAAOJ,UAAUhF,IAAImF;YACzB,OAAOC,QAAQ,MAAM;gBACjB,IAAIA,KAAKC,iBAAiBT,WAAW;oBAEjC,IAAIY,SAAS,MAAM;wBACfA,KAAKD,OAAOH,KAAKG;2BACd,IAAIH,KAAKG,SAAS,MAAM;wBAC3BP,UAAUpE,IAAIuE,WAAWC,KAAKG;2BAC3B;wBACHP,UAAUS,OAAON;;uBAElB;oBACHK,OAAOJ;;gBAGXA,OAAOA,KAAKG;;YAIhB,IAAID,aAAa,MAAM;gBACnB,MAAMI,UAAU;oBACZJ,UAAAA;oBACAD,cAAcT;oBACde,SAAS;oBACTC,MAAM;oBACNL,MAAM;;gBAEV,IAAIC,SAAS,MAAM;oBACfR,UAAUpE,IAAIuE,WAAWO;uBACtB;oBACHF,KAAKD,OAAOG;;;;QAIxB3C,cAAc;QACdvB,YAAY;;;;AAUpB,SAASqE,qBAAqBC,sBAAsBX;IAChD9D,OAAOC,eACHwE,sBACA,KAAKX,aACLD,+BAA+BC;;;AAUvC,SAASY,wBAAwBC;IAE7B,SAASC;QACLC,cAAYxC,KAAK7C;;IAGrBoF,kBAAkBnE,YAAYT,OAAOsC,OAAOuC,cAAYpE,WAAW;QAC/D8B,aAAa;YACTrC,OAAO0E;YACPlD,cAAc;YACdC,UAAU;;;IAIlB,KAAK,IAAItB,IAAI,GAAGA,IAAIsE,WAAWrE,UAAUD,GAAG;QACxCmE,qBAAqBI,kBAAkBnE,WAAWkE,WAAWtE;;IAGjE,OAAOuE;;;AAgBX,SAASC;IAEL,IAAIrF,gBAAgBqF,eAAa;QAC7BzB,aAAa7D,IAAIC,MAAM,IAAIsF;QAC3B;;IAEJ,IAAI9C,UAAU1B,WAAW,KAAKyE,MAAMC,QAAQhD,UAAU,KAAK;QACvD,OAAO0C,wBAAwB1C,UAAU;;IAE7C,IAAIA,UAAU1B,SAAS,GAAG;QACtB,MAAM2E,QAAQ,IAAIF,MAAM/C,UAAU1B;QAClC,KAAK,IAAID,IAAI,GAAGA,IAAI2B,UAAU1B,UAAUD,GAAG;YACvC4E,MAAM5E,KAAK2B,UAAU3B;;QAEzB,OAAOqE,wBAAwBO;;IAEnC,MAAM,IAAIrB,UAAU;;;AAKxBiB,cAAYpE,YAAY;IAQpBG,iBAAiBkD,WAAWG,UAAUiB;QAClC,IAAIjB,YAAY,MAAM;YAClB;;QAEJ,WAAWA,aAAa,eAAeT,SAASS,WAAW;YACvD,MAAM,IAAIL,UAAU;;QAGxB,MAAMD,YAAYD,aAAalE;QAC/B,MAAM2F,eAAe3B,SAAS0B;QAC9B,MAAME,UAAUD,eACV/D,QAAQ8D,QAAQE,WAChBhE,QAAQ8D;QACd,MAAMlB,eAAeoB,UAAU/B,UAAUC;QACzC,MAAMe,UAAU;YACZJ,UAAAA;YACAD,cAAAA;YACAM,SAASa,gBAAgB/D,QAAQ8D,QAAQZ;YACzCC,MAAMY,gBAAgB/D,QAAQ8D,QAAQX;YACtCL,MAAM;;QAIV,IAAIH,OAAOJ,UAAUhF,IAAImF;QACzB,IAAIC,SAASsB,WAAW;YACpB1B,UAAUpE,IAAIuE,WAAWO;YACzB;;QAIJ,IAAIF,OAAO;QACX,OAAOJ,QAAQ,MAAM;YACjB,IACIA,KAAKE,aAAaA,YAClBF,KAAKC,iBAAiBA,cACxB;gBAEE;;YAEJG,OAAOJ;YACPA,OAAOA,KAAKG;;QAIhBC,KAAKD,OAAOG;;IAUhBzD,oBAAoBkD,WAAWG,UAAUiB;QACrC,IAAIjB,YAAY,MAAM;YAClB;;QAGJ,MAAMN,YAAYD,aAAalE;QAC/B,MAAM4F,UAAU5B,SAAS0B,WACnB9D,QAAQ8D,QAAQE,WAChBhE,QAAQ8D;QACd,MAAMlB,eAAeoB,UAAU/B,UAAUC;QAEzC,IAAIa,OAAO;QACX,IAAIJ,OAAOJ,UAAUhF,IAAImF;QACzB,OAAOC,QAAQ,MAAM;YACjB,IACIA,KAAKE,aAAaA,YAClBF,KAAKC,iBAAiBA,cACxB;gBACE,IAAIG,SAAS,MAAM;oBACfA,KAAKD,OAAOH,KAAKG;uBACd,IAAIH,KAAKG,SAAS,MAAM;oBAC3BP,UAAUpE,IAAIuE,WAAWC,KAAKG;uBAC3B;oBACHP,UAAUS,OAAON;;gBAErB;;YAGJK,OAAOJ;YACPA,OAAOA,KAAKG;;;IASpBtD,cAAcnC;QACV,IAAIA,SAAS,eAAeA,MAAMiC,SAAS,UAAU;YACjD,MAAM,IAAIkD,UAAU;;QAIxB,MAAMD,YAAYD,aAAalE;QAC/B,MAAMsE,YAAYrF,MAAMiC;QACxB,IAAIqD,OAAOJ,UAAUhF,IAAImF;QACzB,IAAIC,QAAQ,MAAM;YACd,OAAO;;QAIX,MAAMuB,eAAexC,UAAUtD,MAAMf;QAIrC,IAAI0F,OAAO;QACX,OAAOJ,QAAQ,MAAM;YAEjB,IAAIA,KAAKQ,MAAM;gBACX,IAAIJ,SAAS,MAAM;oBACfA,KAAKD,OAAOH,KAAKG;uBACd,IAAIH,KAAKG,SAAS,MAAM;oBAC3BP,UAAUpE,IAAIuE,WAAWC,KAAKG;uBAC3B;oBACHP,UAAUS,OAAON;;mBAElB;gBACHK,OAAOJ;;YAIXZ,mBACImC,cACAvB,KAAKO,UAAUP,KAAKE,WAAW;YAEnC,WAAWF,KAAKE,aAAa,YAAY;gBACrC;oBACIF,KAAKE,SAAS5B,KAAK7C,MAAM8F;kBAC3B,OAAOC;oBACL,WACW3G,YAAY,sBACZA,QAAQK,UAAU,YAC3B;wBACEL,QAAQK,MAAMsG;;;mBAGnB,IACHxB,KAAKC,iBAAiBT,oBACfQ,KAAKE,SAASuB,gBAAgB,YACvC;gBACEzB,KAAKE,SAASuB,YAAYF;;YAI9B,IAAItC,UAAUsC,eAAe;gBACzB;;YAGJvB,OAAOA,KAAKG;;QAEhBf,mBAAmBmC,cAAc;QACjCrC,cAAcqC,cAAc;QAC5BpC,iBAAiBoC,cAAc;QAE/B,QAAQA,aAAajE;;;;AAK7BrB,OAAOC,eAAe4E,cAAYpE,WAAW,eAAe;IACxDP,OAAO2E;IACPnD,cAAc;IACdC,UAAU;;;AAId,WACWC,WAAW,sBACXA,OAAOiD,gBAAgB,aAChC;IACE7E,OAAO6B,eAAegD,cAAYpE,WAAWmB,OAAOiD,YAAYpE;;;AC1XpE;IACE;QACE,IAAIoE;MACJ,OAAOY;QAEP7D,OAAOiD,cAAcQ;;IAGvB;QACE,IAAI,qBAAqBzD,OAAOiD,aAAa;YAC3CjD,OAAOiD,cAAca;;MAFzB;EARF;;ACDA;IACE,IACE,mBAAmB9D,OAAO+D,yBACnB/D,OAAOgE,0BAA0B,YACxC;SACC;YAWC,IAAIC,KAAK,IAAIC,IACX,mHAAmHC,MACjH;YAGJ,SAASC,EAAEC;gBACT,IAAIC,IAAIL,GAAGM,IAAIF;gBACfA,IAAI,mCAAmCG,KAAKH;gBAC5C,QAAQC,KAAKD;;YAEf,SAASI,EAAEJ;gBACT,IAAIC,IAAID,EAAEK;gBACV,SAAS,MAAMJ,GAAG,OAAOA;gBACzB,MAAOD,OAAOA,EAAEM,yBAAyBN,aAAaO,aACpDP,IACEA,EAAEQ,eACD7E,OAAO8E,cAAcT,aAAaS,aAAaT,EAAEU,YAAY;gBAClE,UAAUV,OAAOA,EAAEM,yBAAyBN,aAAaO;;YAE3D,SAASI,EAAEX,GAAGC;gBACZ,MAAOA,KAAKA,MAAMD,MAAMC,EAAEW,eAAeX,IAAIA,EAAEO;gBAC/C,OAAOP,KAAKA,MAAMD,IAAIC,EAAEW,cAAc;;YAExC,SAASC,EAAEb,GAAGC,GAAGa;gBACfA,SAAS,MAAMA,IAAI,IAAIjB,MAAQiB;gBAC/B,KAAK,IAAIC,IAAIf,GAAGe,KAAK;oBACnB,IAAIA,EAAEC,aAAaC,KAAKC,cAAc;wBACpC,IAAI1B,IAAIuB;wBACRd,EAAET;wBACF,IAAI2B,IAAI3B,EAAE4B;wBACV,IAAI,WAAWD,KAAK,aAAa3B,EAAE6B,aAAa,QAAQ;4BACtDN,IAAIvB,EAAE8B;4BACN,IAAIP,aAAaE,SAASH,EAAEZ,IAAIa,IAC9B,KAAKD,EAAES,IAAIR,IAAIA,IAAIA,EAAES,YAAYT,GAAGA,IAAIA,EAAEH,aACxCC,EAAEE,GAAGd,GAAGa;4BACZC,IAAIJ,EAAEX,GAAGR;4BACT;+BACK,IAAI,eAAe2B,GAAG;4BAC3BJ,IAAIJ,EAAEX,GAAGR;4BACT;;wBAEF,IAAKA,IAAIA,EAAEiC,iBACT,KAAKjC,IAAIA,EAAEgC,YAAYhC,GAAGA,IAAIA,EAAEoB,aAAaC,EAAErB,GAAGS,GAAGa;;oBAEzDC,IAAIA,EAAES,aAAaT,EAAES,aAAab,EAAEX,GAAGe;;;YAG3C,SAASW,EAAE1B,GAAGC,GAAGa;gBACfd,EAAEC,KAAKa;;YAET,SAASa;gBACPpI,KAAKyG,IAAI,IAAInB;gBACbtF,KAAKwG,IAAI,IAAIlB;gBACbtF,KAAKwH,IAAI;gBACTxH,KAAK4H,IAAI;gBACT5H,KAAK0G,KAAK;;YAEZ,SAAS2B,GAAG5B,GAAGC,GAAGa;gBAChBd,EAAEA,EAAE1G,IAAI2G,GAAGa;gBACXd,EAAED,EAAEzG,IAAIwH,EAAEe,qBAAqBf;;YAEjC,SAASgB,GAAG9B,GAAGC;gBACbD,EAAEC,KAAK;gBACPD,EAAEe,EAAEgB,KAAK9B;;YAEX,SAAS+B,GAAGhC,GAAGC;gBACbD,EAAEC,KAAK;gBACPD,EAAEmB,EAAEY,KAAK9B;;YAEX,SAASgC,EAAEjC,GAAGC;gBACZD,EAAEC,KACAY,EAAEZ,IAAG,SAASA;oBACZ,OAAOiC,EAAElC,GAAGC;;;YAGlB,SAASiC,EAAElC,GAAGC;gBACZ,IAAID,EAAEC,MAAMA,EAAEkC,cAAc;oBAC1BlC,EAAEkC,gBAAgB;oBAClB,KAAK,IAAIrB,IAAI,GAAGA,IAAId,EAAEe,EAAE1G,QAAQyG,KAAKd,EAAEe,EAAED,GAAGb;oBAC5C,KAAKa,IAAI,GAAGA,IAAId,EAAEmB,EAAE9G,QAAQyG,KAAKd,EAAEmB,EAAEL,GAAGb;;;YAG5C,SAASzC,EAAEwC,GAAGC;gBACZ,IAAIa,IAAI;gBACRD,EAAEZ,IAAG,SAASA;oBACZ,OAAOa,EAAEiB,KAAK9B;;gBAEhB,KAAKA,IAAI,GAAGA,IAAIa,EAAEzG,QAAQ4F,KAAK;oBAC7B,IAAIc,IAAID,EAAEb;oBACV,MAAMc,EAAEqB,aAAapC,EAAEqC,kBAAkBtB,KAAKuB,EAAEtC,GAAGe;;;YAGvD,SAASwB,EAAEvC,GAAGC;gBACZ,IAAIa,IAAI;gBACRD,EAAEZ,IAAG,SAASA;oBACZ,OAAOa,EAAEiB,KAAK9B;;gBAEhB,KAAKA,IAAI,GAAGA,IAAIa,EAAEzG,QAAQ4F,KAAK;oBAC7B,IAAIc,IAAID,EAAEb;oBACV,MAAMc,EAAEqB,cAAcpC,EAAEwC,qBAAqBzB;;;YAGjD,SAAS0B,EAAEzC,GAAGC,GAAGa;gBACfA,SAAS,MAAMA,IAAI,KAAKA;gBACxB,IAAIC,IAAID,EAAEa,KAAK,IAAI9B,KACjBL,IACEsB,EAAE1G,KACF,SAAS6F;oBACP,OAAOqC,EAAEtC,GAAGC;mBAEhBkB,IAAI;gBACNN,EACEZ,IACA,SAASA;oBACP,IAAI,WAAWA,EAAEmB,aAAa,aAAanB,EAAEoB,aAAa,QAAQ;wBAChE,IAAIP,IAAIb,EAAEqB;wBACVR,aAAaG,SACTH,EAAER,yBAAyB,GAAKQ,EAAE4B,oBAAoB;wBAC1D5B,KAAK,eAAeA,EAAE6B,aACjB7B,EAAE8B,4BAA4B,IAC/B3C,EAAE4C,iBAAiB,SAAQ;4BACzB,IAAI/B,IAAIb,EAAEqB;4BACV,KAAKR,EAAE8B,0BAA0B;gCAC/B9B,EAAE8B,4BAA4B;gCAC9B,IAAIzB,IAAI,IAAItB,IAAIkB;gCAChBI,EAAEhD,OAAO2C;gCACT2B,EAAEzC,GAAGc,GAAG;oCAAEa,GAAGR;oCAAG/G,GAAGoF;;;;2BAGtB2B,EAAEY,KAAK9B;oBAEhBc;gBAEF,IAAIf,EAAEC,GAAG,KAAKA,IAAI,GAAGA,IAAIkB,EAAE9G,QAAQ4F,KAAKiC,EAAElC,GAAGmB,EAAElB;gBAC/C,KAAKA,IAAI,GAAGA,IAAIkB,EAAE9G,QAAQ4F,KAAKT,EAAE2B,EAAElB;;YAErC,SAASqC,EAAEtC,GAAGC;gBACZ,SAAS,MAAMA,EAAEmC,YAAY;oBAC3B,IAAItB,IAAIb,EAAE6C;oBACV,IAAIhC,EAAEiC,eAAgBjC,EAAER,yBAAyBQ,EAAE4B,kBACjD,IAAK5B,IAAId,EAAEA,EAAEtH,IAAIuH,EAAEmB,YAAa;wBAC9BN,EAAEkC,kBAAkBjB,KAAK9B;wBACzB,IAAIc,IAAID,EAAEe;wBACV;4BACE;gCACE,IAAI,IAAId,MAAQd,GACd,MAAMgD,MACJ;;gCAGJnC,EAAEkC,kBAAkBE;;0BAEtB,OAAOC;4BACP,MAAQlD,EAAEmC,aAAa,GAAIe;;wBAE7BlD,EAAEmC,aAAa;wBACfnC,EAAEmD,kBAAkBtC;wBACpB,IAAIA,EAAEuC,0BACJ,KAAKvC,IAAIA,EAAEwC,oBAAoBvC,IAAI,GAAGA,IAAID,EAAEzG,QAAQ0G,KAAK;4BACvD,IAAIvB,IAAIsB,EAAEC,IACRI,IAAIlB,EAAEoB,aAAa7B;4BACrB,SAAS2B,KAAKnB,EAAEqD,yBAAyBpD,GAAGT,GAAG,MAAM2B,GAAG;;wBAE5Df,EAAEH,MAAMD,EAAEqC,kBAAkBpC;;;;YAIpC0B,EAAEnH,UAAU6H,oBAAoB,SAASrC;gBACvC,IAAIC,IAAID,EAAEoD;gBACVnD,EAAEoC,qBAAqBpC,EAAEoC,kBAAkBjG,KAAK4D;;YAElD2B,EAAEnH,UAAUgI,uBAAuB,SAASxC;gBAC1C,IAAIC,IAAID,EAAEoD;gBACVnD,EAAEuC,wBAAwBvC,EAAEuC,qBAAqBpG,KAAK4D;;YAExD2B,EAAEnH,UAAU6I,2BAA2B,SAASrD,GAAGC,GAAGa,GAAGC,GAAGvB;gBAC1D,IAAI2B,IAAInB,EAAEoD;gBACVjC,EAAEkC,6BACC,IAAIlC,EAAEmC,mBAAmBC,QAAQtD,MAClCkB,EAAEkC,yBAAyBjH,KAAK4D,GAAGC,GAAGa,GAAGC,GAAGvB;;YAEhD,SAASgE,EAAExD;gBACT,IAAIC,IAAIwD;gBACRlK,KAAKwH,IAAIf;gBACTzG,KAAKyG,IAAIC;gBACT1G,KAAK0G,SAAS;gBACdwC,EAAElJ,KAAKwH,GAAGxH,KAAKyG;gBACf,cAAczG,KAAKyG,EAAE2C,eACjBpJ,KAAK0G,IAAI,IAAIyD,iBAAiBnK,KAAK4H,EAAEwC,KAAKpK;gBAC5CA,KAAK0G,EAAE2D,QAAQrK,KAAKyG,GAAG;oBAAE6D,YAAY;oBAAGC,UAAU;;;YAEtD,SAASC,EAAE/D;gBACTA,EAAEC,KAAKD,EAAEC,EAAE+D;;YAEbR,EAAEhJ,UAAU2G,IAAI,SAASnB;gBACvB,IAAIC,IAAI1G,KAAKyG,EAAE2C;gBACd,kBAAkB1C,KAAK,eAAeA,KAAM8D,EAAExK;gBAC/C,KAAK0G,IAAI,GAAGA,IAAID,EAAE3F,QAAQ4F,KACxB,KAAK,IAAIa,IAAId,EAAEC,GAAGgE,YAAYlD,IAAI,GAAGA,IAAID,EAAEzG,QAAQ0G,KACjD0B,EAAElJ,KAAKwH,GAAGD,EAAEC;;YAElB,SAASmD;gBACP,IAAIlE,IAAIzG;gBACRA,KAAK0G,IAAI1G,KAAKyG,SAAS;gBACvBzG,KAAKwH,IAAI,IAAIoD,SAAQ,SAASlE;oBAC5BD,EAAEC,IAAIA;oBACND,EAAEA,KAAKC,EAAED,EAAEA;;;YAGf,SAASoE,EAAEpE;gBACT,IAAIA,EAAEA,GAAG,MAAMiD,MAAM;gBACrBjD,EAAEA,SAAS;gBACXA,EAAEC,KAAKD,EAAEC,OAAO;;YAElB,SAASoE,EAAErE;gBACTzG,KAAKwH,KAAK;gBACVxH,KAAKyG,IAAIA;gBACTzG,KAAK+K,IAAI,IAAIzF;gBACbtF,KAAK4H,IAAI,SAASlB;oBAChB,OAAOA;;gBAET1G,KAAK0G,KAAK;gBACV1G,KAAKwG,IAAI;gBACTxG,KAAKgL,IAAI,IAAIf,EAAExD;;YAEjBqE,EAAE7J,UAAU4F,IAAI,SAASJ,GAAGC;gBAC1B,IAAIa,IAAIvH;gBACR,MAAM0G,aAAauE,WACjB,MAAM,IAAI7G,UAAU;gBACtB,KAAKoC,EAAEC,IACL,MAAM,IAAIyE,YAAY,uBAAuBzE,IAAI;gBACnD,IAAIzG,KAAKyG,EAAEA,EAAEtH,IAAIsH,IACf,MAAMiD,MACJ,iCAAiCjD,IAAI;gBAEzC,IAAIzG,KAAKwH,GAAG,MAAMkC,MAAM;gBACxB1J,KAAKwH,KAAK;gBACV;oBACE,IAAIA,IAAI,SAASd;wBACb,IAAID,IAAIR,EAAES;wBACV,SAAS,MAAMD,OAAOA,aAAawE,WACjC,MAAMvB,MAAM,UAAUhD,IAAI;wBAC5B,OAAOD;uBAETR,IAAIS,EAAEzF;oBACR,MAAMgF,aAAazF,SACjB,MAAM,IAAI4D,UACR;oBAEJ,IAAIwD,IAAIJ,EAAE;oBACV,IAAIoC,IAAIpC,EAAE;oBACV,IAAI2D,IAAI3D,EAAE;oBACV,IAAI4D,IAAI5D,EAAE;oBACV,IAAI6D,IAAI3E,EAAEqD,sBAAsB;kBAChC,OAAOuB;oBACP;;oBAEAtL,KAAKwH,KAAK;;gBAEZd,IAAI;oBACFmB,WAAWpB;oBACX6B,qBAAqB5B;oBACrBoC,mBAAmBlB;oBACnBqB,sBAAsBW;oBACtB2B,iBAAiBJ;oBACjBrB,0BAA0BsB;oBAC1BrB,oBAAoBsB;oBACpB5B,mBAAmB;;gBAErBpB,GAAGrI,KAAKyG,GAAGA,GAAGC;gBACd1G,KAAKwG,EAAEgC,KAAK9B;gBACZ1G,KAAK0G,MACD1G,KAAK0G,KAAK,GACZ1G,KAAK4H,GAAE;oBACL,OAAO4D,GAAGjE;;;YAGhBuD,EAAE7J,UAAUJ,IAAI,SAAS4F;gBACvByC,EAAElJ,KAAKyG,GAAGA;;YAEZ,SAAS+E,GAAG/E;gBACV,KAAK,MAAMA,EAAEC,GAAG;oBACdD,EAAEC,KAAK;oBACP,KAAK,IAAIA,IAAID,EAAED,GAAGe,IAAI,IAAIC,IAAI,IAAIlC,KAAOW,IAAI,GAAGA,IAAIS,EAAE5F,QAAQmF,KAC5DuB,EAAEzH,IAAI2G,EAAET,GAAG4B,WAAW;oBACxBqB,EAAEzC,EAAEA,GAAGyD,UAAU;wBACfrJ,GAAG,SAAS6F;4BACV,SAAS,MAAMA,EAAEmC,YAAY;gCAC3B,IAAI5C,IAAIS,EAAEmB,WACRD,IAAIJ,EAAErI,IAAI8G;gCACZ2B,IAAIA,EAAEY,KAAK9B,KAAKD,EAAEA,EAAEA,EAAEtH,IAAI8G,MAAMsB,EAAEiB,KAAK9B;;;;oBAI7C,KAAKT,IAAI,GAAGA,IAAIsB,EAAEzG,QAAQmF,KAAK8C,EAAEtC,EAAEA,GAAGc,EAAEtB;oBACxC,MAAO,IAAIS,EAAE5F,UAAU;wBACrB,IAAI8G,IAAIlB,EAAE+E;wBACVxF,IAAI2B,EAAEC;wBACND,IAAIJ,EAAErI,IAAIyI,EAAEC;wBACZ,KAAK,IAAI+B,IAAI,GAAGA,IAAIhC,EAAE9G,QAAQ8I,KAAKb,EAAEtC,EAAEA,GAAGmB,EAAEgC;yBAC3C3D,IAAIQ,EAAEsE,EAAE5L,IAAI8G,OAAO4E,EAAE5E;;;;YAI5B6E,EAAE7J,UAAU9B,MAAM,SAASsH;gBACzB,IAAKA,IAAIzG,KAAKyG,EAAEA,EAAEtH,IAAIsH,IAAK,OAAOA,EAAE6B;;YAEtCwC,EAAE7J,UAAUoK,IAAI,SAAS5E;gBACvB,KAAKD,EAAEC,IACL,OAAOmE,QAAQc,OACb,IAAIR,YAAY,MAAMzE,IAAI;gBAE9B,IAAIC,IAAI1G,KAAK+K,EAAE5L,IAAIsH;gBACnB,IAAIC,GAAG,OAAOA,EAAEc;gBAChBd,IAAI,IAAIiE;gBACR3K,KAAK+K,EAAEhL,IAAI0G,GAAGC;gBACd1G,KAAKyG,EAAEA,EAAEtH,IAAIsH,OACVzG,KAAKwG,EAAEmF,MAAK,SAASjF;oBACpB,OAAOA,EAAEmB,cAAcpB;uBAEzBoE,EAAEnE;gBACJ,OAAOA,EAAEc;;YAEXsD,EAAE7J,UAAU2K,IAAI,SAASnF;gBACvB+D,EAAExK,KAAKgL;gBACP,IAAItE,IAAI1G,KAAK4H;gBACb5H,KAAK4H,IAAI,SAASL;oBAChB,OAAOd,GAAE;wBACP,OAAOC,EAAEa;;;;YAIfnF,OAAOgE,wBAAwB0E;YAC/BA,EAAE7J,UAAU4K,SAASf,EAAE7J,UAAU4F;YACjCiE,EAAE7J,UAAU6K,UAAUhB,EAAE7J,UAAUJ;YAClCiK,EAAE7J,UAAU9B,MAAM2L,EAAE7J,UAAU9B;YAC9B2L,EAAE7J,UAAU8K,cAAcjB,EAAE7J,UAAUoK;YACtCP,EAAE7J,UAAU+K,4BAA4BlB,EAAE7J,UAAU2K;YACpD,IAAIK,IAAI7J,OAAO4E,SAAS/F,UAAUiL,eAChCC,IAAI/J,OAAO4E,SAAS/F,UAAUmL,iBAC9BC,KAAKjK,OAAO4E,SAAS/F,UAAUqL,YAC/BC,KAAKnK,OAAO4E,SAAS/F,UAAUuL,SAC/BC,KAAKrK,OAAO4E,SAAS/F,UAAUyL,QAC/BC,KAAKvK,OAAOwK,iBAAiB3L,UAAUuL,SACvCK,KAAKzK,OAAOwK,iBAAiB3L,UAAUyL,QACvCI,IAAI1K,OAAOsF,KAAKzG,UAAU8L,WAC1BC,IAAI5K,OAAOsF,KAAKzG,UAAUgM,aAC1BC,IAAI9K,OAAOsF,KAAKzG,UAAUkM,cAC1BC,IAAIhL,OAAOsF,KAAKzG,UAAUoM,aAC1BC,IAAIlL,OAAOsF,KAAKzG,UAAUsM,cAC1BC,IAAIhN,OAAOyC,yBACTb,OAAOsF,KAAKzG,WACZ,gBAEFwM,IAAIrL,OAAOsL,QAAQzM,UAAU0M,cAC7BC,IAAIpN,OAAOyC,yBACTb,OAAOsL,QAAQzM,WACf,cAEF4M,IAAIzL,OAAOsL,QAAQzM,UAAU6G,cAC7BgG,IAAI1L,OAAOsL,QAAQzM,UAAU8M,cAC7BC,IAAI5L,OAAOsL,QAAQzM,UAAUgN,iBAC7BC,IAAI9L,OAAOsL,QAAQzM,UAAUkN,gBAC7BC,IAAIhM,OAAOsL,QAAQzM,UAAUoN,gBAC7BC,IAAIlM,OAAOsL,QAAQzM,UAAUsN,mBAC7BC,KAAKpM,OAAOsL,QAAQzM,UAAUwN,uBAC9BC,KAAKtM,OAAOsL,QAAQzM,UAAU0N,oBAC9BC,KAAKxM,OAAOsL,QAAQzM,UAAUuL,SAC9BqC,KAAKzM,OAAOsL,QAAQzM,UAAUyL,QAC9BoC,IAAI1M,OAAOsL,QAAQzM,UAAU8N,QAC7BC,KAAK5M,OAAOsL,QAAQzM,UAAUgO,OAC9BC,KAAK9M,OAAOsL,QAAQzM,UAAUkO,aAC9BC,KAAKhN,OAAOsL,QAAQzM,UAAUoO,QAC9BC,KAAKlN,OAAOmN,aACZC,IAAIhP,OAAOyC,yBACTb,OAAOmN,YAAYtO,WACnB,cAEFwO,KAAKrN,OAAOmN,YAAYtO,UAAUwN,uBAClCiB,KAAKtN,OAAOmN,YAAYtO,UAAU0N;YACpC,IAAIgB,KAAK;YACT,SAASC;gBACP,IAAInJ,IAAIoJ;gBACRzN,OAAOmN,cAAc;oBACnB,SAAS7I;wBACP,IAAIA,IAAI1G,KAAK+C,aACXyE,IAAIf,EAAED,EAAErH,IAAIuH;wBACd,KAAKc,GACH,MAAMkC,MACJ;wBAEJ,IAAIzD,IAAIuB,EAAEiC;wBACV,IAAI,MAAMxD,EAAEnF,QACV,OACGmF,IAAIgG,EAAEpJ,KAAKqH,UAAU1C,EAAEK,YACxBrH,OAAO6B,eAAe4D,GAAGS,EAAEzF;wBAC1BgF,EAAE4C,aAAa,GACf5C,EAAE4D,kBAAkBrC,GACrBmB,EAAElC,GAAGR,IACLA;wBAEJuB,IAAIvB,EAAEnF,SAAS;wBACf,IAAI8G,IAAI3B,EAAEuB;wBACV,IAAII,MAAM+H,IACR,MAAMjG,MACJ;wBAEJzD,EAAEuB,KAAKmI;wBACPnP,OAAO6B,eAAeuF,GAAGlB,EAAEzF;wBAC3B0H,EAAElC,GAAGmB;wBACL,OAAOA;;oBAETlB,EAAEzF,YAAYqO,GAAGrO;oBACjBT,OAAOC,eAAeiG,EAAEzF,WAAW,eAAe;wBAChDkB,WAAW;wBACXD,eAAe;wBACfvB,aAAa;wBACbD,OAAOgG;;oBAET,OAAOA;iBApCY;;YAuCvB,SAASoJ,EAAErJ,GAAGC,GAAGa;gBACf,SAASC,EAAEd;oBACT,OAAO,SAASa;wBACd,KAAK,IAAItB,IAAI,IAAIuB,IAAI,GAAGA,IAAIhF,UAAU1B,UAAU0G,GAC9CvB,EAAEuB,KAAKhF,UAAUgF;wBACnBA,IAAI;wBACJ,KAAK,IAAII,IAAI,IAAIyD,IAAI,GAAGA,IAAIpF,EAAEnF,QAAQuK,KAAK;4BACzC,IAAIC,IAAIrF,EAAEoF;4BACVC,aAAaoC,WAAW7G,EAAEyE,MAAM1D,EAAEY,KAAK8C;4BACvC,IAAIA,aAAasB,kBACf,KAAKtB,IAAIA,EAAErD,YAAYqD,GAAGA,IAAIA,EAAEjE,aAAaG,EAAEgB,KAAK8C,SACjD9D,EAAEgB,KAAK8C;;wBAEd5E,EAAEnE,MAAMvC,MAAMiG;wBACd,KAAKA,IAAI,GAAGA,IAAI2B,EAAE9G,QAAQmF,KAAK+C,EAAEvC,GAAGmB,EAAE3B;wBACtC,IAAIY,EAAE7G,OACJ,KAAKiG,IAAI,GAAGA,IAAIuB,EAAE1G,QAAQmF,KACvB2B,IAAIJ,EAAEvB,IAAK2B,aAAa8F,WAAWzJ,EAAEwC,GAAGmB;;;qBAG5C,MAAML,EAAE6D,MAAM1E,EAAE8F,UAAUhF,EAAED,EAAE6D;qBAC9B,MAAM7D,EAAEmF,WAAWhG,EAAEgG,SAASlF,EAAED,EAAEmF;;YAEzC,SAASqD;gBACP,IAAItJ,IAAIoJ;gBACR1H,EAAEnB,SAAS/F,WAAW,kBAAiB,SAASyF;oBAC9C,IAAI1G,KAAKmJ,kBAAkB;wBACzB,IAAI5B,IAAId,EAAEA,EAAEtH,IAAIuH;wBAChB,IAAIa,GAAG,OAAO,IAAIA,EAAEe;;oBAEtB5B,IAAIuF,EAAEpJ,KAAK7C,MAAM0G;oBACjBiC,EAAElC,GAAGC;oBACL,OAAOA;;gBAETyB,EAAEnB,SAAS/F,WAAW,eAAc,SAASyF,GAAGa;oBAC9Cb,IAAI2F,GAAGxJ,KAAK7C,MAAM0G,KAAKa;oBACvBvH,KAAKmJ,mBAAmBD,EAAEzC,GAAGC,KAAKgC,EAAEjC,GAAGC;oBACvC,OAAOA;;gBAETyB,EAAEnB,SAAS/F,WAAW,oBAAmB,SAASyF,GAAGa;oBACnD,IACEvH,KAAKmJ,qBACJ,SAASzC,KAAK,mCAAmCA,IAClD;wBACA,IAAIc,IAAIf,EAAEA,EAAEtH,IAAIoI;wBAChB,IAAIC,GAAG,OAAO,IAAIA,EAAEc;;oBAEtB5B,IAAIyF,EAAEtJ,KAAK7C,MAAM0G,GAAGa;oBACpBoB,EAAElC,GAAGC;oBACL,OAAOA;;gBAEToJ,EAAErJ,GAAGO,SAAS/F,WAAW;oBAAEmK,GAAGmB;oBAAIG,QAAQD;;;YAE5C,SAASuD;gBACP,SAASvJ,EAAEA,GAAGe;oBACZhH,OAAOC,eAAegG,GAAG,eAAe;wBACtC9F,YAAY6G,EAAE7G;wBACduB,eAAe;wBACf/C,KAAKqI,EAAErI;wBACPY,KAAK,SAAS0G;4BACZ,IAAIzG,KAAKyH,aAAaC,KAAKuI,WAAWzI,EAAEzH,IAAI8C,KAAK7C,MAAMyG,SAClD;gCACH,IAAIc,SAAS;gCACb,IAAIvH,KAAKiI,YAAY;oCACnB,IAAIhC,IAAIjG,KAAKkQ,YACX/E,IAAIlF,EAAEnF;oCACR,IAAI,IAAIqK,KAAKtE,EAAE7G,OAAO;wCACpBuH,IAAIhC,MAAM4F;wCACV,KAAK,IAAIC,IAAI,GAAGA,IAAID,GAAGC,KAAK7D,EAAE6D,KAAKnF,EAAEmF;;;gCAGzC5D,EAAEzH,IAAI8C,KAAK7C,MAAMyG;gCACjB,IAAIc,GAAG,KAAKd,IAAI,GAAGA,IAAIc,EAAEzG,QAAQ2F,KAAKuC,EAAEtC,GAAGa,EAAEd;;;;;gBAKrD,IAAIC,IAAImJ;gBACR1H,EAAET,KAAKzG,WAAW,iBAAgB,SAASwF,GAAGe;oBAC5C,IAAIf,aAAamG,kBAAkB;wBACjC,IAAI3G,IAAIV,MAAMtE,UAAUkP,MAAM5N,MAAMkE,EAAEyJ;wBACtCzJ,IAAIyG,EAAErK,KAAK7C,MAAMyG,GAAGe;wBACpB,IAAIX,EAAE7G,OAAO,KAAKwH,IAAI,GAAGA,IAAIvB,EAAEnF,QAAQ0G,KAAKvD,EAAEyC,GAAGT,EAAEuB;wBACnD,OAAOf;;oBAETR,IAAIY,EAAEJ;oBACNe,IAAI0F,EAAErK,KAAK7C,MAAMyG,GAAGe;oBACpBvB,KAAK+C,EAAEtC,GAAGD;oBACVI,EAAE7G,SAASiE,EAAEyC,GAAGD;oBAChB,OAAOe;;gBAETW,EAAET,KAAKzG,WAAW,gBAAe,SAASwF;oBACxC,IAAIA,aAAamG,kBAAkB;wBACjC,IAAIpF,IAAIjC,MAAMtE,UAAUkP,MAAM5N,MAAMkE,EAAEyJ;wBACtCzJ,IAAIuG,EAAEnK,KAAK7C,MAAMyG;wBACjB,IAAII,EAAE7G,OAAO,KAAK,IAAIiG,IAAI,GAAGA,IAAIuB,EAAE1G,QAAQmF,KAAKhC,EAAEyC,GAAGc,EAAEvB;wBACvD,OAAOQ;;oBAETe,IAAIX,EAAEJ;oBACNR,IAAI+G,EAAEnK,KAAK7C,MAAMyG;oBACjBe,KAAKwB,EAAEtC,GAAGD;oBACVI,EAAE7G,SAASiE,EAAEyC,GAAGD;oBAChB,OAAOR;;gBAETkC,EAAET,KAAKzG,WAAW,cAAa,SAASwF;oBACtCA,IAAIqG,EAAEjK,KAAK7C,QAAQyG;oBACnBzG,KAAKuJ,cAAcJ,mBAAmBD,EAAExC,GAAGD,KAAKiC,EAAEhC,GAAGD;oBACrD,OAAOA;;gBAET0B,EAAET,KAAKzG,WAAW,gBAAe,SAASwF;oBACxC,IAAIe,IAAIX,EAAEJ,IACRR,IAAImH,EAAEvK,KAAK7C,MAAMyG;oBACnBe,KAAKwB,EAAEtC,GAAGD;oBACV,OAAOR;;gBAETkC,EAAET,KAAKzG,WAAW,iBAAgB,SAASwF,GAAGe;oBAC5C,IAAIf,aAAamG,kBAAkB;wBACjC,IAAI3G,IAAIV,MAAMtE,UAAUkP,MAAM5N,MAAMkE,EAAEyJ;wBACtCzJ,IAAI6G,EAAEzK,KAAK7C,MAAMyG,GAAGe;wBACpB,IAAIX,EAAE7G,OAAO,KAAKgJ,EAAEtC,GAAGc,IAAIA,IAAI,GAAGA,IAAIvB,EAAEnF,QAAQ0G,KAAKvD,EAAEyC,GAAGT,EAAEuB;wBAC5D,OAAOf;;oBAETR,IAAIY,EAAEJ;oBACN,IAAImB,IAAI0F,EAAEzK,KAAK7C,MAAMyG,GAAGe,IACtBD,IAAIV,EAAE7G;oBACRuH,KAAKyB,EAAEtC,GAAGc;oBACVvB,KAAK+C,EAAEtC,GAAGD;oBACVc,KAAKtD,EAAEyC,GAAGD;oBACV,OAAOmB;;gBAET4F,KAAKA,EAAErO,MACHsH,EAAEiB,KAAKzG,WAAWuM,KAClBjF,GAAG7B,IAAG,SAASA;oBACbD,EAAEC,GAAG;wBACH/F,aAAa;wBACbuB,eAAe;wBACf/C,KAAK;4BACH,KAAK,IAAIsH,IAAI,IAAIC,IAAI,GAAGA,IAAI1G,KAAKkQ,WAAWpP,QAAQ4F,KAAK;gCACvD,IAAIkB,IAAI5H,KAAKkQ,WAAWxJ;gCACxBkB,EAAEH,aAAaC,KAAK0I,gBAAgB3J,EAAE+B,KAAKZ,EAAEyI;;4BAE/C,OAAO5J,EAAE6J,KAAK;;wBAEhBvQ,KAAK,SAAS0G;4BACZ,MAAOzG,KAAKiI,cAAcmF,EAAEvK,KAAK7C,MAAMA,KAAKiI;4BAC5C,QAAQxB,KACN,OAAOA,KACPuG,EAAEnK,KAAK7C,MAAMkK,SAASqG,eAAe9J;;;;;YAKnD,SAAS+J,GAAG/J;gBACV,SAASC,EAAEA;oBACT,OAAO,SAAST;wBACd,KAAK,IAAIuB,IAAI,IAAID,IAAI,GAAGA,IAAI/E,UAAU1B,UAAUyG,GAC9CC,EAAED,KAAK/E,UAAU+E;wBACnBA,IAAI;wBACJ,KAAK,IAAI4D,IAAI,IAAIC,IAAI,GAAGA,IAAI5D,EAAE1G,QAAQsK,KAAK;4BACzC,IAAIC,IAAI7D,EAAE4D;4BACVC,aAAaqC,WAAW7G,EAAEwE,MAAMF,EAAE3C,KAAK6C;4BACvC,IAAIA,aAAauB,kBACf,KAAKvB,IAAIA,EAAEpD,YAAYoD,GAAGA,IAAIA,EAAEhE,aAAaE,EAAEiB,KAAK6C,SACjD9D,EAAEiB,KAAK6C;;wBAEd3E,EAAEnE,MAAMvC,MAAMwH;wBACd,KAAKA,IAAI,GAAGA,IAAI2D,EAAErK,QAAQ0G,KAAKwB,EAAEvC,GAAG0E,EAAE3D;wBACtC,IAAIX,EAAE7G,OACJ,KAAKwH,IAAI,GAAGA,IAAID,EAAEzG,QAAQ0G,KACvB2D,IAAI5D,EAAEC,IAAK2D,aAAauC,WAAWzJ,EAAEwC,GAAG0E;;;gBAGjD,IAAI5D,IAAImG,QAAQzM;qBACX,MAAM6N,MAAMvH,EAAEwH,SAASrI,EAAEoI;qBACzB,MAAMA,MAAMvH,EAAE0H,QAAQvI,EAAEsI;qBACxB,MAAME,MACT/G,EAAEZ,GAAG,gBAAe,SAASb;oBAC3B,KAAK,IAAIT,IAAI,IAAIuB,IAAI,GAAGA,IAAIhF,UAAU1B,UAAU0G,GAC9CvB,EAAEuB,KAAKhF,UAAUgF;oBACnBA,IAAI;oBACJ,KAAK,IAAID,IAAI,IAAI4D,IAAI,GAAGA,IAAIlF,EAAEnF,QAAQqK,KAAK;wBACzC,IAAIC,IAAInF,EAAEkF;wBACVC,aAAasC,WAAW7G,EAAEuE,MAAM7D,EAAEiB,KAAK4C;wBACvC,IAAIA,aAAawB,kBACf,KAAKxB,IAAIA,EAAEnD,YAAYmD,GAAGA,IAAIA,EAAE/D,aAAaG,EAAEgB,KAAK4C,SACjD5D,EAAEgB,KAAK4C;;oBAEdD,IAAItE,EAAE7G;oBACNkP,GAAG3M,MAAMvC,MAAMiG;oBACf,KAAKA,IAAI,GAAGA,IAAIsB,EAAEzG,QAAQmF,KAAK+C,EAAEvC,GAAGc,EAAEtB;oBACtC,IAAIkF,GACF,KAAKnC,EAAEvC,GAAGzG,OAAOiG,IAAI,GAAGA,IAAIuB,EAAE1G,QAAQmF,KACnCsB,IAAIC,EAAEvB,IAAKsB,aAAamG,WAAWzJ,EAAEwC,GAAGc;;qBAE5C,MAAM6H,MACTjH,EAAEZ,GAAG,WAAU;oBACb,IAAIb,IAAIG,EAAE7G;oBACVoP,GAAGvM,KAAK7C;oBACR0G,KAAKsC,EAAEvC,GAAGzG;;;YAGhB,SAASyQ;gBACP,SAAShK,EAAEA,GAAGC;oBACZlG,OAAOC,eAAegG,GAAG,aAAa;wBACpC9F,YAAY+F,EAAE/F;wBACduB,eAAe;wBACf/C,KAAKuH,EAAEvH;wBACPY,KAAK,SAAS0G;4BACZ,IAAIR,IAAIjG,MACNuH,SAAS;4BACXV,EAAE7G,UACEuH,IAAI,IACND,EAAEtH,OAAM,SAASyG;gCACfA,MAAMR,KAAKsB,EAAEiB,KAAK/B;;4BAEtBC,EAAE3G,IAAI8C,KAAK7C,MAAMyG;4BACjB,IAAIc,GACF,KAAK,IAAIK,IAAI,GAAGA,IAAIL,EAAEzG,QAAQ8G,KAAK;gCACjC,IAAIgC,IAAIrC,EAAEK;gCACV,MAAMgC,EAAEf,cAAcrB,EAAEyB,qBAAqBW;;4BAEjD5J,KAAKuJ,cAAcJ,mBAAmBD,EAAE1B,GAAGxH,QAAQ0I,EAAElB,GAAGxH;4BACxD,OAAOyG;;;;gBAIb,SAASC,EAAED,GAAGC;oBACZyB,EAAE1B,GAAG,0BAAyB,SAASA,GAAGR;wBACxC,IAAIsB,IAAIV,EAAEZ;wBACVQ,IAAIC,EAAE7D,KAAK7C,MAAMyG,GAAGR;wBACpBsB,KAAKyB,EAAExB,GAAGvB;wBACVY,EAAEJ,MAAMxC,EAAEuD,GAAGvB;wBACb,OAAOQ;;;gBAGX,SAASc,EAAEd,GAAGC;oBACZ,SAAST,EAAEQ,GAAGC;wBACZ,KAAK,IAAIT,IAAI,IAAIQ,MAAMC,GAAGD,IAAIA,EAAEY,aAAapB,EAAEuC,KAAK/B;wBACpD,KAAKC,IAAI,GAAGA,IAAIT,EAAEnF,QAAQ4F,KAAKwC,EAAE1B,GAAGvB,EAAES;;oBAExCyB,EAAE1B,GAAG,uBAAsB,SAASA,GAAGe;wBACrCf,IAAIA,EAAEiK;wBACN,IAAI,kBAAkBjK,GAAG;4BACvB,IAAIc,IAAIvH,KAAK2Q;4BACbjK,EAAE7D,KAAK7C,MAAMyG,GAAGe;4BAChBvB,EAAEsB,KAAKvH,KAAKiH,WAAWgB,YAAYjI;+BAC9B,IAAI,iBAAiByG,GACzBc,IAAIvH,KAAKiI,YAAavB,EAAE7D,KAAK7C,MAAMyG,GAAGe,IAAIvB,EAAEjG,KAAKiI,YAAYV,SAC3D,IAAI,gBAAgBd,GACtBc,IAAIvH,KAAK4Q;wBACRlK,EAAE7D,KAAK7C,MAAMyG,GAAGe,IAChBvB,EAAEsB,KAAKvH,KAAKiI,YAAY,YACvB,IAAI,eAAexB,GACrBc,IAAIvH,KAAKqH;wBACRX,EAAE7D,KAAK7C,MAAMyG,GAAGe,IAChBvB,EAAEjG,KAAKqH,aAAaE,SAEtB,MAAM,IAAI2D,YACR,yBACE2F,OAAOpK,KACP;;;gBAIV,IAAIe,IAAIqI;gBACRpC,KACEtF,EAAEuF,QAAQzM,WAAW,iBAAgB,SAASwF;oBAC5CA,IAAIgH,EAAE5K,KAAK7C,MAAMyG;oBACjB,IAAIC,IAAIc;oBACR,IAAId,EAAEA,MAAMD,EAAEmC,cAAc;wBAC1BnC,EAAEmC,gBAAgB;wBAClB,KAAK,IAAI3C,IAAI,GAAGA,IAAIS,EAAEc,EAAE1G,QAAQmF,KAAKS,EAAEc,EAAEvB,GAAGQ;;oBAE9C,OAAQzG,KAAKkI,kBAAkBzB;;gBAEnCmH,KAAKA,EAAEzO,MACHsH,EAAEiH,QAAQzM,WAAW2M,KACrB4B,KAAKA,EAAErQ,MACPsH,EAAE8I,YAAYtO,WAAWuO,KACzB/G,GAAGjB,IAAG,SAASd;oBACbD,EAAEC,GAAG;wBACH/F,aAAa;wBACbuB,eAAe;wBACf/C,KAAK;4BACH,OAAO2N,EAAEjK,KAAK7C,OAAO,GAAG8Q;;wBAE1B/Q,KAAK,SAAS0G;4BACZ,IAAIC,IAAI,eAAe1G,KAAK6H,WAC1BL,IAAId,IAAI1G,KAAK+Q,UAAU/Q,MACvBiG,IAAIkG,EAAEtJ,KAAKqH,UAAUlK,KAAKgR,cAAchR,KAAK6H;4BAC/C,KAAK5B,EAAE6K,YAAYrK,GAAG,IAAIe,EAAE0I,WAAWpP,UACrCsM,EAAEvK,KAAK2E,GAAGA,EAAE0I,WAAW;4BACzB,KAAKzJ,IAAIC,IAAIT,EAAE8K,UAAU9K,GAAG,IAAIQ,EAAEyJ,WAAWpP,UAC3CkM,EAAEnK,KAAK2E,GAAGf,EAAEyJ,WAAW;;;;gBAInC/H,EAAEuF,QAAQzM,WAAW,iBAAgB,SAASwF,GAAGC;oBAC/C,IAAI,MAAM1G,KAAK6I,YAAY,OAAOiF,EAAEjL,KAAK7C,MAAMyG,GAAGC;oBAClD,IAAIT,IAAI4H,EAAEhL,KAAK7C,MAAMyG;oBACrBqH,EAAEjL,KAAK7C,MAAMyG,GAAGC;oBAChBA,IAAImH,EAAEhL,KAAK7C,MAAMyG;oBACjBe,EAAEsC,yBAAyB9J,MAAMyG,GAAGR,GAAGS,GAAG;;gBAE5CyB,EAAEuF,QAAQzM,WAAW,mBAAkB,SAASwF,GAAGC,GAAGa;oBACpD,IAAI,MAAMvH,KAAK6I,YAAY,OAAOuF,EAAEvL,KAAK7C,MAAMyG,GAAGC,GAAGa;oBACrD,IAAItB,IAAIiI,EAAErL,KAAK7C,MAAMyG,GAAGC;oBACxB0H,EAAEvL,KAAK7C,MAAMyG,GAAGC,GAAGa;oBACnBA,IAAI2G,EAAErL,KAAK7C,MAAMyG,GAAGC;oBACpBc,EAAEsC,yBAAyB9J,MAAM0G,GAAGT,GAAGsB,GAAGd;;gBAE5C0B,EAAEuF,QAAQzM,WAAW,oBAAmB,SAASwF;oBAC/C,IAAI,MAAMzG,KAAK6I,YAAY,OAAOmF,EAAEnL,KAAK7C,MAAMyG;oBAC/C,IAAIC,IAAImH,EAAEhL,KAAK7C,MAAMyG;oBACrBuH,EAAEnL,KAAK7C,MAAMyG;oBACb,SAASC,KAAKc,EAAEsC,yBAAyB9J,MAAMyG,GAAGC,GAAG,MAAM;;gBAE7DyB,EAAEuF,QAAQzM,WAAW,sBAAqB,SAASwF,GAAGC;oBACpD,IAAI,MAAM1G,KAAK6I,YAAY,OAAOyF,EAAEzL,KAAK7C,MAAMyG,GAAGC;oBAClD,IAAIa,IAAI2G,EAAErL,KAAK7C,MAAMyG,GAAGC;oBACxB4H,EAAEzL,KAAK7C,MAAMyG,GAAGC;oBAChB,IAAIT,IAAIiI,EAAErL,KAAK7C,MAAMyG,GAAGC;oBACxBa,MAAMtB,KAAKuB,EAAEsC,yBAAyB9J,MAAM0G,GAAGa,GAAGtB,GAAGQ;;gBAEvDgJ,KACI/I,EAAE6I,YAAYtO,WAAWwO,MACzBjB,KACA9H,EAAEgH,QAAQzM,WAAWuN,MACrBpP,QAAQ6R,KACN;gBAENvB,KACInI,EAAEgI,YAAYtO,WAAWyO,MACzBhB,KACAnH,EAAEmG,QAAQzM,WAAWyN,MACrBtP,QAAQ6R,KACN;gBAENnB,EAAEtI,GAAGkG,QAAQzM,WAAW;oBAAEmK,GAAGwD;oBAAIlC,QAAQmC;;gBACzC2B,GAAGhJ;;YAEL,IAAI0J,IAAI9O,OAAO+D;YACf,KACG+K,KACDA,EAAEC,iBACF,qBAAqBD,EAAErF,UACvB,qBAAqBqF,EAAE/R,KACvB;gBACA,IAAI0Q,IAAI,IAAIzH;gBACZwH;gBACAG;gBACAD,EAAED,GAAGjD,iBAAiB3L,WAAW;oBAAEmK,GAAGuB;oBAAID,QAAQG;;gBAClDmD;gBACAS;gBACAvG,SAASf,oBAAoB;gBAC7B,IAAIhD,iBAAiB,IAAI2E,EAAE+E;gBAC3BrP,OAAOC,eAAe2B,QAAQ,kBAAkB;oBAC9CF,eAAe;oBACfvB,aAAa;oBACbD,OAAOyF;;;WAGXtD,KAAKuO;QAIPhP,OAAOgE,wBAAwBiL,QAAQlS,IACrCkS,QAAQhO,eAAejB,OAAO+D,iBAC9B;;EAtyBN;;ACAA;IACE,SAASmL,YAAYC;QACnB,OAAOA,KAAKC,OACV,CAACC,KAAKC,QAAQD,IAAIE,OAAOpM,MAAMC,QAAQkM,OAAOJ,YAAYI,OAAOA,MAEjE;;IAIJ,SAASE,UAAUC,QAAQ;QACzB,IAAIA,SAAS,GAAG;YACd,OAAO7R,KAAKwR,OAAO,CAACC,KAAKC,QAAQD,IAAIE,OAAOD,MAAM;eAC7C,IAAIG,QAAQ,IAAI;YACrB,OAAOP,YAAYtR;eACd;YACL,IAAI8R,SAAS,KAAI9R;YACjB,OAAO6R,SAAS,GAAG;gBACjBC,SAASF,UAAU/O,KAAKiP;gBACxBD;;YAEF,OAAOC;;;IAIX,WAAWvM,MAAMtE,UAAU8Q,SAAS,YAAY;QAC9CxM,MAAMtE,UAAU8Q,OAAOH;;EAzB3B;;ACAA;IACE,SAASI,UAAUC;QACjB,IAAIC,SAAS,GACXpR,SAASmR,SAAS,OAAO,IAAIA,MAAMnR,QACnCgR,SAAS;QACX,SAASI,QAAQpR,QAAQ;YACvB,IAAIqR,OAAOF,MAAMC;YACjBJ,OAAOK,KAAK,MAAMA,KAAK;;QAEzB,OAAOL;;IAGT,IAAIM,cAAcJ;IAElB,IAAI,sBAAsBxR,OAAO6R,aAAa;QAC5C7R,OAAO6R,cAAcD;;EAfzB;;qBCEwB3L;IACtB,OACE6L,SAAS7L,MAAM8L,SAAS9L,MAAM+L,UAAU/L,MAAMgM,YAAYhM,MAAMiM,SAASjM;;;SAI7DiM,SAASjM;IACvB,cAAcA,MAAM;;;SCTNkM,SAASlM;IACvB,cAAcA,MAAM;;;AAQtB,MAAMmM,gBAAiBnM,KACrBoM,SAASpM,MAAMqM,WAAWrM,OAAO;;SAInBgM,YAAYhM;IAC1B,QAASA,KAAKA,WAAW,KAAMA,MAAM;;;SAGvB8L,SAAS9L;IACvB,cAAcA,MAAM;;;SAEN+L,UAAU/L;IACxB,cAAcA,MAAM;;;SAENoM,SAASpM;IACvB,cAAcA,MAAM,YAAYA,MAAM;;;SAIxBsM,SAAStM;IACvB,cAAcA,MAAM;;;SAENuM,WAAWvM;IACzB,cAAcA,MAAM;;;SAGNwM,QAAQxM;IACtB,OAAOlB,MAAMC,QAAQiB,MAAIA,aAAalB;;;SAOxBuN,WAAWrM;IACzB,OACE,GAAGyM,SACArQ,KAAK4D,GACL0M,QAAQ,YAAY,IACpBA,QAAQ,KAAK,IAEbC;;;SAMSC,MAAM5M;IACpB,OAAOA,aAAaH;;;SAENgN,MAAM7M;IACpB,OAAOA,aAAanB;;;SAYNiO,UAAU9M;IACxB,OAAOA,aAAa3H;;;ACzEtB,oBAAQyQ,eAAWpJ,gBAAEA,uBAAgBqN,WAAUpR;;AAC/C,KACG4Q,WAAWzD,mBAEXyD,WAAWQ,aAEXX,SAAS1M,iBAQV;IACA/G,QAAQK,MAAM;IACd,MAAM,IAAI2E;;;ACjBZ,MAAMqP,cAAc,EAAC,SAAS,YAAY,UAAU;;AAEpD,qBAAe,CAACC,KAAaC,MAAcC;IACzC,OACGD,SAAS,WAAWF,YAAYI,SAASH,QAAQE,aAAa,YAC9DD,SAAS,cAAcD,QAAQ,YAC/BC,SAAS,aAAaD,QAAQ,WAC9BC,SAAS,WAAWD,QAAQ;;;ACDjC,MAAMI,cAAc;;AACpB,MAAMC,YAAaC;IACjB,OAAOA,IAAIb,QAAQW,aAAa,OAAOpD;;;AAEzC,MAAMG,WAASzO,OAAOyO;;AACtB,MAAMQ,YAAUjP,OAAOiP;;AACvB,OAAMlS,KAAEA,KAAGY,KAAEA,KAAGkU,SAAEA,WAAY5C;;AAC9B,MAAM6C,cAAc;;AACpB,SAASrB,WAASpM;IAChB,cAAcA,MAAM,YAAYA,MAAM;;;AAExC,SAASsM,WAAStM;IAChB,cAAcA,MAAM;;;AAEtB,SAASjB,QAAQiB;IACf,OAAOlB,MAAMC,QAAQiB;;;AAGvB,SAAS4M,QAAM5M;IACb,OAAOA,aAAaH;;;AAGtB,MAAM6N,kBACJC,OAEA,YAAYC,cAAcD,SACzBjV,IAAIiV,KAAK,YAAY,cAAcjV,IAAIiV,KAAK,YAAY;;AAG3D,SAASE,iBAAiBC;IAGxBA,MAAMC,KAAKC,MAAMD,KAAKE,UAAUH;IAEhC,MAAMI,aAAanU,OAAOoU,QAAQL,KAAKM,IAAI,EAAE9T,KAAKL,WAAW,EAC3DqT,UAAUhT,KAAKqS,QACf1S;IAGF,OAAOiU,WAAWE,IAAI,EAAE9T,KAAKL,WAAWK,MAAM,MAAML,OAAO4P,KAAK;;;AAElE,SAASwE,kBAAkBV;IACzB,MAAMA,eAAe1G,UAAU;QAC7BtO,QAAQK,MAAM2U;QACdhV,QAAQK,MAAM;QACd,MAAM2E;;;;SAGc2Q,4BACtBX;IAEAU,kBAAkBV;IAElB,IAAIY,OAA4BxU,OAAOsC,OAAO;IAE9C,MAAMmS,cAAmC,IAAIzB,MAAMwB,MAAM;QACvD5T;YACE,MAAM8T,4BAA4BC,sBAAsBf;YAExD,MAAMxT,OAAOwU,kBAAkBhB;YAE/B,OAAO7O,MAAM8P,KACX,IAAI/O,IACF,KACK1F,MACHuT,gBAAgBC,OAAO,YAAYvO,WACnCqP,4BAA4BhB,cAAcrO,YAIzCkM,KAAKuD,UACLC,OAAO9O,OAAOA;;QAIvBrF,IAAID,QAAQJ;YAUV,IAAIyU,eAAenB,cAAcD,MAAMvD,SAAO9P,MAAM5B,IAAIiV,KAAK,UAAU;gBACrE,OAAOjV,IAAIiV,KAAKvD,SAAO9P;mBAClB;gBACL,MAAM2H,IAAI+M,aAAarB,KAAKvD,SAAO9P;gBAGnC,IAAI2H,MAAM,IAAI;oBACZ,OAAO;;gBAGT,IAAIA,MAAM,MAAM;oBACd;;gBAKF,IAAIqK,WAASrK,IAAI;oBACf;wBACE,OAAO8L,KAAKC,MAAM5D,SAAOnI;sBACzB,OAAOjJ;wBACP,OAAOiJ;;uBAEJ;;;QAGXtH,IAAIwI,GAAG7I,KAAK2H;YAIV,IAAI,sBAAsBA,GAAG;gBAC3BtJ,QAAQK,MAAMiJ;gBAEdtJ,QAAQK,MAAM;gBACd,MAAM2E;;YAeR,IAAIoR,eAAenB,cAAcD,MAAMvD,SAAO9P,MAAM5B,IAAIiV,KAAK,UAAU;gBACrE,OAAOrU,IAAIqU,KAAKvD,SAAO9P,MAAM2H;mBACxB,IAAI3H,QAAQ,SAAS;gBAC1B,MAAM2U,UAAU3C,WAASrK,KACrBA,IACAmK,WAASnK,KACT4L,iBAAiB5L,KACjBmI,SAAOnI;gBAEX3I,IAAIZ,IAAIiV,KAAK,UAAU,WAAWsB,QAAQtC;gBAY1C,OAAO;mBACF,IAAIrS,QAAQ,WAAW8R,WAASnK,IAAI;gBACzC,MAAMiN,YAAYnQ,QAAQkD,KACtBA,EAAE4H,KAAK,OACP+C,QAAM3K,KACN,KAAIA,IAAG4H,KAAK,OACZO,SAAOnI;gBAEXkN,aAAaxB,KAAKvD,SAAO9P,MAAM4U;gBAC/B,OAAO;mBASF;gBAGL,IAAI,UAAUjN,KAAKA,MAAM,QAAQA,MAAM7C,WAAW;oBAChDoI,gBAAgBmG,KAAKvD,SAAO9P;oBAC5B,OAAO;;gBAGT,IAAIsS,QAAM3K,IAAI;oBACZkN,aAAaxB,KAAKvD,SAAO9P,MAAMyT,KAAKE,UAAU,KAAIhM;oBAClD,OAAO;uBACF;oBACL,IAAIA,MAAM,MAAM;wBACdA,IAAI;;oBAGNkN,aACExB,KACAvD,SAAO9P,MACP8R,WAASnK,KAAK8L,KAAKE,UAAUhM,KAAKmI,SAAOnI;oBAM3C,OAAO;;;;QAKbtH,eAAewI,GAAGuB;YAChB8C,gBAAgBmG,KAAKvD,SAAO1F;YAE5B,OAAO;;QAET/J,IAAID,QAAQJ;YACV,OAAOkT,QAAQgB,aAAapB,SAAS9S;;QAcvCK;YACE,OAAO;;QAETA,yBAAyBD,QAAQJ;YAC/B,MAAM8U,iBAAiB;gBACrBlV,YAAY;gBACZuB,cAAc;gBACdC,UAAU;;YAEZ,MAAM2T,UAAe3W,IAAI8V,aAAalU;YACtC,WAAW+U,YAAY,aAAa;gBAClC,OAAO;oBACLpV,OAAOoV;uBACJD;;mBAEA;gBACL;;;QAiCJzU;YACE,OAAO;;;IASX,OAAO6T;;;AAET,SAASG,kBACPhB;IAGA,OAAOA,IAAI2B;;;AAEb,SAASN,aACPrB,KACArT;IAEA,OAAOqT,IAAItM,aAAa/G;;;AAE1B,SAASsT,cAAcD;IACrB,OAAOA,IAAI4B,QAAQtF;;;AAErB,SAASkF,aACPxB,KACArT,KACAL;IAEA,OAAO0T,IAAIrG,aAAahN,KAAKL;;;AAE/B,SAASuN,gBACPmG,KACArT;IAEA,OAAOqT,IAAInG,gBAAgBlN;;;AAU7B,SAASoU,sBACPf;IAEA,MAAM6B,UAAU5B,cAAcD;IAC9B,OACE6B,YAAY,cACZA,YAAY,YACXA,YAAY,WAAW9W,IAAIiV,KAAK,YAAY;;;ACnTjD,SAASpQ,WAAStD;IAChB,IAAIQ,cAAcR;IAClB,OAAOA,SAAS,SAASQ,QAAQ,YAAYA,QAAQ;;;AAGvD,iBAAiB8C;;;;AC7BjB,IAAIkS,oBAAoBC,kBAAU,YAAYA,kBAAUA,eAAO3V,WAAWA,UAAU2V;;AAEpF,kBAAiBD;;ACAjB,IAAIE,kBAAkBhF,QAAQ,YAAYA,QAAQA,KAAK5Q,WAAWA,UAAU4Q;;AAG5E,IAAIiF,OAAOH,eAAcE,YAAYnL,SAAS,cAATA;;AAErC,YAAiBoL;;ACUjB,IAAI9V,MAAM;IACR,OAAO8V,MAAK/V,KAAKC;;;AAGnB,YAAiBA;;ACnBjB,IAAI+V,WAASD,MAAKC;;AAElB,cAAiBA;;ACFjB,IAAIC,cAAc/V,OAAOS;;AAGzB,IAAIuV,iBAAiBD,YAAYC;;AAOjC,IAAIC,uBAAuBF,YAAYrD;;AAGvC,IAAIwD,iBAAiBJ,UAASA,QAAOK,cAAc9Q;;AASnD,SAAS+Q,UAAUlW;IACjB,IAAImW,QAAQL,eAAe3T,KAAKnC,OAAOgW,iBACnChD,MAAMhT,MAAMgW;IAEhB;QACEhW,MAAMgW,kBAAkB7Q;QACxB,IAAIiR,WAAW;MACf,OAAO7Q;IAET,IAAI6L,SAAS2E,qBAAqB5T,KAAKnC;IACvC,IAAIoW,UAAU;QACZ,IAAID,OAAO;YACTnW,MAAMgW,kBAAkBhD;eACnB;mBACEhT,MAAMgW;;;IAGjB,OAAO5E;;;AAGT,iBAAiB8E;;AC5CjB,IAAIL,gBAAc/V,OAAOS;;AAOzB,IAAIwV,yBAAuBF,cAAYrD;;AASvC,SAAS6D,eAAerW;IACtB,OAAO+V,uBAAqB5T,KAAKnC;;;AAGnC,sBAAiBqW;;AChBjB,IAAIC,UAAU,iBACVC,eAAe;;AAGnB,IAAIP,mBAAiBJ,UAASA,QAAOK,cAAc9Q;;AASnD,SAASqR,WAAWxW;IAClB,IAAIA,SAAS,MAAM;QACjB,OAAOA,UAAUmF,YAAYoR,eAAeD;;IAE9C,OAAQN,oBAAkBA,oBAAkBlW,OAAOE,SAC/CkW,WAAUlW,SACVqW,gBAAerW;;;AAGrB,kBAAiBwW;;ACHjB,SAASC,aAAazW;IACpB,OAAOA,SAAS,eAAeA,SAAS;;;AAG1C,qBAAiByW;;ACxBjB,IAAIC,YAAY;;AAmBhB,SAASC,SAAS3W;IAChB,cAAcA,SAAS,YACpByW,eAAazW,UAAUwW,YAAWxW,UAAU0W;;;AAGjD,iBAAiBC;;ACxBjB,IAAIC,MAAM,IAAI;;AAGd,IAAIC,SAAS;;AAGb,IAAIC,aAAa;;AAGjB,IAAIC,aAAa;;AAGjB,IAAIC,YAAY;;AAGhB,IAAIC,eAAeC;;AAyBnB,SAASC,SAASnX;IAChB,WAAWA,SAAS,UAAU;QAC5B,OAAOA;;IAET,IAAI2W,WAAS3W,QAAQ;QACnB,OAAO4W;;IAET,IAAItT,WAAStD,QAAQ;QACnB,IAAIoX,eAAepX,MAAMqX,WAAW,aAAarX,MAAMqX,YAAYrX;QACnEA,QAAQsD,WAAS8T,SAAUA,QAAQ,KAAMA;;IAE3C,WAAWpX,SAAS,UAAU;QAC5B,OAAOA,UAAU,IAAIA,SAASA;;IAEhCA,QAAQA,MAAMyS,QAAQoE,QAAQ;IAC9B,IAAIS,WAAWP,WAAW7Q,KAAKlG;IAC/B,OAAQsX,YAAYN,UAAU9Q,KAAKlG,SAC/BiX,aAAajX,MAAMyP,MAAM,IAAI6H,WAAW,IAAI,KAC3CR,WAAW5Q,KAAKlG,SAAS4W,OAAO5W;;;AAGvC,iBAAiBmX;;AC5DjB,IAAII,kBAAkB;;AAGtB,IAAIC,YAAYC,KAAKC,KACjBC,YAAYF,KAAKG;;AAwDrB,SAASC,SAASC,MAAMC,MAAM/S;IAC5B,IAAIgT,UACAC,UACAC,SACA9G,QACA+G,SACAC,cACAC,iBAAiB,GACjBC,UAAU,OACVC,SAAS,OACTC,WAAW;IAEf,WAAWV,QAAQ,YAAY;QAC7B,MAAM,IAAIpU,UAAU6T;;IAEtBQ,OAAOZ,WAASY,SAAS;IACzB,IAAIzU,WAAS0B,UAAU;QACrBsT,YAAYtT,QAAQsT;QACpBC,SAAS,aAAavT;QACtBkT,UAAUK,SAASf,UAAUL,WAASnS,QAAQkT,YAAY,GAAGH,QAAQG;QACrEM,WAAW,cAAcxT,YAAYA,QAAQwT,WAAWA;;IAG1D,SAASC,WAAWC;QAClB,IAAIC,OAAOX,UACPY,UAAUX;QAEdD,WAAWC,WAAW9S;QACtBkT,iBAAiBK;QACjBtH,SAAS0G,KAAKjW,MAAM+W,SAASD;QAC7B,OAAOvH;;IAGT,SAASyH,YAAYH;QAEnBL,iBAAiBK;QAEjBP,UAAUW,WAAWC,cAAchB;QAEnC,OAAOO,UAAUG,WAAWC,QAAQtH;;IAGtC,SAAS4H,cAAcN;QACrB,IAAIO,oBAAoBP,OAAON,cAC3Bc,sBAAsBR,OAAOL,gBAC7Bc,cAAcpB,OAAOkB;QAEzB,OAAOV,SACHZ,UAAUwB,aAAajB,UAAUgB,uBACjCC;;IAGN,SAASC,aAAaV;QACpB,IAAIO,oBAAoBP,OAAON,cAC3Bc,sBAAsBR,OAAOL;QAKjC,OAAQD,iBAAiBjT,aAAc8T,qBAAqBlB,QACzDkB,oBAAoB,KAAOV,UAAUW,uBAAuBhB;;IAGjE,SAASa;QACP,IAAIL,OAAO7Y;QACX,IAAIuZ,aAAaV,OAAO;YACtB,OAAOW,aAAaX;;QAGtBP,UAAUW,WAAWC,cAAcC,cAAcN;;IAGnD,SAASW,aAAaX;QACpBP,UAAUhT;QAIV,IAAIqT,YAAYR,UAAU;YACxB,OAAOS,WAAWC;;QAEpBV,WAAWC,WAAW9S;QACtB,OAAOiM;;IAGT,SAASkI;QACP,IAAInB,YAAYhT,WAAW;YACzBoU,aAAapB;;QAEfE,iBAAiB;QACjBL,WAAWI,eAAeH,WAAWE,UAAUhT;;IAGjD,SAASqU;QACP,OAAOrB,YAAYhT,YAAYiM,SAASiI,aAAaxZ;;IAGvD,SAAS4Z;QACP,IAAIf,OAAO7Y,SACP6Z,aAAaN,aAAaV;QAE9BV,WAAWlW;QACXmW,WAAW3Y;QACX8Y,eAAeM;QAEf,IAAIgB,YAAY;YACd,IAAIvB,YAAYhT,WAAW;gBACzB,OAAO0T,YAAYT;;YAErB,IAAIG,QAAQ;gBAEVgB,aAAapB;gBACbA,UAAUW,WAAWC,cAAchB;gBACnC,OAAOU,WAAWL;;;QAGtB,IAAID,YAAYhT,WAAW;YACzBgT,UAAUW,WAAWC,cAAchB;;QAErC,OAAO3G;;IAETqI,UAAUH,SAASA;IACnBG,UAAUD,QAAQA;IAClB,OAAOC;;;AAGT,iBAAiB5B;;AC3LV,MAAM8B,+BAA+B,IAAIvb;;AAIzC,MAAMwb,yBAAyB,IAAIxb;;AAInC,MAAMyb,mCAAmC,IAAIzb;;ACP7C,OAAMyD,OACXA,OAAKiY,WACLA,WAAS/Z,gBACTA,gBAAcga,gBACdA,gBAAcxX,0BAEdA,0BAAwBI,gBACxBA,gBAAcsD,KACdA,cAGAsN,WAAOyG,mBACPA,qBAGErJ;;SAWYlS,MACdgC,QACAwZ;IAGA,IAAIrH,MAAMnS,WAAWoS,UAAUpS,SAAS;QAEtC,OAAOA,OAAOhC,IAAIwb;WACb;QAEL,OAAOtJ,QAAQlS,IAAIgC,QAAQwZ;;;;AAc/B,SAAgB5a,MACdoB,QACAwZ,aACAja;IAGA,IAAI4S,MAAMnS,WAAWoS,UAAUpS,SAAS;QACtCA,OAAOpB,IAAI4a,aAAaja;QAExB,OAAO;WACF;QAEL,OAAO2Q,QAAQtR,IAAIoB,QAAQwZ,aAAaja;;;;AClE5C,IAAIka,cAAgD;;AAMpD,SACgBC;IACd,OAAO,KAAID;;;SAEGE,SAASC,OAA2BC;IAClD,IAAIC,SAAS;QACXL,YAAYpS,KAAK,EAACuS,OAAOC;;;;AAG7B,SAASE;IACPN,cAAc;;;AAET,MAAMO,mBAAmB;;AAChC,MAAMC,eACJ;;AACF,IAAIH,UAAU;;AACd,IAAII,aAA4B,IAAI/U;;AACpC,IAAIgV,eAA8B,IAAIhV;;AACtC,IAAIiV,WAAoC,IAAIjV;;AAG5C,SAAgBkV;IACd,OAAO,KAAID;;;SAEGE,eAAeV;IAC7B,IAAIE,SAAS;QACXM,SAASvT,IAAI+S;;;;AAGjB,SAAgBW;IACd,OAAO,KAAIL;;;AAEb,SAAgBM;IACd,OAAO,KAAIL;;;SAEGM,WAAWC;IACzB,IAAIC,WAAWD,MAAM;QACnB,IAAIZ,SAAS;YACXI,WAAWrT,IAAI6T;eACV;YAELzc,QAAQK,MAAM2b;YACd,MAAM1R;;WAEH;QACLtK,QAAQK,MAAMoc;QACdzc,QAAQK,MAAM0b;QACd,MAAM/W;;;;SAIM2X,aAAaF;IAC3B,IAAIC,WAAWD,MAAM;QACnB,IAAIZ,SAAS;YACXK,aAAatT,IAAI6T;eACZ;YACLzc,QAAQK,MAAM2b;YACd,MAAM1R;;WAGH;QACLtK,QAAQK,MAAMoc;QACdzc,QAAQK,MAAM0b;QACd,MAAM/W;;;;AAIV,SAAgB4X;IACdX,aAAa,IAAI/U;;;AAGnB,SAAS2V;IACPV,WAAW,IAAIjV;;;AAEjB,SAAgB4V;IACdZ,eAAe,IAAIhV;;;AAErB,SAAgB6V;IACdlB,UAAU;IACVmB;;;AAEF,SAAgBC;IACdpB,UAAU;IACVmB;;;AAEF,SAASA;IACPJ;IACAE;IACAD;IACAf;;;;;AC/FF,MAAM7V,gBAAcjD,OAAOiD;;AASpB,MAAMiX,gBAAgBhG,OAAO;;AAC7B,MAAMiG,mBAAmBjG,OAAO;;AAGhC,MAAMkG,kBAAkBlG,OAAO;;AACtC,MAAMmG,mBAAmBnG,OAAO;;AACzB,MAAMoG,oCACX;;SACcC,gBAAgBlW;IAC9B,OACEA,aAAamW,iBAAiBnW,EAAE6P,OAAOK,iBAAiB;;;AAKrD,MAAMkG,oBAAoBvG,OAAO;;AACjC,MAAMwG,eAAexG,OAAO;;AAC5B,MAAMyG,iBAAiBzG,OAAO;;AAC9B,MAAM0G,kBAAkB1G,OAAO;;AAC/B,MAAM2G,0BAA0B3G,OAAO;;AACvC,MAAM4G,uBAAuB5G,OAAO;;AAW3C,MAAqBsG;IAanBxb,YAAY+b;QAFHnd,KAACsW,OAAOK,eAAe;QA6EhC3W,WAAsB,IAAIqF;QAC1BrF,WAAiB,IAAIsG;QAGrBtG,eAAU;YACR,OAAOA,KAAKU;;QA3EZV,KAAKU,QAAQyc;QAGb1c,eAAeT,MAAM,SAAS;YAC5BU,OAAOyc;YACPjb,cAAc;YACdC,UAAU;;QAkBZsZ,eAAezb;QACf,MAAMod,eAAe7E,WAAU8E;YAC7B,MAAMC,OAAOD,YAAYxM,OAAOwM,aAAa;YAE7Crd,KAAK6c,mBAAmBU,cACtB,IAAI3a,YAAY,SAAS;gBAAE4a,QAAQF;;;QAGvCtd,KAAKyc,oBAAqBY;YACxBD,aAAaC;;;IAQjBjc,CAAC6b;QACCjd,KAAK8c,cAAcW,QAAQzC;YACzBhb,KAAKuc,kBAAkBvB;;;IAG3B5Z,CAACmb,kBAAkBvB;QACjB,MAAMsC,OAAO;QACbtd,KAAK6c,mBAAmBa,oBAAoBJ,MAAMtC;;IAEpD5Z,CAACkb,eAAetB;QACd,MAAMsC,OAAO;QACbtd,KAAK6c,mBAAmBvT,iBAAiBgU,MAAMtC;;IAEjD5Z,CAAC8b;QAECld,KAAK8c,cAAcW,QAAQzC;YACzBhb,KAAKsc,eAAetB;;;IAoBxB5Z;QACE,MAAMV,QAAQV,KAAK+X;QACnB,OAAO4F,YAAYjd,SACfmQ,OAAOnQ,SACP2S,MAAM3S,SACN8T,KAAKE,UAAU,KAAKhU,WACpBmS,SAASnS,SACT8T,KAAKE,UAAUhU,SACf;;IAGNU,OAlBCyb,wBACAC,cAiBAC,iBAAgBM;QAGfrd,KAAKyc,kBAAkBY;;IAEzBjc,CAAC4b,iBACChC;QAGA,IAAI4C;QACJ,MAAMC,mBAAmBxD,6BAA6Blb,IAAI6b;QAC1D,IAAI6C,kBAAkB;YACpBD,gBAAgBC;eACX;YAELD,gBAAgB,MAAM5C;YAEtBX,6BAA6Bta,IAAIib,UAAU4C;;QAK7C5d,KAAK8c,cAAc9U,IAAI4V;;IAEzBxc,CAACob,iBAAiBxB;QAChB,MAAM4C,gBAAgBvD,6BAA6Blb,IAAI6b;QAIvD,IAAI4C,eAAe;YACjB5d,KAAK8c,cAAclY,OAAOgZ;YAC1B5d,KAAKuc,kBAAkBqB;;;IAI3Bxc,CAACkV,OAAOwH;QAEN,MAAMpd,QAAQV,KAAK+X;QACnB,OAAO4F,YAAYjd,SACfA,QACAmS,SAASnS,SACT8T,KAAKE,UAAUhU,cACV;;;;SCpLGqd,cACdtX;IAEA,MAAM4E,IAA+B;IAErC5E,EAAEgX,QAAQ,EAAE1c,KAAKL;QACf,KAAK2K,EAAEtK,MAAM;YACXsK,EAAEtK,OAAO,IAAIuF;;QAIf5F,MAAM+c,QAAS/U;YACb2C,EAAEtK,KAAKiH,IAAIU;;;IAGf,OAAOlI,OAAOoU,QAAQvJ,GAAGwJ,IAAI,EAAE1J,GAAGzC,OAAO,EAACyC,GAAG,KAAIzC;;;ACvBnD,MAAMsV,oBAAoB,IAAIC;;AAC9B,MAAMC,0BAA0B;;SAYhBC,aAAa1X;IAC3B,OAAOuX,kBAAkBrX,IAAIF;;;AAQ/B,SAAS2X,qBACPld,MACAmd,QAAsB,IACtBC,WAAyB;IAEzBD,QAAQ7d,OAAO+d,OAAO,IAAIF;IAC1BC,WAAWA,SAASvM,KAAK,IAAI;IAE7B,MAAMyM,eAAehe,OAAOoU,QAAQyJ;IACpC,MAAMI,wBAAwBD,aAAajJ,OACzC,EAAExU,WAAWA,IAAI2d,WAAW,QAAQ3d,IAAI2d,WAAW;IAErD,MAAMC,kCAAkCF,sBAAsBlJ,OAC5D,EAAExU,SAASmd,wBAAwBtX,KAAK7F,IAAI;IAE9C,MAAM6d,UAAUpe,OAAOsC,OAAO;IAC9B,MAAM+b,OAAOD;IACb,EACE,WACA,WACA,QACA,SACA,YACA,cACA,aACAnB,QAAQ1c;QACRN,eAAeme,SAAS7d,KAAK;YAE3BoB,UAAU;;;IASd0c,KAAKC,UAAU;IACfte,OAAO+d,OAAOK,SAAS;QACrB1d,MAAAA;QACA6d,UAAUve,OAAO6R,YACfsM,gCAAgCpJ,OAAOtP,KAAK0W,gBAAgB1W,EAAE;QAEhEoY,OAAO7d,OAAO6R,YACZsM,gCAAgCpJ,OAAOtP,MAAM0W,gBAAgB1W,EAAE,KAAK4O,IAClE,EAAE9T,KAAKL,WAAW,EAACK,KAAKgS,SAASrS,SAASA,MAAM0S,SAAS1S;QAG7D4d,UAAAA;QACAU,SAASxe,OAAO6R,YACd0L,cAAc,KACTS,aACAjJ,OAAO,EAAExU,SAAS,OAAOA,IAAI,IAC7B8T,IAAI,EAAE9T,KAAKL,WAAW,EACrBK,IACGoP,MAAM,GACNO,cACA0C,QACH,EAAC1S,QAAOqR,KAAK,IAAI,UAElByM,aACAjJ,OAAO,EAAExU,SAASA,IAAI2d,WAAW,OACjC7J,IAAI,EAAE9T,KAAKL,WAAW,EACrBK,IACGoP,MAAM,GACNO,cACA0C,QACH,EAAC1S,QAAOqR,KAAK,IAAI;QAIzBkN,YAAYze,OAAO6R,YACjBoM,sBACGlJ,OAAO,EAAExU,SAASA,IAAI,OAAO,OAAOA,IAAI,OAAO,OAAOA,IAAI,OAAO,KACjE8T,IAAI,EAAE9T,KAAKL,WAAW,EACrBK,IACGoP,MAAM,GACNO,cACA0C,QACH1S;;IAIRD,eAAeme,SAAStI,OAAOK,aAAa;QAAEjW,OAAO;;IAIrDga,kBAAkBkE;IAClBZ,kBAAkBhW,IAAI4W;IAEtBpe,OAAO0e,OAAOL;IACd,OAAOD;;;SCnGOO,YAAYzW;IAC1B,IAAIqK,SAASrK,IAAI;QACf,OAAO;;IAET,IAAI6J,SAAS7J,IAAI;QACf,OAAO;;IAET,IAAI0W,OAAO;IACX,IAAI5Z,QAAQkD,IAAI;QAad,OAAwCA,EAAE2W,MAAMpZ,KAAKkZ,YAAYlZ;WAC5D,IACLkY,aAAazV,IAEb;QACA,OAAOyW,YAAYzW,EAAE4V;WAIhB,IACL3B,gBAAgBjU,IAEhB;QACA,OAAO;;IAIT,OAAO0W;;;SCjDOE,0BAA0BC;IAGxC,UACEvM,WAAWuM,cACXA,UAAUte,aACVse,UAAUte,qBAAqBsO;;;SCPnBiQ,eAAe/Y;IAC7B,OAAOqM,WAAWrM,OAAO;;;SAEXgZ,eAAehZ;IAC7B,OAAOqM,WAAWrM,OAAO;;;SAEXiZ,gBAAgBjZ;IAC9B,OAAOqM,WAAWrM,OAAO;;;SCTXkZ,kBAAkBC;IAChC,OAAOA,SAAS/K,IAAIrN,KAAKA,EAAEqY,SAASvP,KAAK;;;SCE3BwP,mBAAmBC,SAAuBC;IACxD,MAAMC,WAAWC,eAAe,KAAIH,QAAQI,YAAWH;IACvD,MAAMI,gBAAgBL,QAAQK;IAC9B,MAAMP,UACJE,QAAQF,QAAQ1P,MAAM,GAAG,KACzBiQ,gBACA,MACAT,kBAAkBM,YAClB;IACF,OAAO;QACLJ,SAAAA;QACAO,eAAAA;QACAD,UAAUF;QACV7e,CAACkV,OAAOK,cAAc;;;;ACb1B,MAAM0J,gBAAgB9a,MAAM,IACzB+a,KAAKza,WACLgP,IAAI,CAACnM,GAAG7H,MAAM,KAAKA,GACnBgU,IAAIzN,KAAKyJ,OAAO0P,aAAanZ;;AAEhC,MAAMoZ,gBAAgBjb,MAAM,IACzB+a,KAAKza,WACLgP,IAAI,CAACnM,GAAG7H,MAAMA,GACdgU,IAAIpO,KAAKA,EAAEyM,SAAS;;AAEvB,MAAMuN,yBAAyB,KAC1B,IAAIna,IAAI,KAAIka,kBAAkBH;;AAGnC,SAASK;IACP,OAAOvhB,MAKLkhB,eACAlI,KAAKwI,MAAMxI,KAAKyI,WAAWP,cAAcvf;;;AAG7C,SAAS+f;IACP,OAAO1hB,MAILshB,wBACAtI,KAAKwI,MAAMxI,KAAKyI,WAAWH,uBAAuB3f;;;AAKtD,SAASggB,yBAAyBhgB,SAAS;IACzC,OACEyE,MAAMzE,QACHwf,KAAKza,WACLgP,IAAI,MAAM6L,sBAEVpQ,KAAK,MACR,MACA/K,MAAMzE,QACHwf,KAAKza,WACLgP,IAAI,MAAMgM,kCACVvQ,KAAK;;;ACjDL,MAAMyQ,+BAA+B;;AAE5C,KAMGlO,SAASzQ,OAAO+D,iBAKjB;IACA/G,QAAQK,MAAM;IACd,MAAM,IAAI2E;;;AAGZ,SAAS4c,kCACPC,OACAC;IAEA,MAAMC,eAAe3gB,OAAOoU,QAAQqM,OAAOG,KAAK1Y;QAC9C,OAAOA,EAAE,OAAOwY;;IAElB,OAAOC,eAAeA,aAAa,KAAKtb;;;AAM1CzD,OAAOgE,wBAAwBjH,MAC7BkE,eAAejB,OAAO+D,iBACtB;;AAEF,MAAMkb,aAAa/K,OAAOgL,IAAI;;AAC9B,MAAMC,aAAajL,OAAOgL,IAAI;;AAM9B,OAAMlb,uBAAEA,yBAA0BhE;;AAClC,MAAM+D,mBAAiB/D,OAAO+D;;AAG9B,KAAKQ,IAAIR,kBAAgBkb,aAAa;IACpChQ,QAAQtR,IAAIoG,kBAAgBkb,YAAY,IAAI/a;;;AAI9C,KAAKK,IAAIR,kBAAgBob,aAAa;IACpClQ,QAAQtR,IAAIoG,kBAAgBob,YAAY;;;AAI1C,gCAAe,CAAChC,WAAqBiC,gBACnCC,4BAA0BlC,WAAWiC;;AAEvC,SAASC,4BACPlC,WACAiC,aACA1gB,SAAS;IAET,KAAKwe,0BAA0BC,YAAY;QACzCngB,QAAQK,MAAM8f;QACdngB,QAAQK,MAAMshB;QACd,MAAM3c;;IAMR,KAAKjF,MAAIgH,kBAAgBkb,YAAY1a,IAAI4Y,YAAY;QACnD,MAAMmC,cAAcZ,yBAAyBhgB;QAE7C,IAAIqF,iBAAehH,IAAIuiB,cAAc;YACnC,OAAOD,4BAA0BlC,WAAWiC,aAAa1gB,SAAS;eAC7D;YACL,IAAI0gB,aAAa;gBACfrb,iBAAe0F,OAAO6V,aAAanC,WAAW;oBAAEoC,SAASH;;mBACpD;gBACLrb,iBAAe0F,OAAO6V,aAAanC;;;QAIvC,OAAOmC;WACF;QACL,OAAOV,kCACL7hB,MAAIgH,kBAAgBob,aACpBhC;;;;AAWNpZ,iBAAe0F,SAAS,SACtByR,MACAva,aACA2C;IAEA,KAAK4Z,0BAA0Bvc,cAAc;QAC3C3D,QAAQK,MAAMsD;QACd3D,QAAQK,MAAMshB;QACd,MAAM3c;;IAER,KAAKjF,MAAIgH,kBAAgBkb,YAAY1a,IAAI5D,cAAc;QACrD,IAAI4D,IAAIR,iBAAeob,aAAajE,OAAO;YAEzCmE,4BACE1e,aACA2C,UAAUA,QAAQic,UAAU9b;eAEzB;YACLO,sBAAsBnF,UAAU4K,OAAOhJ,KACrCsD,kBACAmX,MACAva,aACA2C;YAEFS,iBAAekb,YAAYrZ,IAAIjF;YAC/BoD,iBAAeob,YAAYjE,QAAQva;;;;;AAIzChD,MAAIoG,kBAAgBmQ,OAAOsL,UAAU;IACnC,MAAMhN,UAAUpU,OAAOoU,QAAQzO,iBAAeob;IAE9C,OAAO3M,QAAQ0B,OAAOsL,UAAU/e,KAAK+R;;;SCtHvBiN,mBACdtC,WACAuC,WACAxD;IAGA,IAAIpd,OAAOqe;IACX,IAAIvM,WAAW9R,OAAO;QACpBA,OAAO6gB,gBAAgB7gB;;IAGzBqe,YAAYre;IACZ,IAAIoe,0BAA0BC,YAAY;QAQxCkC,0BAA0BlC;QAC1B,OAAO/E,UAAU+E,WAAW,EAACuC,WAAWxD;WACnC;QACLlf,QAAQK,MAAM8f;QACdngB,QAAQK,MAAMshB;QACd,MAAM3c;;;;ACtCV,MAAM4d,kBAAkB1L,OAAO;;SAEf2L,YAAYxb;IAC1B,OACEqV,WAAWrV,MAEXtH,MAAIsH,GAAGub,qBAAqBA;;;SCJhBE,WAAWjc,GAAmByC;IAC5CzC,EAAEoK,cAAc3H;;;SAEFyZ,WAAWlc,GAAYyC;IACrCzC,EAAE6K,YAAYpI;;;SAEA0Z,YACdC,WACAjO;IAEAiO,UAAUpV,YAAYmH;;;AAExB,SAAgBkO;IACd,OAAOlW,gBAAgBmW,cAAc;;;AAEvC,SAGgBC;IACd,OAAOtY,SAASsY;;;SAEFC,oBAAoBvhB;IAClC,OAAOgJ,SAASgC,cAAchL;;;SAEhBkL,gBAAgBsW,WAAmBpF;IACjD,OAAOpT,SAASkC,gBAAgBsW,WAAWpF;;;SAE7BqF,eAAepjB;IAC7B,OAAO2K,SAASqG,eAAeM,OAAOtR;;;AAEjC,MAAMgjB,eAAe;;SACZK,WAAWC,UAAgBniB;IACzCmiB,SAASC,YAAYjS,OAAOnQ;;;AAIvB,MAAMqiB,gBAAgB;;AAE7B,SAAgBC;IACd,OAAO5W,gBAAgB2W,eAAe;;;SAKxBE,cAAcnE;IAC5BA,QAAQzP;;;AAEV,SAcgB6T,aACd9O,KACAnV,OACA4D;IAEAuR,IAAI9K,iBAAiBrK,OAAO4D;;;AAG9B,SAAgBsgB,gBACd/O,KACAnV,OACA4D;IAEAuR,IAAIsJ,oBAAoBze,OAAO4D;;;SAEjBugB,YAAYhP;IAC1B,OAAO,KAAIA,IAAIkK;;;SAED+E,cAAcjP;IAC5B,OAAO,KAAIA,IAAIlE;;;AAEjB,SAiBgBoT;IACd,OAAOpZ,SAASqZ,eAAeC,mBAAmB;;;SAMpCC,iBAAiBC;IAC/B,OAAO,KAAIxZ,SAASuZ,iBAAiBC;;;SC3GvBC,QAAQld;IACtB,QAAQjB,QAAQiB,KAAKA,IAAI,EAACA,KAAIsL,KAAK,IAAI,GAAGwD,OAAO9O,MAAMgM,YAAYhM;;;0BCAnE2N,KAiBAiO,WACAuB,QAAiB;IAEjB,IAAIA,OAAO;QACT1B,WAAWG,WAAW;;IAUxB,MAAMwB,OAAOF,QAAQvP,KAAKrC,KAAKuD;IAC/BuO,KAAKpG,QAASxX,KACZmc,YAAYC,WAAWpc;IAEzB,OAAOoc;;;SCtCOyB,YAAYC;IAG1B,UAAUve,QAAQue,QAAQA,IAAIjjB,UAAUijB,IAAI1E,MAAM5Y,KAAKud,OAAOvd;;;SAGhDud,OAAOvd;IACrB,OAAOA,aAAaiB;;;ACTf,MAAMuc,qBAAqB;;SAUVC,aACtBrF,MACAwD;IAEA,IAAI7c,QAAQqZ,OAAO;QACjBA,OAAOA,KAAK9M,KAAKuD;QACjB,KAAKuJ,KAAK/d,QAAQ;YAEhB1B,QAAQK,MAAM;YACd,MAAM,IAAI2E;;;IAGd,MAAM+f,KAAK9B;IACX,MAAM8B,cAAc5U,cAAc;QAChCnQ,QAAQK,MAAM0kB;QACd/kB,QAAQK,MAAM;QACd,MAAM2E;;IAGR,IACE+f,OAAOja,SAASka,QAChBD,OAAOja,SAASma,mBAChBF,OAAOja,SAASoa,MAChB;QACAllB,QAAQK,MAAM0kB;QACd/kB,QAAQK,MAAM;QACd,MAAMiK;;IAmBR,MAAM6a,YAAYZ,QAAQ9E;IAC1B,IAAIM,YAAYN,OAAO;QAErB2F,iBAAMC,OAAOF,YAAYlC;WACpB,IAAI2B,OAAOnF,SAAgCiF,YAAYjF,OAAO;QACnE2F,iBAAMD,WAAWlC;WACZ;QACLjjB,QAAQK,MAAMof;QACdzf,QAAQK,MAAMwkB;QACd,MAAM7f;;IAIR,OAAOie;;;SC1COqC,MACd3J,OAEAC;IAEA,IAAI/H,QAAQ8H,UAAU4B,gBAAgB5B,QAAQ;QAC5C,MAAM4J,aAAmChB,QAAQ5I;QACjD,KAAK4J,WAAW7jB,QAAQ;YACtB1B,QAAQK,MAAM;YACd,MAAM,IAAIiK;;QAGZ,MAAMkb,oBAAoBrM,WAASyC;QACnC,MAAM6J,oBAAsDF,WAAW9P,IACrEiQ;YACE,MAAMrgB,WAAqB;gBAEzB,MAAMsgB,YAAYxK,iCAAiCpb,IAAI6b;gBACvD,IAAI+J,WAAW;oBACb,OAAOA;uBACF;oBACL,MAAMC,YAAY;wBAEhBJ,qBAAqBD,WAAW9P,IAAI1M,KAAKA,EAAE4P;;oBAE7CwC,iCAAiCxa,IAAIib,UAAUgK;oBAC/C,OAAOA;;cAXgB;YAc3BC,YACEH,QAEArgB;YAGF,OAAO,EAACqgB,QAAQrgB;;QAIpB,MAAMygB,cAA8B;YAClCL,kBAAkBpH,QAAQ,EAAE1C,OAAOtW;gBACjCsW,MAAMyB,iBAAiB/X;;;QAG3B,OAAOygB;WAMJ;QACH9lB,QAAQK,MAAMsb;QACd3b,QAAQK,MAAMub;QACd5b,QAAQK,MAAM0lB,wBAAwBhK;QACtC,MAAM,IAAI/W;;;;AAId,SAAS6gB,YACPlK,OACAC;IAGA,MAEI2B,gBAAgB5B,UAEhBe,WAAWd,YAEb;QACA5b,QAAQK,MAAMsb;QACd3b,QAAQK,MAAMub;QACd5b,QAAQK,MAAM0lB,wBAAwBhK;QAEtC,MAAM/W;;IAGR2W,MAAMiC,iBAAiBhC;IASvBoK,sBAAsB;QACpBC,QAAQtK;;IAIVD,SAASC,OAAOC;;;SAEFsK,QAAQvK;IACtBA,MAAMkC;;;SAGQoI,QAAQtK;IACtBA,MAAMmC;;;SCxHQqI,YAAYzG;IAE1B,MAAM0G,mBAAmB1G,QAAQhY;IACjC,IAAI0L,UAAUgT,mBAAmB;QAC/B,OAAOA;WACF;QACL,OAAOtb,SAASma,oBAAoBoB,gBAAgB3G;;;;AAGxD,SAAS2G,gBAAgBlhB;IACvB,OACEA,QACAA,KAAK0C,cACL1C,KAAK0C,eAAeiD,UAIpB;QAEA3F,OAAOA,KAAK0C;;IAEd,OAAO1C;;;ACnBT,SAASmhB,2BAA2BxD,YAAsByD;IACxD,OAAO,SAASvR,KAAcwR;QAC5B,MAAM9G,UAAU1K;QAChB,IACErB,SAAS6S,OAET;YACAR,sBAAsB;gBACpBlD,WAAW9N,KAAKwR;;eAIb,IACLjJ,gBAAgBiJ,OAEhB;YAEAlB,MAAMkB,MAAM;gBACV,MAAM7K,QAAQ6K;gBACd,IAAIL,YAAYzG,UAAU;oBACxBoD,WAAW9N,KAAKvD,OAAOkK;;;YAO3BqK,sBAAsB;gBAEpBlD,WAAW9N,KAAKvD,OAAO+U;;eAIpB;YACLxmB,QAAQK,MAAMmmB;YACdxmB,QAAQK,MAAM,aAAakmB;YAC3B,MAAMvhB;;;;;SC1BYyhB,iBAAiBngB,UAAyB;IAChE,KAAKkN,cAAclN,UAAU;QAC3BtG,QAAQK,MAAMiG;QACd,MAAM,IAAItB;;IAEZ5D,OAAOoU,QAAQlP,SAAS+X,QAAQ,EAAE1c,KAAKL;QACrC,WAAWA,UAAU,YAAY;YAC/BtB,QAAQK,MAAMiB;YACdtB,QAAQK,MAAM0b;YACd,MAAM/W;eACD;YACL,KAAK6a,UAAWle,MAAM;gBACpBsQ,QAAQtR,IAAIkf,WAAYle,KAAKL;mBACxB;gBACLtB,QAAQK,MAAMwf;gBACd7f,QAAQK,MAAM;gBACd,MAAM,IAAIiK;;;;IAIhB,OAAOuV;;;AC3BT,MAAM6G,YAA2B;IAC/B1kB,IAAI2kB,KAAwB3R,KAAc4R;QACxC,IAAIhT,WAAW+S,MAAM;YACnBxjB,MAAMwjB,KAAiBlgB,WAAW,EAACuO;eAG9B,IAAIvB,SAASkT,MAAM;YACxBhmB,MAAIgmB,KAAe,SAAS3R;eAEvB;YACLhV,QAAQ6mB,IAAID;YACZ5mB,QAAQK,MAAMsmB;YACd3mB,QAAQK,MAAM;YACd,MAAM2E;;;;;AAIZyhB,iBAAiB;IACfzkB,KACE8kB,MACA9R,KAEA4R;QAEA5mB,QAAQ6mB,IAAID;QACZN,2BAA2BvD,YAAY,OAAvCuD,CAA+CtR,KAAK8R;;IAmCtD9kB,KACEwkB,MACAxR,KACA4R;QAEA5mB,QAAQ6mB,IAAID;QACZN,2BAA2BxD,YAAY,OAAvCwD,CAA+CtR,KAAKwR;;;;ACpEjD,MAAMO,uBAAuB7P,OAAO;;iBAEzCwI,SACAzB,WACArC;IAMAoL,kBAAkBtH,SAASzB,WAAWsG,QAAQ3I;;;AAYhD,SAAgBoL,kBACdhS,KACAnV,OACAonB;IAEA,MAAMvH,UAAU1K;IAChBiS,UAAU5I,QAAS5a;QACjB,KAAKmQ,WAAWnQ,OAAO;YACrBzD,QAAQK,MAAMoD;YACdzD,QAAQK,MAAM0b;YACd,MAAM/W;;QAGR,KAAKuC,IAAImY,SAASqH,uBAAuB;YACvCpmB,MAAI+e,SAASqH,sBAAsB;;QAGpChnB,MAAIiV,KAAK+R,sBAEP3d,KAAK,EAACvJ,OAAO4D;QAChBqgB,aAAa9O,KAAKnV,OAAO4D;;;;SAGbyjB,gBACdlS;IAKA,IAAIzN,IAAIyN,KAAK+R,uBAAuB;QACjChnB,MAAIiV,KAAK+R,sBAGP1I,QAAQ,EAAExe,OAAO4D;YAEhBsgB,gBAAgB/O,KAAKnV,OAAO4D;;;;;SAIpB0jB,eACdnS;IAIA,IAAIzN,IAAIyN,KAAK+R,uBAAuB;QACjChnB,MAAIiV,KAAK+R,sBAAoD1I,QAC5D,EAAExe,OAAO4D;YAEPqgB,aAAa9O,KAAKnV,OAAO4D;;;;;ACjEjC,SAAS2jB,YACP1H,SACAD;IAMAA,KAAKC,QAAQtW,KAAKsW;IAIlB,EAAEA,SAASD;QACTre,OAAOoU,QAAQiK,KAAKI,YAAYxB,QAAQ,EAAEH,MAAM5c;YAC9C,IACEsS,WACEiM,UAAW3B,QAGb;gBACA2B,UAAW3B,MAAM5c,OAAOoe,SAASD;mBAC5B;gBACLzf,QAAQK,MAAMof,KAAKI;gBACnB7f,QAAQK,MAAM,wBAAwB6d;gBACtC,MAAM,IAAI5T;;;QAId,MAAM+c,aAAkCC,4BAAc5H;QACtDte,OAAO+d,OACLkI,YAGA5H,KAAKR;QAUP7d,OAAOoU,QAAQiK,KAAKE,UAAUtB,QAAQ,EAAE1c,KAAK4lB;YAC3CF,WAAW1lB,OAAO4lB,eAAe5O;YACjC2M,MAAMiC,gBAAgB;gBACpB,MAAM5L,QAAQ4L;gBACd,IAAIpB,YAAYzG,UAAU;oBACxB2H,WAAW1lB,OAAOga,MAAMhD;;;;QAe9BvX,OAAOoU,QAAQiK,KAAKG,SAASvB,QAAQ,EAAExe,OAAO2nB;YAC5C5H,QAAQF,SAAS7f,OAAO2nB;;MApD5B,CAsDG9H,SAASD;IAKZ,KAAIre,OAAOqmB,OAAOhI,KAAKE,cAAcve,OAAOqmB,OAAOhI,KAAKI,cACrDlN,KAAK,IAAI,GACTwD,OACCtP,KAAK0W,gBAAgB1W,IAItBwX,QAASxX;QACR,KAAKU,IAAImY,SAASgI,kBAAkB;YAClC/mB,MAAI+e,SAASgI,iBAAiB,IAAIxgB;;QAGnCnH,MAAI2f,SAASgI,iBAA6C9e,IAAI/B;;;;AC5D9D,MAAM6gB,kBAAkBxQ,OAAO;;AAKtC,SAASyQ,oBAAoB7lB;IAC3B9B,QAAQK,MAAMyB;IACd9B,QAAQK,MAAM;IACdL,QAAQK,MAAMwkB;IACd,MAAM7f;;;SA0BgBqgB,OACtB5F,MACA6D;IAEA,IAAIld,QAAQqZ,OAAO;QACjB,OAAQA,KACLhK,IAAIpO,KAAKge,OAAOhe,IAChBsL,KAAK,IAAI;;IAEd,IAAIQ,SAASsM,SAAS9L,SAAS8L,OAAO;QACpC,MAAMgE,WAAWF,eAAe9D;QAGhC,OAAOgE;WAIF,IAAIlG,gBAAgBkC,OAAoC;QAC7D,MAAMmI,WAAWnI;QACjB,MAAMgE,WAAWF,eAAe9R,OAAOmW;QAWvCtC,MAAMsC,UAAU;YACd,MAAMjM,QAAQiM;YACd,IAAIzB,YAAYzG,UAAU;gBACxB8D,WAAWC,UAAUhS,OAAOkK;;;QAGhC,MAAM+D,UAAU+D;QAChB9iB,MAAI+e,SAASgI,iBAAiB,IAAIxgB;QAEjCnH,MAAI2f,SAASgI,iBAA6C9e,IAAIgf;QAE/D,OAAOnE;WACF,IACL1E,aAAaU,OAEb;QACA,KAAI3d,MAAEA,QAAS2d;QACf,IAAI7L,WAAW9R,OAAO;YACpBA,OAAO6gB,gBAAgB7gB;;QAGzB,IAAI4d,UAKYjZ;QAChB,WAAW3E,SAAS,UAAU;YAC5B,IAAIA,SAAS,UAAU;gBAGrB,OAAOshB;mBACF,IAAIthB,SAAS,OAAO;gBAEzB4d,UAAUwD;mBACL,IAAIphB,SAAS,QAAQ;gBAE1B4d,UAAUkE;mBACL,IAAI,OAAO9hB,QAAQA,SAAS,QAAQ;gBACzC,MAAM+lB,eAAezE;gBAErBgC,iBAAMC,OAAO5F,KAAKP,WAAW2I;gBAE7B,OAAOA;mBAIF;gBACLnI,UAAU4D,YACNtW,gBAAgBsW,WAAWxhB,QAC3BuhB,oBAAoBvhB;;eAErB,WAAWA,QAAQ,YAAY;YAOpC,IAAI2R,SAAS3R,KAAK,kBAAkB;gBAElCV,OAAO+d,OACLM,KAAKR,OACL7J,KAAKC,MAAMD,KAAKE,UAAU;uBAAKxT,KAAK;uBAAoB2d,KAAKR;;;YAOjE,MAAMyD,YAAYtN,KAAKC,MACrBD,KAAKE,UAAU;mBACVmK,KAAKR;mBACL7d,OAAO6R,YACR7R,OAAOoU,QAAQiK,KAAKE,UAAUlK,IAAI,EAAE9T,KAAKL;oBACvC,OAAO,EAACK,KAAKL,MAAMA;;;YAK3Boe,UAAU+C,mBACR3gB,MACA4gB,WACAjD,KAAKP;eAGF;YACLyI,oBAAoBlI;;QAoBtB,IACE3d,SACC8R,WAAW9R,SAAS6R,SAAS7R,QAK9B;YAEA,KACG+gB,YAAY/gB,OAEb;gBACA,IAAI4d,SAAS;oBACX0F,iBACE3F,KAAKP,SAASzJ,IAAI5O;wBAChB,IAAI/E,SAAS,SAASid,aAAalY,IAAI;4BAGrC,OAAOwe,OAAOxe,GAAGsc;+BACZ,IAAIrhB,SAAS,UAAUid,aAAalY,IAAI;4BAC7C,OAAOwe,OAAOxe,GAAG8c;+BACZ,IAAIL,aAAavE,aAAalY,IAAI;4BACvC,OAAOwe,OAAOxe,GAAGyc;+BACZ;4BACL,OAAO+B,OAAOxe;;wBAIlB6Y;;;;QAUR,IAAIA,SAAS;YACX0H,YAAY1H,SAASD;;QAGvB,OAAOC;WACF;QACLiI,oBAAoBlI;;;;ACzPxB,MAAMqI,uBAAiD,IAAI5hB;;SAK3C6hB,qBAAqBC;IACnC,OAAO3C,OACLvY,EAAc,QAAQ;QAAEmb,MAAMD;QAAKE,KAAK;;;;ACT5C,SAASC,cAAcC;IACrB,MAAMC,aAAaC,mBAAmBvoB,IAAIqoB;IAC1C,IAAIC,YAAY;QACd,OAAOA;WACF;QACL,MAAME,UAAUC,IAAIC,gBAClB,IAAIC,KAAK,EAACN,UAAS;YAAEtmB,MAAM;;QAE7BwmB,mBAAmB3nB,IAAIynB,QAAQG;QAC/B,OAAOA;;;;AAGX,MAAMD,qBAAqB,IAAIpiB;;SCTfyiB,cACd9R,SACAP,SACAsS;IAEA/R,UAAUA,QAAQvF;IAClB,MAAMsP,SAAS/J;IACf,KACG9W,MAAI+nB,sBAAsBlH,SAE3B;QACAjgB,MAAImnB,sBAAsBjR,SAAS,IAAI3P;;IAGzC,IAAIoP,SAAS;QACXvW,MAAI+nB,sBAAsBlH,QAAQhY,IAAIuf,cAAc7R;WAC/C,IAAIsS,SAAS;QAClB7oB,MAAI+nB,sBAAsBlH,QAAQhY,IAAIggB;;;;SCnB1BC,kBAAkBC,cAA4BlI;IAI5D,MAAMmI,cAAcD,aAAaE;IACjC,MAAMC,eAAeH,aAAarI,QAAQ1P,MAAMgY,YAAYrnB;IAC5D,MAAMwnB,iBAAiBH;IAEvB,MAAMI,gBAAgBD,eAAe/hB,MAAM;IAC3C,MAAMiiB,yBAAyBD,cAC5B1T,IAAI4T;QACH,IAAIC,iBAAiB1I,SAAS,MAAMyI;QAEpC,IAAIA,gBAAgB/J,WAAW,MAAM;YACnCgK,iBACEA,iBAAiB,MAAMD,gBAAgBtV,QAAQ,KAAK6M;;QAExD,OAAO0I;OAERpY,KAAK;IAOR,OAAO;QAOL8X,cAAcI;QACd3I,SAAS2I,yBAAyBH;QAGlCjnB,CAACkV,OAAOK,cAAc;;;;SC5BVuJ,eACdyI,eACA3I;IAEA,OAAO2I,cACJ9T,IAAKkL;QACJ,IAAIP,eAAeO,UAAU;YAC3B,MAAM6I,eAAeX,kBAAkBlI,SAASC;YAEhD,OAAO4I;eACF,IAAInJ,eAAeM,UAAU;YAKlC,OAAOD,mBAAmBC,SAASC;eAC9B,IAAIN,gBAAgBK,UAAU;YAEnCgI,cAAc/H,QAAQna,WAAWka,QAAQsH;YACzC;eACK;YACL,OAAOtH;;OAGVxK,OAAO3T;;;SC9BIinB,aAAajD;IAC3B,MAAMkD,eAAerE,OACnBvY,EAAc,SAAS,EAAC0Z;IAK1B,MAAMmD,gBAAgBzF;IACtBlB,YAAY2G,cAAc1E,iBAAiByE;IAE3C,OAAOvjB,MAAM8P,KACXlW,MACEA,MAAI2pB,cAAc,UAElB;;;SCdUE,iBAAiBpD,MAAc5F;IAC7C,MAAMiJ,aAAaC,uBAAuB/pB,IAAIymB;IAC9C,IAAIqD,YAAY;QACd,OAAOA;WACF;QACL,MAAME,MAAMvD;QACZ,MAAMwD,WAAWP,aAAaM;QAC9B,MAAME,WAAWnJ,eAAekJ,UAAUpJ,QAAQzK,OAAO3T;QAGzD,MAAM0nB,aAAa3J,kBAAkB0J;QAErCH,uBAAuBnpB,IAAI6lB,MAAM0D;QACjC,OAAOA;;;;AAGX,MAAMJ,yBAAyB,IAAI5jB;;SCjBnBikB,kBAAkB3D,MAAc5F;IAG9C,MAAMmJ,MAAMvD;IACZ,MAAM0D,aAAaN,iBAAiBG,KAAKnJ;IAGzC+H,cAAc/H,QAAQsJ;;;SCTRE,cACdC,kBACApH;IAEA,OAAO,IAAIzX,QAAQ8e;QACjB,MAAMC,eAAe;YACnBF,iBAAiBG,SAASH,iBAAiBI,UAAU;YACrDH;;QAGFD,iBAAiBG,SAASD;QAC1BF,iBAAiBI,UAAUF;QAC3BvH,YAAYC,WAAWoH;;;;SCLXK,iBACd9J,QACA+J;IAEA,OAAOnf,QAAQof,IACb,KAAI7qB,MAAI+nB,sBAAsBlH,UAASnL,IAAIoV;QACzC,IACExG,iBAAiB,gCAAgCwG,cAAcnpB,QAC/D;YACA,OAAO8J,QAAQsf;eACV;YAEL,OAAOV,cAAcrC,qBAAqB8C,WAAWF;;;;;uBCrBnB5oB;IACxC,OAAO,IAAIqS,MAAMrS,QAAQ;QACvBC;YACE,OAAO;;QAETA;YACE,OAAO;;QAETA;YACE,OAAO;;QAETA;YACE,OAAO;;;;;SCZG+oB,aAAatO;IAC3B,OAAOjR,QAAQsf,UAAUE,KAAK,MAAMvO;;;SCsBtBwO,UAAUjW;IACxB,IAAI5O,QAAQ4O,MAAM;QAChBA,IAAIqJ,QAAQxX;YACVokB,UAAUpkB;;WAEP,IACL+d,OAAO5P,MAEP;QAEAmS,eAAenS;QAGf,IACEzN,IAAIyN,KAAK0S,kBAET;YACC3nB,MAAIiV,KAAK0S,iBAGPrJ,QAAS1C;gBACRsK,QAAQtK;gBAGRA,MAAMgC;;;QAGZ,IACEpW,IAAIyN,KAAKkW,mBAET;YACCnrB,MAAIiV,KAAKkW,kBAA2C7M,QAClD1C;gBACCsK,QAAQtK;;;QASd,IAAIpU,IAAIyN,KAAKmW,oBAAoB;YAC/B,MAAMC,eAAerrB,MAAIiV,KAAKmW;YAI9BC,aAAa/M,QAAQ,EAAE1C,OAAOC;gBAC5B,MAAM4C,gBAAgBvD,6BAA6Blb,IAAI6b;gBAIvD,IAAI4C,eAAe;oBACjB7C,MAAMuB,eAAesB;;;;QAI3ByM,UAAUhH,cAAcjP;;;;SAKZqW,YAAYrW;IAC1B,IAAI5O,QAAQ4O,MAAM;QAChBA,IAAIqJ,QAAQxX;YACVwkB,YAAYxkB;;WAET,IACL+d,OAAO5P,MAEP;QAKAkS,gBAAgBlS;QAWhB,IACEzN,IAAIyN,KAAKkW,mBAET;YACCnrB,MAAIiV,KAAKkW,kBAA2C7M,QAClD1C;gBACCuK,QAAQvK;;;QAId,IAAIpU,IAAIyN,KAAKmW,oBAAoB;YAC/B,MAAMC,eAAerrB,MAAIiV,KAAKmW;YAI9BC,aAAa/M,QAAQ,EAAE1C,OAAOC;gBAC5B,MAAM4C,gBAAgBvD,6BAA6Blb,IAAI6b;gBAIvD,IAAI4C,eAAe;oBACjB7C,MAAMwB,kBAAkBqB;;;;QAI9B6M,YAAYpH,cAAcjP;;;;ACtIvB,MAAMsW,cAAcpU,OAAO;;;;ACS3B,MAAMxM,2BAA2BwM,OAAO;;AACxC,MAAMqU,yBAAyBrU,OAAO;;SAgB7BxN,kBAAkB8hB;IAChCC,WAAW5pB,UAAU6H,kBAAkBjG,KAAK+nB;;;SAG9B3hB,qBAAqB2hB;IACnCC,WAAW5pB,UAAUgI,qBAAqBpG,KAAK+nB;;;MAEpCC,mBAAmBtb;IA0B9BnO;QACE0pB;QAHF9qB,aAAgB;QAId,MAAM+qB,eAAe5rB,MAAIa,KAAK+C,aAAa;QAE3C,MAAMioB,QAA6BjW,4BAA4B/U;QAE/D,IAAI6S,SAASkY,eAAe;YAI1BvqB,OAAO+d,OAAOyM,OAAOD;;QAKvB,IAAI5gB,iBAAiB8gB;YACnBA,UAAUxN,QAAQyN;gBAChB,IAAIA,SAAShqB,QAAQ,cAAc;oBACjC9B,QAAQ6mB,IACN,SAASiF,SAASC,gBAAgB;oBAEpC,MAAMnQ,WAAW7b,MAAIa,MAAM8J;oBAE3B,IAAIshB,gBAAgBF,SAASC;oBAC7B,IACEC,iBACAtP,WACEd,WAGF;wBAEAA,SAASnY,KAAK7C,MAAMorB;;;;WAKzB/gB,QAAQrK,MAAM;YAAEqrB,YAAY;;;IA7DjCjqB;QACE+oB,aAAa;YACXM,YAAYzqB;;;IAGhBoB;QACE+oB,aAAa;YACX,KAAKnqB,KAAK0qB,cAAc;gBACtB1qB,KAAK0qB,eAAe;gBACpB,MAAM1P,WAAW7b,MAAIa,MAAM2qB;gBAC3B,IAAI3X,WAAWgI,WAAW;oBAExBmP,aAAa;wBACXnP,SAASnY,KAAK7C;;;;YAIpBqqB,UAAUrqB;;;;;OAKb0qB;;ACzDH,MAAMY,wBAAwBhV,OAAO;;AAC9B,MAAMiU,oBAAoBjU,OAAO;;AACjC,MAAMgU,mBAAmBhU,OAAO;;AA8DhC,MAAMiV,mBAAmBjV,OAAO;;AACvC,MAAMkV,gBAAgBlV,OAAO;;AAC7B,MAAMmV,oBAAoBnV,OAAO;;AACjC,MAAMoV,gBAAgBpV,OAAO;;AAC7B,MAAMqV,kBAAkBrV,OAAO;;AAO/B,SAASsV,gBAAgBC;;IACvB,IAAI7Y,WAAW6Y,UAAU;QACvB,MAAMC,eAAexR,uBAAuBnb,IAAI0sB;QAChD,IAAIC,cAAc;YAChB,OAAOA;;QAGT,MAAMf,eAAe5rB,MAAI0sB,SAAS;QAClC,MAAM1C,MAAMhqB,MAAI0sB,SAAS;QACzB,MAAME,kBAAkBlB;YAQtBzpB,YACE0gB,YAAiC,IACjCxD,WAAyB;gBAEzBwM;gBAVF9qB,WAAyD;gBAsJzDA,WAAgB;gBA1Id,MAAMmpB,MAAMhqB,MAAIa,KAAK+C,aAAa;gBAElC,IAAIomB,KAAK;oBACP,MAAMnJ,SAAShgB,KAAKgW,QAAQtF;oBAC5B,KACGvR,MAAI+nB,sBAAsBlH,SAE3B;wBACAjgB,MAAImnB,sBAAsBlH,QAAQ,IAAI1Z;wBAGtCtG,KAAKsrB,yBAAyB;4BAC5B,OAAOnB,aAAa;gCAClBZ,kBAAkBJ,KAAKnJ;;;;;gBAgB/B,MAAMgL,QAA6BjW,4BAA4B/U;gBAM/D,IAAI6S,SAASiP,YAAY;oBACvBthB,OAAO+d,OAAOyM,OAAOlJ;;gBAMvB,MAAMzD,QAAQ2M;gBACd7O;gBAEA,MAAM6P,kBAAkBxrB,OAAO6R,YAC7B7R,OAAOoU,QAAQyJ,OAAOxJ,IAAI,EAAE9T,SAAS,EACnCA,KACA;oBAEE,MAAMsqB,aAAatW,4BAA4B/U;oBAI/C,MAAM+a,QAAQ,IAAI6B;oBAClBnc,eAAesa,OAAO,SAAS;wBAC7B3Z;4BACE,OAAOjC,MAAIksB,YAAYtqB;;wBAEzBmB,cAAc;;oBAGhB,OAAO6Y;kBAdT;gBAkBJ/a,KAAKurB,oBAAoBS;gBAIzB,MAAMC,eAAeC,cACnB1rB,OAAO6R,YACL7R,OAAOoU,QAAQoX,iBAAiBnX,IAAI,EAAE9T,KAAKL,WAAW,EACpDK,KACAmrB,cAAcxrB;gBAKpB,IAAIyrB;gBAMJ;oBACEA,qBAAqB5pB,MAAMspB,SAAShmB,WAAW,EAC7ComB,cACA3N,SAASvM,KAAK,IAAI;kBASpB,OAAOtS;oBACP4c;oBACAjd,QAAQK,MAAM;oBACd,MAAMA;;gBAQR0sB,qBAAqBxI,QAAQwI;gBAC7B,IAAIhN,YAAYgN,qBAAqB;oBACnC,MAAMC,YAE6BzI,QACjCwI;oBAGFnsB,KAAKyrB,qBAAqBW,UAAUra,KAAKuD,UAAUC,OAAO3T;oBAC1D5B,KAAK0rB,iBAAiBhQ;oBACtB1b,KAAK2rB,mBAAmBhQ;oBACxB3b,KAAKsqB,oBAAoB9O;oBACzBxb,KAAKuqB,qBAAqB1P;oBAC1BwB;uBACK;oBACLA;oBACAjd,QAAQK,MAAM0sB;oBACd/sB,QAAQK,MAAMwkB;oBACd,MAAM7f;;;YAwBVhD,OAlKCmqB,uBAoJOvJ,sBAEP0I,aAYAC;gBACC,MAAM0B,oBAAoB;oBAExBnK,WAAWliB,MAAM;oBAEjB,OAAO8pB,iBAAiB9J,QAAQ9V,SAASoa;;gBAE3C,MAAMgI,qBAAqB;oBAGzB9H,iBAAMxkB,KAAKwrB,gBAAgBxrB,MAAM;oBACjCA,KAAKsrB,yBAAyBzlB;;gBAEhC,KAAK7F,KAAKwrB,gBAAgB;oBACxB,MAAMe,YAAYvsB,KAAKyrB;oBACvB,IAAIc,WAAW;wBACbvsB,KAAKwrB,iBAAiB/G,OAAO8H,WAAWxa,KAAKuD;wBAC7CtV,KAAKyrB,qBAAqB;;;gBAK9B,MAAMtC,MAAMhqB,MAAIa,KAAK+C,aAAa;gBAClC,MAAMid,SAAShgB,KAAKgW,QAAQtF;gBAC5B,IAAIyY,KAA4C;oBAC9C,MAAMqD,eAAexsB,KAAKsrB;oBAC1B,IAAIkB,cAAc;wBAChBA,eACGpC,KAAKiC,mBACLjC,KAAKkC;2BACH;wBACL1hB,QAAQsf,QAAQmC,mBAAmBjC,KAAKkC;;uBA2BrC;oBAEL9H,iBAAMxkB,KAAKwrB,gBAAgBxrB;;;YAG/BoB;gBACE+oB,aAAa;oBACXrhB,kBAAkB9I;oBAUlBA,KAAK0rB,eAAejO,QAAQ7V;wBAC1BuiB,aAAaviB;;;;YAOnBxG;gBACE+oB,aAAa;oBACXlhB,qBAAqBjJ;oBACrBA,KAAK2rB,iBAAiBlO,QAAQ7V;wBAC5BuiB,aAAaviB;;;;YAOnBxG,CAAC0I,0BACCwT;gBAMA,IAAItd,KAAK0qB,cAAc;oBACrB;wBACE,MAAM+B,oBAAoBzsB,KAAKurB,kBAAkBjO;wBAKjD,IAAImP,mBAAmB;4BAErBA,kBAAkB1P;;;;;;QA5HnBgP,gBAAoB/J;QACpB+J,gBAAMhZ,SAASoW,QAAQA,MAAMA,MAAMtjB;QAInCkmB,yBAAelZ,SAASkY,gBAC3BvW,KAAKC,MAAMD,KAAKE,UAAUqW,iBAC1BllB;QAyINyU,uBAAuBva,IAAI8rB,SAASE;QACpC,OAAOA;WACF;QACL3sB,QAAQK,MAAMosB;QACdzsB,QAAQK,MAAM0b;QACd,MAAM/W;;;;AAGV,wBACgBynB,WACd9J,gBAAgB8J;;SACF9J,gBACd8J;IAEA,IAAIvM,0BAA0BuM,UAAU;QACtC,OAAOA;WACF,IAAI7Y,WAAW6Y,UAAU;QAC9B,OAAOD,gBAAgBC;WAClB;QACL,MAAMznB;;;;WC9URlD,MACAwrB,oBACGpO;IAEH,IAAItL,WAAW9R,OAAO;QACpBA,OAAO6gB,gBAAgB7gB;;IAIzB,IAAI+R,QAAQyZ,kBAAkB;QAC5B,OAAOnqB,MAAM2J,eAAerG,WAAW,EACrC3E,MACA2E,WACA,KAAI6mB,oBAAoBpO,WAAUvM,KAAK,IAAI;WAOxC;QACL,OAAOxP,MAAM2J,eAAerG,WAAW,EACrC3E,MACAwrB,oBACGpO;;;;AAqBT,SAASpS,cACPhL,MACAmd,QAAsB,OACnBC;IAMH,IAAIqO,iBACF5Z,SAAS7R,SAAS8R,WAAW9R,QAAQA,OAAO;IAC9C,MAAM0rB,kBAAkBha,cAAcyL,SAASA,QAAQ;IACvD,MAAMwO,qBAAmCvO,SACtCvM,KAAKuD,UACLT,IAAIpO,KAAMA,MAAM,IAAI,MAAMA,GAC1B8O,OAAO9O,OAAOA;IACjB,IACEsM,SAAS4Z,iBAET;QACAA,iBAAiBA,eAAevZ,OAAO1C;;IAGzC,IAGE,OAAOic,gBACP;QACA,OAAOE;WACF;QAcL,OAAOtqB,MAAM6b,sBAAsBvY,WAAW,EAC5C8mB,gBACAC,iBACAC;;;;ACxHC,MAAM1H,wBAAwB;;AACrC,MAAM2H,iBAAiBxW,OAAO;;AAC9B,MAAMyW,kBAAkBzW,OAAO;;AAC/B,MAAM0W,gBAAgB1W,OAAO;;AAC7B,MAAM2W,iBAAiB3W,OAAO;;AAC9B,MAAM4W,aAAa5W,OAAO;;AAC1B,MAAM6W,cAAc7W,OAAO;;kBAGzB8W,UACAC,QACAC;;IAEA,MAAM3Q,gBAAgByQ,aAAa5a,UAAU4a,YAAY;QACvDhuB,QAAQK,MAAM2tB;QACdhuB,QAAQK,MAAM0lB;QACd,MAAM/gB;;IAER,EAACipB,QAAQC,UAAS7P,QAAQhX;QACxB,MAAMgM,YAAYhM,MAAM0Y,YAAY1Y,KAAK;YACvCrH,QAAQK,MAAMgH;YACdrH,QAAQK,MAAMwkB;YACd,MAAM,IAAI7f;;;IAGd,MAAMsB,UAAU;QAAE6nB,MAAMF;QAAQG,OAAOF;;IACvC,MAAMG,cAActuB,MAAIuG,SAAS;IACjC,MAAMgoB,eAAevuB,MAAIuG,SAAS;IAClC,MAAMioB,kBAAkB9C;QAAxBzpB;;YAKEpB,WAAgB;YAChBA,WAAiC,EAACytB,cAAa1b,KAAK,IAAI,GAAGwD,OAAO3T;YAKlE5B,WAAkC,EAAC0tB,eAChC3b,KAAK,IAAI,GACTwD,OAAO3T;;QA2BVR,OApCQ4gB,sBACP0I,kBACAoC,qBAKAC;QA6BAI;YACChL,WAAWniB,MAAM;YACjB,IAAIA,KAAK+sB,kBAAkB;gBACzB,KAAK/sB,KAAKitB,iBAAiB;oBAEzBjtB,KAAKitB,kBAAkBxI,OAAOzkB,KAAK+sB;oBAEnC/sB,KAAK+sB,mBAAmB;;;YAI5B,MAAMa,iBAAiB5tB,KAAKitB;YAC5BzI,iBAAMoJ,gBAAgB5tB;YAEtBqqB,UAAUuD;YACV,IAAI5tB,KAAKgtB,gBAAgB;gBACvBvC,YAAYzqB,KAAKgtB;;;QAKrB5rB,CAAC8rB;YACC/K,WAAWniB,MAAM;YACjB,IAAIA,KAAK8sB,iBAAiB;gBACxB,KAAK9sB,KAAKgtB,gBAAgB;oBACxBhtB,KAAKgtB,iBAAiBvI,OAAOzkB,KAAK8sB;oBAIlC9sB,KAAK8sB,kBAAkB;;;YAK3B,MAAMc,iBAAiB5tB,KAAKgtB;YAC5BxI,iBAAMoJ,gBAAgB5tB;YACtBqqB,UAAUuD;YAEV,IAAI5tB,KAAKitB,iBAAiB;gBACxBxC,YAAYzqB,KAAKitB;;;QAKrB7rB,CAACupB;YACC,MAAMK,QAAgCtE,4BAAc1mB;YAEpD,IAAI,SAASgrB,MAAM,UAAU;gBAC3B7rB,MAAIa,MAAMktB,YAAYrqB,KAAK7C;mBACtB,KAAKgrB,MAAM,UAAU;gBAI1B7rB,MAAIa,MAAMmtB,aAAatqB,KAAK7C;;;QAIhCoB;YACE0H,kBAAkB9I;;QAoBpBoB;YACE6H,qBAAqBjJ;;QAKvBoB,CAAC0I,0BACCwT;YAEA,IAAItd,KAAK0qB,cAAc;gBAErB,IAAIpN,SAAS,SAAS;oBACpB,MAAM0N,QAA6BtE,4BAAc1mB;oBAEjD,IAAI,SAASgrB,MAAM,UAAU;wBAC3BhrB,KAAKktB;2BAEA,KAAKlC,MAAM,UAAU;wBAC1BhrB,KAAKmtB;;;;;;IApINQ,gBAAoB3L;IA8I7B,MAAMnD,OAAO3S,EAAcyhB,WAAW;QAAEjtB,OAAO0sB;;IAC/C,OAAOvO;;;SCjNOgP,WAAWC;IACzB,KAAKA,KAAK;QACR,MAAM,IAAI1pB;;;;SCME2pB,oBAAsCtnB;IACpD,MAAMunB,YAAY;IAGlB,MAAM7sB,SAASsF;IACf,OAAO,IAAI+M,MAAMrS,QAAQ;QACvBC,yBAAyBD,QAAQJ;YAE/B,IAAI4R,SAAS5R,MAAM;gBACjB;mBACK;gBACL,OAAOkC,yBAAyB9B,QAAQJ;;;QAG5CK,QAAQD;YACN,IAAI2U,UAAU3W,MAAIgC,QAAQ;YAC1B,MAAM8sB,aAAapb,SAASiD,WAAWA,UAAUA,QAAQkY;YAEzD,OAAOzoB,MAAM8P,KAAK,IAAI/O,IAAI,KAAI2N,UAAQ9S,YAAY8S,UAAQga;;QAM5D7sB,IAAID,QAAQJ;YACV,MAAM+U,UAAU3W,MAAIgC,QAAQ;YAC5B,MAAM8sB,aAAapb,SAASiD,WAAWA,UAAUA,QAAQkY;YACzD,OAAOrnB,IAAIxF,QAAQJ,QAAQ4F,IAAIsnB,YAAYltB;;QAE7CK,IAAID,QAAQJ;YACV,IAAI4F,IAAIxF,QAAQJ,MAAM;gBACpB,OAAO5B,MAAIgC,QAAQJ;mBACd;gBACL,MAAM+U,UAAU3W,MAAIgC,QAAQ;gBAC5B,MAAM8sB,aAAmDztB,OACvDsV;gBAGF,IAAInP,IAAIsnB,YAAYltB,MAAM;oBAExB,MAAMmtB,WAAW/uB,MAAI8uB,YAAYltB;oBACjC,OAAO+a,WAAWoS,YAAYA,SAAS9jB,KAAK6jB,cAAcC;;;;;;;kBClBlEnT,OACAC,UACAmT;IAEA,OAEK3oB,QAAQuV,UAAU4B,gBAAgB5B,WAEnCe,WAAWd,YAEb;QACA5b,QAAQK,MAAMsb;QACd3b,QAAQK,MAAMub;QACd5b,QAAQK,MAAM0lB,wBAAwBhK;QAEtC,MAAM/W;;IAER,MAAMgqB,cAEJzK,QAAQ5I;IACV,KAAKqT,YAAYttB,QAAQ;QACvB1B,QAAQK,MAAM;QACd,MAAM,IAAIiK;;IAaZ,MAAMob,SAASuJ,cAAcD,aAAapT,UAAUmT;IAEpD,OAAOrJ;;;AAGT,SAASuJ,cACPtT,OACAC,UACAmT;IAEA,MAAMG,gBAAgB,IAAI1R;IAC1B,MAAM2R,SAAS;QAEb,MAAM7tB,QAAQ6B,MAAMyY,UAAUnV,WAAWkV,MAAMlG,IAAI2Z,MAAMA,GAAGzW;QAE5D,MAAM0W,gBAAgB9R,gBAAgBjc,SAASA,MAAMqX,YAAYrX;QAEjE,IAAImS,SAAS4b,kBAAkB9Q,YAAY8Q,gBAAgB;YACzD,OAAOA;eACF;YACLrvB,QAAQK,MAAMgvB;YACd,MAAMrqB;;;IAIV,IAAIsqB,YAAYH;IAMhB9tB,eAAe6tB,eAAe,SAAS;QACrCvuB,KAAKiT,WAAWmb,UAAUA,SAAStoB;QACnC1G,KAAKovB;QACLrsB,cAAc;;IAGhB6Y,MAAM0C,QAAQ1C;QACZ2J,MAAM3J,OAAO;YACX,IAAI4T,WAAWJ;YACf,IAAII,aAAaD,WAAW;gBAC1BJ,cAAcvR;gBAEd2R,YAAYC;;;;IAMlB,OAAOZ,oBAAoBO;;;ACnH7B,MAAMM,eAAetoB,IAAIrF;;AACzB,MAAM4tB,eAAevpB,IAAIrE;;AACzB,SAAS6tB,UAAUroB;IACjB,OAAOA,aAAamE;;;AAEtB,SAASmkB,OAAOtoB;IACd,OAAOA,aAAanG;;;AAEtB,SAAS0uB,SAASvoB;IAChB,OAAOA,aAAawoB;;;AAEtB,SAAS3b,QAAM7M;IACb,OAAOA,aAAanB;;;AAEtB,SAAS+N,QAAM5M;IACb,OAAOA,aAAaH;;;AAEtB,SAASd,UAAQiB;IACf,OAAOlB,MAAMC,QAAQiB;;;AAGvB,MAAM4K,YAAUjP,OAAOiP;;AACvB,gBACE4C,2BACAwG,yBACAlY,oBACAiY,6BACA/Z,uBACAtB,iCACA8D,4CACAI,uBACAsD,YAEA5G,OAAGsC,gBACHA,kBACEgP;;AACJ,SAASwB,WAASpM;IAChB,cAAcA,MAAM,YAAYA,MAAM;;;AAExC,SAASuM,aAAWvM;IAClB,cAAcA,MAAM;;;AAoBtB,SAASyoB,mBAGP/tB,QACA6Z,UACAmU,YAA2B,IAC3BC,WAAWjuB;IAEX,KACG6R,aAAWgI,WAGZ;QACA5b,QAAQK,MAAMub;QACd5b,QAAQK,MAAM;QACd,MAAMiK;;IAWR,IAAIolB,UAAU3tB,WAAW6tB,SAAS7tB,WAAW4tB,OAAO5tB,SAAS;QAC3D,OAAOA;;IAET,IAAI6R,aAAW7R,WAAW0R,WAAS1R,SAAS;QAG1C,IAAIkuB;QACJ,IAAIhc,QAAMlS,SAAS;YACjBkuB,UAAU,IAAI/oB,IAAI,KAAInF;YACtBpB,MAAIsvB,SAAS,OAAQ3uB;gBACnBkuB,aAAa5mB,IAAInF,KAAK1B,QAAQT;gBAC9Bsa,SAASoU,UAAUD,WAAWtpB,WAAWA;gBAEzC,OAAO+oB,aAAa5mB,IAAInF,KAAKwsB,SAAS3uB;;YAExCX,MAAIsvB,SAAS,UAAW3uB;gBACtBkuB,aAAahqB,OAAO/B,KAAK1B,QAAQT;gBACjCsa,SAASoU,UAAUD,WAAWtpB,WAAWA;gBACzC,OAAO+oB,aAAahqB,OAAO/B,KAAKwsB,SAAS3uB;;YAE3CX,MAAIsvB,SAAS,SAAS;gBACpBT,aAAahL,MAAM/gB,KAAK1B;gBACxB6Z,SAASoU,UAAUD,WAAWtpB,WAAWA;gBACzC,OAAO+oB,aAAahL,MAAM/gB,KAAKwsB;;eAG5B,IAAI/b,QAAMnS,SAAS;YACxBkuB,UAAU,IAAI/pB,IAAI,KAAInE;YACtBpB,MAAIsvB,SAAS,SAAS;gBACpBR,aAAajL,MAAM/gB,KAAK1B;gBACxB6Z,SAASoU,UAAUD,WAAWtpB,WAAWA;gBACzC,OAAOgpB,aAAajL,MAAM/gB,KAAKwsB;;YAEjCtvB,MAAIsvB,SAAS,OAAO,CAACtuB,KAAUL;gBAC7BmuB,aAAa9uB,IAAI8C,KAAK1B,QAAQJ,KAAKL;gBACnCsa,SAASoU,UAAUD,WAAWtpB,WAAWA;gBACzC,OAAOgpB,aAAa9uB,IAAI8C,KAAKwsB,SAAStuB,KAAKL;;YAE7CX,MAAIsvB,SAAS,UAAW3uB;gBACtBmuB,aAAajqB,OAAO/B,KAAK1B,QAAQT;gBACjCsa,SAASoU,UAAUD,WAAWtpB,WAAWA;gBACzC,OAAOgpB,aAAajqB,OAAO/B,KAAKwsB,SAAS3uB;;eAEtC,IAAI8E,UAAQrE,SAAS;YAC1BkuB,UAAU;eAIL,IAAIrc,aAAW7R,SAAS;YAC7BkuB;eACK;YACLA,UAAU;;QAEZ,KAAKhc,QAAMlS,YAAYmS,QAAMnS,SAAS;YACpCkB,eAAegtB,SAAS;;QAG1B,OAAO,IAAI7b,MAAM6b,SAAS;YACxBjuB,eAAewI,GAAGtC,GAAGb;gBACnBuU,SACEoU,UACA,KAAID,WAAWte,OAAOvJ,MAEtBX,MAAIF,GAAG,WAAWA,EAAE/F,QAAQsS,aAAWvM,EAAEtH,OAAOsH,EAAEtH,QAAQ0G,WAC1D1G,MAAIgC,QAAQmG;gBAEd,OAAO7G,iBAAeU,QAAQmG,GAAGb;;YAEnCrF,eAAewI,GAAGtC;gBAChB0T,SACEoU,UACA,KAAID,WAAWte,OAAOvJ,MACtBzB,WACA1G,MAAIgC,QAAQmG;gBAId,OAAOmT,iBAAetZ,QAAQmG;;YAEhClG;gBACE,OAAO6S,UAAQ9S;;YAEjBC,IAAIwI,GAAGtC;gBACL,OAAOX,MAAIxF,QAAQmG;;YAErBlG;gBACE,OAAOiC,iBAAelC;;YAExBC,eAAewI,GAAGlB;gBAChB,OAAOrG,eAAelB,QAAQuH;;YAEhCtH,UAAUwI,GAAG0lB;gBACX,IACEtc,aAAW7R,SAEX;oBACA,OAAOqZ,YAAUrZ,QAAQmuB;;;YAG7BluB,MAAMwI,GAAG2lB,SAASC;gBAEhB,IAAIxc,aAAW7R,SAAS;oBAgBtB,OAAOoB,QAAMpB,QAAQouB,SAASC;;;YAMlCpuB,yBAAyBwI,GAAGuB;gBAC1B,IAAIskB,aAAaxsB,2BAAyB9B,QAAQgK;gBAClD,IAAI3F,UAAQrE,WAAWgK,MAAM,UAAU;oBACrC,OAAOskB;uBACF;oBACL,IAAIA,YAAY;wBACdA,WAAWvtB,eAAe;wBAC1B,OAAOutB;2BACF;wBACL;;;;YA6BNruB,IAAIwI,GAAGuB,GAAGzC;gBAER,IACEsK,aAAWgI,WAEX;oBAEAA,SACEoU,UACA,KAAID,WAAWte,OAAO1F,MACtBzC,GACAvJ,MAAIgC,QAAQgK;;gBAKhB,OAAOpL,MAAIoB,QAAQgK,GAAGzC;;YAWxBtH,IAAIwI,GAAGuB;gBAEL,IAAIzK,QAAQvB,MAAIgC,QAAQgK;gBAExB,IAAI6H,aAAWtS,WAAW2S,QAAMlS,WAAWmS,QAAMnS,UAAU;oBACzD,OAAOhC,MAAIkwB,SAASlkB,GAAGf,KAAKilB;;gBAE9B,IAAIrc,aAAWtS,UAAUmS,WAASnS,QAAQ;oBAcxC,OAAOwuB,mBACLxuB,OACAsa,UACA,KAAImU,WAAWte,OAAO1F,MAEtBhK;uBAGG;oBACL,OAAOT;;;;WAKR;QACL,OAAOS;;;;AAGX,SAAwBuuB,iBAEtBvuB,QAAW6Z;IACX,KACGhI,aAAWgI,WAEZ;QACA5b,QAAQK,MAAMub;QACd5b,QAAQK,MAAM;QACd,MAAMiK;;IAQR,KACGsJ,aAAWQ,QAEZ;QACApU,QAAQK,MAAM;QACd,MAAMiK;;IASR,IAAIsJ,aAAW7R,WAAW0R,WAAS1R,SAAS;QAC1C,OAAO+tB,mBAAmB/tB,QAAQ6Z;WAC7B;QACL,OAAO7Z;;;;2BChUagc;IACtB,MAAM6J,WAAkC,IAAIpK,cAAcO;IAE1D,IAAIwS,UAAUxS;IACd,MAAMyS,uBACJhd,cAAcuK,SAAS3c,OAAOqmB,OAAO1J,MAAMxR,KAAKlF,KAAKkW,gBAAgBlW;IACvE,MAAMopB,gBAAgBrvB,OAAOoU,QAAQuI,MAAM5H,OAAOtP;QAChD,MAAMQ,IAAIR,EAAE;QACZ,OAAO0W,gBAAgBlW;;IAEzB,IAAImpB,sBAAsB;QACxBD,UAAUnvB,OAAO+d,OAAO,IAAIpB;QAE5B0S,cAAcpS,QAAQ,EAAE1c,KAAKga;YAC3Bta,eAAekvB,SAAS5uB,KAAK;gBAC3BJ,YAAY;gBACZS;oBACE,OAAO2Z,MAAMhD;;gBAEfhY,KAAK+vB;oBACH/U,MAAMra,QAAQovB;;gBAEhB5tB,cAAc;;;;IAWpB,IAAI0tB,sBAAsB;QACxBC,cAAcpS,QAAQ,EAAE1c,KAAKga;YAC3B2J,MAAM3J,OAAO;gBACXiM,SAASjK,gBAAgBlM,OAAO9P;;;;IAKtCimB,SAAStmB,QAAQivB;IAEjB,MAAMI,kBAAwC;IAC9CA,gBAAgB9b,UAAU9S;QACxB,OAAOoE,MAAM8P,KACX,IAAI/O,IAAI,KAAI2N,UAAQ9S,YAAY8S,UAAQ9U,MAAIgC,QAAQ;;IAGxD4uB,gBAAgB1tB,iBAAiB;QAC/B,OAAO;;IAET0tB,gBAAgBtvB,iBAAiB;QAC/B,OAAO;;IAETsvB,gBAAgB9sB,2BAA2B,CACzC9B,QACAJ;QAGA,IAAI4R,SAAS5R,MAAM;YACjB;;QAEF,MAAM+U,UAAU3W,MAAIgC,QAAQ;QAE5B,MAAMsuB,aACJxsB,yBAAyB9B,QAAQJ,QACjCkC,yBAAyB6S,SAAS/U;QACpC,IAAI0uB,YAAY;YACdA,WAAWvtB,eAAe;;QAG5B,OAAOutB;;IAETM,gBAAgBtV,iBAAiB,CAACtZ,QAA+BJ;QAC/D,MAAM+U,UAAU3W,MAAIgC,QAAQ;QAC5B,IAAIwF,IAAImP,SAAS/U,MAAM;YACrB0Z,eAAe3E,SAAS/U;YACxBI,OAAO4b,gBAAgBlM,OAAO9P;YAC9B,OAAO;eACF;YACL,OAAO;;;IAGXgvB,gBAAgBppB,MAAM,CAACxF,QAA+BJ;QACpD,MAAM+U,UAAU3W,MAAIgC,QAAQ;QAC5B,OAAOwF,IAAIxF,QAAQJ,QAAQ4F,IAAImP,SAAS/U;;IAE1CgvB,gBAAgB5wB,MAAM,CAACgC,QAA+BJ;QACpD,MAAML,QAAQvB,MAAIgC,QAAQ;QAC1B,MAAM6uB,YAAY/c,QAAQvS,UAAUkS,cAAclS;QAClD,IAAIK,QAAQ,WAAWivB,WAAW;YAChC,OAAOC,iBAAY9wB,MAAIgC,QAAQJ,MAAM,CAACmvB,UAAUf;gBAC9ChuB,OAAO4b,gBAAgBoS,UAAU;;eAE9B,IAAIxoB,IAAIxF,QAAQJ,MAAM;YAC3B,OAAO5B,MAAIgC,QAAQJ;eACd,IAAI4F,IAAIjG,OAAOK,MAAM;YAC1B,MAAMovB,cAAchxB,MAAIuB,OAAOK;YAC/B,IAAIsS,MAAM3S,QAAQ;gBAChB,IAAIK,QAAQ,SAASA,QAAQ,WAAWA,QAAQ,UAAU;oBACxD,QAAQA;sBACN,KAAK;wBAAO;4BACV,QAASiH;gCACP,KAAKooB,cAAczpB,IAAI9D,KAAKnC,OAAOsH,MAAM;oCACvC,MAAMqoB,cAAcD,cAAcrvB,KAAK8B,KAAKnC,OAAOsH;oCACnD7G,OAAO4b;oCACP,OAAOsT;;gCAET;+BACCjmB,KAAK1J;;;sBAGV,KAAK;wBAAU;4BACb,QAAS4vB;gCACP,IAAIF,cAAczpB,IAAI9D,KAAKnC,OAAO4vB,OAAO;oCACvC,MAAMD,cAAcD,cAAcrvB,KAAK8B,KAAKnC,OAAO4vB;oCACnDnvB,OAAO4b;oCACP,OAAOsT;;gCAET;+BACCjmB,KAAK1J;;;sBAGV,KAAK;wBAAS;4BACZ,QAAO;gCACL,IAAIA,MAAM6vB,MAAM;oCACd,MAAMF,cAAcD,cAAcrvB,KAAK8B,KAAKnC;oCAC5CS,OAAO4b;oCACP,OAAOsT;;gCAET;+BACCjmB,KAAK1J;;;uBAIP;oBAEL,OAAOsS,WAAWmd,eACdA,YAAY/lB,KAAK1J,SACjByvB;;mBAED,IACLH,cACC/c,QAAQkd,gBAAgBvd,cAAcud,eACvC;gBACA,OAAOF,iBAAYE,aAAa;oBAC9BhvB,OAAO4b,gBAAgBlM,OAAO9P;;mBAE3B;gBACL,OAAOovB;;;;IAIbJ,gBAAgBhwB,MAAM,CAACoB,QAA+BJ,KAAKL;QACzD,IAAIic,gBAAgBjc,QAAQ;YAE1BA,QAAQA,MAAMqX;;QAEhB,MAAMjC,UAAU3W,MAAIgC,QAAQ;QAE5B,IACEJ,QAAQ,WACR8R,SAASnS,WACP8E,QAAQ2X,SAASlK,QAAQvS,WAAa8E,QAAQ2X,UAAUlK,QAAQvS,SAClE;YACA,IAAIS,OAAOJ,SAASL,OAAO;gBACzBX,MAAIoB,QAAQJ,KAAKL;gBACjBS,OAAO4b;;YAET,OAAO;eACF,KAAKpW,IAAIxF,QAAQJ,MAAM;YAC5B,IAAI+U,QAAQ/U,SAASL,OAAO;gBAC1BX,MAAI+V,SAAS/U,KAAKL;gBAClBS,OAAO4b,gBAAgBlM,OAAO9P;;YAEhC,OAAO;eAEF;YACL3B,QAAQK,MAAMiB;YACdtB,QAAQK,MAAM0d;YACd/d,QAAQK,MAAMid;YACd,MAAMtY;;;IAKV,OAAO,IAAIoP,MACTwT,UAEA+I;;;AC5MG,MAAMK,gBAAgB9pB,IAAIrF;;AAQjC,qBACEkc;IAGA,MAAMpC,QAA0ByV,cAAYrT;IAE5C,OAAOpC;;;AAUT,SAASyV,cACPrT;IAcA,IAAIQ,YAAYR,SAASnK,WAAWmK,OAAO;QACzC,OAAO4Q,oBACL,IAAIva,MAAM,IAAIoJ,cAAcO,OAAO;YACjC/b;gBACE,OAAO;;YAETA;gBACE,OAAO;;YAETA,IAAID,QAAQJ,KAAKL;gBAMf,IACEK,QAAQ,YACN4c,YAAYjd,UAAUid,YAAYR,SACjCnK,WAAWtS,UAAUsS,WAAWmK,QACnC;oBACA,IAAIhc,OAAOJ,SAASL,OAAO;wBAEzBX,MAAIoB,QAAQJ,KAAKL;wBACjBS,OAAO4b;;oBAET,OAAO;uBACF;oBACL3d,QAAQK,MAAMiB;oBACdtB,QAAQK,MAAM0d;oBACd/d,QAAQK,MAAMid;oBACd,MAAMtY;;;YAIVhD;gBACE,OAAO;;;WAIR,IACLub,gBAAgBQ,OAEhB;QAEA,OAAOqT,cAAYrT,KAAKpF;WACnB,IAAIlF,SAASsK,OAAO;QAUzB,OAAOsT,kBAAkBtT;WACpB;QACL,MAAMzT;;;;ACnFV,MAAMgnB,gBAAgBpa,OAAO;;AAE7B,MAAMqa,gBAAgBra,OAAO;;AAC7B,MAAMsa,mBAAmBta,OAAO;;AAGhC,MAAMua,iBAAiBva,OAAO;;AAC9B,SAASwa,QACPC,MACAC;;IAEA,KAAKxrB,QAAQurB,UAAU1d,MAAM0d,UAAUpU,gBAAgBoU,OAAO;QAC5D3xB,QAAQK,MAAMsxB;QACd,MAAM,IAAI3sB;;IAEZ,KAAK4O,WAAWge,SAAS;QACvB5xB,QAAQK,MAAMuxB;QACd,MAAM,IAAI5sB;;IAGZ,MAAM6sB,cAAc,CAACvwB,OAA2BwR;QAC9C,MAAMgf,eAAeF,OAAOtwB,OAAOwR;QACnC2b,WAAW1P,aAAa+S;QACxB,OAAOA;;IAET,SAASC,YAAYjf,OAAekf;QAOlC,MAAMvS,OAAOoS,YACXI,SAASD,QAAQV,gBAAgBhoB,KAAMA,EAAYwJ,SAEnDA;QAGF,OAAO2M;;IAgCT,MAAMiS,gBAAgBjG;QAAtBzpB;;YAcEpB,WAAyC,IAAIsF;YAC7CtF,WAAkBwwB,YAAY;YAK9BxwB,WAAgB;;QAChBoB,OAPCyvB,qBACAH,oBAIO1O,sBACP0I;QACA5gB,2BAA0BwT;YACzB,IAAItd,KAAK0qB,cAAc;gBACrB,IAAIpN,SAAS,SAAS;oBACpB,MAAM0N,QAAQtE,4BAAc1mB;oBAC5B,MAAMU,QAAQsqB,MAAM;oBAEpB,KAAKxlB,QAAQ9E,QAAQ;wBACnBtB,QAAQ6mB,IAAIvlB;wBACZ,MAAM,IAAI0D;;oBAIZrE,MAAIC,KAAK0wB,gBAAgB,SAAShwB;oBAElC,MAAM4wB,cAAclO,YAAYpjB;oBAChC,MAAMuxB,YAAY7wB,MAAMI;oBACxB,MAAM0wB,YAAYF,YAAYxwB;oBAC9B,IAAIywB,YAAYC,WAAW;wBACzB,MAAMC,YAAYlsB,MAAMgsB,WACrBjR,KAAKza,WACLgP,IAAI,CAACnM,GAAG7H,MAAMA,GACdsP,MAAMqhB;wBAGT,MAAME,oBAA+BD,UAAU5c,IAAI3C;4BAMjD,MAAMyf,iBAAiBxyB,MAAIa,KAAK6wB,iBAAiB3e;4BAEjD,IAAIyf,gBAAgB;gCAClB,OAAOA;mCACF;gCACL,MAAM9S,OAAOsS,YAAYjf,OAAOlS;gCAChC,MAAM8e,UAAU2F,OAAO5F;gCACvB9e,MAAIC,KAAK6wB,iBAAiB3e,OAAO4M;gCACjC,OAAOA;;;wBAKX4S,kBAAkBjU,QAAQqB,WAAWsD,YAAYpiB,MAAM8e;2BAClD,IAAIyS,YAAYC,WAAW;wBAIhCpO,YAAYpjB,MACTmQ,MAAMohB,WACN9T,QAAQqB,WAAWmE,cAAcnE;;;;;QAK5C1d;YAIE+oB,aAAa;gBACXlhB,qBAAqBjJ;;;QAMzBoB,CAACupB;YACC,MAAMK,QAAQtE,4BAAc1mB;YAC5B,MAAMU,QAAesqB,MAAM;YAE3B,KAAKxlB,QAAQ9E,QAAQ;gBACnBtB,QAAQ6mB,IAAIvlB;gBACZ,MAAM,IAAI0D;;YAIZrE,MAAIC,KAAK0wB,gBAAgB,SAAShwB;YAClCV,KAAK2wB,iBAAiBjwB,MAAMmU,IAAI,CAACnM,GAAGwJ,UAClC+e,YACEI,SAASrxB,KAAK0wB,gBAAgBhoB,KAAMA,EAAYwJ,SAEhDA;YAGJlS,KAAK4wB,oBAAoBnM,OAAOzkB,KAAK2wB;YAKrCnwB,OAAOoU,QAAQ5U,KAAK4wB,mBAAmBnT,QAAQ,EAAE1c,KAAKL;gBAGpDX,MAAIC,KAAK6wB,iBAAiBe,OAAO7wB,MAAML;;YAIzC8jB,iBAAMxkB,KAAK4wB,mBAAmB5wB;YAG9BA,KAAK4wB,oBAAoB;YACzB5wB,KAAK2wB,iBAAiB;;QAExBvvB;YAQE0H,kBAAkB9I;;;IAvHb8wB,uBAAe;QAAEpwB,OAAO;;IAOxBowB,cAAoB9O;IAmH7B,OAAO9V,EAAc4kB,SAAS;QAAEpwB,OAAOqwB;;;;ACnNzC,MAAMc,sBAAsBvb,OAAO;;AACnC,MAAMwb,uBAAuBxb,OAAO;;AACpC,MAAMyb,sBAAsBzb,OAAO;;AAGnC,SAAS0b,WACPC;;IAEA,KAAKtV,gBAAgBsV,WAAW;QAC9B7yB,QAAQK,MAAMwyB;QACd,MAAM,IAAI7tB;;IAEZ,MAAM4tB,mBAAmBnH;QAAzBzpB;;YAEEpB,WAAyB,IAAIlB;YAa7BkB,WAAgB;;QAZhBoB;YAGE+oB,aAAa;gBACXlhB,qBAAqBjJ;gBACrB,IAAIgT,WAAWhT,KAAK6xB,uBAAuB;oBACzC7xB,KAAK6xB;;;;QAOXzwB,OAdC0wB,2BAYO9P,sBACP0I,aACAqH,sBAAqBG;YACpBA,WAAWnQ,gBAAgBmQ;YAM3B,MAAMC,QAAQnyB,KAAK8xB,sBAAsB3yB,IAAI+yB;YAC7C,IAAIC,OAAO;gBACTC,iBAAiBD,OAAOnyB;mBAEnB;gBACL,MAAMqyB,cAAc5N,OAAOrZ,EAAE8mB;gBAE7BlyB,KAAK8xB,sBAAsB/xB,IAAImyB,UAAUG;gBACzCD,iBAAiBC,aAAaryB;;;QAIlCoB,CAACupB;YACC,MAAM2H,kBAAkB;gBACtBtyB,KAAK+xB,qBAAqBE,SAASla;;YAIrCua;YACAtyB,KAAK6xB,uBAAuBnN,MAAMuN,UAAU;gBAC1CK;;;QAGJlxB;YACE0H,kBAAkB9I;;;IAjCbgyB,iBAAoBhQ;IAwC7B,OAAO5W,EAAE4mB;;;SCjFaO,UAA+B7xB;IACrD,OAAO;QAAEA,OAAAA;;;;ACLX,IAAI0G,IAAE,SAASwC,GAAEzB,GAAEC,GAAEnC;IAAG,KAAI,IAAIqB,IAAE,GAAEA,IAAEa,EAAErH,QAAOwG,KAAI;QAAC,IAAIsE,IAAEzD,EAAEb,IAAG8D,IAAE,mBAAiBQ,IAAExD,EAAEwD,KAAGA,GAAEnF,IAAE0B,IAAIb;QAAG,MAAIb,IAAER,EAAE,KAAGmF,IAAE,MAAI3E,IAAER,EAAE,KAAGzF,OAAO+d,OAAOtY,EAAE,MAAI,IAAGmF,KAAG,MAAI3E,KAAGR,EAAE,KAAGA,EAAE,MAAI,IAAIkC,IAAIb,MAAI8D,IAAE,MAAI3E,IAAER,EAAE,GAAGkC,IAAIb,OAAK8D,IAAE,KAAGnF,EAAEuC,KAAK/B,IAAEmD,EAAErH,MAAM,MAAK6E,EAAEwC,GAAEwB,GAAEhD,GAAE,EAAC,IAAG,WAAQgD;;IAAG,OAAOnF;GAAG2D,IAAE,SAASxC;IAAG,KAAI,IAAIwC,GAAEzB,GAAEC,IAAE,GAAEnC,IAAE,IAAGqB,IAAE,IAAGsE,IAAE,EAAC,KAAGR,IAAE,SAAShE;QAAG,MAAIgB,MAAIhB,MAAInB,IAAEA,EAAEkN,QAAQ,wBAAuB,QAAMvH,EAAEpD,KAAKpB,KAAGnB,GAAE,KAAG,MAAImC,MAAIhB,KAAGnB,MAAI2F,EAAEpD,KAAKpB,KAAGnB,GAAE;QAAGmC,IAAE,KAAG,MAAIA,KAAG,UAAQnC,KAAGmB,IAAEwE,EAAEpD,KAAKpB,GAAE,KAAG,MAAIgB,KAAGnC,MAAImB,IAAEwE,EAAEpD,MAAM,GAAE,GAAEvC,KAAGmC,KAAG,OAAKnC,MAAImB,KAAG,MAAIgB,OAAKwD,EAAEpD,KAAKvC,GAAEmC,GAAED;QAAGC,IAAE,IAAGhB,MAAIwE,EAAEpD,KAAKpB,GAAEgB,GAAED,IAAGC,IAAE,KAAInC,IAAE;OAAIQ,IAAE,GAAEA,IAAEW,EAAEtG,QAAO2F,KAAI;QAACA,MAAI,MAAI2B,KAAGgD,KAAIA,EAAE3E;QAAI,KAAI,IAAImB,IAAE,GAAEA,IAAER,EAAEX,GAAG3F,QAAO8G,KAAIgC,IAAExC,EAAEX,GAAGmB,IAAG,MAAIQ,IAAE,QAAMwB,KAAGwB,KAAIQ,IAAE,EAACA;QAAGxD,IAAE,KAAGnC,KAAG2D,IAAE,MAAIxB,IAAE,SAAOnC,KAAG,QAAM2D,KAAGxB,IAAE,GAAEnC,IAAE,MAAIA,IAAE2D,IAAE3D,EAAE,KAAGqB,IAAEsC,MAAItC,IAAEA,IAAE,KAAGrB,KAAG2D,IAAE,QAAMA,KAAG,QAAMA,IAAEtC,IAAEsC,IAAE,QAAMA,KAAGwB;QAAIhD,IAAE,KAAGA,MAAI,QAAMwB,KAAGxB,IAAE,GAAED,IAAElC,GAAEA,IAAE,MAAI,QAAM2D,MAAIxB,IAAE,KAAG,QAAMhB,EAAEX,GAAGmB,IAAE,OAAKwD;QAAI,MAAIhD,MAAIwD,IAAEA,EAAE,KAAIxD,IAAEwD,IAAGA,IAAEA,EAAE,IAAIpD,KAAKJ,GAAE,IAAGA,IAAE,KAAG,QAAMwB,KAAG,SAAOA,KAAG,SAAOA,KAAG,SAAOA,KAAGwB;QAAIhD,IAAE,KAAGnC,KAAG2D,IAAG,MAAIxB,KAAG,UAAQnC,MAAImC,IAAE,GAAEwD,IAAEA,EAAE;;IAAI,OAAOR,KAAIQ;GAAGzD,IAAE,qBAAmB7C,KAAI8C,IAAED,IAAE,IAAI7C,MAAI,IAAGW,IAAEkC,IAAE,SAASf;IAAG,IAAIe,IAAEC,EAAEjJ,IAAIiI;IAAG,OAAOe,KAAGC,EAAErI,IAAIqH,GAAEe,IAAEyB,EAAExC,KAAIe;IAAG,SAASf;IAAG,KAAI,IAAIe,IAAE,IAAGlC,IAAE,GAAEA,IAAEmB,EAAEtG,QAAOmF,KAAIkC,KAAGf,EAAEnB,GAAGnF,SAAO,MAAIsG,EAAEnB;IAAG,OAAOmC,EAAED,OAAKC,EAAED,KAAGyB,EAAExC;;;AAAK,aAAwBwC;IAAG,IAAIzB,IAAEf,EAAEpH,MAAKiG,EAAE2D,IAAGpH,WAAU;IAAI,OAAO2F,EAAErH,SAAO,IAAEqH,IAAEA,EAAE;;;ACczuC,SAAS+d,QAAQsM;IAGf,OAAOjwB,MAAMkwB,KAAkBrnB,GAAGonB;;;mBASTnZ;IACzB,MAAMqZ,UAAU/O,QAAQuC,QAAQ7M;IAEhC,MAAMwF,OAAO6T,QAAQ5xB,WAAW,IAAI4xB,QAAQ,KAAKA;IACjD,IAAIvT,YAAYN,OAAO;QACrB,OAAOA;WACF;QACLzf,QAAQK,MAAMof;QACdzf,QAAQK,MAAMwkB;QACd,MAAM,IAAI7f;;;;ACxBd6a,iBAAW;IACT7d,MAAMV,OAAOoe,SAASD;QACpB8T,MACE,EAAC,SAAS,YAAY,YACtB,SACA,SACA,EAAC,UAAU,WACXjyB,OACAme;;IAGJzd,QAAQV,OAAOoe,SAASD;QACtB8T,MAAM,EAAC,WAAU,WAAW,WAAW,EAAC,YAAWjyB,OAAOme;QAG1D,MAAMxB,YAAY;QAClB,MAAMuV,SAASjP,QAAQ9E,KAAKG,QAAQ3B;QACpC,MAAMwV,cAAcD;QACpB,MAAME,sBAAsC7zB;YAC1C,MAAM8zB,eAAe9zB,MAAMkC;YAC3B,MAAMmc,OAAQre,MAAMkC,OAA4Bmc;YAChD,IAAIA,MAAM;gBACRmG,iBAAiB,cAAcnG,SAE5B/H,OAAOnB,OAAOA,QAAQ2e,cAEtBtV,QAAQqB;oBACPA,QAAQvB,cAAc,IAAI1d,MAAM;;;;QAKxCE,MACE8e,KAAKG,SACL3B,WACAsG,QAAQ,KAAIkP,aAAaC,uBAAsBvd,OAAO3T;;;;AAI5D,SAAS+wB,MACPltB,OACAutB,eACAC,SACAC,YACAxyB,OACAme;IAEA,KAAKlC,gBAAgBjc,QAAQ;QAC3BtB,QAAQK,MAAMiB;QACdtB,QAAQK,MAAM0lB,wBAAwBlB;QACtC,MAAM7f;;IAER,IAAIqB,MAAMoO,SAASgL,KAAK3d,OAAO;QAE7BnB,MAAI8e,KAAKE,UAAUiU,eAAetyB;QAOlCwyB,WAAWzV,QAAQJ;YACjB,MAAMuV,SAAS/T,KAAKG,QAAQ3B;YAE5B,MAAMwV,cAAclP,QAAQiP;YAE5B7yB,MACE8e,KAAKG,SACL3B,WACAsG,QAAQ,KACHkP,aAEF5sB;gBACC,OAAQvF,MAAMA,QAAQvB,MAAI8G,EAAE9E,QAAQ8xB;iBAErC1d,OAAO3T;;WAGT;QACLxC,QAAQK,MAAMof;QACdzf,QAAQK,MAAM0lB,wBAAwBlB;QACtC,MAAM7f;;;;"}