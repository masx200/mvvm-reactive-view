{"version":3,"file":"index.js","sources":["../node_modules/lodash/fromPairs.js","../src/Object-fromEntries.ts","../src/array-prototype-flat.ts","../src/util.ts","../src/isprimitive.ts","../src/primitivestate.ts","../src/dom.ts","../src/watch.ts","../src/directives.ts","../src/extend-directive.ts","../src/input-textarea-value-directive-Bidirectional-binding.ts","../src/virtualdom.ts","../node_modules/htm/dist/htm.module.js","../src/createelement.ts","../src/html.ts","../src/onevent.ts","../src/setlikearay.ts","../src/reflect.ts","../src/customelement.ts","../src/mount.ts","../node_modules/dom-element-attribute-agent-proxy/dist/index.js","../src/rendervdomtoreal.ts","../src/createApp.ts","../src/createref.ts","../node_modules/deep-observe-agent-proxy/dist/index.js","../src/createstate.ts"],"sourcesContent":["/**\n * The inverse of `_.toPairs`; this method returns an object composed\n * from key-value `pairs`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} pairs The key-value pairs.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.fromPairs([['a', 1], ['b', 2]]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction fromPairs(pairs) {\n  var index = -1,\n      length = pairs == null ? 0 : pairs.length,\n      result = {};\n\n  while (++index < length) {\n    var pair = pairs[index];\n    result[pair[0]] = pair[1];\n  }\n  return result;\n}\n\nmodule.exports = fromPairs;\n","import fromPairs from \"lodash/fromPairs.js\";\r\n// console.log(fromPairs);\r\nif (\"function\" !== typeof Object.fromEntries) Object.fromEntries = fromPairs;\r\n","function flattenDeep(arr1: any[]): Array<any> {\r\n  return arr1.reduce(\r\n    (acc: { concat: { (arg0: any): void; (arg0: any): void } }, val: any) =>\r\n      Array.isArray(val) ? acc.concat(flattenDeep(val)) : acc.concat(val),\r\n    []\r\n  );\r\n}\r\nfunction arrayflat(depth = 1): Array<any> {\r\n  if (depth <= 1) {\r\n    return this.reduce(\r\n      (acc: { concat: (arg0: any) => void }, val: any) => acc.concat(val),\r\n      []\r\n    );\r\n  } else {\r\n    return flattenDeep(this);\r\n  }\r\n}\r\n\r\n// import flattenDepth from \"lodash/flattenDepth\";\r\n// import flattenDepth from \"core-js-pure/features/array/flat\";\r\nif (typeof Array.prototype.flat !== \"function\") {\r\n  Array.prototype.flat =\r\n    //   function(depth: number = 1) {\r\n    //     return flattenDepth(this, depth);\r\n    //   };\r\n    arrayflat;\r\n}\r\n\r\n/*\r\nexport function flat(arr: any, depth?: any) {\r\n  return arrayflat.call(arr, depth);\r\n}\r\n */\r\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\nexport function isundefined(a: any) {\r\n  return typeof a === \"undefined\";\r\n}\r\n\r\nexport function isnumber(a: any) {\r\n  return typeof a === \"number\";\r\n}\r\nexport function isboolean(a: any) {\r\n  return typeof a === \"boolean\";\r\n}\r\nexport function isobject(a: any) {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\nexport function isstring(a: string): true;\r\nexport function isstring(a): boolean;\r\nexport function isstring(a: any) {\r\n  return typeof a === \"string\";\r\n}\r\nexport function isfunction(a: any) {\r\n  return typeof a === \"function\";\r\n}\r\n\r\nexport function isarray(a: any) {\r\n  return a instanceof Array && Array.isArray(a);\r\n}\r\nexport { isfunction as isFunction, isarray as isArray, isstring as isString };\r\nexport function getsymbol(a: string) {\r\n  return Symbol(a);\r\n}\r\nexport function gettagtype(a: any) {\r\n  return {}.toString\r\n    .call(a)\r\n    .replace(\"[object \", \"\")\r\n    .replace(\"]\", \"\")\r\n    .toLowerCase();\r\n}\r\n","import { isString, isnumber, isboolean, isundefined } from \"./util\";\r\nexport default function(a: any) {\r\n  return isString(a) || isnumber(a) || isboolean(a) || isundefined(a);\r\n}\r\n","// import Reflect from \"./reflect\";\r\nimport { getsymbol, isobject } from \"./util\";\r\nexport const textnodesymbol = Symbol(\"textnode\");\r\nexport const changetextnodesymbol = Symbol(\"changetextnode\");\r\nimport isprimitive from \"./isprimitive\";\r\nexport const eventtargetsymbol = Symbol(\"eventtatget\");\r\nexport const memlisteners = Symbol(\"memlisteners\");\r\nexport const dispatchsymbol = getsymbol(\"dispatch\");\r\nexport const subscribesymbol = getsymbol(\"subscribe\");\r\nexport const removeallistenerssymbol = getsymbol(\"removeallisteners\");\r\nexport const addallistenerssymbol = getsymbol(\"addallisteners\");\r\n/* const forkarryaprototype = {};\r\nownKeys(Array.prototype).forEach(key => {\r\n  forkarryaprototype[key] = Array.prototype[key];\r\n}); */\r\n/* class forkarray {}\r\nObject.assign(forkarray.prototype, forkarryaprototype);\r\nforkarray.prototype.constructor = forkarray;\r\ndeleteProperty(forkarray.prototype, \"length\"); */\r\nexport default class ReactiveState /* extends forkarray  */ {\r\n  [addallistenerssymbol]() {\r\n    this[memlisteners].forEach(([value, callback]) => {\r\n      this[eventtargetsymbol].addEventListener(value, callback);\r\n    });\r\n  }\r\n  /*  [changetextnodesymbol](textnode: Text) {\r\n    this[textnodesymbol] = textnode;\r\n  } */\r\n  [textnodesymbol]: Text | undefined = undefined;\r\n  value: string | number | boolean | undefined | object;\r\n  [eventtargetsymbol] = new EventTarget();\r\n  [memlisteners] = [];\r\n  constructor(init: string | number | boolean | object | undefined) {\r\n    //super();\r\n    if (isprimitive(init) || isobject(init)) {\r\n      Object.defineProperty(this, \"value\", {\r\n        value: init,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n\r\n      // this.value = init;\r\n    } else {\r\n      throw TypeError(\"invalid State\");\r\n    }\r\n    // this[eventtargetsymbol] = new EventTarget();\r\n\r\n    Object.defineProperty(this, Symbol.toStringTag, {\r\n      value: \"ReactiveState\",\r\n      configurable: true\r\n    });\r\n  }\r\n\r\n  valueOf() {\r\n    return this.value;\r\n  }\r\n  toString() {\r\n    const value = this.value;\r\n    return isprimitive(value)\r\n      ? String(value)\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : \"\";\r\n  }\r\n  [dispatchsymbol](eventname?: string) {\r\n    const name = eventname ? String(eventname) : \"value\";\r\n    if (name !== \"value\") {\r\n      this[eventtargetsymbol].dispatchEvent(new Event(name));\r\n    }\r\n\r\n    this[eventtargetsymbol].dispatchEvent(new Event(\"value\"));\r\n  }\r\n  [subscribesymbol](callback: Function, eventname?: string) {\r\n    // this[eventtargetsymbol].addEventListener(\"value\", callback);\r\n    const name = eventname ? String(eventname) : \"value\";\r\n    this[memlisteners].push([name, () => callback(this)]);\r\n  }\r\n  [removeallistenerssymbol]() {\r\n    this[memlisteners].forEach(([value, callback]) => {\r\n      this[eventtargetsymbol].removeEventListener(value, callback);\r\n    });\r\n  }\r\n  [Symbol.toPrimitive]() {\r\n    //return this.value;\r\n    const value = this.value;\r\n    return isprimitive(value)\r\n      ? value\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : void 0;\r\n  }\r\n}\r\n","const document = window.document;\r\n//import { seteletext, setelehtml } from \"./directives\";\r\n//export { seteletext, setelehtml };\r\n\r\nexport function seteletext(e: Element, v: string) {\r\n  e.textContent = v;\r\n}\r\nexport function setelehtml(e: Element, v: string) {\r\n  e.innerHTML = v;\r\n}\r\nexport function appendchild(\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element,\r\n  ele: HTMLElement | SVGElement | Element\r\n) {\r\n  container.appendChild(ele);\r\n}\r\nexport function createsvgelement() {\r\n  return createElementNS(svgnamespace, \"svg\");\r\n}\r\nexport function createnonescript() {\r\n  return document.createDocumentFragment();\r\n}\r\nexport function createnativeelement(type: string) {\r\n  return document.createElement(type);\r\n}\r\nexport function createElementNS(namespace: string, name: string) {\r\n  return document.createElementNS(namespace, name);\r\n}\r\nexport function createtextnode(data: string) {\r\n  return document.createTextNode(data);\r\n}\r\nexport const svgnamespace = \"http://www.w3.org/2000/svg\";\r\nexport function changetext(textnode: Text, value: string) {\r\n  textnode.nodeValue = String(value);\r\n}\r\nexport default document;\r\n\r\nexport const mathnamespace = \"http://www.w3.org/1998/Math/MathML\";\r\n\r\nexport function createmathelement() {\r\n  return createElementNS(mathnamespace, \"math\");\r\n}\r\n","import { requestAnimationFrame } from \"./directives\";\r\nimport { isFunction } from \"./util\";\r\nimport ReactiveState, {\r\n  subscribesymbol,\r\n  removeallistenerssymbol,\r\n  addallistenerssymbol\r\n} from \"./primitivestate\";\r\nexport function watch(\r\n  state: ReactiveState,\r\n  callback: Function,\r\n  statekey?: string\r\n): void {\r\n  if (!(state instanceof ReactiveState && isFunction(callback))) {\r\n    throw TypeError(\"invalid state or callback\");\r\n  }\r\n\r\n  if (statekey) {\r\n    state[subscribesymbol](callback, statekey);\r\n  } else {\r\n    state[subscribesymbol](callback);\r\n  }\r\n\r\n  requestAnimationFrame(() => {\r\n    state[addallistenerssymbol]();\r\n  });\r\n}\r\nexport function unwatch(state: ReactiveState): void {\r\n  state[removeallistenerssymbol]();\r\n}\r\n","import { seteletext, setelehtml } from \"./dom\";\r\n\r\nexport const requestAnimationFrame = window.requestAnimationFrame;\r\n\r\nimport { watch } from \"./watch\";\r\nimport Primitivestate from \"./primitivestate\";\r\nexport default {\r\n  ref(ele: Element, ref: { value: any }) {\r\n    if (typeof ref == \"object\") {\r\n      ref.value = ele;\r\n    } else {\r\n      throw TypeError(\"invalid ref\");\r\n    }\r\n  },\r\n  html(ele: Element, html: string | Primitivestate) {\r\n    // ele.innerHTML = html;\r\n    // console.log(ele.outerHTML);\r\n    if (typeof html == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        setelehtml(ele, html);\r\n\r\n        /* ele.innerHTML = html;*/\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (html instanceof Primitivestate) {\r\n      //   const primitivestate = html;\r\n      watch(html, (state: { value: any }) => {\r\n        /*ele.innerHTML = String(state);*/\r\n\r\n        setelehtml(ele, String(state));\r\n      });\r\n      //   primitivestate[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.innerHTML = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"html\");\r\n        /*  ele.innerHTML = String(html);*/\r\n\r\n        setelehtml(ele, String(html));\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid html\");\r\n    }\r\n  },\r\n  text(ele: Element, text: string | Primitivestate) {\r\n    // ele.textContent = text;\r\n    // console.log(ele.outerHTML);\r\n    if (typeof text == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        seteletext(ele, text);\r\n        /*    ele.textContent = text;*/\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (text instanceof Primitivestate) {\r\n      //   const primitivestate = text;\r\n      watch(text, (state: { value: any }) => {\r\n        seteletext(ele, String(state));\r\n\r\n        /* ele.textContent = String(state);*/\r\n      });\r\n      //   primitivestate[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.textContent = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"text\");\r\n        seteletext(ele, String(text));\r\n\r\n        /*  ele.textContent = String(text);*/\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid text\");\r\n    }\r\n  }\r\n};\r\n","import directives from \"./directives\";\r\nexport default function extenddirectives(options: {\r\n  [s: string]: Function;\r\n}): void {\r\n  Object.entries(options).forEach(([key, value]) => {\r\n    if (typeof value !== \"function\") {\r\n      throw TypeError(\"invalid directive\");\r\n    } else {\r\n      directives[key] = value;\r\n    }\r\n  });\r\n}\r\n","import ReactiveState from \"./primitivestate\";\r\nimport directives from \"./extend-directive\";\r\nimport Virtualdom from \"./virtualdom\";\r\ndirectives({\r\n  value(element: any, value: { value: any }, vdom: Virtualdom) {\r\n    if (\r\n      value instanceof ReactiveState &&\r\n      (vdom.type === \"input\" || vdom.type === \"textarea\")\r\n    ) {\r\n      vdom.bindattr[\"value\"] = value;\r\n      [\"change\", \"input\"].forEach(eventname => {\r\n        const origin = vdom.onevent[eventname];\r\n\r\n        const eventsarray = [origin].flat(Infinity);\r\n\r\n        vdom.onevent[eventname] = [\r\n          ...eventsarray,\r\n          (e: { target: { value: string | number | boolean | object } }) => {\r\n            return (value.value = e.target.value);\r\n          }\r\n        ];\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid ReactiveState or element\");\r\n    }\r\n  }\r\n});\r\n","import ReactiveState from \"./primitivestate\";\r\nimport { Class } from \"./rendervdomtoreal\";\r\n\r\nexport default class Virtualdom {\r\n  element: undefined | Element = undefined;\r\n  type: string | Function | undefined | Class;\r\n  props: object = {};\r\n  children: Array<Virtualdom | string | ReactiveState> = [];\r\n  directives: object = {};\r\n  onevent: object = {};\r\n  bindattr: object = {};\r\n  constructor(\r\n    type: Function | string = \"\",\r\n    props: object = {},\r\n    children: Array<Virtualdom | string | ReactiveState> = []\r\n  ) {\r\n    // console.log(type, props, children);\r\n    const propsentries = Object.entries(props);\r\n    Object.assign(this, {\r\n      type,\r\n      bindattr: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /[A-Za-z]/.test(key[0]))\r\n          .filter(e => e[1] instanceof ReactiveState)\r\n      ),\r\n      props: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /[A-Za-z]/.test(key[0]))\r\n          .filter(e => !(e[1] instanceof ReactiveState))\r\n      ),\r\n      children,\r\n      onevent: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /\\@/.test(key[0]))\r\n          .map(([key, value]) => [key.slice(1), value])\r\n      ),\r\n      directives: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /\\*/.test(key[0]))\r\n          .map(([key, value]) => [key.slice(1), value])\r\n      )\r\n    });\r\n    Object.defineProperty(this, Symbol.toStringTag, {\r\n      value: \"virtualdom\",\r\n      configurable: true\r\n    });\r\n  }\r\n}\r\n","var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","import ReactiveState from \"./primitivestate\";\r\nimport { isstring, isobject, isfunction } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\nexport default function h(\r\n  type: Function | string = \"\",\r\n  props: any = {},\r\n  ...children: Array<Virtualdom | string | ReactiveState>\r\n): Virtualdom | Array<Virtualdom | string | ReactiveState> {\r\n  // | Array<Virtualdom | string>\r\n  // if(isarray()){}\r\n  /* add fragment element */\r\n  //   console.log(type, props, children);\r\n  let typenormalized = isstring(type) || isfunction(type) ? type : \"\";\r\n  let propsnormalized = isobject(props) ? props : {};\r\n  const childrennormalized = children.flat(1);\r\n  if (typeof typenormalized === \"string\") {\r\n    typenormalized = typenormalized.trim().toLowerCase();\r\n  }\r\n\r\n  if (typeof typenormalized === \"string\" && \"\" === typenormalized) {\r\n    return childrennormalized;\r\n  }\r\n  propsnormalized = Object.fromEntries(\r\n    Object.entries(propsnormalized).map(([key, value]) => [\r\n      key.trim().toLowerCase(),\r\n      value\r\n    ])\r\n  );\r\n  return new Virtualdom(typenormalized, propsnormalized, childrennormalized);\r\n}\r\n","import ReactiveState from \"./primitivestate\";\r\nimport { isstring } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport htm from \"htm/dist/htm.module.js\";\r\nimport h from \"./createelement\";\r\n\r\nconst html = htm.bind(h);\r\n\r\n/* 如果出现未闭合标签会产生错误的vdom */\r\nexport function isvalidvdom(v: any) {\r\n  let flag = false;\r\n  if (Array.isArray(v)) {\r\n    flag = v\r\n      .map((ele: any) => {\r\n        return isvalidvdom(ele);\r\n        //isstring(ele) || ele instanceof Virtualdom;\r\n      })\r\n      .includes(false)\r\n      ? false\r\n      : true;\r\n  } else if (v instanceof Virtualdom) {\r\n    if (isvalidvdom(v.children)) {\r\n      return true;\r\n    }\r\n  } else if (v instanceof ReactiveState) {\r\n    return true;\r\n  } else {\r\n    if (isstring(v)) {\r\n      return true;\r\n    }\r\n  }\r\n  return flag;\r\n}\r\nfunction assertvalidvirtualdom(...args: any[]) {\r\n  const vdom = html(...args);\r\n  if (isvalidvdom(vdom)) {\r\n    return vdom;\r\n  } else {\r\n    console.error(vdom);\r\n    throw new TypeError(\"invalid Virtualdom!\");\r\n  }\r\n}\r\nexport default assertvalidvirtualdom;\r\n","export const eventlistenerssymbol = Symbol(\"eventlisteners\");\r\nimport { isArray } from \"./util\";\r\nexport default function(\r\n  element: Element,\r\n  eventname: string,\r\n  callback: EventListener | Array<EventListener>\r\n) {\r\n  if (!element[eventlistenerssymbol]) {\r\n    element[eventlistenerssymbol] = [];\r\n  }\r\n  if (typeof callback === \"function\") {\r\n    addlisteners(element, eventname, [callback]);\r\n  } else if (isArray(callback)) {\r\n    addlisteners(element, eventname, callback);\r\n  } else {\r\n    throw TypeError(\"invalid EventListener\");\r\n  }\r\n}\r\nfunction addlisteners(\r\n  ele: Element,\r\n  event: string,\r\n  callarray: Array<EventListener>\r\n) {\r\n  callarray.forEach((call: EventListener) => {\r\n    ele[eventlistenerssymbol].push([event, call]);\r\n    domaddlisten(ele, event, call);\r\n  });\r\n}\r\n\r\nfunction domaddlisten(ele: Element, event: string, call: EventListener) {\r\n  ele.addEventListener(event, call);\r\n}\r\n","import { isobject, isfunction } from \"./util\";\r\n// import {isclassextendsHTMLElement} from './customelement';\r\nexport default class Setlikearray extends Array {\r\n  /*   constructor() {\r\n    super();\r\n    Object.defineProperty(this, Symbol.toStringTag, { value: \"setlikearray\" });\r\n  } */\r\n  push(...items: Array<any>): number {\r\n    items.forEach(item => {\r\n      if (isfunction(item) || isobject(item)) {\r\n        if (!this.includes(item)) {\r\n          super.push(item);\r\n        }\r\n      }\r\n    });\r\n\r\n    return this.length;\r\n  }\r\n}\r\n","const Reflect = window.Reflect;\r\nexport default Reflect;\r\n\r\nexport const {\r\n  apply,\r\n  construct,\r\n  defineProperty,\r\n  deleteProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  getPrototypeOf,\r\n  has,\r\n\r\n  isExtensible,\r\n  ownKeys,\r\n  preventExtensions,\r\n  set,\r\n  setPrototypeOf\r\n} = Reflect;\r\nexport {};\r\n/*\r\napply()\r\n对一个函数进行调用操作，同时可以传入一个数组作为调用参数。和 Function.prototype.apply() 功能类似。\r\nconstruct()\r\n对构造函数进行 new 操作，相当于执行 new target(...args)。\r\ndefineProperty()\r\n和 Object.defineProperty() 类似。\r\ndeleteProperty()\r\n作为函数的delete操作符，相当于执行 delete target[name]。\r\n//Reflect.enumerate()\r\n该方法会返回一个包含有目标对象身上所有可枚举的自身字符串属性以及继承字符串属性的迭代器，for...in 操作遍历到的正是这些属性。\r\nget()\r\n获取对象身上某个属性的值，类似于 target[name]。\r\ngetOwnPropertyDescriptor()\r\n类似于 Object.getOwnPropertyDescriptor()。\r\ngetPrototypeOf()\r\n类似于 Object.getPrototypeOf()。\r\nhas()\r\n判断一个对象是否存在某个属性，和 in 运算符 的功能完全相同。\r\nisExtensible()\r\n类似于 Object.isExtensible().\r\nownKeys()\r\n返回一个包含所有自身属性（不包含继承属性）的数组。(类似于 Object.keys(), 但不会受enumerable影响).\r\npreventExtensions()\r\n类似于 Object.preventExtensions()。返回一个Boolean。\r\nset()\r\n将值分配给属性的函数。返回一个Boolean，如果更新成功，则返回true。\r\nsetPrototypeOf()\r\n类似于 Object.setPrototypeOf()。\r\n*/\r\n","import setlikearray from \"./setlikearay\";\r\nconst customElementsarray = new setlikearray();\r\nfunction getcustomelementname(initclass: any): string {\r\n  return \"c-\" + customElementsarray.indexOf(initclass);\r\n}\r\nimport { isfunction } from \"./util\";\r\nexport function isclassextendsHTMLElement(initclass: {\r\n  prototype: any;\r\n}): boolean {\r\n  return !!(\r\n    isfunction(initclass) &&\r\n    initclass.prototype &&\r\n    initclass.prototype instanceof HTMLElement\r\n  );\r\n}\r\n\r\nimport { construct } from \"./reflect\";\r\n// import Reflect from \"./reflect\";\r\n\r\nimport { Class } from \"./rendervdomtoreal\";\r\n\r\nexport function createcostumelemet(\r\n  initclass: Class | Function,\r\n\r\n  children?: any[]\r\n): HTMLElement {\r\n  if (isclassextendsHTMLElement(initclass)) {\r\n    customElementsarray.push(initclass);\r\n    const elementname = getcustomelementname(initclass);\r\n    if (customElements.get(elementname) === initclass) {\r\n    } else {\r\n      customElements.define(elementname, initclass);\r\n    }\r\n\r\n    return construct(initclass, [children]); // (children);\r\n  } else {\r\n    throw TypeError(\"invalid custom element class !\");\r\n  }\r\n}\r\n","import { appendchild } from \"./dom\";\r\nexport default function(\r\n  ele:\r\n    | Array<\r\n        | HTMLElement\r\n        | Text\r\n        | SVGSVGElement\r\n        | DocumentFragment\r\n        | SVGElement\r\n        | Element\r\n      >\r\n    | SVGElement\r\n    | DocumentFragment\r\n    | HTMLElement\r\n    | Text\r\n    | SVGSVGElement\r\n    | Element,\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element\r\n): void {\r\n  container.innerHTML = \"\";\r\n  let eles: Array<any>;\r\n  if (Array.isArray(ele)) {\r\n    eles = ele;\r\n  } else {\r\n    // appendchild(container, ele);\r\n    eles = [ele];\r\n  }\r\n  eles.forEach(e => appendchild(container, e));\r\n}\r\n","const Reflect = window.Reflect;\r\nconst { get, ownKeys, set } = Reflect;\r\nconst valuestring = \"value\";\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isstring(a) {\r\n    return typeof a === \"string\";\r\n}\r\nfunction objtostylestring(o) {\r\n    return Object.entries(o)\r\n        .map(([key, value]) => key + \":\" + value)\r\n        .join(\";\");\r\n}\r\nfunction asserthtmlelement(ele) {\r\n    if (!(ele instanceof HTMLElement ||\r\n        ele instanceof SVGElement ||\r\n        ele instanceof Element)) {\r\n        throw TypeError(\"invalid HTMLElement!\");\r\n    }\r\n    else\r\n        return true;\r\n}\r\nfunction createeleattragentreadwrite(ele) {\r\n    asserthtmlelement(ele);\r\n    const isinputtextortextarea = (ele.tagName === \"INPUT\" && get(ele, \"type\") === \"text\") ||\r\n        ele.tagName === \"TEXTAREA\";\r\n    var temp = Object.create(null);\r\n    return new Proxy(temp, {\r\n        ownKeys() {\r\n            const keys = ownKeys(ele.attributes).filter(k => !/\\d/.test(String(k)[0]));\r\n            return isinputtextortextarea\r\n                ? Array.from(new Set([...keys, valuestring]))\r\n                : keys;\r\n        },\r\n        get(target, key) {\r\n            if (isinputtextortextarea && key === valuestring) {\r\n                return get(ele, valuestring);\r\n            }\r\n            else {\r\n                var v = ele.getAttribute(String(key));\r\n                if (!v) {\r\n                    return;\r\n                }\r\n                if (isstring(v)) {\r\n                    try {\r\n                        return JSON.parse(String(v));\r\n                    }\r\n                    catch (error) {\r\n                        return v;\r\n                    }\r\n                }\r\n                else\r\n                    return;\r\n            }\r\n        },\r\n        set(t, key, v) {\r\n            if (isinputtextortextarea && key === valuestring) {\r\n                return set(ele, valuestring, v);\r\n            }\r\n            else if (key === \"style\") {\r\n                ele.setAttribute(String(key), isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v));\r\n                return true;\r\n            }\r\n            else {\r\n                ele.setAttribute(String(key), isobject(v) ? JSON.stringify(v) : String(v));\r\n                return true;\r\n            }\r\n        },\r\n        deleteProperty(t, k) {\r\n            ele.removeAttribute(String(k));\r\n            return true;\r\n        },\r\n        has(target, key) {\r\n            if (isinputtextortextarea && key === valuestring) {\r\n                return true;\r\n            }\r\n            else {\r\n                return ele.hasAttribute(String(key));\r\n            }\r\n        },\r\n        defineProperty() {\r\n            return false;\r\n        },\r\n        getOwnPropertyDescriptor(target, key) {\r\n            const otherdescipter = {\r\n                enumerable: true,\r\n                configurable: true,\r\n                writable: true\r\n            };\r\n            if (isinputtextortextarea && key === valuestring) {\r\n                return {\r\n                    value: get(ele, valuestring),\r\n                    ...otherdescipter\r\n                };\r\n            }\r\n            else {\r\n                var attr = ele.getAttribute(String(key));\r\n                if (attr) {\r\n                    return {\r\n                        value: attr,\r\n                        ...otherdescipter\r\n                    };\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nexport default createeleattragentreadwrite;\r\n//# sourceMappingURL=index.js.map\r\n","export const bindstatesymbol = Symbol(\"bindstate\");\r\n\r\nexport const reactivestatesymbol = Symbol(\"reactivestate\");\r\nimport { watch } from \"./watch\";\r\nimport ReactiveState, { textnodesymbol } from \"./primitivestate\";\r\nexport const virtualdomsymbol = Symbol(\"virtualdom\");\r\nimport directives from \"./directives\";\r\nimport onevent from \"./onevent\";\r\nimport { createcostumelemet } from \"./customelement\";\r\nimport {\r\n  mathnamespace,\r\n  createmathelement,\r\n  svgnamespace,\r\n  createsvgelement,\r\n  createnonescript,\r\n  createnativeelement,\r\n  createElementNS,\r\n  createtextnode,\r\n  changetext\r\n} from \"./dom\";\r\nfunction throwinvalideletype() {\r\n  throw TypeError(\"invalid element type!\");\r\n}\r\nimport mount from \"./mount\";\r\nimport createeleattr from \"dom-element-attribute-agent-proxy\";\r\n// import { isstring, isarray, isobject, isfunction } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\n\r\nexport default function render(\r\n  vdom: Virtualdom | string | ReactiveState,\r\n  namespace?: string\r\n):\r\n  | HTMLElement\r\n  | Text\r\n  | SVGSVGElement\r\n  | DocumentFragment\r\n  | SVGElement\r\n  | Element {\r\n  if (typeof vdom === \"string\") {\r\n    return createtextnode(vdom);\r\n  } else if (vdom instanceof ReactiveState) {\r\n    const reactive = vdom;\r\n    const textnode = createtextnode(String(reactive));\r\n    textnode[reactivestatesymbol] = reactive;\r\n    reactive[textnodesymbol] = textnode;\r\n    watch(reactive, (state: { value: string }) => {\r\n      changetext(textnode, String(state));\r\n    });\r\n    return textnode;\r\n  } else if (vdom instanceof Virtualdom && \"type\" in vdom) {\r\n    const { type } = vdom;\r\n    let element: HTMLElement | SVGSVGElement | SVGElement | Element;\r\n    if (typeof type === \"string\") {\r\n      if (type === \"script\") {\r\n        /* 禁止加载脚本 */\r\n\r\n        return createnonescript();\r\n      } else if (type === \"svg\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createsvgelement();\r\n      } else if (type === \"math\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createmathelement();\r\n      } else {\r\n        element = namespace\r\n          ? createElementNS(namespace, type)\r\n          : createnativeelement(type);\r\n      }\r\n    } else if (typeof type == \"function\") {\r\n      element = createcostumelemet(type, vdom.children);\r\n    } else {\r\n      throwinvalideletype();\r\n      // throw TypeError(\"invalid element type!\");\r\n    }\r\n    handleprops(element, vdom);\r\n\r\n    /* 自定义组件不添加children,而是从构造函数传入 */\r\n    if (typeof type !== \"function\") {\r\n      mount(\r\n        vdom.children.map(e => {\r\n          if (type === \"svg\") {\r\n            /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n            //   element.innerHTML = element.innerHTML;\r\n            return render(e, svgnamespace);\r\n          } else if (type === \"math\") {\r\n            return render(e, mathnamespace);\r\n          } else if (namespace) {\r\n            return render(e, namespace);\r\n          } else {\r\n            return render(e);\r\n          }\r\n        }),\r\n\r\n        element\r\n      );\r\n    }\r\n    return element;\r\n  } else {\r\n    throwinvalideletype();\r\n    // throw TypeError(\"invalid element type!\");\r\n  }\r\n}\r\n\r\nexport interface Class {\r\n  new (children?: any[]): HTMLElement;\r\n}\r\n\r\nfunction handleprops(\r\n  element: HTMLElement | Element | SVGSVGElement | SVGElement,\r\n  vdom: Virtualdom\r\n) {\r\n  ((element, vdom) => {\r\n    Object.entries(vdom.directives).forEach(([name, value]) => {\r\n      if (name in directives && typeof directives[name] === \"function\") {\r\n        directives[name](element, value, vdom);\r\n      } else {\r\n        throw new Error(\"invalid directives \" + name);\r\n      }\r\n    });\r\n\r\n    const attribute1 = createeleattr(element);\r\n    Object.assign(attribute1, vdom.props);\r\n    /* 添加常量的属性 */\r\n    element[virtualdomsymbol] = vdom;\r\n    vdom.element = element;\r\n    /* 添加绑定属性 */\r\n\r\n    Object.entries(vdom.bindattr).forEach(([key, primitivestate]) => {\r\n      attribute1[key] = primitivestate.value;\r\n      watch(primitivestate, (state: { value: any }) => {\r\n        attribute1[key] = state.value;\r\n      });\r\n      /*     primitivestate[subscribesymbol]();\r\n      requestAnimationFrame(() => {\r\n        primitivestate[addallistenerssymbol]();\r\n      }); */\r\n    });\r\n\r\n    /* 添加事件绑定和指令执行 */\r\n\r\n    /*  if (!element[eventlistenerssymbol]) {\r\n      element[eventlistenerssymbol] = [];\r\n    }\r\n*/\r\n    Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\r\n      onevent(element, event, callbacks);\r\n    });\r\n  })(element, vdom);\r\n  if (!element[bindstatesymbol]) {\r\n    element[bindstatesymbol] = new Set();\r\n  }\r\n\r\n  [Object.values(vdom.bindattr), Object.values(vdom.directives)]\r\n    .flat()\r\n    .filter(e => e instanceof ReactiveState)\r\n\r\n    .forEach(e => element[bindstatesymbol].add(e));\r\n}\r\n","import document from \"./dom\";\r\nimport { isvalidvdom } from \"./html\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport render from \"./rendervdomtoreal\";\r\nimport mount from \"./mount\";\r\nexport default function createApp(\r\n  vdom: Virtualdom | string | Array<Virtualdom | string>,\r\n  container: HTMLElement | Element\r\n): HTMLElement | Element {\r\n  const el = container;\r\n  if (!isvalidvdom(vdom)) {\r\n    console.error(vdom);\r\n    throw TypeError(\"invalid Virtualdom \");\r\n  }\r\n  if (!(el instanceof HTMLElement)) {\r\n    throw TypeError(\"invalid container HTMLElement!\");\r\n  }\r\n\r\n  if (\r\n    el === document.body ||\r\n    el === document.documentElement ||\r\n    el === document.head\r\n  ) {\r\n    throw Error(\"Do not mount  to <html> or <body> <head>.\");\r\n  }\r\n  let elesarray: Array<string | Virtualdom>;\r\n  if (Array.isArray(vdom)) {\r\n    elesarray = vdom;\r\n  } else {\r\n    elesarray = [vdom];\r\n  }\r\n  mount(elesarray.map(e => render(e)), container);\r\n\r\n  //\r\n  return container;\r\n}\r\n","export default function createRef(init: any): object {\r\n  return { value: init };\r\n}\r\n","const Reflect = window.Reflect;\r\nconst { apply, construct, defineProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback invalid !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let forkobj;\r\n        if (isobject(target)) {\r\n            forkobj = {};\r\n        }\r\n        else {\r\n            forkobj = () => { };\r\n        }\r\n        setPrototypeOf(forkobj, null);\r\n        return (forkobj => {\r\n            return new Proxy(forkobj, {\r\n                defineProperty(t, p, a) {\r\n                    return defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, get(target, p));\r\n                    return Reflect.deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return Reflect.ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = getOwnPropertyDescriptor(target, k);\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, get(target, k));\r\n                    }\r\n                    return set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(forkobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback is not valid function !\");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        throw Error(\"Proxy unsupported!\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\n\r\nexport default observedeepagent;\r\n//# sourceMappingURL=index.js.map\r\n","import {\r\n  deleteProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  has,\r\n  ownKeys,\r\n  set\r\n} from \"./reflect\";\r\nimport deepobserve from \"deep-observe-agent-proxy\";\r\nimport { isobject } from \"./util\";\r\nimport isprimitive from \"./isprimitive\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  textnodesymbol\r\n} from \"./primitivestate\";\r\nexport default function createstate(\r\n  init: string | number | boolean | undefined | ReactiveState | object\r\n): object {\r\n  if (isprimitive(init)) {\r\n    return new Proxy(new ReactiveState(init), {\r\n      defineProperty() {\r\n        return false;\r\n      },\r\n      deleteProperty() {\r\n        return false;\r\n      },\r\n      set(target, key, value) {\r\n        if (key === textnodesymbol) {\r\n          return set(target, key, value);\r\n        }\r\n        if (key === \"value\" && isprimitive(value)) {\r\n          // if (target[key] !== value) {\r\n          set(target, key, value);\r\n          target[dispatchsymbol]();\r\n          // }\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n  } else if (init instanceof ReactiveState) {\r\n    // 如果init是个 ReactiveState，则对其解包，并生成新的 ReactiveState\r\n    return createstate(init.value);\r\n  } else if (isobject(init)) {\r\n    return new Proxy(new ReactiveState(init), {\r\n      defineProperty() {\r\n        return false;\r\n      },\r\n      getOwnPropertyDescriptor(target, key) {\r\n        const myvalue = get(target, \"value\");\r\n\r\n        const descripter =\r\n          getOwnPropertyDescriptor(target, key) ||\r\n          getOwnPropertyDescriptor(myvalue, key);\r\n        // descripter.configurable = true;\r\n        return descripter;\r\n      },\r\n      deleteProperty(target, key) {\r\n        const myvalue = get(target, \"value\");\r\n        if (has(myvalue, key)) {\r\n          deleteProperty(myvalue, key);\r\n          target[dispatchsymbol](key);\r\n          return true;\r\n        } else {\r\n          return true;\r\n        }\r\n      },\r\n      has(target, key) {\r\n        const myvalue = get(target, \"value\");\r\n        return has(target, key) || has(myvalue, key);\r\n      },\r\n      get(target, key) {\r\n        const value = get(target, \"value\");\r\n        if (has(target, key)) {\r\n          return get(target, key);\r\n        } else if (has(value, key)) {\r\n          /*  */\r\n\r\n          return deepobserve(get(value, key), () => {\r\n            target[dispatchsymbol](key);\r\n          });\r\n        }\r\n      },\r\n      ownKeys(target) {\r\n        return Array.from(\r\n          new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n        );\r\n      },\r\n      set(target, key, value) {\r\n        if (key === textnodesymbol) {\r\n          return set(target, key, value);\r\n        }\r\n        const myvalue = get(target, \"value\");\r\n        if (key === \"value\" && isobject(value)) {\r\n          // if (target[key] !== value) {\r\n          set(target, key, value);\r\n          target[dispatchsymbol]();\r\n\r\n          // }\r\n          return true;\r\n        } else if (!has(target, key)) {\r\n          set(myvalue, key, value);\r\n          target[dispatchsymbol](key);\r\n\r\n          //\r\n        } else if (key === \"length\") {\r\n          set(myvalue, key, value);\r\n          target[dispatchsymbol](key);\r\n        } else {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n  } else {\r\n    throw TypeError(\"invalid State\");\r\n  }\r\n}\r\n"],"names":["fromPairs","pairs","index","length","result","pair","Object","fromEntries","flattenDeep","arr1","reduce","acc","val","Array","isArray","concat","arrayflat","depth","this","prototype","flat","isundefined","a","isnumber","isboolean","isobject","isstring","isfunction","isarray","getsymbol","Symbol","isString","textnodesymbol","eventtargetsymbol","memlisteners","dispatchsymbol","subscribesymbol","removeallistenerssymbol","addallistenerssymbol","ReactiveState","[object Object]","init","undefined","EventTarget","isprimitive","defineProperty","value","configurable","writable","TypeError","toStringTag","forEach","callback","addEventListener","String","JSON","stringify","eventname","name","dispatchEvent","Event","push","removeEventListener","toPrimitive","document","window","seteletext","e","v","textContent","setelehtml","innerHTML","appendchild","container","ele","appendChild","createsvgelement","createElementNS","svgnamespace","createnonescript","createDocumentFragment","createnativeelement","type","createElement","namespace","createtextnode","data","createTextNode","changetext","textnode","nodeValue","mathnamespace","createmathelement","watch","state","statekey","isFunction","requestAnimationFrame","ref","html","Primitivestate","text","extenddirectives","options","entries","key","directives","element","vdom","bindattr","origin","onevent","eventsarray","Infinity","target","Virtualdom","props","children","propsentries","assign","filter","test","map","slice","n","t","r","u","p","s","h","apply","replace","f","Map","get","set","arguments","typenormalized","propsnormalized","childrennormalized","trim","toLowerCase","htm","bind","isvalidvdom","flag","includes","assertvalidvirtualdom","args","console","error","eventlistenerssymbol","addlisteners","event","callarray","call","domaddlisten","Setlikearray","items","item","super","Reflect","construct","deleteProperty","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","setPrototypeOf","customElementsarray","setlikearray","getcustomelementname","initclass","indexOf","isclassextendsHTMLElement","HTMLElement","createcostumelemet","elementname","customElements","define","eles","valuestring","objtostylestring","o","join","asserthtmlelement","SVGElement","Element","createeleattragentreadwrite","isinputtextortextarea","tagName","temp","create","Proxy","keys","attributes","k","from","Set","getAttribute","parse","setAttribute","removeAttribute","hasAttribute","otherdescipter","enumerable","attr","bindstatesymbol","reactivestatesymbol","virtualdomsymbol","throwinvalideletype","render","reactive","handleprops","mount","Error","attribute1","createeleattr","primitivestate","callbacks","values","add","createApp","el","body","documentElement","head","elesarray","createRef","deepobserveaddpath","patharray","ancestor","forkobj","argumentslist","thisarg","argarray","descripter","observedeepagent","createstate","myvalue","deepobserve"],"mappings":"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"}