{"version":3,"file":"index.js","sources":["../src/reflect.ts","../src/util.ts","../src/isprimitive.ts","../src/primitivestate.ts","../src/dom.ts","../src/watch.ts","../src/directives.ts","../src/extend-directive.ts","../src/input-textarea-value-directive-Bidirectional-binding.ts","../src/customelement.ts","../src/CustomElementRegistry.ts","../src/virtualdom.ts","../node_modules/htm/dist/htm.module.js","../src/createelement.ts","../src/html.ts","../src/onevent.ts","../src/mount.ts","../node_modules/dom-element-attribute-agent-proxy/dist/index.js","../src/rendervdomtoreal.ts","../src/createApp.ts","../src/createref.ts","../node_modules/deep-observe-agent-proxy/dist/index.js","../src/createstate.ts","../src/attrchange.ts","../src/elementonmountandunmount.ts","../src/conditon.ts","../src/index.ts"],"sourcesContent":["const Reflect = window.Reflect;\r\nexport default Reflect;\r\n\r\nexport const {\r\n  apply,\r\n  construct,\r\n  defineProperty,\r\n  deleteProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  getPrototypeOf,\r\n  has,\r\n\r\n  isExtensible,\r\n  ownKeys,\r\n  preventExtensions,\r\n  set,\r\n  setPrototypeOf\r\n} = Reflect;\r\nexport {};\r\n/*\r\napply()\r\n对一个函数进行调用操作，同时可以传入一个数组作为调用参数。和 Function.prototype.apply() 功能类似。\r\nconstruct()\r\n对构造函数进行 new 操作，相当于执行 new target(...args)。\r\ndefineProperty()\r\n和 Object.defineProperty() 类似。\r\ndeleteProperty()\r\n作为函数的delete操作符，相当于执行 delete target[name]。\r\n//Reflect.enumerate()\r\n该方法会返回一个包含有目标对象身上所有可枚举的自身字符串属性以及继承字符串属性的迭代器，for...in 操作遍历到的正是这些属性。\r\nget()\r\n获取对象身上某个属性的值，类似于 target[name]。\r\ngetOwnPropertyDescriptor()\r\n类似于 Object.getOwnPropertyDescriptor()。\r\ngetPrototypeOf()\r\n类似于 Object.getPrototypeOf()。\r\nhas()\r\n判断一个对象是否存在某个属性，和 in 运算符 的功能完全相同。\r\nisExtensible()\r\n类似于 Object.isExtensible().\r\nownKeys()\r\n返回一个包含所有自身属性（不包含继承属性）的数组。(类似于 Object.keys(), 但不会受enumerable影响).\r\npreventExtensions()\r\n类似于 Object.preventExtensions()。返回一个Boolean。\r\nset()\r\n将值分配给属性的函数。返回一个Boolean，如果更新成功，则返回true。\r\nsetPrototypeOf()\r\n类似于 Object.setPrototypeOf()。\r\n*/\r\n","import { has } from \"./reflect\";\r\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\nexport function isundefined(a: any) {\r\n  return typeof a === \"undefined\";\r\n}\r\n\r\nexport function isnumber(a: any) {\r\n  return typeof a === \"number\";\r\n}\r\nexport function isboolean(a: any) {\r\n  return typeof a === \"boolean\";\r\n}\r\nexport function isobject(a: any): a is object {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\n// export function isstring(a: string): true;\r\n// export function isstring(a): boolean;\r\nexport function isstring(a: any): a is string {\r\n  return typeof a === \"string\";\r\n}\r\nexport function isfunction(a: any): a is Function {\r\n  return typeof a === \"function\";\r\n}\r\n\r\nexport function isarray(a: any): a is Array<any> {\r\n  return a instanceof Array && Array.isArray(a) && gettagtype(a) === \"array\";\r\n}\r\nexport { isfunction as isFunction, isarray as isArray, isstring as isString };\r\nexport function getsymbol(a: string) {\r\n  return Symbol(a);\r\n}\r\nexport function gettagtype(a: any) {\r\n  return {}.toString\r\n    .call(a)\r\n    .replace(\"[object \", \"\")\r\n    .replace(\"]\", \"\")\r\n    .toLowerCase();\r\n}\r\nexport function ispromise(a) {\r\n  return gettagtype(a) === \"promise\" && has(a, \"then\") && has(a, \"catch\");\r\n}\r\n","import { isString, isnumber, isboolean, isundefined } from \"./util\";\r\nexport default function(a: any) {\r\n  return isString(a) || isnumber(a) || isboolean(a) || isundefined(a);\r\n}\r\n","export function isReactiveState(a: any): a is ReactiveState {\r\n  return a instanceof ReactiveState;\r\n}\r\n// import Reflect from \"./reflect\";\r\nimport { getsymbol, isobject } from \"./util\";\r\nexport const textnodesymbol = Symbol(\"textnode\");\r\nexport const changetextnodesymbol = Symbol(\"changetextnode\");\r\nimport isprimitive from \"./isprimitive\";\r\nexport const eventtargetsymbol = Symbol(\"eventtatget\");\r\nexport const memlisteners = Symbol(\"memlisteners\");\r\nexport const dispatchsymbol = getsymbol(\"dispatch\");\r\nexport const subscribesymbol = getsymbol(\"subscribe\");\r\nexport const removeallistenerssymbol = getsymbol(\"removeallisteners\");\r\nexport const addallistenerssymbol = getsymbol(\"addallisteners\");\r\n/* const forkarryaprototype = {};\r\nownKeys(Array.prototype).forEach(key => {\r\n  forkarryaprototype[key] = Array.prototype[key];\r\n}); */\r\n/* class forkarray {}\r\nObject.assign(forkarray.prototype, forkarryaprototype);\r\nforkarray.prototype.constructor = forkarray;\r\ndeleteProperty(forkarray.prototype, \"length\"); */\r\nexport default class ReactiveState /* extends forkarray  */ {\r\n  [addallistenerssymbol]() {\r\n    this[memlisteners].forEach(([value, callback]) => {\r\n      this[eventtargetsymbol].addEventListener(value, callback);\r\n    });\r\n  }\r\n  /*  [changetextnodesymbol](textnode: Text) {\r\n    this[textnodesymbol] = textnode;\r\n  } */\r\n  [textnodesymbol]: Text | undefined = undefined;\r\n  value: string | number | boolean | undefined | object;\r\n  [eventtargetsymbol] = new EventTarget();\r\n  [memlisteners] = [];\r\n  constructor(init: string | number | boolean | object | undefined) {\r\n    //super();\r\n    if (isprimitive(init) || isobject(init)) {\r\n      Object.defineProperty(this, \"value\", {\r\n        value: init,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n\r\n      // this.value = init;\r\n    } else {\r\n      throw TypeError(\"invalid State\");\r\n    }\r\n    // this[eventtargetsymbol] = new EventTarget();\r\n\r\n    Object.defineProperty(this, Symbol.toStringTag, {\r\n      value: \"ReactiveState\",\r\n      configurable: true\r\n    });\r\n  }\r\n\r\n  valueOf() {\r\n    return this.value;\r\n  }\r\n  toString() {\r\n    const value = this.value;\r\n    return isprimitive(value)\r\n      ? String(value)\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : \"\";\r\n  }\r\n  [dispatchsymbol](eventname?: string) {\r\n    const name = eventname ? String(eventname) : \"value\";\r\n    if (name !== \"value\") {\r\n      this[eventtargetsymbol].dispatchEvent(new Event(name));\r\n    }\r\n\r\n    this[eventtargetsymbol].dispatchEvent(new Event(\"value\"));\r\n  }\r\n  [subscribesymbol](callback: Function, eventname?: string) {\r\n    // this[eventtargetsymbol].addEventListener(\"value\", callback);\r\n    const name = eventname ? String(eventname) : \"value\";\r\n    this[memlisteners].push([name, () => callback(this)]);\r\n  }\r\n  [removeallistenerssymbol]() {\r\n    this[memlisteners].forEach(([value, callback]) => {\r\n      this[eventtargetsymbol].removeEventListener(value, callback);\r\n    });\r\n  }\r\n  [Symbol.toPrimitive]() {\r\n    //return this.value;\r\n    const value = this.value;\r\n    return isprimitive(value)\r\n      ? value\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : void 0;\r\n  }\r\n}\r\n","const document = window.document;\r\n//import { seteletext, setelehtml } from \"./directives\";\r\n//export { seteletext, setelehtml };\r\n\r\nexport function seteletext(e: Element, v: string) {\r\n  e.textContent = v;\r\n}\r\nexport function setelehtml(e: Element, v: string) {\r\n  e.innerHTML = v;\r\n}\r\nexport function appendchild(\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element,\r\n  ele: HTMLElement | SVGElement | Element\r\n) {\r\n  container.appendChild(ele);\r\n}\r\nexport function createsvgelement() {\r\n  return createElementNS(svgnamespace, \"svg\");\r\n}\r\nexport function createnonescript() {\r\n  return document.createDocumentFragment();\r\n}\r\nexport function createnativeelement(type: string) {\r\n  return document.createElement(type);\r\n}\r\nexport function createElementNS(namespace: string, name: string) {\r\n  return document.createElementNS(namespace, name);\r\n}\r\nexport function createtextnode(data: string) {\r\n  return document.createTextNode(data);\r\n}\r\nexport const svgnamespace = \"http://www.w3.org/2000/svg\";\r\nexport function changetext(textnode: Text, value: string) {\r\n  textnode.nodeValue = String(value);\r\n}\r\nexport default document;\r\n\r\nexport const mathnamespace = \"http://www.w3.org/1998/Math/MathML\";\r\n\r\nexport function createmathelement() {\r\n  return createElementNS(mathnamespace, \"math\");\r\n}\r\nexport function createComment() {\r\n  return document.createComment(\"\");\r\n}\r\nexport function removeNode(node: Element) {\r\n  let parentNode = node.parentNode;\r\n  if (parentNode) {\r\n    parentNode.removeChild(node);\r\n  }\r\n}\r\nexport function replaceChild(newChild: Node, oldChild: Node) {\r\n  let parentNode = oldChild.parentNode;\r\n  if (parentNode) {\r\n    parentNode.replaceChild(newChild, oldChild);\r\n  }\r\n}\r\n\r\nexport function domaddlisten(\r\n  ele: Element | Node,\r\n  event: string,\r\n  call: EventListener\r\n) {\r\n  ele.addEventListener(event, call);\r\n}\r\n\r\nexport function domremovelisten(\r\n  ele: Element | Node,\r\n  event: string,\r\n  call: EventListener\r\n) {\r\n  ele.removeEventListener(event, call);\r\n}\r\nexport function getdomchildren(ele: Element | Node) {\r\n  return Array.from(ele.childNodes);\r\n}\r\nexport function getAttribute(ele: Element, name: string) {\r\n  return HTMLElement.prototype.getAttribute.call(ele, name);\r\n}\r\nexport function setAttribute(ele: Element, name: string, value: any) {\r\n  HTMLElement.prototype.setAttribute.call(ele, name, value);\r\n}\r\nexport function removeAttribute(ele: Element, name: string) {\r\n  HTMLElement.prototype.removeAttribute.call(ele, name);\r\n}\r\n","import { requestAnimationFrame } from \"./directives\";\r\nimport { isFunction } from \"./util\";\r\nimport ReactiveState, {\r\n  isReactiveState,\r\n  subscribesymbol,\r\n  removeallistenerssymbol,\r\n  addallistenerssymbol\r\n} from \"./primitivestate\";\r\nexport function watch(\r\n  state: ReactiveState,\r\n  callback: Function,\r\n  statekey?: string\r\n): void {\r\n  if (\r\n    !(\r\n      isReactiveState(state) &&\r\n      // state instanceof ReactiveState\r\n      isFunction(callback)\r\n    )\r\n  ) {\r\n    throw TypeError(\"invalid state or callback\");\r\n  }\r\n\r\n  if (statekey) {\r\n    state[subscribesymbol](callback, statekey);\r\n  } else {\r\n    state[subscribesymbol](callback);\r\n  }\r\n\r\n  requestAnimationFrame(() => {\r\n    state[addallistenerssymbol]();\r\n  });\r\n}\r\nexport function unwatch(state: ReactiveState): void {\r\n  state[removeallistenerssymbol]();\r\n}\r\n\r\nexport function rewatch(state: ReactiveState): void {\r\n  state[addallistenerssymbol]();\r\n}\r\n","export const requestAnimationFrame = window.requestAnimationFrame;\r\nimport { seteletext, setelehtml } from \"./dom\";\r\n\r\nimport { watch } from \"./watch\";\r\nimport ReactiveState, { isReactiveState } from \"./primitivestate\";\r\nexport default {\r\n  ref(ele: Element, ref: { value: any }) {\r\n    if (typeof ref == \"object\") {\r\n      ref.value = ele;\r\n    } else {\r\n      throw TypeError(\"invalid ref\");\r\n    }\r\n  },\r\n  html(ele: Element, html: string | ReactiveState) {\r\n    createhtmlandtextdirective(setelehtml, \"html\")(ele, html);\r\n\r\n    // ele.innerHTML = html;\r\n    // console.log(ele.outerHTML);\r\n    /*  if (typeof html == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        setelehtml(ele, html);\r\n\r\n        /* ele.innerHTML = html;*/\r\n    //   console.log(ele.outerHTML);\r\n    /*     });\r\n    } else if (html instanceof ReactiveState) {\r\n      //   const ReactiveState = html;\r\n      watch(html, (state: { value: any }) => {\r\n        /*ele.innerHTML = String(state);*/\r\n    /*\r\n        setelehtml(ele, String(state));\r\n      });\r\n      //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.innerHTML = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"html\");\r\n        /*  ele.innerHTML = String(html);*/\r\n    /*\r\n        setelehtml(ele, String(html));\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid html\");\r\n    }\r\n\r\n*/\r\n  },\r\n  text(ele: Element, text: string | ReactiveState) {\r\n    createhtmlandtextdirective(seteletext, \"text\")(ele, text);\r\n\r\n    /*\r\n\r\n  // ele.textContent = text;\r\n    // console.log(ele.outerHTML);\r\n    if (typeof text == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        seteletext(ele, text);\r\n        /*    ele.textContent = text;*/\r\n    /*      //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (text instanceof ReactiveState) {\r\n      //   const ReactiveState = text;\r\n      watch(text, (state: { value: any }) => {\r\n        seteletext(ele, String(state));\r\n\r\n        /* ele.textContent = String(state);*/\r\n    /*   });\r\n      //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.textContent = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"text\");\r\n        seteletext(ele, String(text));\r\n\r\n        /*  ele.textContent = String(text);*/\r\n    /*    });\r\n    } else {\r\n      throw TypeError(\"invalid text\");\r\n    }\r\n\r\n*/\r\n  }\r\n};\r\nfunction createhtmlandtextdirective(seteletext: Function, errorname: string) {\r\n  return function(ele: Element, text: string | ReactiveState) {\r\n    if (typeof text == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        seteletext(ele, text);\r\n        /*    ele.textContent = text;*/\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (\r\n      isReactiveState(text)\r\n      //  text instanceof ReactiveState\r\n    ) {\r\n      //   const ReactiveState = text;\r\n      watch(text, (state: { value: any }) => {\r\n        seteletext(ele, String(state));\r\n\r\n        /* ele.textContent = String(state);*/\r\n      });\r\n      //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.textContent = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"text\");\r\n        seteletext(ele, String(text));\r\n\r\n        /*  ele.textContent = String(text);*/\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid \" + errorname);\r\n    }\r\n  };\r\n}\r\n","import Virtualdom from \"./virtualdom\";\r\ninterface Extendfun {\r\n  (element: Element, value: any, vdom: Virtualdom): void;\r\n}\r\nimport directives from \"./directives\";\r\nexport default function extenddirectives(options: {\r\n  [s: string]: Extendfun;\r\n}): void {\r\n  Object.entries(options).forEach(([key, value]) => {\r\n    if (typeof value !== \"function\") {\r\n      throw TypeError(\"invalid directive\");\r\n    } else {\r\n      directives[key] = value;\r\n    }\r\n  });\r\n}\r\n","import ReactiveState, {\r\n  // ReactiveState,\r\n  isReactiveState\r\n} from \"./primitivestate\";\r\nimport directives from \"./extend-directive\";\r\nimport Virtualdom from \"./virtualdom\";\r\ndirectives({\r\n  value(element: any, value: ReactiveState, vdom: Virtualdom) {\r\n    if (\r\n      isReactiveState(value) &&\r\n      //   value instanceof ReactiveState\r\n\r\n      (vdom.type === \"input\" || vdom.type === \"textarea\")\r\n    ) {\r\n      vdom.bindattr[\"value\"] = value;\r\n      [\"change\", \"input\"].forEach(eventname => {\r\n        const origin = vdom.onevent[eventname];\r\n\r\n        const eventsarray = [origin].flat(Infinity);\r\n\r\n        // vdom.onevent[eventname] =\r\n        Reflect.set(\r\n          vdom.onevent,\r\n          eventname,\r\n          eventsarray\r\n            .concat([\r\n              (e: any) => {\r\n                return (value.value = e.target.value);\r\n              }\r\n            ])\r\n            .filter(Boolean)\r\n        );\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid ReactiveState or element\");\r\n    }\r\n  }\r\n});\r\n","//import setlikearray from \"./setlikearay\";\r\n\r\n// const customElementsarray = new Set;\r\nimport RandomDefineCustomElement from \"./CustomElementRegistry\";\r\n/* function getcustomelementname(initclass: any): string {\r\n  return customElements(initclass);\r\n} */\r\nimport { isfunction } from \"./util\";\r\nexport function isclassextendsHTMLElement(initclass: {\r\n  prototype: any;\r\n}): boolean {\r\n  return !!(\r\n    isfunction(initclass) &&\r\n    initclass.prototype &&\r\n    initclass.prototype instanceof HTMLElement\r\n  );\r\n}\r\n\r\nimport { construct } from \"./reflect\";\r\n// import Reflect from \"./reflect\";\r\n\r\nimport { Class } from \"./rendervdomtoreal\";\r\n\r\nexport function createcostumelemet(\r\n  initclass: Class | Function,\r\n  propsjson?: object,\r\n  children?: any[],\r\n  options?: any\r\n): HTMLElement {\r\n  if (isclassextendsHTMLElement(initclass)) {\r\n    // customElementsarray.push(initclass);\r\n    /*   const elementname =\r\n     getcustomelementname(initclass); */\r\n    /* if (customElements.get(elementname) === initclass) {\r\n    } else {\r\n      customElements.define(elementname, initclass);\r\n    } */\r\n    RandomDefineCustomElement(initclass);\r\n    return construct(initclass, [propsjson, children, options]); // (children);\r\n  } else {\r\n\r\nconsole.error(initclass)\r\n\r\n    throw TypeError(\"invalid custom element class !\");\r\n  }\r\n}\r\n","import { isclassextendsHTMLElement } from \"./customelement\";\r\n\r\nfunction 使用value从表中查询key(表: object, 组件状态名: any) {\r\n  return Object.entries(表).find(v => {\r\n    return v[1] === 组件状态名;\r\n  })[0];\r\n}\r\n\r\nimport { get, getPrototypeOf } from \"./reflect\";\r\ninterface ElementDefinitionOptions {\r\n  extends?: string;\r\n}\r\nwindow.CustomElementRegistry = get(\r\n  getPrototypeOf(window.customElements),\r\n  \"constructor\"\r\n);\r\nconst { customElements, CustomElementRegistry } = window;\r\n\r\n// export default customElements;\r\nconst elementset = Symbol.for(\"elementset\");\r\nconst elementmap = Symbol.for(\"elementmap\");\r\nexport default (initclass: Function, extendsname?: string) =>\r\n  RandomDefineCustomElement(initclass, extendsname);\r\n\r\nfunction RandomDefineCustomElement(\r\n  initclass: Function,\r\n  extendsname?: string,\r\n  length = 1\r\n): string {\r\n  if (!isclassextendsHTMLElement(initclass)) {\r\n    throw TypeError(\"invalid custom element class !\");\r\n  }\r\n\r\n  //如果未注册自定义组件，则用随机名称注册，如果名称重复则重新生成新的随机名\r\n\r\n  if (!customElements[elementset].has(initclass)) {\r\n    const elementname = getrandomstringandnumber(length);\r\n\r\n    if (customElements.get(elementname)) {\r\n      return RandomDefineCustomElement(initclass, extendsname, length + 1);\r\n    } else {\r\n      if (extendsname) {\r\n        customElements.define(elementname, initclass, { extends: extendsname });\r\n      } else {\r\n        customElements.define(elementname, initclass);\r\n      }\r\n    }\r\n\r\n    return elementname;\r\n  } else {\r\n    return 使用value从表中查询key(customElements[elementmap], initclass);\r\n  }\r\n\r\n  //如果已经注册自定义组件，则返回注册的名称\r\n}\r\nif (!customElements[elementset]) {\r\n  customElements[elementset] = new Set();\r\n}\r\nif (!customElements[elementmap]) {\r\n  customElements[elementmap] = {};\r\n}\r\n/* customElements.get = function name(name) {\r\n  return customElements[elementmap].get(name);\r\n};\r\n */\r\ncustomElements.define = function(\r\n  name: string,\r\n  constructor: Function,\r\n  options?: ElementDefinitionOptions\r\n): void {\r\n  if (!isclassextendsHTMLElement(constructor)) {\r\n    throw TypeError(\"invalid custom element class !\");\r\n  }\r\n\r\n  CustomElementRegistry.prototype.define.call(\r\n    customElements,\r\n    name,\r\n    constructor,\r\n    options\r\n  );\r\n  customElements[elementset].add(constructor);\r\n  customElements[elementmap][name] = constructor;\r\n};\r\n\r\ncustomElements[Symbol.iterator] = () => {\r\n  const entries = Object.entries(customElements[elementmap]);\r\n\r\n  return entries[Symbol.iterator].call(entries);\r\n};\r\nfunction getrandomcharactor() {\r\n  return get(\r\n    Array(26)\r\n      .fill(undefined)\r\n      .map((v, i) => 97 + i)\r\n      .map(n => String.fromCharCode(n)),\r\n    Math.floor(Math.random() * 26)\r\n  );\r\n\r\n  // [Math.floor(Math.random() * 26)];\r\n}\r\nfunction getrandomhexnumber() {\r\n  return get(\r\n    Array(16)\r\n      .fill(undefined)\r\n      .map((v, i) => i),\r\n    Math.floor(Math.random() * 16)\r\n  ).toString(16);\r\n\r\n  /*  Array(16)\r\n    .fill(undefined)\r\n    .map((v, i) => i)\r\n    [Math.floor(Math.random() * 16)].toString(16); */\r\n}\r\nfunction getrandomstringandnumber(length = 4) {\r\n  return (\r\n    Array(length)\r\n      .fill(undefined)\r\n      .map(() => getrandomcharactor())\r\n\r\n      .join(\"\") +\r\n    \"-\" +\r\n    Array(length)\r\n      .fill(undefined)\r\n      .map(() => getrandomhexnumber())\r\n      .join(\"\")\r\n  );\r\n}\r\n","export function isVirtualdom(a: any): a is Virtualdom {\r\n  return a instanceof Virtualdom;\r\n}\r\nimport ReactiveState, { isReactiveState } from \"./primitivestate\";\r\nimport { Class } from \"./rendervdomtoreal\";\r\n\r\nexport default class Virtualdom {\r\n  options: any = undefined;\r\n  element: undefined | Element = undefined;\r\n  type: string | Function | Class;\r\n  props: { [key: string]: string | object } = {};\r\n  children: Array<Virtualdom | string | ReactiveState> = [];\r\n  directives: object = {};\r\n  onevent: object = {};\r\n  bindattr: { [key: string]: ReactiveState } = {};\r\n  constructor(\r\n    type: Function | string = \"\",\r\n    props: object = {},\r\n    children: Array<Virtualdom | string | ReactiveState> = []\r\n  ) {\r\n    // console.log(type, props, children);\r\n    const propsentries = Object.entries(props);\r\n    Object.assign(this, {\r\n      type,\r\n      bindattr: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /[A-Za-z]/.test(key[0]))\r\n          .filter(\r\n            e => isReactiveState(e[1])\r\n            // e[1] instanceof ReactiveState\r\n          )\r\n      ),\r\n      props: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /[A-Za-z]/.test(key[0]))\r\n          .filter(\r\n            e => !isReactiveState(e[1])\r\n            //    e[1] instanceof ReactiveState\r\n          )\r\n      ),\r\n      children,\r\n      onevent: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /\\@/.test(key[0]))\r\n          .map(([key, value]) => [key.slice(1), value])\r\n      ),\r\n      directives: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /\\*/.test(key[0]))\r\n          .map(([key, value]) => [key.slice(1), value])\r\n      )\r\n    });\r\n    Object.defineProperty(this, Symbol.toStringTag, {\r\n      value: \"virtualdom\",\r\n      configurable: true\r\n    });\r\n  }\r\n}\r\n","var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","import ReactiveState from \"./primitivestate\";\r\nimport { isstring, isobject, isfunction } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\nexport default function createElement(\r\n  type: Function,\r\n  props: any,\r\n  ...children: any[]\r\n): Virtualdom;\r\nexport default function createElement(\r\n  type: Function | string = \"\",\r\n  props: any = {},\r\n  ...children: Array<Virtualdom | string | ReactiveState>\r\n): Virtualdom | Array<Virtualdom | string | ReactiveState> {\r\n  // | Array<Virtualdom | string>\r\n  // if(isarray()){}\r\n  /* add fragment element */\r\n  //   console.log(type, props, children);\r\n  let typenormalized = isstring(type) || isfunction(type) ? type : \"\";\r\n  const propsnormalized = isobject(props) ? props : {};\r\n  const childrennormalized = children.flat(1);\r\n  if (\r\n    isstring(typenormalized)\r\n    //   typeof typenormalized === \"string\"\r\n  ) {\r\n    typenormalized = typenormalized.trim().toLowerCase();\r\n  }\r\n\r\n  if (\r\n    //typeof typenormalized === \"string\" &&\r\n\r\n    \"\" === typenormalized\r\n  ) {\r\n    return childrennormalized;\r\n  }\r\n  /* propsnormalized = Object.fromEntries(\r\n    Object.entries(propsnormalized).map(([key, value]) => [\r\n      key.trim().toLowerCase(),\r\n      value\r\n    ])\r\n  ); */\r\n  return new Virtualdom(typenormalized, propsnormalized, childrennormalized);\r\n}\r\n","import { isReactiveState } from \"./primitivestate\";\r\nimport { isstring, isArray } from \"./util\";\r\nimport { isVirtualdom } from \"./virtualdom\";\r\nimport htm from \"htm/dist/htm.module.js\";\r\nimport h from \"./createelement\";\r\n\r\nconst html = htm.bind(h);\r\n\r\n/* 如果出现未闭合标签会产生错误的vdom */\r\nexport function isvalidvdom(v: any) {\r\n  let flag = false;\r\n  if (isArray(v)) {\r\n    flag = v\r\n      .map((ele: any) => {\r\n        return isvalidvdom(ele);\r\n        //isstring(ele) || ele instanceof Virtualdom;\r\n      })\r\n      .includes(false)\r\n      ? false\r\n      : true;\r\n    return flag;\r\n  } else if (\r\n    isVirtualdom(v)\r\n    // v instanceof Virtualdom\r\n  ) {\r\n    if (isvalidvdom(v.children)) {\r\n      return true;\r\n    }\r\n  } else if (\r\n    isReactiveState(v)\r\n    //  v instanceof ReactiveState\r\n  ) {\r\n    return true;\r\n  } else {\r\n    if (isstring(v)) {\r\n      return true;\r\n    }\r\n  }\r\n  return flag;\r\n}\r\nfunction assertvalidvirtualdom(...args: any[]) {\r\n  const vdom = html(...args);\r\n  if (isvalidvdom(vdom)) {\r\n    return vdom;\r\n  } else {\r\n    console.error(vdom);\r\n    throw new TypeError(\"invalid Virtualdom!\");\r\n  }\r\n}\r\nexport default assertvalidvirtualdom;\r\n","import { domaddlisten, domremovelisten } from \"./dom\";\r\nexport const eventlistenerssymbol = Symbol(\"eventlisteners\");\r\nimport { isArray } from \"./util\";\r\nexport default function(\r\n  element: Element,\r\n  eventname: string,\r\n  callback: EventListener | Array<EventListener>\r\n) {\r\n  if (!element[eventlistenerssymbol]) {\r\n    element[eventlistenerssymbol] = [];\r\n  }\r\n  if (typeof callback === \"function\") {\r\n    firstaddlisteners(element, eventname, [callback]);\r\n  } else if (isArray(callback)) {\r\n    firstaddlisteners(element, eventname, callback);\r\n  } else {\r\n    throw TypeError(\"invalid EventListener\");\r\n  }\r\n}\r\nexport function firstaddlisteners(\r\n  ele: Element,\r\n  event: string,\r\n  callarray: Array<EventListener>\r\n) {\r\n  callarray.forEach((call: EventListener) => {\r\n    ele[eventlistenerssymbol].push([event, call]);\r\n    domaddlisten(ele, event, call);\r\n  });\r\n}\r\nexport function removelisteners(\r\n  ele: Element | Node\r\n  //   event: string,\r\n  //   callarray: Array<EventListener>\r\n) {\r\n  if (ele[eventlistenerssymbol]) {\r\n    ele[eventlistenerssymbol].forEach(([event, call]) => {\r\n      //   ele[eventlistenerssymbol].push([event, call]);\r\n      domremovelisten(ele, event, call);\r\n    });\r\n  }\r\n}\r\nexport function readdlisteners(\r\n  ele: Element | Node\r\n  //   event: string,\r\n  //   callarray: Array<EventListener>\r\n) {\r\n  if (ele[eventlistenerssymbol]) {\r\n    ele[eventlistenerssymbol].forEach(([event, call]) => {\r\n      //   ele[eventlistenerssymbol].push([event, call]);\r\n      domaddlisten(ele, event, call);\r\n    });\r\n  }\r\n}\r\n","import { appendchild, setelehtml } from \"./dom\";\r\nexport default function(\r\n  ele:\r\n    | Node\r\n    | Array<\r\n        | HTMLElement\r\n        | Text\r\n        | SVGSVGElement\r\n        | DocumentFragment\r\n        | SVGElement\r\n        | Element\r\n        | Node\r\n        | any\r\n      >\r\n    | SVGElement\r\n    | DocumentFragment\r\n    | HTMLElement\r\n    | Text\r\n    | SVGSVGElement\r\n    | Element,\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element\r\n) {\r\n  setelehtml(container, \"\");\r\n  //   container.innerHTML = \"\";\r\n  let eles: Array<any>;\r\n  if (Array.isArray(ele)) {\r\n    eles = ele;\r\n  } else {\r\n    // appendchild(container, ele);\r\n    eles = [ele];\r\n  }\r\n  eles.forEach(e => appendchild(container, e));\r\n  return container;\r\n}\r\n","const Reflect = window.Reflect;\r\n\r\nconst {get: get, set: set} = Reflect;\r\n\r\nconst valuestring = \"value\";\r\n\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\n\r\nfunction isstring(a) {\r\n    return typeof a === \"string\";\r\n}\r\n\r\nfunction objtostylestring(o) {\r\n    return Object.entries(o).map(([key, value]) => key + \":\" + value).join(\";\");\r\n}\r\n\r\nfunction asserthtmlelement(ele) {\r\n    if (!(ele instanceof Element)) {\r\n        throw TypeError(\"invalid HTMLElement!\");\r\n    } else return true;\r\n}\r\n\r\nfunction createeleattragentreadwrite(ele) {\r\n    asserthtmlelement(ele);\r\n    const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n    var temp = Object.create(null);\r\n    const outputattrs = new Proxy(temp, {\r\n        ownKeys() {\r\n            const keys = attributesownkeys(ele);\r\n            return isinputtextortextareaflag ? Array.from(new Set([ ...keys, valuestring ])) : keys;\r\n        },\r\n        get(target, key) {\r\n            if (isinputtextortextareaflag && key === valuestring) {\r\n                return get(ele, valuestring);\r\n            } else {\r\n                const v = getattribute(ele, String(key));\r\n                if (v === \"\") {\r\n                    return true;\r\n                }\r\n                if (v === null) {\r\n                    return;\r\n                }\r\n                if (isstring(v)) {\r\n                    try {\r\n                        return JSON.parse(String(v));\r\n                    } catch (error) {\r\n                        return v;\r\n                    }\r\n                } else return;\r\n            }\r\n        },\r\n        set(t, key, v) {\r\n            if (isinputtextortextareaflag && key === valuestring) {\r\n                return set(ele, valuestring, v);\r\n            } else if (key === \"style\") {\r\n                setattribute(ele, String(key), isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v));\r\n                return true;\r\n            } else {\r\n                if (v === true) {\r\n                    v = \"\";\r\n                }\r\n                setattribute(ele, String(key), isobject(v) ? JSON.stringify(v) : String(v));\r\n                return true;\r\n            }\r\n        },\r\n        deleteProperty(t, k) {\r\n            removeAttribute(ele, String(k));\r\n            return true;\r\n        },\r\n        has(target, key) {\r\n            if (isinputtextortextareaflag && key === valuestring) {\r\n                return true;\r\n            } else {\r\n                return hasAttribute(ele, String(key));\r\n            }\r\n        },\r\n        defineProperty() {\r\n            return false;\r\n        },\r\n        getOwnPropertyDescriptor(target, key) {\r\n            const otherdescipter = {\r\n                enumerable: true,\r\n                configurable: true,\r\n                writable: true\r\n            };\r\n            const myvalue = get(outputattrs, key);\r\n            if (typeof myvalue !== \"undefined\") {\r\n                return {\r\n                    value: myvalue,\r\n                    ...otherdescipter\r\n                };\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n    });\r\n    return outputattrs;\r\n}\r\n\r\nfunction attributesownkeys(ele) {\r\n    return ele.getAttributeNames();\r\n}\r\n\r\nfunction getattribute(ele, key) {\r\n    return ele.getAttribute(key);\r\n}\r\n\r\nfunction geteletagname(ele) {\r\n    return ele.tagName.toLowerCase();\r\n}\r\n\r\nfunction setattribute(ele, key, value) {\r\n    return ele.setAttribute(key, value);\r\n}\r\n\r\nfunction removeAttribute(ele, key) {\r\n    return ele.removeAttribute(key);\r\n}\r\n\r\nfunction hasAttribute(ele, key) {\r\n    return ele.hasAttribute(key);\r\n}\r\n\r\nfunction isinputtextortextarea(ele) {\r\n    const tagname = geteletagname(ele);\r\n    return tagname === \"input\" && get(ele, \"type\") === \"text\" || tagname === \"textarea\";\r\n}\r\n\r\nexport default createeleattragentreadwrite;\r\n//# sourceMappingURL=index.js.map\r\n","export const bindstatesymbol = Symbol(\"bindstate\");\r\n\r\nexport const reactivestatesymbol = Symbol(\"reactive\");\r\nimport { watch } from \"./watch\";\r\nimport ReactiveState, { textnodesymbol } from \"./primitivestate\";\r\nexport const virtualdomsymbol = Symbol(\"virtualdom\");\r\nimport directives from \"./directives\";\r\nimport onevent, { eventlistenerssymbol } from \"./onevent\";\r\nimport { createcostumelemet } from \"./customelement\";\r\nimport {\r\n  mathnamespace,\r\n  createmathelement,\r\n  svgnamespace,\r\n  createsvgelement,\r\n  createnonescript,\r\n  createnativeelement,\r\n  createElementNS,\r\n  createtextnode,\r\n  changetext\r\n} from \"./dom\";\r\nfunction throwinvalideletype(type) {\r\n  console.error(type);\r\n  throw TypeError(\"invalid element type!\");\r\n}\r\nimport mount from \"./mount\";\r\nimport createeleattr from \"dom-element-attribute-agent-proxy\";\r\nimport { isobject, isArray } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\nexport default function render(\r\n  vdom: Array<Virtualdom | string | ReactiveState>,\r\n  namespace?: string\r\n): Array<Node | any>;\r\nexport default function render(\r\n  vdom: Virtualdom | string | ReactiveState,\r\n  namespace?: string\r\n): Node | any;\r\nexport default function render(\r\n  vdom:\r\n    | Virtualdom\r\n    | string\r\n    | ReactiveState\r\n    | Array<Virtualdom | string | ReactiveState>,\r\n  namespace?: string\r\n):\r\n  | HTMLElement\r\n  | Text\r\n  | SVGSVGElement\r\n  | DocumentFragment\r\n  | SVGElement\r\n  | Element\r\n  | Array<Node | any> {\r\n  if (typeof vdom === \"string\") {\r\n    return createtextnode(vdom);\r\n  } else if (vdom instanceof ReactiveState) {\r\n    const reactive = vdom;\r\n    const textnode = createtextnode(String(reactive));\r\n    textnode[reactivestatesymbol] = reactive;\r\n    reactive[textnodesymbol] = textnode;\r\n    watch(reactive, (state: { value: string }) => {\r\n      changetext(textnode, String(state));\r\n    });\r\n    const element = textnode;\r\n    element[bindstatesymbol] = new Set();\r\n    element[bindstatesymbol].add(reactive);\r\n    return textnode;\r\n  } else if (vdom instanceof Virtualdom && \"type\" in vdom) {\r\n    const { type } = vdom;\r\n    let element: HTMLElement | SVGSVGElement | SVGElement | Element;\r\n    if (typeof type === \"string\") {\r\n      if (type === \"script\") {\r\n        /* 禁止加载脚本 */\r\n\r\n        return createnonescript();\r\n      } else if (type === \"svg\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createsvgelement();\r\n      } else if (type === \"math\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createmathelement();\r\n      } else if (\"\" === type) {\r\n        return render(vdom.children);\r\n      } else {\r\n        element = namespace\r\n          ? createElementNS(namespace, type)\r\n          : createnativeelement(type);\r\n      }\r\n    } else if (typeof type == \"function\") {\r\n      //添加默认props\r\n\r\n      /*static defaultProps = {\r\n        name: 'Omi',\r\n        myAge: 18\r\n  }*/\r\n      if (isobject(type[\"defaultProps\"])) {\r\n        vdom.props = JSON.parse(\r\n          JSON.stringify({ ...type[\"defaultProps\"], ...vdom.props })\r\n        );\r\n      }\r\n\r\n      const propsjson = JSON.parse(\r\n        JSON.stringify({\r\n          ...vdom.props,\r\n          ...Object.fromEntries(\r\n            Object.entries(vdom.bindattr).map(([key, value]) => {\r\n              return [key, value.value];\r\n            })\r\n          )\r\n        })\r\n      );\r\n      element = createcostumelemet(\r\n        type,\r\n        propsjson,\r\n        vdom.children,\r\n        vdom.options\r\n      );\r\n    } else {\r\n      throwinvalideletype(vdom);\r\n      // throw TypeError(\"invalid element type!\");\r\n    }\r\n    handleprops(element, vdom);\r\n\r\n    /* 自定义组件不添加children,而是从构造函数传入 */\r\n    if (typeof type !== \"function\") {\r\n      mount(\r\n        vdom.children.map(e => {\r\n          if (type === \"svg\") {\r\n            /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n            //   element.innerHTML = element.innerHTML;\r\n            return render(e, svgnamespace);\r\n          } else if (type === \"math\") {\r\n            return render(e, mathnamespace);\r\n          } else if (namespace) {\r\n            return render(e, namespace);\r\n          } else {\r\n            return render(e);\r\n          }\r\n        }),\r\n\r\n        element\r\n      );\r\n    }\r\n    return element;\r\n  } else if (isArray(vdom)) {\r\n    return vdom.map(a => render(a));\r\n  } else {\r\n    throwinvalideletype(vdom);\r\n    // throw TypeError(\"invalid element type!\");\r\n  }\r\n}\r\n\r\nexport interface Class {\r\n  new (propsjson?: object, children?: any[], options?: any): HTMLElement;\r\n  prototype: HTMLElement;\r\n}\r\nimport { isReactiveState } from \"./primitivestate\";\r\nfunction handleprops(\r\n  element: HTMLElement | Element | SVGSVGElement | SVGElement,\r\n  vdom: Virtualdom\r\n) {\r\n  ((element, vdom) => {\r\n    Object.entries(vdom.directives).forEach(([name, value]) => {\r\n      if (name in directives && typeof directives[name] === \"function\") {\r\n        directives[name](element, value, vdom);\r\n      } else {\r\n        throw new Error(\"invalid directives \" + name);\r\n      }\r\n    });\r\n\r\n    const attribute1 = createeleattr(element);\r\n    Object.assign(attribute1, vdom.props);\r\n    /* 添加常量的属性 */\r\n    element[virtualdomsymbol] = vdom;\r\n    vdom.element = element;\r\n    /* 添加绑定属性 */\r\n\r\n    Object.entries(vdom.bindattr).forEach(([key, primitivestate]) => {\r\n      attribute1[key] = primitivestate.value;\r\n      watch(primitivestate, (state: { value: any }) => {\r\n        attribute1[key] = state.value;\r\n      });\r\n      /*     primitivestate[subscribesymbol]();\r\n      requestAnimationFrame(() => {\r\n        primitivestate[addallistenerssymbol]();\r\n      }); */\r\n    });\r\n\r\n    /* 添加事件绑定和指令执行 */\r\n\r\n    if (!element[eventlistenerssymbol]) {\r\n      element[eventlistenerssymbol] = [];\r\n    }\r\n\r\n    Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\r\n      onevent(element, event, callbacks);\r\n    });\r\n  })(element, vdom);\r\n  if (!element[bindstatesymbol]) {\r\n    element[bindstatesymbol] = new Set();\r\n  }\r\n\r\n  [Object.values(vdom.bindattr), Object.values(vdom.directives)]\r\n    .flat()\r\n    .filter(\r\n      e => isReactiveState(e)\r\n      // e instanceof ReactiveState\r\n    )\r\n\r\n    .forEach(e => element[bindstatesymbol].add(e));\r\n}\r\n","import ReactiveState from \"./primitivestate\";\r\nimport document from \"./dom\";\r\nimport { isvalidvdom } from \"./html\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport render from \"./rendervdomtoreal\";\r\nimport mount from \"./mount\";\r\nimport { isArray } from \"./util\";\r\nexport default function createApp(\r\n  vdom:\r\n    | Node\r\n    | Virtualdom\r\n    | string\r\n    | Array<Virtualdom | string | ReactiveState | Node>\r\n    | ReactiveState,\r\n  container: HTMLElement | Element\r\n): HTMLElement | Element {\r\n  const el = container;\r\n  if (\r\n    !(\r\n      isvalidvdom(vdom) ||\r\n      vdom instanceof Node ||\r\n      (isArray(vdom) && isNodeArray(vdom))\r\n    )\r\n  ) {\r\n    console.error(vdom);\r\n    throw TypeError(\"invalid Virtualdom \");\r\n  }\r\n  if (!(el instanceof HTMLElement)) {\r\n    throw TypeError(\"invalid container HTMLElement!\");\r\n  }\r\n\r\n  if (\r\n    el === document.body ||\r\n    el === document.documentElement ||\r\n    el === document.head\r\n  ) {\r\n    throw Error(\"Do not mount  to <html> or <body> <head>.\");\r\n  }\r\n  let elesarray: Array<any>;\r\n  if (Array.isArray(vdom)) {\r\n    elesarray = vdom;\r\n  } else {\r\n    elesarray = [vdom];\r\n  }\r\n  if (isvalidvdom(vdom)) {\r\n    mount(elesarray.map(e => render(e)), container);\r\n  } else if (vdom instanceof Node || isArray(vdom)) {\r\n    mount(elesarray, container);\r\n  }\r\n\r\n  //\r\n  return container;\r\n}\r\nfunction isNodeArray(array: any[]): array is Node[] {\r\n  return isArray(array) && !array.map(e => e instanceof Node).includes(false);\r\n}\r\n","export default function createRef(init: any): object {\r\n  return { value: init };\r\n}\r\n","const Reflect = window.Reflect;\r\nconst { ownKeys, deleteProperty, apply, construct, defineProperty, get, getOwnPropertyDescriptor, getPrototypeOf, has, set, setPrototypeOf } = Reflect;\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback invalid !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let fakeobj;\r\n        if (isobject(target)) {\r\n            fakeobj = {};\r\n        }\r\n        else {\r\n            fakeobj = () => { };\r\n        }\r\n        setPrototypeOf(fakeobj, null);\r\n        return (fakeobj => {\r\n            return new Proxy(fakeobj, {\r\n                defineProperty(t, p, a) {\r\n                    return defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, get(target, p));\r\n                    return deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = getOwnPropertyDescriptor(target, k);\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, get(target, k));\r\n                    }\r\n                    return set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(fakeobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nfunction observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback  invalid function \");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        throw Error(\"Proxy unsupported!\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\n\r\nexport default observedeepagent;\r\n//# sourceMappingURL=index.js.map\r\n","import {\r\n  deleteProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  has,\r\n  ownKeys,\r\n  set\r\n} from \"./reflect\";\r\nimport deepobserve from \"deep-observe-agent-proxy\";\r\nimport { isobject } from \"./util\";\r\nimport isprimitive from \"./isprimitive\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  textnodesymbol,\r\n  isReactiveState\r\n} from \"./primitivestate\";\r\nexport default function createstate(\r\n  init: string | number | boolean | undefined | ReactiveState | object\r\n): object {\r\n  if (isprimitive(init)) {\r\n    return new Proxy(new ReactiveState(init), {\r\n      defineProperty() {\r\n        return false;\r\n      },\r\n      deleteProperty() {\r\n        return false;\r\n      },\r\n      set(target, key, value) {\r\n        if (key === textnodesymbol) {\r\n          return set(target, key, value);\r\n        }\r\n        if (key === \"value\" && isprimitive(value)) {\r\n          // if (target[key] !== value) {\r\n          set(target, key, value);\r\n          target[dispatchsymbol]();\r\n          // }\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n  } else if (\r\n    isReactiveState(init)\r\n    // init instanceof ReactiveState\r\n  ) {\r\n    // 如果init是个 ReactiveState，则对其解包，并生成新的 ReactiveState\r\n    return createstate(init.value);\r\n  } else if (isobject(init)) {\r\n    return new Proxy(new ReactiveState(init), {\r\n      defineProperty() {\r\n        return false;\r\n      },\r\n      getOwnPropertyDescriptor(target, key) {\r\n        const myvalue = get(target, \"value\");\r\n\r\n        const descripter =\r\n          getOwnPropertyDescriptor(target, key) ||\r\n          getOwnPropertyDescriptor(myvalue, key);\r\n        if (descripter) {\r\n          descripter.configurable = true;\r\n        }\r\n\r\n        return descripter;\r\n      },\r\n      deleteProperty(target, key) {\r\n        const myvalue = get(target, \"value\");\r\n        if (has(myvalue, key)) {\r\n          deleteProperty(myvalue, key);\r\n          target[dispatchsymbol](key);\r\n          return true;\r\n        } else {\r\n          return true;\r\n        }\r\n      },\r\n      has(target, key) {\r\n        const myvalue = get(target, \"value\");\r\n        return has(target, key) || has(myvalue, key);\r\n      },\r\n      get(target, key) {\r\n        const value = get(target, \"value\");\r\n        if (has(target, key)) {\r\n          return get(target, key);\r\n        } else if (has(value, key)) {\r\n          /*  */\r\n\r\n          return deepobserve(get(value, key), () => {\r\n            target[dispatchsymbol](key);\r\n          });\r\n        }\r\n      },\r\n      ownKeys(target) {\r\n        return Array.from(\r\n          new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n        );\r\n      },\r\n      set(target, key, value) {\r\n        if (key === textnodesymbol) {\r\n          return set(target, key, value);\r\n        }\r\n        const myvalue = get(target, \"value\");\r\n        if (key === \"value\" && isobject(value)) {\r\n          // if (target[key] !== value) {\r\n          set(target, key, value);\r\n          target[dispatchsymbol]();\r\n\r\n          // }\r\n          return true;\r\n        } else if (!has(target, key)) {\r\n          set(myvalue, key, value);\r\n          target[dispatchsymbol](key);\r\n\r\n          //\r\n        } else if (key === \"length\") {\r\n          set(myvalue, key, value);\r\n          target[dispatchsymbol](key);\r\n        } else {\r\n          return false;\r\n        }\r\n        return true;\r\n      }\r\n    });\r\n  } else {\r\n    throw TypeError(\"invalid State\");\r\n  }\r\n}\r\n","import { getAttribute, setAttribute, removeAttribute } from \"./dom\";\r\nconst attributeChangedCallback = \"attributeChangedCallback\";\r\nimport { isFunction } from \"./util\";\r\nexport class AttrChange extends HTMLElement {\r\n  /* disconnectedCallback() {\r\n  console.log('Custom square element removed from page.');\r\n} */\r\n  /* connectedCallback() {\r\n  console.log('Custom square element added to page.');\r\n  updateStyle(this);\r\n} */\r\n  //\r\n  //   connectedCallback(){}\r\n  /* attributeChangedCallback(name, oldValue, newValue) {\r\n  console.log('Custom square element attributes changed.');\r\n  updateStyle(this);\r\n} */\r\n  setAttribute(qualifiedName: string, value: string) {\r\n    const oldValue = getAttribute(this, qualifiedName);\r\n    // super.getAttribute(qualifiedName);\r\n\r\n    if (oldValue !== value) {\r\n      setAttribute(this, qualifiedName, value);\r\n      //   super.setAttribute(qualifiedName, value);\r\n      if (isFunction(this[attributeChangedCallback])) {\r\n        this[attributeChangedCallback](qualifiedName, oldValue, value);\r\n      }\r\n    }\r\n  }\r\n  removeAttribute(qualifiedName: string) {\r\n    const oldValue = getAttribute(this, qualifiedName);\r\n\r\n    if (null !== oldValue) {\r\n      //   super.removeAttribute(qualifiedName);\r\n      removeAttribute(this, qualifiedName);\r\n      if (isFunction(this[attributeChangedCallback])) {\r\n        this[attributeChangedCallback](qualifiedName, oldValue, undefined);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import ReactiveState from \"./primitivestate\";\r\nimport {\r\n  eventlistenerssymbol,\r\n  removelisteners,\r\n  readdlisteners\r\n} from \"./onevent\";\r\nimport { bindstatesymbol } from \"./rendervdomtoreal\";\r\nimport { rewatch, unwatch } from \"./watch\";\r\nimport { isArray } from \"./util\";\r\nimport { getdomchildren } from \"./dom\";\r\n\r\nexport function onmounted(ele: Element | Node | Array<Node>) {\r\n  if (isArray(ele)) {\r\n    ele.forEach(e => {\r\n      onmounted(e);\r\n    });\r\n  } else if (ele instanceof Node) {\r\n    if (ele[eventlistenerssymbol]) {\r\n      readdlisteners(ele);\r\n    }\r\n    if (ele[bindstatesymbol]) {\r\n      ele[bindstatesymbol].forEach((state: ReactiveState) => {\r\n        rewatch(state);\r\n      });\r\n\r\n      // readdlisteners(ele);\r\n    }\r\n    onmounted(getdomchildren(ele));\r\n  }\r\n\r\n  //\r\n}\r\nexport function onunmounted(ele: Element | Node | Array<Node>) {\r\n  if (isArray(ele)) {\r\n    ele.forEach(e => {\r\n      onunmounted(e);\r\n    });\r\n  } else if (ele instanceof Node) {\r\n    if (ele[eventlistenerssymbol]) {\r\n      removelisteners(ele);\r\n    }\r\n    if (ele[bindstatesymbol]) {\r\n      ele[bindstatesymbol].forEach((state: ReactiveState) => {\r\n        unwatch(state);\r\n      });\r\n\r\n      // readdlisteners(ele);\r\n    }\r\n    //\r\n    onunmounted(getdomchildren(ele));\r\n  }\r\n}\r\n","import render from \"./rendervdomtoreal\";\r\nimport createeleattr from \"dom-element-attribute-agent-proxy\";\r\nimport { AttrChange } from \"./attrchange\";\r\n// import createElement from \"./createelement\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport ReactiveState, { isReactiveState } from \"./primitivestate\";\r\nconst truevdomsymbol = Symbol(\"truevdom\");\r\nconst falsevdomsymbol = Symbol(\"falsevdom\");\r\nconst trueelesymbol = Symbol(\"trueele\");\r\nconst falseelesymbol = Symbol(\"falseele\");\r\nconst handletrue = getsymbol(\"handletrue\");\r\nconst handlefalse = getsymbol(\"handlefalse\");\r\n// const readysymbol = Symbol(\"ready\");\r\nimport { onmounted, onunmounted } from \"./elementonmountandunmount\";\r\n// import mount from \"./mount\";\r\nimport { isarray, getsymbol, isundefined } from \"./util\";\r\nimport createApp from \"./createApp\";\r\nimport { setelehtml } from \"./dom\";\r\nimport { isvalidvdom } from \"./html\";\r\nclass Condition extends AttrChange {\r\n  constructor(propsjson?: object, children?: any[], options?: any) {\r\n    super();\r\n    this[truevdomsymbol] = isarray(options.true)\r\n      ? options.true\r\n      : [options.true].filter(Boolean);\r\n    this[falsevdomsymbol] = isarray(options.false)\r\n      ? options.false\r\n      : [options.false].filter(Boolean);\r\n    // options.false;\r\n  }\r\n  [falseelesymbol]: any[];\r\n  [trueelesymbol]: any[];\r\n  [truevdomsymbol]: any[];\r\n  [falsevdomsymbol]: any[];\r\n  //   [readysymbol] = false;\r\n  [handlefalse]() {\r\n    setelehtml(this, \"\");\r\n    if (this[falsevdomsymbol]) {\r\n      if (!this[falseelesymbol]) {\r\n        // } else {\r\n        this[falseelesymbol] = render(this[falsevdomsymbol]);\r\n        // this[falsevdomsymbol].map(e => render(e));\r\n      }\r\n      //   mount(this[falseelesymbol], this);\r\n      const elementtomount = this[falseelesymbol];\r\n      createApp(elementtomount, this);\r\n      elementtomount.forEach(e => onmounted(e));\r\n      if (this[trueelesymbol]) {\r\n        this[trueelesymbol].forEach(e => onunmounted(e));\r\n      }\r\n    }\r\n  }\r\n  [handletrue]() {\r\n    setelehtml(this, \"\");\r\n    if (this[truevdomsymbol]) {\r\n      if (!this[trueelesymbol]) {\r\n        this[trueelesymbol] = render(this[truevdomsymbol]);\r\n        // this[truevdomsymbol].map(e => render(e));\r\n      }\r\n      //\r\n      //   mount(this[trueelesymbol], this);\r\n      const elementtomount = this[trueelesymbol];\r\n      createApp(elementtomount, this);\r\n      elementtomount.forEach(e => onmounted(e));\r\n      if (this[falseelesymbol]) {\r\n        this[falseelesymbol].forEach(e => onunmounted(e));\r\n      }\r\n    }\r\n  }\r\n  connectedCallback() {\r\n    const attrs = createeleattr(this);\r\n    // console.log(attrs);\r\n    if (true === attrs[\"value\"]) {\r\n      this[handletrue]();\r\n    }\r\n    if (false === attrs[\"value\"]) {\r\n      this[handlefalse]();\r\n      //\r\n    }\r\n\r\n    //\r\n  }\r\n  /* disconnectedCallback() {\r\n    //\r\n  } */\r\n\r\n  attributeChangedCallback(name: string /* , oldValue: any, newValue: any */) {\r\n    // console.log(name, oldValue, newValue);\r\n    if (name === \"value\") {\r\n      const attrs = createeleattr(this);\r\n      //   console.log(attrs);\r\n      if (true === attrs[\"value\"]) {\r\n        this[handletrue]();\r\n        //\r\n      }\r\n      if (false === attrs[\"value\"]) {\r\n        this[handlefalse]();\r\n        //\r\n      }\r\n    }\r\n\r\n    //\r\n  }\r\n}\r\nexport default function(\r\n  conditon: ReactiveState,\r\n  iftrue?:\r\n    | Virtualdom\r\n    | string\r\n    | Array<Virtualdom | string | ReactiveState>\r\n    | ReactiveState,\r\n  iffalse?:\r\n    | Virtualdom\r\n    | string\r\n    | Array<Virtualdom | string | ReactiveState>\r\n    | ReactiveState\r\n): Virtualdom {\r\n  if (!isReactiveState(conditon)) {\r\n    throw TypeError(\"invalid ReactiveState\");\r\n  }\r\n  [iftrue, iffalse].forEach(a => {\r\n    if (!(isundefined(a) || isvalidvdom(a))) {\r\n      throw new TypeError(\"invalid Virtualdom\");\r\n    }\r\n  });\r\n  const vdom = new Virtualdom(Condition, { value: conditon });\r\n  vdom.options = { true: iftrue, false: iffalse };\r\n  return vdom;\r\n  /*  */\r\n}\r\n","if (\r\n  typeof HTMLElement !== \"function\" ||\r\n  typeof Proxy !== \"function\" ||\r\n  typeof customElements !== \"object\" ||\r\n  typeof CustomElementRegistry !== \"function\"\r\n) {\r\n  throw new TypeError(\" browser not supported !\");\r\n}\r\n\r\n//请自行使用babel-preset-env和core-js 3\r\n//import \"./Object-fromEntries\";\r\n// import \"./setImmediate\";\r\n//import \"./array-prototype-flat\";\r\nimport \"./input-textarea-value-directive-Bidirectional-binding\";\r\n\r\nimport \"./CustomElementRegistry\";\r\nimport html from \"./html\";\r\nimport createElement from \"./createelement\";\r\nexport { html };\r\nexport { createElement, createElement as h };\r\nimport createApp from \"./createApp\";\r\nexport { createApp };\r\nimport createRef from \"./createref\";\r\nexport { createRef };\r\nimport createState from \"./createstate\";\r\nexport { createState };\r\nimport { watch } from \"./watch\";\r\nexport { watch };\r\nimport directives from \"./extend-directive\";\r\n\r\nexport { directives };\r\n//export { RandomDefine };\r\nexport const Fragment = \"\";\r\nimport condition from \"./conditon\";\r\nexport { condition };\r\n"],"names":["Reflect","window","apply","construct","defineProperty","deleteProperty","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf","isundefined","a","isnumber","isboolean","isobject","isstring","isfunction","isarray","Array","isArray","gettagtype","getsymbol","Symbol","toString","call","replace","toLowerCase","isString","isReactiveState","ReactiveState","textnodesymbol","eventtargetsymbol","memlisteners","dispatchsymbol","subscribesymbol","removeallistenerssymbol","addallistenerssymbol","[object Object]","init","this","undefined","EventTarget","isprimitive","Object","value","configurable","writable","TypeError","toStringTag","forEach","callback","addEventListener","String","JSON","stringify","eventname","name","dispatchEvent","Event","push","removeEventListener","toPrimitive","document","seteletext","e","v","textContent","setelehtml","innerHTML","appendchild","container","ele","appendChild","createsvgelement","createElementNS","svgnamespace","createnonescript","createDocumentFragment","createnativeelement","type","createElement","namespace","createtextnode","data","createTextNode","changetext","textnode","nodeValue","mathnamespace","createmathelement","domaddlisten","event","domremovelisten","getdomchildren","from","childNodes","getAttribute","HTMLElement","prototype","setAttribute","removeAttribute","watch","state","statekey","isFunction","requestAnimationFrame","unwatch","rewatch","ref","html","createhtmlandtextdirective","text","errorname","extenddirectives","options","entries","key","directives","element","vdom","bindattr","origin","onevent","eventsarray","flat","Infinity","concat","target","filter","Boolean","isclassextendsHTMLElement","initclass","createcostumelemet","propsjson","children","RandomDefineCustomElement","console","error","使用value从表中查询key","表","组件状态名","find","CustomElementRegistry","customElements","elementset","for","elementmap","extendsname","length","elementname","getrandomstringandnumber","define","extends","Set","constructor","add","iterator","getrandomcharactor","fill","map","i","n","fromCharCode","Math","floor","random","getrandomhexnumber","join","isVirtualdom","Virtualdom","props","propsentries","assign","fromEntries","test","slice","t","r","u","p","s","h","f","Map","arguments","typenormalized","propsnormalized","childrennormalized","trim","htm","bind","isvalidvdom","flag","includes","assertvalidvirtualdom","args","eventlistenerssymbol","firstaddlisteners","callarray","removelisteners","readdlisteners","eles","valuestring","objtostylestring","o","asserthtmlelement","Element","createeleattragentreadwrite","isinputtextortextareaflag","isinputtextortextarea","temp","create","outputattrs","Proxy","keys","attributesownkeys","getattribute","parse","setattribute","k","hasAttribute","otherdescipter","enumerable","myvalue","getAttributeNames","geteletagname","tagName","tagname","bindstatesymbol","reactivestatesymbol","virtualdomsymbol","throwinvalideletype","render","reactive","handleprops","mount","Error","attribute1","createeleattr","primitivestate","callbacks","values","createApp","el","Node","isNodeArray","body","documentElement","head","elesarray","array","createRef","deepobserveaddpath","patharray","ancestor","fakeobj","argumentslist","thisarg","argarray","descripter","observedeepagent","createstate","deepobserve","attributeChangedCallback","AttrChange","qualifiedName","oldValue","onmounted","onunmounted","truevdomsymbol","falsevdomsymbol","trueelesymbol","falseelesymbol","handletrue","handlefalse","Condition","super","true","false","elementtomount","attrs","conditon","iftrue","iffalse","Fragment"],"mappings":"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"}