{"version":3,"file":"index.js","sources":["../node_modules/lodash/fromPairs.js","../src/Object-fromEntries.ts","../src/array-prototype-flat.ts","../src/util.ts","../src/isprimitive.ts","../src/primitivestate.ts","../src/virtualdom.ts","../node_modules/htm/dist/htm.module.js","../src/createelement.ts","../src/html.ts","../src/onevent.ts","../src/watch.ts","../src/directives.ts","../src/setlikearay.ts","../src/customelement.ts","../src/dom.ts","../src/mount.ts","../node_modules/dom-element-attribute-agent-proxy/dist/index.js","../src/rendervdomtoreal.ts","../src/createApp.ts","../src/createref.ts","../node_modules/deep-observe-agent-proxy/deepobserveagent.js","../src/createstate.ts"],"sourcesContent":["/**\n * The inverse of `_.toPairs`; this method returns an object composed\n * from key-value `pairs`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} pairs The key-value pairs.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.fromPairs([['a', 1], ['b', 2]]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction fromPairs(pairs) {\n  var index = -1,\n      length = pairs == null ? 0 : pairs.length,\n      result = {};\n\n  while (++index < length) {\n    var pair = pairs[index];\n    result[pair[0]] = pair[1];\n  }\n  return result;\n}\n\nmodule.exports = fromPairs;\n","import fromPairs from \"lodash/fromPairs.js\";\r\n// console.log(fromPairs);\r\nif (\"function\" !== typeof Object.fromEntries) Object.fromEntries = fromPairs;\r\n","// import flattenDepth from \"lodash/flattenDepth\";\r\n// import flattenDepth from \"core-js-pure/features/array/flat\";\r\nif (typeof Array.prototype.flat !== \"function\") {\r\n  Array.prototype.flat =\r\n    //   function(depth: number = 1) {\r\n    //     return flattenDepth(this, depth);\r\n    //   };\r\n    arrayflat;\r\n}\r\n\r\nfunction arrayflat(depth: number = 1) {\r\n  if (depth <= 1) {\r\n    return this.reduce(\r\n      (acc: { concat: (arg0: any) => void }, val: any) => acc.concat(val),\r\n      []\r\n    );\r\n  } else {\r\n    return flattenDeep(this);\r\n  }\r\n}\r\nfunction flattenDeep(arr1: any[]) {\r\n  return arr1.reduce(\r\n    (acc: { concat: { (arg0: any): void; (arg0: any): void } }, val: any) =>\r\n      Array.isArray(val) ? acc.concat(flattenDeep(val)) : acc.concat(val),\r\n    []\r\n  );\r\n}\r\n/*\r\nexport function flat(arr: any, depth?: any) {\r\n  return arrayflat.call(arr, depth);\r\n}\r\n */\r\n","export function isundefined(a: any) {\r\n  return typeof a === \"undefined\";\r\n}\r\n\r\nexport function isnumber(a: any) {\r\n  return typeof a === \"number\";\r\n}\r\nexport function isboolean(a: any) {\r\n  return typeof a === \"boolean\";\r\n}\r\nexport function isobject(a: any) {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\nexport function isstring(a: any) {\r\n  return typeof a === \"string\";\r\n}\r\nexport function isfunction(a: any) {\r\n  return typeof a === \"function\";\r\n}\r\n\r\nexport function isarray(a: any) {\r\n  return a instanceof Array && Array.isArray(a);\r\n}\r\nexport { isfunction as isFunction, isarray as isArray, isstring as isString };\r\nexport function getsymbol(a: string) {\r\n  return Symbol(a);\r\n}\r\nexport function gettagtype(a: any) {\r\n  return {}.toString\r\n    .call(a)\r\n    .replace(\"[object \", \"\")\r\n    .replace(\"]\", \"\")\r\n    .toLowerCase();\r\n}\r\n","import { isString, isnumber, isboolean, isundefined } from \"./util\";\r\nexport default function(a: any) {\r\n  return isString(a) || isnumber(a) || isboolean(a) || isundefined(a);\r\n}\r\n","import { getsymbol, isobject } from \"./util\";\r\nimport isprimitive from \"./isprimitive\";\r\nexport const eventtargetsymbol = Symbol(\"eventtatget\");\r\nexport const memlisteners = Symbol(\"memlisteners\");\r\nexport const dispatchsymbol = getsymbol(\"dispatch\");\r\nexport const subscribesymbol = getsymbol(\"subscribe\");\r\nexport const removeallistenerssymbol = getsymbol(\"removeallisteners\");\r\nexport const addallistenerssymbol = getsymbol(\"addallisteners\");\r\nexport default class ReactiveState extends Array {\r\n  value: string | number | boolean | undefined | object;\r\n  [eventtargetsymbol] = new EventTarget();\r\n  [memlisteners] = [];\r\n  constructor(init: string | number | boolean | object | undefined) {\r\n    super();\r\n    if (isprimitive(init) || isobject(init)) {\r\n      this.value = init;\r\n    } else {\r\n      throw TypeError(\"invalid State\");\r\n    }\r\n    // this[eventtargetsymbol] = new EventTarget();\r\n\r\n    Object.defineProperty(this, Symbol.toStringTag, {\r\n      value: \"ReactiveState\"\r\n    });\r\n  }\r\n  [Symbol.toPrimitive]() {\r\n    //return this.value;\r\n    let value = this.value;\r\n    return isprimitive(value)\r\n      ? value\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : void 0;\r\n  }\r\n  valueOf() {\r\n    return this.value;\r\n  }\r\n  toString() {\r\n    let value = this.value;\r\n    return isprimitive(value)\r\n      ? String(value)\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : \"\";\r\n  }\r\n  [dispatchsymbol](eventname?: string) {\r\n    let name = eventname ? String(eventname) : \"value\";\r\n    if (name !== \"value\") {\r\n      this[eventtargetsymbol].dispatchEvent(new Event(name));\r\n    }\r\n\r\n    this[eventtargetsymbol].dispatchEvent(new Event(\"value\"));\r\n  }\r\n  [subscribesymbol](callback: Function, eventname?: string) {\r\n    // this[eventtargetsymbol].addEventListener(\"value\", callback);\r\n    let name = eventname ? String(eventname) : \"value\";\r\n    this[memlisteners].push([name, () => callback(this)]);\r\n  }\r\n  [removeallistenerssymbol]() {\r\n    this[memlisteners].forEach(([value, callback]) => {\r\n      this[eventtargetsymbol].removeEventListener(value, callback);\r\n    });\r\n  }\r\n  [addallistenerssymbol]() {\r\n    this[memlisteners].forEach(([value, callback]) => {\r\n      this[eventtargetsymbol].addEventListener(value, callback);\r\n    });\r\n  }\r\n}\r\n","import primitivestate, { dispatchsymbol } from \"./primitivestate\";\r\nimport { Class } from \"./rendervdomtoreal\";\r\nexport default class Virtualdom {\r\n  element: undefined | Element;\r\n  type: string | Function | undefined | Class;\r\n  props: object = {};\r\n  children: Array<Virtualdom | string> = [];\r\n  directives: object = {};\r\n  onevent: object = {};\r\n  bindattr: object = {};\r\n  constructor(\r\n    type: Function | string = \"\",\r\n    props: object = {},\r\n    children: Array<Virtualdom | string> = []\r\n  ) {\r\n    const propsentries = Object.entries(props);\r\n    Object.assign(this, {\r\n      type,\r\n      bindattr: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /[A-Za-z]/.test(key[0]))\r\n          .filter(e => e[1] instanceof primitivestate)\r\n      ),\r\n      props: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /[A-Za-z]/.test(key[0]))\r\n          .filter(e => !(e[1] instanceof primitivestate))\r\n      ),\r\n      children,\r\n      onevent: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /\\@/.test(key[0]))\r\n          .map(([key, value]) => [key.slice(1), value])\r\n      ),\r\n      directives: Object.fromEntries(\r\n        propsentries\r\n          .filter(([key]) => /\\*/.test(key[0]))\r\n          .map(([key, value]) => [key.slice(1), value])\r\n      )\r\n    });\r\n    Object.defineProperty(this, Symbol.toStringTag, { value: \"virtualdom\" });\r\n  }\r\n}\r\n","var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","import { isstring, isarray, isobject, isfunction } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\nexport default function h(\r\n  type: Function | string = \"\",\r\n  props: any = {},\r\n  ...children: Array<Virtualdom | string>\r\n): Virtualdom | Array<Virtualdom | string> {\r\n  // | Array<Virtualdom | string>\r\n  // if(isarray()){}\r\n  /* add fragment element */\r\n  var typenormalized = isstring(type) || isfunction(type) ? type : \"\";\r\n  var propsnormalized = isobject(props) ? props : {};\r\n  var childrennormalized = children.flat(Infinity);\r\n  if (typeof typenormalized === \"string\" && \"\" === typenormalized) {\r\n    return childrennormalized;\r\n  }\r\n  return new Virtualdom(typenormalized, propsnormalized, childrennormalized);\r\n}\r\n","import { isstring, isarray, isobject, isfunction } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport htm from \"htm/dist/htm.module.js\";\r\nimport h from \"./createelement\";\r\n\r\nconst html = htm.bind(h);\r\n\r\n/* 如果出现未闭合标签会产生错误的vdom */\r\nexport function isvalidvdom(v: any) {\r\n  var flag = false;\r\n  if (isarray(v)) {\r\n    flag = v\r\n      .map((ele: any) => {\r\n        return isstring(ele) || ele instanceof Virtualdom;\r\n      })\r\n      .includes(false)\r\n      ? false\r\n      : true;\r\n  } else if (v instanceof Virtualdom) {\r\n    if (isvalidvdom(v.children)) {\r\n      flag = true;\r\n    }\r\n  } else {\r\n    if (isstring(v)) {\r\n      flag = true;\r\n    }\r\n  }\r\n  return flag;\r\n}\r\nfunction assertvalidvirtualdom(...args: any[]) {\r\n  var vdom = html(...args);\r\n  if (isvalidvdom(vdom)) {\r\n    return vdom;\r\n  } else {\r\n    throw new TypeError(\r\n      \"invalid Virtualdom!\" + \"\\n\" + JSON.stringify(vdom, null, 4)\r\n    );\r\n  }\r\n}\r\nexport default assertvalidvirtualdom;\r\n","export const eventlistenerssymbol = Symbol(\"eventlisteners\");\r\nimport { isArray, isFunction, isString } from \"./util\";\r\nexport default function(\r\n  element: Element,\r\n  eventname: string,\r\n  callback: EventListener | Array<EventListener>\r\n) {\r\n  if (typeof callback === \"function\") {\r\n    addlisteners(element, eventname, [callback]);\r\n  } else if (isArray(callback)) {\r\n    addlisteners(element, eventname, callback);\r\n  } else {\r\n    throw TypeError(\"invalid EventListener\");\r\n  }\r\n}\r\nfunction addlisteners(\r\n  ele: Element,\r\n  event: string,\r\n  callarray: Array<EventListener>\r\n) {\r\n  callarray.forEach((call: EventListener) => {\r\n    ele[eventlistenerssymbol].push([event, call]);\r\n    domaddlisten(ele, event, call);\r\n  });\r\n}\r\n\r\nfunction domaddlisten(ele: Element, event: string, call: EventListener) {\r\n  ele.addEventListener(event, call);\r\n}\r\n","import { isFunction } from \"./util\";\r\nimport ReactiveState, {\r\n  subscribesymbol,\r\n  removeallistenerssymbol,\r\n  addallistenerssymbol\r\n} from \"./primitivestate\";\r\nexport function watch(\r\n  state: ReactiveState,\r\n  callback: Function,\r\n  statekey?: string\r\n): void {\r\n  if (!(state instanceof ReactiveState && isFunction(callback))) {\r\n    throw TypeError(\"invalid state or callback\");\r\n  }\r\n\r\n  if (statekey) {\r\n    state[subscribesymbol](callback, statekey);\r\n  } else {\r\n    state[subscribesymbol](callback);\r\n  }\r\n\r\n  requestAnimationFrame(() => {\r\n    state[addallistenerssymbol]();\r\n  });\r\n}\r\nexport function unwatch(state: ReactiveState): void {\r\n  state[removeallistenerssymbol]();\r\n}\r\n","import { watch } from \"./watch\";\r\nimport { subscribesymbol, addallistenerssymbol } from \"./primitivestate\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport Primitivestate from \"./primitivestate\";\r\nexport default {\r\n  ref(ele: Element, ref: { value: any }, vdom: any) {\r\n    if (typeof ref == \"object\") {\r\n      ref.value = ele;\r\n    } else {\r\n      throw TypeError(\"invalid ref\");\r\n    }\r\n  },\r\n  html(ele: Element, html: string | Primitivestate, vdom: any) {\r\n    // ele.innerHTML = html;\r\n    // console.log(ele.outerHTML);\r\n    if (typeof html == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        ele.innerHTML = html;\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (html instanceof Primitivestate) {\r\n      //   const primitivestate = html;\r\n      watch(html, (state: { value: any }) => {\r\n        ele.innerHTML = String(state.value);\r\n      });\r\n      //   primitivestate[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.innerHTML = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"html\");\r\n        ele.innerHTML = String(html.value);\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid html\");\r\n    }\r\n  },\r\n  text(ele: Element, text: string | Primitivestate, vdom: any) {\r\n    // ele.textContent = text;\r\n    // console.log(ele.outerHTML);\r\n    if (typeof text == \"string\") {\r\n      requestAnimationFrame(() => {\r\n        ele.textContent = text;\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (text instanceof Primitivestate) {\r\n      //   const primitivestate = text;\r\n      watch(text, (state: { value: any }) => {\r\n        ele.textContent = String(state.value);\r\n      });\r\n      //   primitivestate[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.textContent = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"text\");\r\n        ele.textContent = String(text.value);\r\n      });\r\n    } else {\r\n      throw TypeError(\"invalid text\");\r\n    }\r\n  }\r\n};\r\n","import { isstring, isarray, isobject, isfunction } from \"./util\";\r\n// import {isclassextendsHTMLElement} from './customelement';\r\nexport default class setlikearray extends Array {\r\n  constructor() {\r\n    super();\r\n    Object.defineProperty(this, Symbol.toStringTag, { value: \"setlikearray\" });\r\n  }\r\n  push(...items: any[]): number {\r\n    items.forEach(item => {\r\n      if (isfunction(item) || isobject(item)) {\r\n        if (!this.includes(item)) {\r\n          super.push(item);\r\n        }\r\n      }\r\n    });\r\n\r\n    return this.length;\r\n  }\r\n}\r\n","import { isfunction } from \"./util\";\r\nimport { Class } from \"./rendervdomtoreal\";\r\nimport setlikearray from \"./setlikearay\";\r\nconst customElementsarray = new setlikearray();\r\nexport function createcostumelemet(\r\n  initclass: Class | Function,\r\n\r\n  children?: any[]\r\n): HTMLElement {\r\n  if (isclassextendsHTMLElement(initclass)) {\r\n    customElementsarray.push(initclass);\r\n    const elementname = getcustomelementname(initclass);\r\n    if (customElements.get(elementname) === initclass) {\r\n    } else {\r\n      customElements.define(elementname, initclass);\r\n    }\r\n\r\n    return Reflect.construct(initclass, [children]); // (children);\r\n  } else {\r\n    throw TypeError(\"invalid custom element class !\");\r\n  }\r\n}\r\nfunction getcustomelementname(initclass: any) {\r\n  return \"c-\" + customElementsarray.indexOf(initclass);\r\n}\r\nexport function isclassextendsHTMLElement(initclass: { prototype: any }) {\r\n  return !!(\r\n    isfunction(initclass) &&\r\n    initclass.prototype &&\r\n    initclass.prototype instanceof HTMLElement\r\n  );\r\n}\r\n","export function appendchild(\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element,\r\n  ele: HTMLElement | SVGElement | Element\r\n) {\r\n  container.appendChild(ele);\r\n}\r\nexport function createsvgelement() {\r\n  return document.createElementNS(svgnamespace, \"svg\");\r\n}\r\nexport function createnonescript() {\r\n  return document.createDocumentFragment();\r\n}\r\nexport function createnativeelement(type: string) {\r\n  return document.createElement(type);\r\n}\r\nexport function createElementNS(namespace: string, name: string) {\r\n  return document.createElementNS(namespace, name);\r\n}\r\nexport function createtextnode(data: string) {\r\n  return document.createTextNode(data);\r\n}\r\nexport const svgnamespace = \"http://www.w3.org/2000/svg\";\r\n","import { appendchild } from \"./dom\";\r\nexport default function(\r\n  ele:\r\n    | Array<\r\n        | HTMLElement\r\n        | Text\r\n        | SVGSVGElement\r\n        | DocumentFragment\r\n        | SVGElement\r\n        | Element\r\n      >\r\n    | SVGElement\r\n    | DocumentFragment\r\n    | HTMLElement\r\n    | Text\r\n    | SVGSVGElement\r\n    | Element,\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element\r\n) {\r\n  container.innerHTML = \"\";\r\n  let eles: Array<any>;\r\n  if (ele instanceof Array) {\r\n    eles = ele;\r\n  } else {\r\n    // appendchild(container, ele);\r\n    eles = [ele];\r\n  }\r\n  eles.forEach(e => appendchild(container, e));\r\n}\r\n","function isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isstring(a) {\r\n    return typeof a === \"string\";\r\n}\r\nfunction asserthtmlelement(ele) {\r\n    if (!(ele instanceof HTMLElement ||\r\n        ele instanceof SVGElement ||\r\n        ele instanceof Element)) {\r\n        throw TypeError(\"invalid HTMLElement!\");\r\n    }\r\n    else\r\n        return true;\r\n}\r\nfunction createeleattragentreadwrite(ele) {\r\n    asserthtmlelement(ele);\r\n    const isinputtextortextarea = (ele.tagName === \"INPUT\" && Reflect.get(ele, \"type\") === \"text\") ||\r\n        ele.tagName === \"TEXTAREA\";\r\n    var temp = Object.create(null);\r\n    return new Proxy(temp, {\r\n        ownKeys() {\r\n            const keys = Reflect.ownKeys(ele.attributes).filter(k => !/\\d/.test(String(k)[0]));\r\n            return isinputtextortextarea\r\n                ? Array.from(new Set([...keys, \"value\"]))\r\n                : keys;\r\n        },\r\n        get(target, key) {\r\n            if (isinputtextortextarea && key === \"value\") {\r\n                return Reflect.get(ele, \"value\");\r\n            }\r\n            else {\r\n                var v = ele.getAttribute(String(key));\r\n                if (!v) {\r\n                    return;\r\n                }\r\n                if (isstring(v)) {\r\n                    try {\r\n                        return JSON.parse(String(v));\r\n                    }\r\n                    catch (error) {\r\n                        return v;\r\n                    }\r\n                }\r\n                else\r\n                    return;\r\n            }\r\n        },\r\n        set(t, key, v) {\r\n            if (isinputtextortextarea && key === \"value\") {\r\n                return Reflect.set(ele, \"value\", v);\r\n            }\r\n            else {\r\n                ele.setAttribute(String(key), isobject(v) ? JSON.stringify(v) : String(v));\r\n                return true;\r\n            }\r\n        },\r\n        deleteProperty(t, k) {\r\n            ele.removeAttribute(String(k));\r\n            return true;\r\n        },\r\n        has(target, key) {\r\n            if (isinputtextortextarea && key === \"value\") {\r\n                return true;\r\n            }\r\n            else {\r\n                return ele.hasAttribute(String(key));\r\n            }\r\n        },\r\n        defineProperty() {\r\n            return false;\r\n        },\r\n        getOwnPropertyDescriptor(target, key) {\r\n            const otherdescipter = {\r\n                enumerable: true,\r\n                configurable: true,\r\n                writable: true\r\n            };\r\n            if (isinputtextortextarea && key === \"value\") {\r\n                return {\r\n                    value: Reflect.get(ele, \"value\"),\r\n                    ...otherdescipter\r\n                };\r\n            }\r\n            else {\r\n                var attr = ele.getAttribute(String(key));\r\n                if (attr) {\r\n                    return {\r\n                        value: attr,\r\n                        ...otherdescipter\r\n                    };\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n        },\r\n        setPrototypeOf() {\r\n            return false;\r\n        },\r\n        getPrototypeOf() {\r\n            return null;\r\n        }\r\n    });\r\n}\r\n\r\nexport default createeleattragentreadwrite;\r\n//# sourceMappingURL=index.js.map\r\n","export const virtualdomsymbol = Symbol(\"virtualdom\");\r\nimport { eventlistenerssymbol } from \"./onevent\";\r\nimport { subscribesymbol, addallistenerssymbol } from \"./primitivestate\";\r\nimport directives from \"./directives\";\r\nimport onevent from \"./onevent\";\r\nimport { createcostumelemet } from \"./customelement\";\r\nimport {\r\n  svgnamespace,\r\n  createsvgelement,\r\n  createnonescript,\r\n  createnativeelement,\r\n  createElementNS,\r\n  createtextnode\r\n} from \"./dom\";\r\nfunction throwinvalideletype() {\r\n  throw TypeError(\"invalid element type!\");\r\n}\r\nimport mount from \"./mount\";\r\nimport createeleattr from \"dom-element-attribute-agent-proxy\";\r\n// import { isstring, isarray, isobject, isfunction } from \"./util\";\r\nimport Virtualdom from \"./virtualdom\";\r\n\r\nexport default function render(\r\n  vdom: Virtualdom | string,\r\n  namespace?: string\r\n):\r\n  | HTMLElement\r\n  | Text\r\n  | SVGSVGElement\r\n  | DocumentFragment\r\n  | SVGElement\r\n  | Element {\r\n  if (typeof vdom === \"string\") {\r\n    return createtextnode(vdom);\r\n  } else if (vdom instanceof Virtualdom && \"type\" in vdom) {\r\n    let element: HTMLElement | SVGSVGElement | SVGElement | Element;\r\n    if (typeof vdom.type === \"string\") {\r\n      if (vdom.type === \"script\") {\r\n        /* 禁止加载脚本 */\r\n\r\n        return createnonescript();\r\n      } else if (vdom.type === \"svg\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createsvgelement();\r\n      } else {\r\n        element = namespace\r\n          ? createElementNS(namespace, vdom.type)\r\n          : createnativeelement(vdom.type);\r\n      }\r\n    } else if (typeof vdom.type == \"function\") {\r\n      element = createcostumelemet(vdom.type, vdom.children);\r\n    } else {\r\n      throwinvalideletype();\r\n      // throw TypeError(\"invalid element type!\");\r\n    }\r\n    var attribute1 = createeleattr(element);\r\n    Object.assign(attribute1, vdom.props);\r\n    /* 添加常量的属性 */\r\n    element[virtualdomsymbol] = vdom;\r\n    vdom.element = element;\r\n    /* 添加绑定属性 */\r\n\r\n    Object.entries(vdom.bindattr).forEach(([key, primitivestate]) => {\r\n      attribute1[key] = primitivestate.value;\r\n      primitivestate[subscribesymbol]((state: { value: any }) => {\r\n        attribute1[key] = state.value;\r\n      });\r\n      requestAnimationFrame(() => {\r\n        primitivestate[addallistenerssymbol]();\r\n      });\r\n    });\r\n\r\n    /* 添加事件绑定和指令执行 */\r\n\r\n    Object.entries(vdom.directives).forEach(([name, value]) => {\r\n      if (name in directives && typeof directives[name] === \"function\") {\r\n        directives[name](element, value, vdom);\r\n      } else {\r\n        throw new Error(\"invalid directives \" + name);\r\n      }\r\n    });\r\n    if (!element[eventlistenerssymbol]) {\r\n      element[eventlistenerssymbol] = [];\r\n    }\r\n\r\n    Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\r\n      onevent(element, event, callbacks);\r\n    });\r\n    /* 自定义组件不添加children,而是从构造函数传入 */\r\n    if (typeof vdom.type !== \"function\") {\r\n      mount(\r\n        vdom.children.map(e => {\r\n          if (vdom.type === \"svg\") {\r\n            /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n            //   element.innerHTML = element.innerHTML;\r\n            return render(e, svgnamespace);\r\n          } else if (namespace) {\r\n            return render(e, namespace);\r\n          } else {\r\n            return render(e);\r\n          }\r\n        }),\r\n\r\n        element\r\n      );\r\n    }\r\n    return element;\r\n  } else {\r\n    throwinvalideletype();\r\n    // throw TypeError(\"invalid element type!\");\r\n  }\r\n}\r\n\r\nexport interface Class {\r\n  new (children?: any[]): HTMLElement;\r\n}\r\n","import { isvalidvdom } from \"./html\";\r\nimport Virtualdom from \"./virtualdom\";\r\nimport render from \"./rendervdomtoreal\";\r\nimport mount from \"./mount\";\r\nexport default function createApp(\r\n  vdom: Virtualdom | string | Array<Virtualdom | string>,\r\n  container: HTMLElement | Element\r\n) {\r\n  const el = container;\r\n  if (!isvalidvdom(vdom)) {\r\n    throw TypeError(\r\n      \"invalid Virtualdom \" + \"\\n\" + JSON.stringify(vdom, null, 4)\r\n    );\r\n  }\r\n  if (!(el instanceof HTMLElement)) {\r\n    throw TypeError(\"invalid container HTMLElement!\");\r\n  }\r\n\r\n  if (\r\n    el === document.body ||\r\n    el === document.documentElement ||\r\n    el === document.head\r\n  ) {\r\n    throw Error(\"Do not mount  to <html> or <body> <head>.\");\r\n  }\r\n  let elesarray: Array<string | Virtualdom>;\r\n  if (vdom instanceof Array) {\r\n    elesarray = vdom;\r\n  } else {\r\n    elesarray = [vdom];\r\n  }\r\n  mount(elesarray.map(e => render(e)), container);\r\n\r\n  //\r\n  return container;\r\n}\r\n","export default function createRef(init: any) {\r\n  return { value: init };\r\n}\r\n","\"use strict\";\r\nfunction isobject(a) {\r\n    return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a) {\r\n    return typeof a === \"function\";\r\n}\r\nfunction deepobserveaddpath(target, callback, patharray = [], ancestor = target) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback is not valid function !\");\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        let forkobj;\r\n        if (isobject(target)) {\r\n            forkobj = {};\r\n        }\r\n        else {\r\n            forkobj = () => { };\r\n        }\r\n        Reflect.setPrototypeOf(forkobj, null);\r\n        return (forkobj => {\r\n            return new Proxy(forkobj, {\r\n                defineProperty(t, p, a) {\r\n                    return Reflect.defineProperty(target, p, a);\r\n                },\r\n                deleteProperty(t, p) {\r\n                    callback(ancestor, [...patharray, p], undefined, Reflect.get(target, p));\r\n                    return Reflect.deleteProperty(target, p);\r\n                },\r\n                ownKeys() {\r\n                    return Reflect.ownKeys(target);\r\n                },\r\n                has(t, p) {\r\n                    return Reflect.has(target, p);\r\n                },\r\n                getPrototypeOf() {\r\n                    return Reflect.getPrototypeOf(target);\r\n                },\r\n                setPrototypeOf(t, v) {\r\n                    return Reflect.setPrototypeOf(target, v);\r\n                },\r\n                construct(t, argumentslist) {\r\n                    if (typeof target === \"function\") {\r\n                        return Reflect.construct(target, argumentslist);\r\n                    }\r\n                },\r\n                apply(t, thisarg, argarray) {\r\n                    if (typeof target === \"function\") {\r\n                        return Reflect.apply(target, thisarg, argarray);\r\n                    }\r\n                },\r\n                getOwnPropertyDescriptor(t, k) {\r\n                    var descripter = Reflect.getOwnPropertyDescriptor(target, k);\r\n                    if (descripter) {\r\n                        descripter.configurable = true;\r\n                        return descripter;\r\n                    }\r\n                    else {\r\n                        return;\r\n                    }\r\n                },\r\n                set(t, k, v) {\r\n                    if (typeof callback === \"function\") {\r\n                        callback(ancestor, [...patharray, k], v, Reflect.get(target, k));\r\n                    }\r\n                    return Reflect.set(target, k, v);\r\n                },\r\n                get(t, k) {\r\n                    var value = Reflect.get(target, k);\r\n                    if (isfunction(value) || isobject(value)) {\r\n                        return deepobserveaddpath(value, callback, [...patharray, k], target);\r\n                    }\r\n                    else {\r\n                        return value;\r\n                    }\r\n                }\r\n            });\r\n        })(forkobj);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\nexport default function observedeepagent(target, callback) {\r\n    if (typeof callback !== \"function\") {\r\n        throw Error(\"observe callback is not valid function !\");\r\n    }\r\n    if (typeof Proxy !== \"function\") {\r\n        setTimeout(() => {\r\n            throw Error(\"不支持Proxy!\");\r\n        }, 0);\r\n        return target;\r\n    }\r\n    if (isfunction(target) || isobject(target)) {\r\n        return deepobserveaddpath(target, callback, [], target);\r\n    }\r\n    else {\r\n        return target;\r\n    }\r\n}\r\n//# sourceMappingURL=deepobserveagent.js.map","import deepobserve from \"deep-observe-agent-proxy\";\r\nimport { getsymbol, isobject } from \"./util\";\r\nimport isprimitive from \"./isprimitive\";\r\nimport ReactiveState, { dispatchsymbol } from \"./primitivestate\";\r\nexport default function(init: string | number | boolean | undefined) {\r\n  if (isprimitive(init)) {\r\n    return new Proxy(new ReactiveState(init), {\r\n      set(target, key, value) {\r\n        if (key === \"value\" && isprimitive(value)) {\r\n          // if (target[key] !== value) {\r\n          Reflect.set(target, key, value);\r\n          target[dispatchsymbol]();\r\n          // }\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n  } else if (isobject(init)) {\r\n    return new Proxy(new ReactiveState(init), {\r\n      get(target, key) {\r\n        const value = Reflect.get(target, \"value\");\r\n        if (Reflect.has(target, key)) {\r\n          return Reflect.get(target, key);\r\n        } else if (Reflect.has(value, key)) {\r\n          /*  */\r\n\r\n          return deepobserve(Reflect.get(value, key), () => {\r\n            target[dispatchsymbol](key);\r\n          });\r\n        }\r\n      },\r\n      ownKeys(target) {\r\n        return Array.from(\r\n          new Set([\r\n            ...Reflect.ownKeys(target),\r\n            ...Reflect.ownKeys(Reflect.get(target, \"value\"))\r\n          ])\r\n        );\r\n      },\r\n      set(target, key, value) {\r\n        const myvalue = Reflect.get(target, \"value\");\r\n        if (key === \"value\" && isobject(value)) {\r\n          // if (target[key] !== value) {\r\n          Reflect.set(target, key, value);\r\n          target[dispatchsymbol]();\r\n          // }\r\n          return true;\r\n        } else if (!Reflect.has(target, key)) {\r\n          Reflect.set(myvalue, key, value);\r\n          target[dispatchsymbol](key);\r\n          //\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    throw TypeError(\"invalid State\");\r\n  }\r\n}\r\n"],"names":["fromPairs","isString","primitivestate","isArray","isFunction","Primitivestate","isobject","isstring","createeleattr","isfunction","deepobserve"],"mappings":"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,GAAG,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,AAAe,YAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;SCEptC,CAAC,CACvB,OAA0B,EAAE,EAC5B,QAAa,EAAE,EACf,GAAG,QAAoC;IAKvC,IAAI,cAAc,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC;IACpE,IAAI,eAAe,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,EAAE,CAAC;IACnD,IAAI,kBAAkB,GAAG,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACjD,IAAI,OAAO,cAAc,KAAK,QAAQ,IAAI,EAAE,KAAK,cAAc,EAAE;QAC/D,OAAO,kBAAkB,CAAC;KAC3B;IACD,OAAO,IAAI,UAAU,CAAC,cAAc,EAAE,eAAe,EAAE,kBAAkB,CAAC,CAAC;CAC5E;;ACZD,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAGzB,SAAgB,WAAW,CAAC,CAAM;IAChC,IAAI,IAAI,GAAG,KAAK,CAAC;IACjB,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE;QACd,IAAI,GAAG,CAAC;aACL,GAAG,CAAC,CAAC,GAAQ;YACZ,OAAO,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,YAAY,UAAU,CAAC;SACnD,CAAC;aACD,QAAQ,CAAC,KAAK,CAAC;cACd,KAAK;cACL,IAAI,CAAC;KACV;SAAM,IAAI,CAAC,YAAY,UAAU,EAAE;QAClC,IAAI,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE;YAC3B,IAAI,GAAG,IAAI,CAAC;SACb;KACF;SAAM;QACL,IAAI,QAAQ,CAAC,CAAC,CAAC,EAAE;YACf,IAAI,GAAG,IAAI,CAAC;SACb;KACF;IACD,OAAO,IAAI,CAAC;CACb;AACD,SAAS,qBAAqB,CAAC,GAAG,IAAW;IAC3C,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC;IACzB,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;QACrB,OAAO,IAAI,CAAC;KACb;SAAM;QACL,MAAM,IAAI,SAAS,CACjB,qBAAqB,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAC7D,CAAC;KACH;CACF;;ACtCM,MAAM,oBAAoB,GAAG,MAAM,CAAC,gBAAgB,CAAC,CAAC;AAC7D,kBAEE,OAAgB,EAChB,SAAiB,EACjB,QAA8C;IAE9C,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;QAClC,YAAY,CAAC,OAAO,EAAE,SAAS,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;KAC9C;SAAM,IAAIC,OAAO,CAAC,QAAQ,CAAC,EAAE;QAC5B,YAAY,CAAC,OAAO,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;KAC5C;SAAM;QACL,MAAM,SAAS,CAAC,uBAAuB,CAAC,CAAC;KAC1C;CACF;AACD,SAAS,YAAY,CACnB,GAAY,EACZ,KAAa,EACb,SAA+B;IAE/B,SAAS,CAAC,OAAO,CAAC,CAAC,IAAmB;QACpC,GAAG,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;QAC9C,YAAY,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;KAChC,CAAC,CAAC;CACJ;AAED,SAAS,YAAY,CAAC,GAAY,EAAE,KAAa,EAAE,IAAmB;IACpE,GAAG,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;CACnC;;SCtBe,KAAK,CACnB,KAAoB,EACpB,QAAkB,EAClB,QAAiB;IAEjB,IAAI,EAAE,KAAK,YAAY,aAAa,IAAIC,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE;QAC7D,MAAM,SAAS,CAAC,2BAA2B,CAAC,CAAC;KAC9C;IAED,IAAI,QAAQ,EAAE;QACZ,KAAK,CAAC,eAAe,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;KAC5C;SAAM;QACL,KAAK,CAAC,eAAe,CAAC,CAAC,QAAQ,CAAC,CAAC;KAClC;IAED,qBAAqB,CAAC;QACpB,KAAK,CAAC,oBAAoB,CAAC,EAAE,CAAC;KAC/B,CAAC,CAAC;CACJ;;ACpBD,iBAAe;IACb,GAAG,CAAC,GAAY,EAAE,GAAmB,EAAE,IAAS;QAC9C,IAAI,OAAO,GAAG,IAAI,QAAQ,EAAE;YAC1B,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC;SACjB;aAAM;YACL,MAAM,SAAS,CAAC,aAAa,CAAC,CAAC;SAChC;KACF;IACD,IAAI,CAAC,GAAY,EAAE,IAA6B,EAAE,IAAS;QAGzD,IAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;YAC3B,qBAAqB,CAAC;gBACpB,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC;aAEtB,CAAC,CAAC;SACJ;aAAM,IAAI,IAAI,YAAYC,aAAc,EAAE;YAEzC,KAAK,CAAC,IAAI,EAAE,CAAC,KAAqB;gBAChC,GAAG,CAAC,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACrC,CAAC,CAAC;YAIH,qBAAqB,CAAC;gBAEpB,GAAG,CAAC,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACpC,CAAC,CAAC;SACJ;aAAM;YACL,MAAM,SAAS,CAAC,cAAc,CAAC,CAAC;SACjC;KACF;IACD,IAAI,CAAC,GAAY,EAAE,IAA6B,EAAE,IAAS;QAGzD,IAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;YAC3B,qBAAqB,CAAC;gBACpB,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC;aAExB,CAAC,CAAC;SACJ;aAAM,IAAI,IAAI,YAAYA,aAAc,EAAE;YAEzC,KAAK,CAAC,IAAI,EAAE,CAAC,KAAqB;gBAChC,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;aACvC,CAAC,CAAC;YAIH,qBAAqB,CAAC;gBAEpB,GAAG,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aACtC,CAAC,CAAC;SACJ;aAAM;YACL,MAAM,SAAS,CAAC,cAAc,CAAC,CAAC;SACjC;KACF;CACF,CAAC;;MC1DmB,YAAa,SAAQ,KAAK;IAC7C;QACE,KAAK,EAAE,CAAC;QACR,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,MAAM,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,cAAc,EAAE,CAAC,CAAC;KAC5E;IACD,IAAI,CAAC,GAAG,KAAY;QAClB,KAAK,CAAC,OAAO,CAAC,IAAI;YAChB,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;gBACtC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;oBACxB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAClB;aACF;SACF,CAAC,CAAC;QAEH,OAAO,IAAI,CAAC,MAAM,CAAC;KACpB;CACF;;ACfD,MAAM,mBAAmB,GAAG,IAAI,YAAY,EAAE,CAAC;AAC/C,SAAgB,kBAAkB,CAChC,SAA2B,EAE3B,QAAgB;IAEhB,IAAI,yBAAyB,CAAC,SAAS,CAAC,EAAE;QACxC,mBAAmB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACpC,MAAM,WAAW,GAAG,oBAAoB,CAAC,SAAS,CAAC,CAAC;QACpD,IAAI,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,KAAK,SAAS,EAAE,CAClD;aAAM;YACL,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;SAC/C;QAED,OAAO,OAAO,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;KACjD;SAAM;QACL,MAAM,SAAS,CAAC,gCAAgC,CAAC,CAAC;KACnD;CACF;AACD,SAAS,oBAAoB,CAAC,SAAc;IAC1C,OAAO,IAAI,GAAG,mBAAmB,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;CACtD;AACD,SAAgB,yBAAyB,CAAC,SAA6B;IACrE,OAAO,CAAC,EACN,UAAU,CAAC,SAAS,CAAC;QACrB,SAAS,CAAC,SAAS;QACnB,SAAS,CAAC,SAAS,YAAY,WAAW,CAC3C,CAAC;CACH;;SC/Be,WAAW,CACzB,SAA6D,EAC7D,GAAuC;IAEvC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;CAC5B;AACD,SAAgB,gBAAgB;IAC9B,OAAO,QAAQ,CAAC,eAAe,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;CACtD;AACD,SAAgB,gBAAgB;IAC9B,OAAO,QAAQ,CAAC,sBAAsB,EAAE,CAAC;CAC1C;AACD,SAAgB,mBAAmB,CAAC,IAAY;IAC9C,OAAO,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;CACrC;AACD,SAAgB,eAAe,CAAC,SAAiB,EAAE,IAAY;IAC7D,OAAO,QAAQ,CAAC,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;CAClD;AACD,SAAgB,cAAc,CAAC,IAAY;IACzC,OAAO,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;CACtC;AACD,AAAO,MAAM,YAAY,GAAG,4BAA4B,CAAC;;gBCnBvD,GAcW,EACX,SAA6D;IAE7D,SAAS,CAAC,SAAS,GAAG,EAAE,CAAC;IACzB,IAAI,IAAgB,CAAC;IACrB,IAAI,GAAG,YAAY,KAAK,EAAE;QACxB,IAAI,GAAG,GAAG,CAAC;KACZ;SAAM;QAEL,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;KACd;IACD,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,WAAW,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC;CAC9C;;AC5BD,SAASC,UAAQ,CAAC,CAAC,EAAE;IACjB,OAAO,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC;CAC9C;AACD,SAASC,UAAQ,CAAC,CAAC,EAAE;IACjB,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC;CAChC;AACD,SAAS,iBAAiB,CAAC,GAAG,EAAE;IAC5B,IAAI,EAAE,GAAG,YAAY,WAAW;QAC5B,GAAG,YAAY,UAAU;QACzB,GAAG,YAAY,OAAO,CAAC,EAAE;QACzB,MAAM,SAAS,CAAC,sBAAsB,CAAC,CAAC;KAC3C;;QAEG,OAAO,IAAI,CAAC;CACnB;AACD,SAAS,2BAA2B,CAAC,GAAG,EAAE;IACtC,iBAAiB,CAAC,GAAG,CAAC,CAAC;IACvB,MAAM,qBAAqB,GAAG,CAAC,GAAG,CAAC,OAAO,KAAK,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,MAAM;QACzF,GAAG,CAAC,OAAO,KAAK,UAAU,CAAC;IAC/B,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC/B,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE;QACnB,OAAO,GAAG;YACN,MAAM,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACnF,OAAO,qBAAqB;kBACtB,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC;kBACvC,IAAI,CAAC;SACd;QACD,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE;YACb,IAAI,qBAAqB,IAAI,GAAG,KAAK,OAAO,EAAE;gBAC1C,OAAO,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;aACpC;iBACI;gBACD,IAAI,CAAC,GAAG,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,CAAC,EAAE;oBACJ,OAAO;iBACV;gBACD,IAAIA,UAAQ,CAAC,CAAC,CAAC,EAAE;oBACb,IAAI;wBACA,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;qBAChC;oBACD,OAAO,KAAK,EAAE;wBACV,OAAO,CAAC,CAAC;qBACZ;iBACJ;;oBAEG,OAAO;aACd;SACJ;QACD,GAAG,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;YACX,IAAI,qBAAqB,IAAI,GAAG,KAAK,OAAO,EAAE;gBAC1C,OAAO,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;aACvC;iBACI;gBACD,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,EAAED,UAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3E,OAAO,IAAI,CAAC;aACf;SACJ;QACD,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;YACjB,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/B,OAAO,IAAI,CAAC;SACf;QACD,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE;YACb,IAAI,qBAAqB,IAAI,GAAG,KAAK,OAAO,EAAE;gBAC1C,OAAO,IAAI,CAAC;aACf;iBACI;gBACD,OAAO,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;aACxC;SACJ;QACD,cAAc,GAAG;YACb,OAAO,KAAK,CAAC;SAChB;QACD,wBAAwB,CAAC,MAAM,EAAE,GAAG,EAAE;YAClC,MAAM,cAAc,GAAG;gBACnB,UAAU,EAAE,IAAI;gBAChB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,IAAI;aACjB,CAAC;YACF,IAAI,qBAAqB,IAAI,GAAG,KAAK,OAAO,EAAE;gBAC1C,OAAO;oBACH,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,OAAO,CAAC;oBAChC,GAAG,cAAc;iBACpB,CAAC;aACL;iBACI;gBACD,IAAI,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;gBACzC,IAAI,IAAI,EAAE;oBACN,OAAO;wBACH,KAAK,EAAE,IAAI;wBACX,GAAG,cAAc;qBACpB,CAAC;iBACL;qBACI;oBACD,OAAO;iBACV;aACJ;SACJ;QACD,cAAc,GAAG;YACb,OAAO,KAAK,CAAC;SAChB;QACD,cAAc,GAAG;YACb,OAAO,IAAI,CAAC;SACf;KACJ,CAAC,CAAC;CACN;;ACxGM,MAAM,gBAAgB,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC;AACrD,AAaA,SAAS,mBAAmB;IAC1B,MAAM,SAAS,CAAC,uBAAuB,CAAC,CAAC;CAC1C;AACD,SAKwB,MAAM,CAC5B,IAAyB,EACzB,SAAkB;IAQlB,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;QAC5B,OAAO,cAAc,CAAC,IAAI,CAAC,CAAC;KAC7B;SAAM,IAAI,IAAI,YAAY,UAAU,IAAI,MAAM,IAAI,IAAI,EAAE;QACvD,IAAI,OAA2D,CAAC;QAChE,IAAI,OAAO,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;YACjC,IAAI,IAAI,CAAC,IAAI,KAAK,QAAQ,EAAE;gBAG1B,OAAO,gBAAgB,EAAE,CAAC;aAC3B;iBAAM,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;gBAE9B,OAAO,GAAG,gBAAgB,EAAE,CAAC;aAC9B;iBAAM;gBACL,OAAO,GAAG,SAAS;sBACf,eAAe,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC;sBACrC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpC;SACF;aAAM,IAAI,OAAO,IAAI,CAAC,IAAI,IAAI,UAAU,EAAE;YACzC,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACxD;aAAM;YACL,mBAAmB,EAAE,CAAC;SAEvB;QACD,IAAI,UAAU,GAAGE,2BAAa,CAAC,OAAO,CAAC,CAAC;QACxC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtC,OAAO,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC;QACjC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAGvB,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,cAAc,CAAC;YAC1D,UAAU,CAAC,GAAG,CAAC,GAAG,cAAc,CAAC,KAAK,CAAC;YACvC,cAAc,CAAC,eAAe,CAAC,CAAC,CAAC,KAAqB;gBACpD,UAAU,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC;aAC/B,CAAC,CAAC;YACH,qBAAqB,CAAC;gBACpB,cAAc,CAAC,oBAAoB,CAAC,EAAE,CAAC;aACxC,CAAC,CAAC;SACJ,CAAC,CAAC;QAIH,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,KAAK,CAAC;YACpD,IAAI,IAAI,IAAI,UAAU,IAAI,OAAO,UAAU,CAAC,IAAI,CAAC,KAAK,UAAU,EAAE;gBAChE,UAAU,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;aACxC;iBAAM;gBACL,MAAM,IAAI,KAAK,CAAC,qBAAqB,GAAG,IAAI,CAAC,CAAC;aAC/C;SACF,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,EAAE;YAClC,OAAO,CAAC,oBAAoB,CAAC,GAAG,EAAE,CAAC;SACpC;QAED,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC;YACtD,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;SACpC,CAAC,CAAC;QAEH,IAAI,OAAO,IAAI,CAAC,IAAI,KAAK,UAAU,EAAE;YACnC,KAAK,CACH,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;gBACjB,IAAI,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;oBAGvB,OAAO,MAAM,CAAC,CAAC,EAAE,YAAY,CAAC,CAAC;iBAChC;qBAAM,IAAI,SAAS,EAAE;oBACpB,OAAO,MAAM,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;iBAC7B;qBAAM;oBACL,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;iBAClB;aACF,CAAC,EAEF,OAAO,CACR,CAAC;SACH;QACD,OAAO,OAAO,CAAC;KAChB;SAAM;QACL,mBAAmB,EAAE,CAAC;KAEvB;CACF;;SC3GuB,SAAS,CAC/B,IAAsD,EACtD,SAAgC;IAEhC,MAAM,EAAE,GAAG,SAAS,CAAC;IACrB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;QACtB,MAAM,SAAS,CACb,qBAAqB,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAC7D,CAAC;KACH;IACD,IAAI,EAAE,EAAE,YAAY,WAAW,CAAC,EAAE;QAChC,MAAM,SAAS,CAAC,gCAAgC,CAAC,CAAC;KACnD;IAED,IACE,EAAE,KAAK,QAAQ,CAAC,IAAI;QACpB,EAAE,KAAK,QAAQ,CAAC,eAAe;QAC/B,EAAE,KAAK,QAAQ,CAAC,IAAI,EACpB;QACA,MAAM,KAAK,CAAC,2CAA2C,CAAC,CAAC;KAC1D;IACD,IAAI,SAAqC,CAAC;IAC1C,IAAI,IAAI,YAAY,KAAK,EAAE;QACzB,SAAS,GAAG,IAAI,CAAC;KAClB;SAAM;QACL,SAAS,GAAG,CAAC,IAAI,CAAC,CAAC;KACpB;IACD,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;IAGhD,OAAO,SAAS,CAAC;CAClB;;SCnCuB,SAAS,CAAC,IAAS;IACzC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;CACxB;;ACDD,SAASF,UAAQ,CAAC,CAAC,EAAE;IACjB,OAAO,OAAO,CAAC,KAAK,QAAQ,IAAI,CAAC,KAAK,IAAI,CAAC;CAC9C;AACD,SAASG,YAAU,CAAC,CAAC,EAAE;IACnB,OAAO,OAAO,CAAC,KAAK,UAAU,CAAC;CAClC;AACD,SAAS,kBAAkB,CAAC,MAAM,EAAE,QAAQ,EAAE,SAAS,GAAG,EAAE,EAAE,QAAQ,GAAG,MAAM,EAAE;IAC7E,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;QAChC,MAAM,KAAK,CAAC,0CAA0C,CAAC,CAAC;KAC3D;IACD,IAAIA,YAAU,CAAC,MAAM,CAAC,IAAIH,UAAQ,CAAC,MAAM,CAAC,EAAE;QACxC,IAAI,OAAO,CAAC;QACZ,IAAIA,UAAQ,CAAC,MAAM,CAAC,EAAE;YAClB,OAAO,GAAG,EAAE,CAAC;SAChB;aACI;YACD,OAAO,GAAG,MAAM,GAAG,CAAC;SACvB;QACD,OAAO,CAAC,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QACtC,OAAO,CAAC,OAAO,IAAI;YACf,OAAO,IAAI,KAAK,CAAC,OAAO,EAAE;gBACtB,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;oBACpB,OAAO,OAAO,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBAC/C;gBACD,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;oBACjB,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;oBACzE,OAAO,OAAO,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;iBAC5C;gBACD,OAAO,GAAG;oBACN,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;iBAClC;gBACD,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE;oBACN,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;iBACjC;gBACD,cAAc,GAAG;oBACb,OAAO,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;iBACzC;gBACD,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE;oBACjB,OAAO,OAAO,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;iBAC5C;gBACD,SAAS,CAAC,CAAC,EAAE,aAAa,EAAE;oBACxB,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;wBAC9B,OAAO,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;qBACnD;iBACJ;gBACD,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,QAAQ,EAAE;oBACxB,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;wBAC9B,OAAO,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;qBACnD;iBACJ;gBACD,wBAAwB,CAAC,CAAC,EAAE,CAAC,EAAE;oBAC3B,IAAI,UAAU,GAAG,OAAO,CAAC,wBAAwB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBAC7D,IAAI,UAAU,EAAE;wBACZ,UAAU,CAAC,YAAY,GAAG,IAAI,CAAC;wBAC/B,OAAO,UAAU,CAAC;qBACrB;yBACI;wBACD,OAAO;qBACV;iBACJ;gBACD,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;oBACT,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;wBAChC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;qBACpE;oBACD,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;iBACpC;gBACD,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE;oBACN,IAAI,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBACnC,IAAIG,YAAU,CAAC,KAAK,CAAC,IAAIH,UAAQ,CAAC,KAAK,CAAC,EAAE;wBACtC,OAAO,kBAAkB,CAAC,KAAK,EAAE,QAAQ,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;qBACzE;yBACI;wBACD,OAAO,KAAK,CAAC;qBAChB;iBACJ;aACJ,CAAC,CAAC;SACN,EAAE,OAAO,CAAC,CAAC;KACf;SACI;QACD,OAAO,MAAM,CAAC;KACjB;CACJ;AACD,AAAe,SAAS,gBAAgB,CAAC,MAAM,EAAE,QAAQ,EAAE;IACvD,IAAI,OAAO,QAAQ,KAAK,UAAU,EAAE;QAChC,MAAM,KAAK,CAAC,0CAA0C,CAAC,CAAC;KAC3D;IACD,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;QAC7B,UAAU,CAAC,MAAM;YACb,MAAM,KAAK,CAAC,WAAW,CAAC,CAAC;SAC5B,EAAE,CAAC,CAAC,CAAC;QACN,OAAO,MAAM,CAAC;KACjB;IACD,IAAIG,YAAU,CAAC,MAAM,CAAC,IAAIH,UAAQ,CAAC,MAAM,CAAC,EAAE;QACxC,OAAO,kBAAkB,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;KAC3D;SACI;QACD,OAAO,MAAM,CAAC;KACjB;CACJ;;sBC/FuB,IAA2C;IACjE,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;QACrB,OAAO,IAAI,KAAK,CAAC,IAAI,aAAa,CAAC,IAAI,CAAC,EAAE;YACxC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK;gBACpB,IAAI,GAAG,KAAK,OAAO,IAAI,WAAW,CAAC,KAAK,CAAC,EAAE;oBAEzC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;oBAChC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;oBAEzB,OAAO,IAAI,CAAC;iBACb;qBAAM;oBACL,OAAO,KAAK,CAAC;iBACd;aACF;SACF,CAAC,CAAC;KACJ;SAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;QACzB,OAAO,IAAI,KAAK,CAAC,IAAI,aAAa,CAAC,IAAI,CAAC,EAAE;YACxC,GAAG,CAAC,MAAM,EAAE,GAAG;gBACb,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;gBAC3C,IAAI,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;oBAC5B,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBACjC;qBAAM,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE;oBAGlC,OAAOI,gBAAW,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE;wBAC1C,MAAM,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC;qBAC7B,CAAC,CAAC;iBACJ;aACF;YACD,OAAO,CAAC,MAAM;gBACZ,OAAO,KAAK,CAAC,IAAI,CACf,IAAI,GAAG,CAAC;oBACN,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC;oBAC1B,GAAG,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;iBACjD,CAAC,CACH,CAAC;aACH;YACD,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK;gBACpB,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;gBAC7C,IAAI,GAAG,KAAK,OAAO,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;oBAEtC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;oBAChC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;oBAEzB,OAAO,IAAI,CAAC;iBACb;qBAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;oBACpC,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;oBACjC,MAAM,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAC;iBAE7B;qBAAM;oBACL,OAAO,KAAK,CAAC;iBACd;aACF;SACF,CAAC,CAAC;KACJ;SAAM;QACL,MAAM,SAAS,CAAC,eAAe,CAAC,CAAC;KAClC;CACF;;;;"}