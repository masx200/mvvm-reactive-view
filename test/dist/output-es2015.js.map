{"version":3,"file":"output-es2015.js","sources":["../../polyfill/Array-prototype-flat.js","../../polyfill/Object-fromEntries.js","../../src/UtilTools/isprimitive.ts","../../src/UtilTools/util.ts","../../src/assetbrowser.ts","../../node_modules/@masx200/dom-element-attribute-agent-proxy/src/mustUseDomProp.ts","../../node_modules/@masx200/dom-element-attribute-agent-proxy/src/index.ts","../../node_modules/lodash/isObject.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/now.js","../../node_modules/lodash/_Symbol.js","../../node_modules/lodash/_getRawTag.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/_baseGetTag.js","../../node_modules/lodash/isObjectLike.js","../../node_modules/lodash/isSymbol.js","../../node_modules/lodash/toNumber.js","../../node_modules/lodash/debounce.js","../../src/cached-map.ts","../../src/UtilTools/reflect.ts","../../src/mounted-unmounted/Component-context.ts","../../src/Reactivity/ReactiveState.ts","../../src/UtilTools/merge-entries.ts","../../src/CreateElement/VirtualElement.ts","../../src/CreateElement/isvalidvdom.ts","../../src/CustomClass/isclassextendsHTMLElement.ts","../../src/ScopedCSS/cssrulestocsstext.ts","../../src/CustomClass/getrandomstringandnumber.ts","../../src/CustomClass/CustomElementRegistry.ts","../../src/AttributeClass/iscomponent.ts","../../src/UtilTools/dom.ts","../../src/UtilTools/toArray.ts","../../src/MountElement/mount-real-element.ts","../../src/MountElement/isNodeArray.ts","../../src/MountElement/MountElement.ts","../../src/Reactivity/watch.ts","../../src/UtilTools/isconnected.ts","../../src/Directives/create-html-and-text-directive.ts","../../src/Directives/extend-directive.ts","../../src/Directives/directives.ts","../../src/RenderVirtual/handle-onevent.ts","../../src/RenderVirtual/render-vdom-to-real.ts","../../src/CustomClass/create-costum-elemet.ts","../../src/RenderVirtual/handle-props.ts","../../src/ScopedCSS/parsecss-transformcss.ts","../../src/ScopedCSS/create-cssurlblob.ts","../../src/ScopedCSS/savestyleblob.ts","../../src/ScopedCSS/transform-prefix-cssrules.ts","../../src/ScopedCSS/isCSSRule.ts","../../src/ScopedCSS/selectoraddprefix.ts","../../src/ScopedCSS/prefix-cssmediarule.ts","../../src/ScopedCSS/parsecsstext.ts","../../src/ScopedCSS/transformcsstext.ts","../../src/ScopedCSS/registercssprefix.ts","../../src/ScopedCSS/waitloadallstyle.ts","../../src/ScopedCSS/loadlinkstyle.ts","../../src/Reactivity/readonly-proxy.ts","../../src/UtilTools/setimmediate.ts","../../src/AttributeClass/readysymbol.ts","../../src/mounted-unmounted/element-onmount-unmount.ts","../../src/AttributeClass/attr-change.ts","../../src/AttributeClass/createComponent.ts","../../src/CreateElement/create-element.ts","../../src/AttributeClass/conditon.ts","../../src/Reactivity/getproperyread-proxy.ts","../../src/Reactivity/computed.ts","../../node_modules/@masx200/deep-observe-agent-proxy/src/index.ts","../../src/Reactivity/create-state.ts","../../src/Reactivity/handle-object-state.ts","../../src/AttributeClass/list-map.ts","../../src/asserttype.ts","../../src/AttributeClass/switchable.ts","../../src/createref.ts","../../node_modules/htm/dist/htm.module.js","../../src/Directives/model-input-textarea-value-directive-binding.ts","../src/index-compositionapi.js","../src/index-listmap.js","../src/index-myrootapp.js","../src/index-select.js","../src/index-teststore.js","../src/index-x.js","../src/index1.js","../src/index2.js","../src/index3.js","../src/index-test-all-component.js","../src/index-fun-state.js","../src/index-switchable.js"],"sourcesContent":["function flattenDeep(arr1) {\r\n  return arr1.reduce(\r\n    (acc, val) => acc.concat(Array.isArray(val) ? flattenDeep(val) : val),\r\n\r\n    []\r\n  );\r\n}\r\n\r\nfunction arrayflat(depth = 1) {\r\n  if (depth <= 1) {\r\n    return this.reduce((acc, val) => acc.concat(val), []);\r\n  } else if (depth > 10) {\r\n    return flattenDeep(this);\r\n  } else {\r\n    let result = [...this];\r\n    while (depth >= 1) {\r\n      result = arrayflat.call(result);\r\n      depth--;\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\nif (typeof Array.prototype.flat !== \"function\") {\r\n  Array.prototype.flat = arrayflat;\r\n}\r\n","function fromPairs(pairs) {\r\n  var index = -1,\r\n    length = pairs == null ? 0 : pairs.length,\r\n    result = {};\r\n  while (++index < length) {\r\n    var pair = pairs[index];\r\n    result[pair[0]] = pair[1];\r\n  }\r\n  return result;\r\n}\r\n\r\nvar fromPairs_1 = fromPairs;\r\n\r\nif (\"function\" !== typeof Object.fromEntries) {\r\n  Object.fromEntries = fromPairs_1;\r\n}\r\n","import { isboolean, isnumber, isString, isundefined } from \"./util\";\r\nexport type Primitivetype = string | number | boolean | undefined | bigint;\r\nexport default function(a: any): a is Primitivetype {\r\n  return (\r\n    isString(a) || isnumber(a) || isboolean(a) || isundefined(a) || isbigint(a)\r\n    // typeof a === \"bigint\"\r\n  );\r\n}\r\nexport function isbigint(a: any): a is bigint {\r\n  return typeof a === \"bigint\";\r\n}\r\n","export function issymbol(a: any): a is symbol {\r\n  return typeof a === \"symbol\";\r\n  //||gettagtype(a) === \"symbol\";\r\n}\r\n\r\nexport { isplainobject };\r\nexport { isfunction as isFunction, isarray as isArray, isstring as isString };\r\nexport { isprimitive };\r\n\r\nconst isplainobject = (a: any): a is Record<any, any> =>\r\n  isobject(a) && gettagtype(a) === \"Object\";\r\n\r\nimport isprimitive from \"./isprimitive\";\r\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\r\nexport function isundefined(a: any): a is void {\r\n  return (!a && a === void 0) || a === null;\r\n}\r\n\r\nexport function isnumber(a: any): a is number {\r\n  return typeof a === \"number\";\r\n}\r\nexport function isboolean(a: any): a is boolean {\r\n  return typeof a === \"boolean\";\r\n}\r\nexport function isobject(a: any): a is Exclude<object, Function> {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\n// export function isstring(a: string): true;\r\n// export function isstring(a): boolean;\r\nexport function isstring(a: any): a is string {\r\n  return typeof a === \"string\";\r\n}\r\nexport function isfunction(a: any): a is Function {\r\n  return typeof a === \"function\";\r\n}\r\n\r\nexport function isarray(a: any): a is Array<any> {\r\n  return Array.isArray(a)&&a instanceof Array \r\n//&&  \r\n//&& gettagtype(a) === \"Array\";\r\n}\r\n/* export function getsymbol(a: string) {\r\n  return Symbol(a);\r\n} */\r\nexport function gettagtype(a: any): string {\r\n  return (\r\n    {}.toString\r\n      .call(a)\r\n      .replace(\"[object \", \"\")\r\n      .replace(\"]\", \"\")\r\n      //.toLowerCase()\r\n      .trim()\r\n  );\r\n}\r\n//export function ispromise(a: any): a is Promise<any> {\r\n//  return gettagtype(a) === \"promise\" && isFunction(get(a, \"then\"));\r\n//}\r\nexport function isSet(a: any): a is Set<any> {\r\n  return a instanceof Set;\r\n}\r\nexport function isMap(a: any): a is Map<any, any> {\r\n  return a instanceof Map;\r\n}\r\nconst camelizeRE = /-(\\w)/g;\r\nexport const camelize = (str: string): string => {\r\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : \"\"));\r\n};\r\n\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nexport const hyphenate = (str: string): string => {\r\n  return str.replace(hyphenateRE, \"-$1\").toLowerCase();\r\n};\r\n\r\nexport function isWeakMap(a: any): a is WeakMap<any, any> {\r\n  return a instanceof WeakMap;\r\n}\r\n","import { isfunction, isobject } from \"./UtilTools/util\";\r\nconst { HTMLElement, customElements, Proxy } = window;\r\nif (\r\n  !isfunction(HTMLElement) ||\r\n  //   typeof HTMLElement !== \"function\" ||\r\n  !isfunction(Proxy) ||\r\n  //   typeof Proxy !== \"function\" ||\r\n  !isobject(customElements)\r\n  /*||\r\n  //   typeof customElements !== \"object\" ||\r\n  !isfunction(window.CustomElementRegistry)\r\n  //||\r\n  //   typeof CustomElementRegistry !== \"function\"\r\n\r\n*/\r\n) {\r\n  console.error(\"Proxy,HTMLElement ,customElements ,browser not supported !\");\r\n  throw new TypeError();\r\n}\r\n","const acceptValue = [\"input\", \"textarea\", \"option\", \"select\"];\r\n\r\nexport default (tag: string, attr: string, attrtype: string) => {\r\n  return (\r\n    (attr === \"value\" && acceptValue.includes(tag) && attrtype !== \"button\") ||\r\n    (attr === \"selected\" && tag === \"option\") ||\r\n    (attr === \"checked\" && tag === \"input\") ||\r\n    (attr === \"muted\" && tag === \"video\")\r\n  );\r\n};\r\n","import mustUseDomProp from \"./mustUseDomProp\";\r\n/* const camelizeRE = /-(\\w)/g;\r\nconst camelize = (str: string): string => {\r\n  return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : \"\"));\r\n};\r\n */\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\nconst hyphenate = (str: string): string => {\r\n  return str.replace(hyphenateRE, \"-$1\").toLowerCase();\r\n};\r\nconst String = window.String;\r\nconst Reflect = window.Reflect;\r\nconst { get, set, ownKeys } = Reflect;\r\nconst valuestring = \"value\";\r\nfunction isobject(a: any): a is Record<any, any> {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isstring(a: any): a is string {\r\n  return typeof a === \"string\";\r\n}\r\nfunction isArray(a: any): a is Array<any> {\r\n  return Array.isArray(a);\r\n}\r\n\r\nfunction isSet(a: any): a is Set<any> {\r\n  return a instanceof Set;\r\n}\r\n\r\nconst isinputcheckbox = (\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement\r\n) =>\r\n  \"input\" === geteletagname(ele) &&\r\n  (get(ele, \"type\") === \"checkbox\" || get(ele, \"type\") === \"radio\");\r\n\r\n//设置style对象时，先json深拷贝\r\nfunction objtostylestring(obj: object): string {\r\n  //style属性的驼峰转横杠\r\n\r\n  obj = JSON.parse(JSON.stringify(obj));\r\n\r\n  const objentries = Object.entries(obj).map(([key, value]) => [\r\n    hyphenate(key).trim(),\r\n    value\r\n  ]);\r\n\r\n  return objentries.map(([key, value]) => key + \":\" + value).join(\";\");\r\n}\r\nfunction asserthtmlelement(ele: any) {\r\n  if (!(ele instanceof Element)) {\r\n    console.error(ele);\r\n    console.error(\"invalid HTMLElement!\");\r\n    throw TypeError();\r\n  }\r\n}\r\nexport default function createeleattragentreadwrite(\r\n  ele: Element\r\n): Record<string, any> {\r\n  asserthtmlelement(ele);\r\n\r\n  var temp: Record<string, any> = Object.create(null);\r\n\r\n  const outputattrs: Record<string, any> = new Proxy(temp, {\r\n    ownKeys(/* target */) {\r\n      const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n\r\n      const keys = attributesownkeys(ele);\r\n\r\n      return Array.from(\r\n        new Set(\r\n          [\r\n            ...keys,\r\n            isinputcheckbox(ele) ? \"checked\" : undefined,\r\n            isinputtextortextareaflag ? valuestring : undefined\r\n            //Array.from(new Set([...keys, valuestring]))\r\n            //  : keys\r\n          ]\r\n            .flat(Infinity)\r\n            .filter(a => !!a)\r\n        )\r\n      );\r\n    },\r\n    get(target, key) {\r\n      //   const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n\r\n      //   if (isinputcheckbox(ele) && key === \"checked\") {\r\n      //     return get(ele, \"checked\");\r\n      //   }\r\n      //   if (isinputtextortextareaflag && key === valuestring) {\r\n      //     return get(ele, valuestring);\r\n\r\n      //   }\r\n      if (mustUseDomProp(geteletagname(ele), String(key), get(ele, \"type\"))) {\r\n        return get(ele, String(key));\r\n      } else {\r\n        const v = getattribute(ele, String(key));\r\n        // ele.getAttribute(String(key));\r\n        //   console.log(v);\r\n        if (v === \"\") {\r\n          return true;\r\n        }\r\n        /* 修复属性空字符串返回不是true的bug问题 */\r\n        if (v === null) {\r\n          return;\r\n        }\r\n\r\n        //如果属性空字符串则返回true\r\n\r\n        if (isstring(v)) {\r\n          try {\r\n            return JSON.parse(String(v)); // v\r\n          } catch (error) {\r\n            return v;\r\n          }\r\n        } else return;\r\n      }\r\n    },\r\n    set(t, key, v) {\r\n      //   const isinputtextortextareaflag = isinputtextortextarea(ele);\r\n\r\n      //不允许设置属性为函数\r\n      if (\"function\" === typeof v) {\r\n        console.error(v);\r\n\r\n        console.error(\"Setting properties as functions is not allowed\");\r\n        throw TypeError();\r\n\r\n        // throw TypeError(\"不允许设置属性为函数\");\r\n      }\r\n      /* 对于input的checkbox设置 checked属性时,不添加属性,直接修改checked属性*/\r\n      /*  if (geteletagname(ele) === \"input\" && key === \"checked\") {\r\n        set(ele, key, v);\r\n        return true;\r\n      }\r\n\r\n      if (isinputtextortextareaflag && key === valuestring) {\r\n        //设置元素的value属性,转成字符串\r\n        return set(ele, valuestring, String(v));\r\n      }  */\r\n\r\n      if (mustUseDomProp(geteletagname(ele), String(key), get(ele, \"type\"))) {\r\n        return set(ele, String(key), v);\r\n      } else if (key === \"style\") {\r\n        const csstext = isstring(v)\r\n          ? v\r\n          : isobject(v)\r\n          ? objtostylestring(v)\r\n          : String(v);\r\n        //设置csstext可以删除注释\r\n        set(get(ele, \"style\"), \"cssText\", csstext.trim());\r\n        // ele.style.cssText = csstext.trim();\r\n\r\n        //    setattribute(\r\n        //      ele,\r\n        //       String(key),\r\n        //      isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v)\r\n        //     );\r\n        /*   ele.setAttribute(\r\n          String(key),\r\n          isstring(v) ? v : isobject(v) ? objtostylestring(v) : String(v)\r\n        ); */\r\n        return true;\r\n      } else if (key === \"class\" && isobject(v)) {\r\n        const classtext = isArray(v)\r\n          ? v.join(\" \")\r\n          : isSet(v)\r\n          ? [...v].join(\" \")\r\n          : String(v);\r\n\r\n        setattribute(ele, String(key), classtext);\r\n        return true;\r\n        /*  if (isArray(v)) {\r\n          setattribute(ele, String(key), v.join(\" \"));\r\n        } else if (isSet(v)) {\r\n          setattribute(ele, String(key), [...v].join(\" \"));\r\n        } else {\r\n          setattribute(ele, String(key), String(v));\r\n        }*/\r\n        //\r\n      } else {\r\n        /* 如果为false则删除attribute */\r\n\r\n        if (false === v || v === null || v === undefined) {\r\n          removeAttribute(ele, String(key));\r\n          return true;\r\n        }\r\n        //如果设置为true,则设置属性空字符串\r\n        if (isSet(v)) {\r\n          setattribute(ele, String(key), JSON.stringify([...v]));\r\n          return true;\r\n        } else {\r\n          if (v === true) {\r\n            v = \"\";\r\n          }\r\n\r\n          setattribute(\r\n            ele,\r\n            String(key),\r\n            isobject(v) ? JSON.stringify(v) : String(v)\r\n          );\r\n          /*  ele.setAttribute(\r\n          String(key),\r\n          isobject(v) ? JSON.stringify(v) : String(v)\r\n        ); */\r\n          return true;\r\n        }\r\n      }\r\n      //   return true;\r\n    },\r\n    deleteProperty(t, k) {\r\n      removeAttribute(ele, String(k));\r\n      // ele.removeAttribute(String(k));\r\n      return true;\r\n    },\r\n    has(target, key) {\r\n      return ownKeys(outputattrs).includes(key);\r\n      /*\r\nconst isinputtextortextareaflag = isinputtextortextarea(ele);\r\n  \r\n      if (isinputtextortextareaflag && key === valuestring) {\r\n        return true;\r\n      } else {\r\n        return hasAttribute(ele, String(key));\r\n\r\n        // ele.hasAttribute(String(key));\r\n      }\r\n\r\n*/\r\n    },\r\n    defineProperty() {\r\n      return false;\r\n    },\r\n    getOwnPropertyDescriptor(target, key) {\r\n      const otherdescipter = {\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      };\r\n      const myvalue: any = get(outputattrs, key);\r\n      if (typeof myvalue !== \"undefined\") {\r\n        return {\r\n          value: myvalue,\r\n          ...otherdescipter\r\n        };\r\n      } else {\r\n        return;\r\n      }\r\n\r\n      /*  if (isinputtextortextareaflag && key === valuestring) {\r\n        return {\r\n          value: get(ele, valuestring),\r\n          ...otherdescipter\r\n          //   enumerable: true,\r\n          //   configurable: true,\r\n          //   writable: true\r\n        };\r\n      } else {\r\n        const attr = getattribute(ele, String(key));\r\n        // ele.getAttribute(String(key));\r\n\r\n        //如果属性空字符串则返回true\r\n        let outvalue;\r\n        if (attr === \"\") {\r\n          outvalue = true;\r\n        }\r\n        if (outvalue) {\r\n          return {\r\n            value: outvalue,\r\n            ...otherdescipter\r\n            // enumerable: true,\r\n            // configurable: true,\r\n            // writable: true\r\n          };\r\n        } else {\r\n          return;\r\n        }\r\n      } */\r\n    },\r\n    setPrototypeOf() {\r\n      return false;\r\n    }\r\n    /*  setPrototypeOf() {\r\n      return false;\r\n    },\r\n    getPrototypeOf() {\r\n      return null;\r\n    }*/\r\n  });\r\n  return outputattrs;\r\n}\r\nfunction attributesownkeys(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement\r\n): string[] {\r\n  //   return ownKeys(ele.attributes).filter(k => !/\\d/.test(String(k)[0]));\r\n  return ele.getAttributeNames();\r\n}\r\nfunction getattribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string\r\n) {\r\n  return ele.getAttribute(key);\r\n}\r\nfunction geteletagname(ele: Element /* { tagName: string } */) {\r\n  return ele.tagName.toLowerCase();\r\n}\r\nfunction setattribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string,\r\n  value: string\r\n) {\r\n  return ele.setAttribute(key, value);\r\n}\r\nfunction removeAttribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string\r\n) {\r\n  return ele.removeAttribute(key);\r\n}\r\n\r\n/* function hasAttribute(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement,\r\n  key: string\r\n) {\r\n  return ele.hasAttribute(key);\r\n}\r\n */\r\nfunction isinputtextortextarea(\r\n  ele: HTMLElement | Element | SVGElement | HTMLInputElement\r\n) {\r\n  const tagname = geteletagname(ele);\r\n  return (\r\n    tagname === \"textarea\" ||\r\n    tagname === \"select\" ||\r\n    (tagname === \"input\" && get(ele, \"type\") === \"text\")\r\n\r\n    /* 添加select元素 */\r\n  );\r\n}\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import { Htmlelementconstructor } from \"./AttributeClass/createComponent\";\r\nimport { CallbackReactiveState } from \"./Reactivity/watch\";\r\n\r\nexport const cached_callback_eventlistner = new WeakMap<\r\n  Function,\r\n  EventListener\r\n>();\r\nexport const cached_create_componet = new WeakMap<\r\n  Function,\r\n  Htmlelementconstructor\r\n>();\r\nexport const cached_callback_debounced_watchs = new WeakMap<\r\n  CallbackReactiveState,\r\n  Function\r\n>();\r\n","import { isMap, isWeakMap } from \"./util\";\r\n\r\n// const { Reflect } = window;\r\n// export default Reflect;\r\nexport const {\r\n  apply,\r\n  construct,\r\n  defineProperty,\r\n  deleteProperty,\r\n  //   get,\r\n  getOwnPropertyDescriptor,\r\n  getPrototypeOf,\r\n  has,\r\n\r\n  //   isExtensible,\r\n  ownKeys,\r\n  preventExtensions\r\n  //   set\r\n  //   setPrototypeOf\r\n} = Reflect;\r\n/* get和set函数同时实现reflect.get和reflect.set和map.set和map.get */\r\nexport function get(\r\n  target: Map<any, any> | WeakMap<any, any>,\r\n  propertyKey: PropertyKey\r\n): any;\r\nexport function get(\r\n  target: Exclude<object, Map<any, any> | WeakMap<any, any>>,\r\n  propertyKey: PropertyKey\r\n): //   receiver?: any\r\nany;\r\nexport function get(\r\n  target: object,\r\n  propertyKey: PropertyKey\r\n  //   receiver?: any\r\n): any {\r\n  if (isMap(target) || isWeakMap(target)) {\r\n    // debugger;\r\n    return target.get(propertyKey);\r\n  } else {\r\n    // debugger;\r\n    return Reflect.get(target, propertyKey /* , receiver */);\r\n  }\r\n}\r\nexport function set(\r\n  target: Map<any, any> | WeakMap<any, any>,\r\n  propertyKey: PropertyKey,\r\n  value: any\r\n): boolean;\r\nexport function set(\r\n  target: Exclude<object, Map<any, any> | WeakMap<any, any>>,\r\n  propertyKey: PropertyKey,\r\n  value: any\r\n): //   receiver?: any\r\nboolean;\r\nexport function set(\r\n  target: object,\r\n  propertyKey: PropertyKey,\r\n  value: any\r\n  //   receiver?: any\r\n): boolean {\r\n  if (isMap(target) || isWeakMap(target)) {\r\n    target.set(propertyKey, value);\r\n    // debugger;\r\n    return true;\r\n  } else {\r\n    // debugger;\r\n    return Reflect.set(target, propertyKey, value /* , receiver */);\r\n  }\r\n}\r\n\r\n// export {};\r\n/*\r\napply()\r\n对一个函数进行调用操作，同时可以传入一个数组作为调用参数。和 Function.prototype.apply() 功能类似。\r\nconstruct()\r\n对构造函数进行 new 操作，相当于执行 new target(...args)。\r\ndefineProperty()\r\n和 Object.defineProperty() 类似。\r\ndeleteProperty()\r\n作为函数的delete操作符，相当于执行 delete target[name]。\r\n//Reflect.enumerate()\r\n该方法会返回一个包含有目标对象身上所有可枚举的自身字符串属性以及继承字符串属性的迭代器，for...in 操作遍历到的正是这些属性。\r\nget()\r\n获取对象身上某个属性的值，类似于 target[name]。\r\ngetOwnPropertyDescriptor()\r\n类似于 Object.getOwnPropertyDescriptor()。\r\ngetPrototypeOf()\r\n类似于 Object.getPrototypeOf()。\r\nhas()\r\n判断一个对象是否存在某个属性，和 in 运算符 的功能完全相同。\r\nisExtensible()\r\n类似于 Object.isExtensible().\r\nownKeys()\r\n返回一个包含所有自身属性（不包含继承属性）的数组。(类似于 Object.keys(), 但不会受enumerable影响).\r\npreventExtensions()\r\n类似于 Object.preventExtensions()。返回一个Boolean。\r\nset()\r\n将值分配给属性的函数。返回一个Boolean，如果更新成功，则返回true。\r\nsetPrototypeOf()\r\n类似于 Object.setPrototypeOf()。\r\n*/\r\n","let watchrecord: [ReactiveState<any>, Function][] = [];\r\n/* 记录组件中使用的watch的state和callback,\r\n组件卸载时removeeventlistener,\r\n组件挂载时addeventlistener\r\n*/\r\nimport ReactiveState from \"../Reactivity/ReactiveState\";\r\nimport { isFunction } from \"../UtilTools/util\";\r\nexport function getwatchrecords() {\r\n  return [...watchrecord];\r\n}\r\nexport function usewatch(state: ReactiveState<any>, callback: Function) {\r\n  if (ctxopen) {\r\n    watchrecord.push([state, callback]);\r\n  }\r\n}\r\nfunction clearwatch() {\r\n  watchrecord = [];\r\n}\r\nexport const invalid_Function = \"invalid Function\";\r\nconst errormessage =\r\n  \"invalid useMounted or useUnMounted out of createComponent\";\r\nlet ctxopen = false;\r\nlet MountedSet: Set<Function> = new Set();\r\nlet UnMountedSet: Set<Function> = new Set();\r\nlet StateSet: Set<ReactiveState<any>> = new Set();\r\n/* 收集组件内部创建的 ReactiveState*/\r\n\r\nexport function getstates() {\r\n  return [...StateSet];\r\n}\r\nexport function recordusestste(state: ReactiveState<any>) {\r\n  if (ctxopen) {\r\n    StateSet.add(state);\r\n  }\r\n}\r\nexport function getMounted() {\r\n  return [...MountedSet];\r\n}\r\nexport function getUnMounted() {\r\n  return [...UnMountedSet];\r\n}\r\nexport function useMounted(fun: Function) {\r\n  if (isFunction(fun)) {\r\n    if (ctxopen) {\r\n      MountedSet.add(fun);\r\n    } else {\r\n      //console.error()\r\n      console.error(errormessage);\r\n      throw Error();\r\n    }\r\n  } else {\r\n    console.error(fun);\r\n    console.error(invalid_Function);\r\n    throw TypeError();\r\n  }\r\n}\r\n\r\nexport function useUnMounted(fun: Function) {\r\n  if (isFunction(fun)) {\r\n    if (ctxopen) {\r\n      UnMountedSet.add(fun);\r\n    } else {\r\n      console.error(errormessage);\r\n      throw Error();\r\n      //throw Error(errormessage);\r\n    }\r\n  } else {\r\n    console.error(fun);\r\n    console.error(invalid_Function);\r\n    throw TypeError();\r\n    //throw TypeError(invalid_Function);\r\n  }\r\n}\r\nexport function clearMounted() {\r\n  MountedSet = new Set();\r\n}\r\n\r\nfunction clearstate() {\r\n  StateSet = new Set();\r\n}\r\nexport function clearUnMounted() {\r\n  UnMountedSet = new Set();\r\n}\r\nexport function openctx() {\r\n  ctxopen = true;\r\n  clearall();\r\n}\r\nexport function closectx() {\r\n  ctxopen = false;\r\n  clearall();\r\n}\r\nfunction clearall() {\r\n  clearMounted();\r\n  clearUnMounted();\r\n  clearstate();\r\n  clearwatch();\r\n}\r\n","import debounce from \"lodash/debounce\";\r\nimport { cached_callback_eventlistner } from \"../cached-map\";\r\n// import Reflect from \"./reflect\";\r\nimport isprimitive, { Primitivetype } from \"../UtilTools/isprimitive\";\r\nimport { defineProperty } from \"../UtilTools/reflect\";\r\nimport { isobject, isSet } from \"../UtilTools/util\";\r\nimport { UnwrapedState } from \"./watch\";\r\nimport { recordusestste } from \"src/mounted-unmounted/Component-context\";\r\nexport const addonelistner = Symbol(\"addonelistner\");\r\nexport const removeonelistner = Symbol(\"removeonelistner\");\r\n// import { Primitive } from 'lodash';\r\n// export const callbackmap = Symbol(\"callbackmap\");\r\nexport const cancelsubscribe = Symbol(\"cancelsubscribe\");\r\nconst debouncedispatch = Symbol(\"debouncedispatch\");\r\nexport const invalid_primitive_or_object_state =\r\n  \"invalid primitive or object state\";\r\nexport function isReactiveState(a: any): a is ReactiveState<any> {\r\n  return (\r\n    a instanceof ReactiveState && a[Symbol.toStringTag] === \"ReactiveState\"\r\n  );\r\n}\r\n// export const textnodesymbol = Symbol(\"textnode\");\r\nexport const changetextnodesymbol = Symbol(\"changetextnode\");\r\nexport const eventtargetsymbol = Symbol(\"eventtatget\");\r\nexport const memlisteners = Symbol(\"memlisteners\");\r\nexport const dispatchsymbol = Symbol(\"dispatch\");\r\nexport const subscribesymbol = Symbol(\"subscribe\");\r\nexport const removeallistenerssymbol = Symbol(\"removeallisteners\");\r\nexport const addallistenerssymbol = Symbol(\"addallisteners\");\r\n/* const forkarryaprototype = {};\r\nownKeys(Array.prototype).forEach(key => {\r\n  forkarryaprototype[key] = Array.prototype[key];\r\n}); */\r\n/* class forkarray {}\r\nObject.assign(forkarray.prototype, forkarryaprototype);\r\nforkarray.prototype.constructor = forkarray;\r\ndeleteProperty(forkarray.prototype, \"length\"); */\r\n/* extends forkarray  */\r\n\r\nexport default class ReactiveState<T extends UnwrapedState> {\r\n  value: T extends Array<any>\r\n    ? Array<any>\r\n    : T extends Function\r\n    ? Function\r\n    : T extends Primitivetype\r\n    ? Primitivetype\r\n    : object;\r\n  //extends Primitivetype ? Primitivetype : Exclude<object, Function>;\r\n  //   [callbackmap] = new Map<Function, EventListener>();\r\n\r\n  readonly [Symbol.toStringTag] = \"ReactiveState\";\r\n\r\n  constructor(init?: T) {\r\n    //super();\r\n    // this.value = undefined;\r\n\r\n    // if (isprimitive(init) || isobject(init)) {\r\n    this.value = init as any; //as T; /* extends Primitivetype\r\n    //  ? Primitivetype\r\n    //  : Exclude<object, Function>; */\r\n    defineProperty(this, \"value\", {\r\n      value: init,\r\n      configurable: true,\r\n      writable: true\r\n    });\r\n\r\n    // this.value = init;\r\n    // } else {\r\n    //   console.error(init);\r\n    //   console.error(invalid_primitive_or_object_state);\r\n    //   throw TypeError();\r\n    // }\r\n    // this[eventtargetsymbol] = new EventTarget();\r\n\r\n    /*\r\n  //  Object.defineProperty(this, Symbol.toStringTag, {\r\n //     value: \"ReactiveState\",\r\n   //   configurable: true\r\n    //});\r\n\r\n*/\r\n    recordusestste(this);\r\n    const debouncedfun = debounce((eventname?: string) => {\r\n      const name = eventname ? String(eventname) : \"value\";\r\n\r\n      this[eventtargetsymbol].dispatchEvent(\r\n        new CustomEvent(\"value\", { detail: name })\r\n      );\r\n    });\r\n    this[debouncedispatch] = (eventname?: string) => {\r\n      debouncedfun(eventname);\r\n    };\r\n  }\r\n  [debouncedispatch]: (eventname?: string | undefined) => void;\r\n  /* get [Symbol.toStringTag]() {\r\n  //  return \"ReativeState\";\r\n\r\n} */\r\n  [removeallistenerssymbol]() {\r\n    this[memlisteners].forEach(callback => {\r\n      this[removeonelistner](callback);\r\n    });\r\n  }\r\n  [removeonelistner](callback: EventListener) {\r\n    const name = \"value\";\r\n    this[eventtargetsymbol].removeEventListener(name, callback);\r\n  }\r\n  [addonelistner](callback: EventListener) {\r\n    const name = \"value\";\r\n    this[eventtargetsymbol].addEventListener(name, callback);\r\n  }\r\n  [addallistenerssymbol]() {\r\n    // const name = \"value\";\r\n    this[memlisteners].forEach(callback => {\r\n      this[addonelistner](callback);\r\n      //   this[eventtargetsymbol].addEventListener(name, callback);\r\n    });\r\n  }\r\n  /*  [changetextnodesymbol](textnode: Text) {\r\n    this[textnodesymbol] = textnode;\r\n  } */\r\n  // [textnodesymbol]: Text | undefined;\r\n  /*  [changetextnodesymbol](textnode: Text) {\r\n      this[textnodesymbol] = textnode;\r\n    } */\r\n  // [textnodesymbol]: Text | undefined;\r\n\r\n  [eventtargetsymbol] = new EventTarget();\r\n  [memlisteners] = new Set<EventListener>();\r\n\r\n  //剑头函数绑定this\r\n  valueOf = () => {\r\n    return this.value;\r\n  };\r\n  toString() {\r\n    const value = this.valueOf();\r\n    return isprimitive(value)\r\n      ? String(value)\r\n      : isSet(value)\r\n      ? JSON.stringify([...(value as Set<any>)])\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : \"\";\r\n  }\r\n\r\n  [dispatchsymbol](eventname?: string) {\r\n    //添加防抖函数\r\n\r\n    this[debouncedispatch](eventname);\r\n  }\r\n  [subscribesymbol](\r\n    callback: Function\r\n    /*, eventname?: string*/\r\n  ) {\r\n    let eventlistener: EventListener;\r\n    const possiblecallback = cached_callback_eventlistner.get(callback);\r\n    if (possiblecallback) {\r\n      eventlistener = possiblecallback;\r\n    } else {\r\n      //自动解包\r\n      eventlistener = () => callback(/* this.valueOf() */);\r\n\r\n      cached_callback_eventlistner.set(callback, eventlistener);\r\n    }\r\n    // this[eventtargetsymbol].addEventListener(\"value\", callback);\r\n    // const name = eventname ? String(eventname) : \"value\";\r\n    //  const name = \"value\";\r\n    this[memlisteners].add(eventlistener);\r\n  }\r\n  [cancelsubscribe](callback: Function) {\r\n    const eventlistener = cached_callback_eventlistner.get(callback);\r\n    /*  if (!eventlistener) {\r\n      throw new Error();\r\n    } */\r\n    if (eventlistener) {\r\n      this[memlisteners].delete(eventlistener);\r\n      this[removeonelistner](eventlistener);\r\n    }\r\n  }\r\n\r\n  [Symbol.toPrimitive](): string | undefined | Primitivetype {\r\n    //return this.value;\r\n    const value = this.valueOf();\r\n    return isprimitive(value)\r\n      ? value\r\n      : isobject(value)\r\n      ? JSON.stringify(value)\r\n      : void 0;\r\n  }\r\n}\r\n/* Reflect.defineProperty(ReactiveState.prototype, Symbol.toStringTag, {\r\n  value: \"ReactiveState\"\r\n}); */\r\n","/* \r\n        \r\n        [[\"value\",[\"f\",\"f\"]],[\"value\",[\"f\",\"f\"]]]\r\n\r\n\r\n        [[\"value\",[\"f\",\"f\",\"f\",\"f\"]]]\r\n        \r\n        */\r\nexport function merge_entries(\r\n  a: [string, any][] /* Array<[any, Array<any>]> */\r\n): [string, any][] {\r\n  const m: { [s: string]: Set<any> } = {};\r\n\r\n  a.forEach(([key, value]) => {\r\n    if (!m[key]) {\r\n      m[key] = new Set();\r\n    }\r\n    // m[key] && (m[key] = new Set());\r\n\r\n    value.forEach((v: any) => {\r\n      m[key].add(v);\r\n    });\r\n  });\r\n  return Object.entries(m).map(([k, v]) => [k, [...v]]);\r\n}\r\n","const VirtualElementSet = new WeakSet<Virtualdom<any>>();\r\nconst Letter_case_and_Chinese = /[A-Za-z\\u4e00-\\u9fa5]/;\r\nimport { Class } from \"../CustomClass/customclass\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\n//// import { Class } from \"./rendervdomtoreal\";\r\nimport { merge_entries } from \"../UtilTools/merge-entries\";\r\nimport { defineProperty, preventExtensions } from \"../UtilTools/reflect\";\r\nimport { isstring } from \"../UtilTools/util\";\r\nimport { ElementAttrs } from \"./create-element\";\r\nimport { VaildVDom } from \"./isvalidvdom\";\r\n// //export function isVirtualdom(a: any): a is Virtualdom<any> {\r\n//   return a instanceof Virtualdom;\r\n// }//\r\nexport function isVirtualdom(a: any): a is Virtualdom<any> {\r\n  return VirtualElementSet.has(a);\r\n  /*   isobject(a) &&\r\n    // has(a, isvirtualelement) &&\r\n    get(a, isvirtualelement) === isvirtualelement */\r\n}\r\n// export const isvirtualelement = Symbol(\"isvirtualelement\");\r\nexport type Vdomchildren = Array<VaildVDom>;\r\nexport { createVirtualElement };\r\nfunction createVirtualElement<T extends Class | string | Function>(\r\n  type: T,\r\n  props: ElementAttrs = {},\r\n  children: Vdomchildren = []\r\n): Virtualdom<T> {\r\n  props = Object.assign({}, props);\r\n  children = children.flat(1 / 0);\r\n\r\n  const propsentries = Object.entries(props);\r\n  const propsentriesNOTevents = propsentries.filter(\r\n    ([key]) => !(key.startsWith(\"@\") || key.startsWith(\"on\"))\r\n  );\r\n  const Entries_beginning_with_a_letter = propsentriesNOTevents.filter(\r\n    ([key]) => Letter_case_and_Chinese.test(key[0])\r\n  );\r\n  const virtual = Object.create(null);\r\n  const vdom = virtual;\r\n  [\r\n    \"onevent\",\r\n    \"element\",\r\n    \"type\",\r\n    \"props\",\r\n    \"children\",\r\n    \"directives\",\r\n    \"bindattr\"\r\n  ].forEach(key => {\r\n    defineProperty(virtual, key, {\r\n      //   enumerable: false,\r\n      writable: true\r\n    });\r\n  });\r\n  //   [\"type\", \"props\", \"children\", \"directives\", \"bindattr\"].forEach(key => {\r\n  //     defineProperty(virtual, key, {\r\n  //       enumerable: true,\r\n  //       writable: true\r\n  //     });\r\n  //   });\r\n  vdom.element = [];\r\n  Object.assign(virtual, {\r\n    type,\r\n    bindattr: Object.fromEntries(\r\n      Entries_beginning_with_a_letter.filter(e => isReactiveState(e[1]))\r\n    ),\r\n    props: Object.fromEntries(\r\n      Entries_beginning_with_a_letter.filter(e => !isReactiveState(e[1])).map(\r\n        ([key, value]) => [key, isstring(value) ? value.trim() : value]\r\n      )\r\n    ),\r\n    children,\r\n    onevent: Object.fromEntries(\r\n      merge_entries([\r\n        ...propsentries\r\n          .filter(([key]) => \"@\" == key[0])\r\n          .map(([key, value]) => [\r\n            key\r\n              .slice(1)\r\n              .toLowerCase()\r\n              .trim(),\r\n            [value].flat(1 / 0)\r\n          ]),\r\n        ...propsentries\r\n          .filter(([key]) => key.startsWith(\"on\"))\r\n          .map(([key, value]) => [\r\n            key\r\n              .slice(2)\r\n              .toLowerCase()\r\n              .trim(),\r\n            [value].flat(1 / 0)\r\n          ])\r\n      ] as [string, any][])\r\n    ),\r\n    directives: Object.fromEntries(\r\n      propsentriesNOTevents\r\n        .filter(([key]) => key[0] === \"*\" || key[0] === \"_\" || key[0] === \"$\")\r\n        .map(([key, value]) => [\r\n          key\r\n            .slice(1)\r\n            .toLowerCase()\r\n            .trim(),\r\n          value\r\n        ])\r\n    )\r\n  });\r\n  defineProperty(virtual, Symbol.toStringTag, { value: \"VirtualElement\" });\r\n  //   virtual[Symbol.toStringTag] = \"VirtualElement\";\r\n  //   virtual[isvirtualelement] = isvirtualelement;\r\n  //   defineProperty(virtual, isvirtualelement, { value: isvirtualelement });\r\n  preventExtensions(virtual);\r\n  VirtualElementSet.add(virtual);\r\n\r\n  Object.freeze(vdom);\r\n  return virtual;\r\n}\r\n// JSON.stringify\r\ninterface Virtualdom<T extends Class | string | Function> {\r\n  //   readonly [isvirtualelement]: unique symbol;\r\n  readonly [Symbol.toStringTag]: \"VirtualElement\";\r\n  readonly element: Element[];\r\n  readonly type: T;\r\n  readonly props: ElementAttrs;\r\n  readonly children: Vdomchildren;\r\n  readonly directives: Record<string, any>;\r\n  //   { [key: string]: any };\r\n  readonly onevent: Record<string, Array<EventListener>>;\r\n  //   {\r\n  //     [key: string]: Array<EventListener>;\r\n  //   };\r\n  readonly bindattr: Record<string, ReactiveState<any>>;\r\n  /* {\r\n    [key: string]: ReactiveState<any>;\r\n  }; */\r\n}\r\nexport default Virtualdom;\r\n// //export default class Virtualdom<T extends Class | string | Function> {\r\n//   [Symbol.toStringTag] = \"VirtualElement\";\r\n//   // get [Symbol.toStringTag]() {\r\n//     return \"VirtualElement\";\r\n//   // } //\r\n// //   options: any |undefined\r\n// //  element: undefined | Element | Node;\r\n//   type: T | undefined;\r\n//   props: ElementAttrs = {};\r\n//   children: Vdomchildren = [];\r\n//   directives: object = {};\r\n//   onevent: { [key: string]: Array<EventListener> } = {};\r\n//   bindattr: { [key: string]: ReactiveState<any> } = {};\r\n//   constructor(type: T, props: ElementAttrs = {}, children: Vdomchildren = []) {\r\n//     //对象浅拷贝\r\n//     props = { ...props };\r\n//     const Letter_case_and_Chinese = /[A-Za-z\\u4e00-\\u9fa5]/;\r\n//     // console.log(type, props, children);\r\n//     //添加支持on开头事件绑定写法\r\n//     const propsentries = Object.entries(props);\r\n//     //\r\n// .map(([key, value]) => [\r\n// key.startsWith(\"on\")?key.replace(\"on\",\"@\")：key\r\n// ,\r\n// value\r\n\r\n// ]);\r\n// //\r\n// //   const propsentriesNOTevents = propsentries.filter(\r\n//       ([key]) => !(key.startsWith(\"@\") || key.startsWith(\"on\"))\r\n//     );\r\n//     const Entries_beginning_with_a_letter = propsentriesNOTevents.filter(([key]) =>\r\n//       Letter_case_and_Chinese.test(key[0])\r\n//     );\r\n\r\n//     Object.assign(this, {\r\n//       type,\r\n//       bindattr: Object.fromEntries(\r\n//         //   propsentriesNOTevents\r\n//           .filter(([key]) => Letter_case_and_Chinese.test(key[0])) //\r\n// //    Entries_beginning_with_a_letter.filter(\r\n//           e => isReactiveState(e[1])\r\n//           // e[1] instanceof ReactiveState\r\n//         )\r\n//       ),\r\n//       props: Object.fromEntries(\r\n//         //   propsentriesNOTevents\r\n//           .filter(([key]) => Letter_case_and_Chinese.test(key[0])) //\r\n// //  Entries_beginning_with_a_letter.filter(\r\n//           e => !isReactiveState(e[1])\r\n//           //    e[1] instanceof ReactiveState\r\n//         )\r\n//       ),\r\n//       children: children.flat(1 / 0),\r\n//       onevent: Object.fromEntries(\r\n//         // 需要合并entries\r\n//         [\r\n//         ['value',[f,f]]\r\n//         ,\r\n//         ['value',[f,f]]\r\n//       ]\r\n//         合并成\r\n\r\n//          [\r\n//         ['value',[f,f,f,f]]\r\n//          ]\r\n//         //\r\n\r\n// //\r\n\r\n//         [[\"value\",[\"f\",\"f\"]],[\"value\",[\"f\",\"f\"]]]\r\n\r\n//         [[\"value\",[\"f\",\"f\",\"f\",\"f\"]]]\r\n\r\n//         //\r\n// //     merge_entries([\r\n//           ...propsentries\r\n//             .filter(([key]) => /\\@/.test(key[0]))\r\n//             .map(([key, value]) => [\r\n//               //事件名称变成小写\r\n//               key\r\n//                 .slice(1)\r\n//                 .toLowerCase()\r\n//                 .trim(),\r\n//               //把事件绑定变成事件数组\r\n//               [value].flat(1 / 0)\r\n//             ]),\r\n//           ...propsentries\r\n//             .filter(([key]) => key.startsWith(\"on\"))\r\n//             .map(([key, value]) => [\r\n//               //事件名称变成小写\r\n//               key\r\n//                 .slice(2)\r\n//                 .toLowerCase()\r\n//                 .trim(),\r\n//               //把事件绑定变成事件数组\r\n//               [value].flat(1 / 0)\r\n//             ])\r\n//         ])\r\n//       ),\r\n\r\n//       //指令支持以\"*\"开头和\"_\"开头\r\n//       directives: Object.fromEntries(\r\n//         propsentriesNOTevents\r\n//         //  .filter(([key]) => /\\//\r\n// //.test(key[0]) || key[0].startsWith(\"_\"))\r\n//         //  .map(([key, value]) => [\r\n//             //指令也变成小写\r\n//             key\r\n//               .slice(1)\r\n//               .toLowerCase()\r\n//               .trim(),\r\n\r\n//             value\r\n//           ])\r\n//       )\r\n//     });\r\n//     //\r\n//  Object.defineProperty(this, Symbol.toStringTag, {\r\n//       value: \"virtualdom\",\r\n//       configurable: true\r\n//     });\r\n// //\r\n// //  }\r\n// }//\r\n// // defineProperty(Virtualdom.prototype, Symbol.toStringTag, {\r\n//   value: \"VirtualElement\"\r\n// });\r\n//  //\r\n","export type VaildVDom =\r\n  | Virtualdom<any>\r\n  | string\r\n  | number\r\n  | Vdomchildren\r\n  | ReactiveState<any>;\r\n// import { VaildVDom } from \"./isvalidvdom\";\r\nimport Virtualdom, {\r\n  isVirtualdom,\r\n  Vdomchildren\r\n} from \"../CreateElement/VirtualElement\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { isArray, isnumber, isstring } from \"../UtilTools/util\";\r\n\r\nexport function isvalidvdom(v: any): v is VaildVDom {\r\n  if (isstring(v)) {\r\n    return true;\r\n  }\r\n  if (isnumber(v)) {\r\n    return true;\r\n  }\r\n  let flag = false;\r\n  if (isArray(v)) {\r\n    /*flag = v\r\n        .map((ele: any) => {\r\n          return isvalidvdom(ele);\r\n          //isstring(ele) || ele instanceof Virtualdom;\r\n        })\r\n        .includes(false)\r\n        ? false\r\n        : true;\r\n      return flag;*/\r\n    //https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every\r\n    //不允许空数组\r\n    /* children可能为空数组 */\r\n    return /* !! */ /* v.length */ /* && */ v.every(e => isvalidvdom(e));\r\n  } else if (\r\n    isVirtualdom(v)\r\n    // v instanceof Virtualdom\r\n  ) {\r\n    return isvalidvdom(v.children);\r\n    /*  if (isvalidvdom(v.children)) {\r\n        return true;\r\n      } */\r\n  } else if (\r\n    isReactiveState(v)\r\n    //  v instanceof ReactiveState\r\n  ) {\r\n    return true;\r\n  }\r\n  /*  else {\r\n    } */\r\n  return flag;\r\n}\r\n","import { Class } from \"../CustomClass/customclass\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\n\r\nexport function isclassextendsHTMLElement(initclass: {\r\n  prototype: any;\r\n}): initclass is Class {\r\n  return !!(\r\n    isfunction(initclass) &&\r\n    initclass.prototype &&\r\n    initclass.prototype instanceof HTMLElement\r\n  );\r\n}\r\n","export function cssrulestocsstext(cssrules: Array<CSSRule>): string {\r\n  return cssrules.map(c => c.cssText).join(\"\\n\");\r\n  // .replace(/\\n/g, \"\");\r\n}\r\n","export { getrandomstringandnumber };\r\nimport { get } from \"src/UtilTools/reflect\";\r\n\r\nconst charactorlist = Array(26)\r\n  .fill(undefined)\r\n  .map((v, i) => 97 + i)\r\n  .map(n => String.fromCharCode(n));\r\n\r\nconst hexnumberlist = Array(16)\r\n  .fill(undefined)\r\n  .map((v, i) => i)\r\n  .map(a => a.toString(16));\r\n\r\nconst charactorandnumberlist = [\r\n  ...new Set([...hexnumberlist, ...charactorlist])\r\n];\r\n\r\nfunction getrandomcharactor() {\r\n  return get(\r\n    //  Array(26)\r\n    //  .fill(undefined)\r\n    //  .map((v, i) => 97 + i)\r\n    // .map(n => String.fromCharCode(n))\r\n    charactorlist,\r\n    Math.floor(Math.random() * charactorlist.length)\r\n  );\r\n}\r\nfunction getrandomhexnumberandcharactor() {\r\n  return get(\r\n    // Array(16)\r\n    //  .fill(undefined)\r\n    // .map((v, i) => i)\r\n    charactorandnumberlist,\r\n    Math.floor(Math.random() * charactorandnumberlist.length)\r\n  );\r\n\r\n  //.toString(16);\r\n}\r\nfunction getrandomstringandnumber(length = 1) {\r\n  return (\r\n    Array(length)\r\n      .fill(undefined)\r\n      .map(() => getrandomcharactor())\r\n\r\n      .join(\"\") +\r\n    \"-\" +\r\n    Array(length)\r\n      .fill(undefined)\r\n      .map(() => getrandomhexnumberandcharactor())\r\n      .join(\"\")\r\n  );\r\n}\r\n","export const invalid_custom_element_class = \"invalid custom element class !\";\r\n// import { isclassextendsHTMLElement } from \"./CustomElement/create-costum-elemet\";\r\nimport { get, getPrototypeOf, has, set } from \"../UtilTools/reflect\";\r\nimport { isobject } from \"../UtilTools/util\";\r\nimport { getrandomstringandnumber } from \"./getrandomstringandnumber\";\r\nimport { isclassextendsHTMLElement } from \"./isclassextendsHTMLElement\";\r\nif (\r\n  //   typeof Proxy !== \"function\" ||\r\n  !isobject(window.customElements) //||\r\n  //   typeof customElements !== \"object\" ||\r\n\r\n  //||\r\n  //   typeof CustomElementRegistry !== \"function\"\r\n) {\r\n  console.error(\" customElements  not supported !\");\r\n  throw new TypeError();\r\n}\r\n\r\nfunction Usevaluetoquerythekeyfromthetable(\r\n  table: object,\r\n  Componentstatusname: any\r\n): string | undefined {\r\n  const outputentrie = Object.entries(table).find(v => {\r\n    return v[1] === Componentstatusname;\r\n  });\r\n  return outputentrie ? outputentrie[0] : undefined;\r\n}\r\n\r\ninterface ElementDefinitionOptions {\r\n  extends?: string;\r\n}\r\nwindow.CustomElementRegistry = get(\r\n  getPrototypeOf(window.customElements),\r\n  \"constructor\"\r\n);\r\nconst elementset = Symbol.for(\"elementset\");\r\nconst elementmap = Symbol.for(\"elementmap\");\r\n\r\ninterface CustomElements extends CustomElementRegistry {\r\n  [elementset]: Set<Function>;\r\n  [elementmap]: Record<string, Function>;\r\n}\r\nconst { CustomElementRegistry } = window;\r\nconst customElements = window.customElements as CustomElements;\r\n// export default customElements;\r\n\r\nif (!has(customElements, elementset)) {\r\n  Reflect.set(customElements, elementset, new Set());\r\n  //   assert(elementset in customElements);\r\n  //   customElements[elementset] = new Set();\r\n}\r\nif (!has(customElements, elementmap)) {\r\n  Reflect.set(customElements, elementmap, {});\r\n  //   customElements[elementmap] = {};\r\n}\r\n// debugger;\r\nexport default (initclass: Function, extendsname?: string) =>\r\n  RandomDefineCustomElement(initclass, extendsname);\r\n\r\nfunction RandomDefineCustomElement(\r\n  initclass: Function,\r\n  extendsname?: string,\r\n  length = 1\r\n): string | undefined {\r\n  if (!isclassextendsHTMLElement(initclass)) {\r\n    console.error(initclass);\r\n    console.error(invalid_custom_element_class);\r\n    throw TypeError();\r\n  }\r\n\r\n  //如果未注册自定义组件，则用随机名称注册，如果名称重复则重新生成新的随机名\r\n  //   console.log(get(customElements, elementset));\r\n  //   debugger;\r\n  if (!get(customElements, elementset).has(initclass)) {\r\n    const elementname = getrandomstringandnumber(length);\r\n\r\n    if (customElements.get(elementname)) {\r\n      return RandomDefineCustomElement(initclass, extendsname, length + 1);\r\n    } else {\r\n      if (extendsname) {\r\n        customElements.define(elementname, initclass, { extends: extendsname });\r\n      } else {\r\n        customElements.define(elementname, initclass);\r\n      }\r\n    }\r\n\r\n    return elementname;\r\n  } else {\r\n    return Usevaluetoquerythekeyfromthetable(\r\n      get(customElements, elementmap),\r\n      initclass\r\n    );\r\n  }\r\n\r\n  //如果已经注册自定义组件，则返回注册的名称\r\n}\r\n\r\n/* customElements.get = function name(name) {\r\n  return customElements[elementmap].get(name);\r\n};\r\n */\r\ncustomElements.define = function(\r\n  name: string,\r\n  constructor: Function,\r\n  options?: ElementDefinitionOptions\r\n): void {\r\n  if (!isclassextendsHTMLElement(constructor)) {\r\n    console.error(constructor);\r\n    console.error(invalid_custom_element_class);\r\n    throw TypeError();\r\n  }\r\n  if (!get(customElements, elementset).has(constructor)) {\r\n    if (has(customElements[elementmap], name)) {\r\n      /* 防止定义重名 */\r\n      RandomDefineCustomElement(\r\n        constructor,\r\n        options ? options.extends : undefined\r\n      );\r\n    } else {\r\n      CustomElementRegistry.prototype.define.call(\r\n        customElements,\r\n        name,\r\n        constructor,\r\n        options\r\n      );\r\n      customElements[elementset].add(constructor);\r\n      customElements[elementmap][name] = constructor;\r\n    }\r\n  }\r\n};\r\nset(customElements, Symbol.iterator, () => {\r\n  const entries = Object.entries(customElements[elementmap]);\r\n\r\n  return entries[Symbol.iterator].call(entries);\r\n});\r\n/* customElements[Symbol.iterator] = () => {\r\n  const entries = Object.entries(customElements[elementmap]);\r\n\r\n  return entries[Symbol.iterator].call(entries);\r\n}; */\r\n","import { get } from \"../UtilTools/reflect\";\r\nimport { isFunction } from \"../UtilTools/util\";\r\nconst componentsymbol = Symbol(\"component\");\r\nexport { componentsymbol };\r\nexport function iscomponent(a: any) {\r\n  return (\r\n    isFunction(a) &&\r\n    //  has(a, componentsymbol) &&\r\n    get(a, componentsymbol) === componentsymbol\r\n  );\r\n}\r\n","// const document = window.document;\r\n//import { seteletext, setelehtml } from \"./directives\";\r\n//export { seteletext, setelehtml };\r\n\r\nexport function seteletext(e: Element | Node, v: string) {\r\n  e.textContent = v;\r\n}\r\nexport function setelehtml(e: Element, v: string) {\r\n  e.innerHTML = v;\r\n}\r\nexport function appendchild(\r\n  container: HTMLElement | SVGSVGElement | SVGElement | Element | Node,\r\n  ele: HTMLElement | SVGElement | Element | Node\r\n) {\r\n  container.appendChild(ele);\r\n}\r\nexport function createsvgelement() {\r\n  return createElementNS(svgnamespace, \"svg\");\r\n}\r\nexport function createnonescript() {\r\n  return createDocumentFragment();\r\n}\r\nexport function createDocumentFragment() {\r\n  return document.createDocumentFragment();\r\n}\r\nexport function createnativeelement(type: string) {\r\n  return document.createElement(type);\r\n}\r\nexport function createElementNS(namespace: string, name: string) {\r\n  return document.createElementNS(namespace, name);\r\n}\r\nexport function createtextnode(data: string | number) {\r\n  return document.createTextNode(String(data));\r\n}\r\nexport const svgnamespace = \"http://www.w3.org/2000/svg\";\r\nexport function changetext(textnode: Text, value: string) {\r\n  textnode.nodeValue = String(value);\r\n}\r\n// export default document;\r\n\r\nexport const mathnamespace = \"http://www.w3.org/1998/Math/MathML\";\r\n\r\nexport function createmathelement() {\r\n  return createElementNS(mathnamespace, \"math\");\r\n}\r\nexport function createComment() {\r\n  return document.createComment(\"\");\r\n}\r\nexport function removeElement(element: Element) {\r\n  element.remove();\r\n}\r\nexport function removeNode(node: Element | Node) {\r\n  //   node.remove();\r\n  let parentNode = node.parentNode;\r\n  if (parentNode) {\r\n    parentNode.removeChild(node);\r\n  }\r\n}\r\nexport function replaceChild(newChild: Node, oldChild: Node) {\r\n  let parentNode = oldChild.parentNode;\r\n  if (parentNode) {\r\n    parentNode.replaceChild(newChild, oldChild);\r\n  }\r\n}\r\n\r\nexport function domaddlisten(\r\n  ele: Element | Node,\r\n  event: string,\r\n  call: EventListener\r\n) {\r\n  ele.addEventListener(event, call);\r\n}\r\n\r\nexport function domremovelisten(\r\n  ele: Element | Node,\r\n  event: string,\r\n  call: EventListener\r\n) {\r\n  ele.removeEventListener(event, call);\r\n}\r\nexport function getchildren(ele: Element) {\r\n  return [...ele.children];\r\n}\r\nexport function getchildNodes(ele: Element | Node) {\r\n  return [...ele.childNodes];\r\n}\r\nexport function getAttribute(ele: Element, name: string) {\r\n  return HTMLElementprototype.getAttribute.call(ele, name);\r\n}\r\nexport function setAttribute(ele: Element, name: string, value: any) {\r\n  HTMLElementprototype.setAttribute.call(ele, name, value);\r\n}\r\nexport function removeAttribute(ele: Element, name: string) {\r\n  HTMLElementprototype.removeAttribute.call(ele, name);\r\n}\r\nconst HTMLElementprototype = HTMLElement.prototype;\r\n\r\nexport function insertfirst(\r\n  container: HTMLElement | Element,\r\n  ele: HTMLElement\r\n) {\r\n  container.insertBefore(ele, container.firstChild);\r\n}\r\nexport function createanotherhtmldocument() {\r\n  return document.implementation.createHTMLDocument(\"\");\r\n}\r\n/* export function getparentNode(ele: Node): Node {\r\n  return ele.parentNode ? ele.parentNode : ele;\r\n}\r\n */\r\nexport function querySelectorAll(selector: string) {\r\n  return [...document.querySelectorAll(selector)];\r\n}\r\n","import { isArray, isundefined } from \"./util\";\r\n/* export function toArray<T not Array>(a: T): Array<T>;\r\nexport function toArray<T>(a: Array<T>): Array<T>; */\r\n// export function toArray<T>(a: Array<T>): Array<T>;\r\nexport function toArray(a: any): any[] {\r\n  return (isArray(a) ? a : [a]).flat(1 / 0).filter(a => !isundefined(a));\r\n}\r\n","import { appendchild, /* setelehtml,  */ seteletext } from \"../UtilTools/dom\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nexport default function<\r\n  T extends HTMLElement | SVGSVGElement | SVGElement | Element | Node\r\n>(\r\n  ele:\r\n    | Node\r\n    | Array<\r\n        | HTMLElement\r\n        | Text\r\n        | SVGSVGElement\r\n        | DocumentFragment\r\n        | SVGElement\r\n        | Element\r\n        | Node\r\n      >\r\n    | SVGElement\r\n    | DocumentFragment\r\n    | HTMLElement\r\n    | Text\r\n    | SVGSVGElement\r\n    | Element,\r\n  container: T,\r\n  clear: boolean = true\r\n): T {\r\n  if (clear) {\r\n    seteletext(container, \"\");\r\n  }\r\n  //   container.innerHTML = \"\";\r\n  /*  let eles: Array<any>;\r\n  if (Array.isArray(ele)) {\r\n    eles = ele;\r\n  } else {\r\n    // appendchild(container, ele);\r\n    eles = [ele];\r\n  } */\r\n  const eles = toArray(ele).flat(Infinity);\r\n  eles.forEach((e: Node | HTMLElement | Element | SVGElement) =>\r\n    appendchild(container, e)\r\n  );\r\n  return container;\r\n}\r\nimport mountrealelement from \"./mount-real-element\";\r\nexport { mountrealelement };\r\n","import { isArray } from \"src/UtilTools/util\";\r\n\r\nexport function isNodeArray(arr: any[]): arr is Node[] {\r\n  //https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every\r\n  //不允许空数组\r\n  return !!(isArray(arr) && arr.length && arr.every(a => isNode(a)));\r\n  //!array.map(e => e instanceof Node).includes(false);\r\n}\r\nexport function isNode(a: any): a is Node {\r\n  return a instanceof Node;\r\n}\r\n","export const invalid_Virtualdom = \"invalid Virtualdom \";\r\n// import { VaildVDom } from \"../AttributeClass/conditon\";\r\n// import document from \"./UtilTools/dom\";\r\n// import { isvalidvdom } from \"./CreateElement/html\";\r\nimport mount from \"./mount-real-element\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isArray } from \"../UtilTools/util\";\r\nimport { isvalidvdom, VaildVDom } from \"../CreateElement/isvalidvdom\";\r\nimport { isNode, isNodeArray } from \"./isNodeArray\";\r\nexport default function MountElement<T extends Element>(\r\n  vdom: VaildVDom | Node | Element | Array<Node | Element>,\r\n  container: T\r\n): T {\r\n  if (isArray(vdom)) {\r\n    vdom = vdom.flat(Infinity);\r\n    if (!vdom.length) {\r\n      //不允许空数组\r\n      console.error(\"Empty array not allowed\");\r\n      throw new TypeError();\r\n    }\r\n  }\r\n  const el = container;\r\n  if (!(el instanceof HTMLElement)) {\r\n    console.error(el);\r\n    console.error(\"invalid container HTMLElement!\");\r\n    throw TypeError();\r\n  }\r\n\r\n  if (\r\n    el === document.body ||\r\n    el === document.documentElement ||\r\n    el === document.head\r\n  ) {\r\n    console.error(el);\r\n    console.error(\"Do not mount  to <html> or <body> <head>.\");\r\n    throw Error();\r\n  }\r\n  /*   if (\r\n    !(\r\n      isvalidvdom(vdom) ||\r\n      vdom instanceof Node ||\r\n      (isArray(vdom) && isNodeArray(vdom))\r\n    )\r\n  ) {\r\n    console.error(vdom);\r\n    throw TypeError(invalid_Virtualdom);\r\n  } */\r\n\r\n  /*   let elesarray: Array<any>;\r\n  if (Array.isArray(vdom)) {\r\n    elesarray = vdom;\r\n  } else {\r\n    elesarray = [vdom];\r\n  } */\r\n  const elesarray = toArray(vdom);\r\n  if (isvalidvdom(vdom)) {\r\n    // mount(elesarray.map(e => render(e)), container);\r\n    mount(render(elesarray), container);\r\n  } else if (isNode(vdom) /*  instanceof Node */ || isNodeArray(vdom)) {\r\n    mount(elesarray, container);\r\n  } else {\r\n    console.error(vdom);\r\n    console.error(invalid_Virtualdom);\r\n    throw TypeError();\r\n  }\r\n\r\n  //\r\n  return container;\r\n}\r\n","import debounce from \"lodash/debounce\";\r\nimport { cached_callback_debounced_watchs } from \"../cached-map\";\r\nimport { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport {\r\n  invalid_Function,\r\n  usewatch\r\n} from \"../mounted-unmounted/Component-context\";\r\nimport ReactiveState, {\r\n  addallistenerssymbol,\r\n  cancelsubscribe,\r\n  isReactiveState,\r\n  removeallistenerssymbol,\r\n  subscribesymbol\r\n} from \"./ReactiveState\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\n//import { requestAnimationFrame } from \"./directives\";\r\nimport { isarray, isFunction } from \"../UtilTools/util\";\r\nexport type CancelWatchfun = () => void;\r\nexport type UnwrapedState = any; //Primitivetype | Exclude<object, Function>;\r\n\r\nexport interface CallbackReactiveState /* <\r\n  \r\n> */ {\r\n  (...args: UnwrapedState[]): any;\r\n}\r\n\r\nexport function watch<T extends UnwrapedState>(\r\n  state: ReactiveState<T> | Array<ReactiveState<T>>,\r\n\r\n  callback: CallbackReactiveState\r\n): CancelWatchfun {\r\n  if (isarray(state) || isReactiveState(state)) {\r\n    const statearray: ReactiveState<any>[] = toArray(state);\r\n    if (!statearray.length) {\r\n      console.error(\"Empty array not allowed\");\r\n      throw new Error();\r\n    }\r\n    /* 给watch的callback自动防抖 */\r\n    const debouncedcallback = debounce(callback);\r\n    const stateandlisteners: [ReactiveState<any>, Function][] = statearray.map(\r\n      state1 => {\r\n        const listener: Function = (() => {\r\n          /* 缓存callback和listener */\r\n          const cachedfun = cached_callback_debounced_watchs.get(callback);\r\n          if (cachedfun) {\r\n            return cachedfun;\r\n          } else {\r\n            const listenfun = () => {\r\n              //watch的回调函数自动解包\r\n              debouncedcallback(...statearray.map(r => r.valueOf()));\r\n            };\r\n            cached_callback_debounced_watchs.set(callback, listenfun);\r\n            return listenfun;\r\n          }\r\n        })();\r\n        watchsingle(\r\n          state1,\r\n\r\n          listener\r\n        );\r\n\r\n        return [state1, listener];\r\n      }\r\n    );\r\n\r\n    const cancelWatch: CancelWatchfun = () => {\r\n      stateandlisteners.forEach(([state, listener]) => {\r\n        state[cancelsubscribe](listener);\r\n      });\r\n    };\r\n    return cancelWatch;\r\n  }\r\n  //  else if (isReactiveState(state)) {\r\n  //  watchsingle(state, callback);\r\n  ////return watch(toArray(state),callback)\r\n  // }\r\n  else {\r\n    console.error(state);\r\n    console.error(callback);\r\n    console.error(invalid_ReactiveState + invalid_Function);\r\n    throw new TypeError();\r\n  }\r\n}\r\n\r\nfunction watchsingle(\r\n  state: ReactiveState<any>,\r\n  callback: Function\r\n  //  statekey?: string\r\n) {\r\n  if (\r\n    !(\r\n      isReactiveState(state) &&\r\n      // state instanceof ReactiveState\r\n      isFunction(callback)\r\n    )\r\n  ) {\r\n    console.error(state);\r\n    console.error(callback);\r\n    console.error(invalid_ReactiveState + invalid_Function);\r\n\r\n    throw TypeError();\r\n  }\r\n\r\n  state[subscribesymbol](callback);\r\n\r\n  //  if (statekey) {\r\n\r\n  //   state[subscribesymbol](callback, statekey);\r\n  // } else {\r\n\r\n  //  }\r\n\r\n  requestAnimationFrame(() => {\r\n    rewatch(state);\r\n    // state[addallistenerssymbol]();\r\n  });\r\n\r\n  usewatch(state, callback);\r\n}\r\nexport function unwatch(state: ReactiveState<any>): void {\r\n  state[removeallistenerssymbol]();\r\n}\r\n\r\nexport function rewatch(state: ReactiveState<any>): void {\r\n  state[addallistenerssymbol]();\r\n}\r\nexport default watch;\r\n","import { isboolean } from \"./util\";\r\n\r\n// import { getparentNode } from \"./dom\";\r\n\r\nexport function isconnected(element: Node) {\r\n  /* 除了edge浏览器不支持  element.isConnected属性之外,其他现代浏览器都支持了*/\r\n  const isConnectedstate = element.isConnected;\r\n  if (isboolean(isConnectedstate)) {\r\n    return isConnectedstate;\r\n  } else {\r\n    return document.documentElement === getancestornode(element);\r\n  }\r\n}\r\nfunction getancestornode(node: Node) {\r\n  while (\r\n    node &&\r\n    node.parentNode &&\r\n    node.parentNode !== document\r\n    /*  getparentNode(node) &&\r\n    getparentNode(node) !== node &&\r\n    getparentNode(node) !== document */\r\n  ) {\r\n    //   if(getparentNode(node)){}\r\n    node = node.parentNode; // getparentNode(node);\r\n  }\r\n  return node;\r\n}\r\n","import ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { watch } from \"src/Reactivity/watch\";\r\nimport { isconnected } from \"src/UtilTools/isconnected\";\r\nimport { isstring } from \"src/UtilTools/util\";\r\n\r\nexport { createhtmlandtextdirective };\r\nfunction createhtmlandtextdirective(seteletext: Function, errorname: string) {\r\n  return function(ele: Element, text: string | ReactiveState<any>) {\r\n    const element = ele;\r\n    if (\r\n      isstring(text)\r\n      //typeof text == \"string\"\r\n    ) {\r\n      requestAnimationFrame(() => {\r\n        seteletext(ele, text);\r\n        /*    ele.textContent = text;*/\r\n        //   console.log(ele.outerHTML);\r\n      });\r\n    } else if (\r\n      isReactiveState(text)\r\n      //  text instanceof ReactiveState\r\n    ) {\r\n      //   const ReactiveState = text;\r\n      watch(text, (/* state: { value: any } */) => {\r\n        const state = text;\r\n        if (isconnected(element)) {\r\n          seteletext(ele, String(state));\r\n        }\r\n        /* ele.textContent = String(state);*/\r\n      });\r\n      //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n      //     ele.textContent = String(state.value);\r\n      //   });\r\n      requestAnimationFrame(() => {\r\n        // console.log(\"text\");\r\n        seteletext(ele, String(text));\r\n\r\n        /*  ele.textContent = String(text);*/\r\n      });\r\n    } else {\r\n      console.error(text);\r\n      console.error(\"invalid \" + errorname);\r\n      throw TypeError();\r\n    }\r\n  };\r\n}\r\n","import { invalid_Function } from \"../mounted-unmounted/Component-context\";\r\nimport directives from \"./directives\";\r\nimport { isplainobject } from \"../UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nexport interface Extendfun {\r\n  (\r\n    value: any,\r\n    element: Element,\r\n\r\n    vdom: Virtualdom<any>\r\n  ): void;\r\n}\r\nexport interface ExtendOptions {\r\n  [s: string]: Extendfun;\r\n}\r\nexport { extenddirectives };\r\nexport default function extenddirectives(options: ExtendOptions = {}) {\r\n  if (!isplainobject(options)) {\r\n    console.error(options);\r\n    throw new TypeError();\r\n  }\r\n  Object.entries(options).forEach(([key, value]) => {\r\n    if (typeof value !== \"function\") {\r\n      console.error(value);\r\n      console.error(invalid_Function);\r\n      throw TypeError();\r\n    } else {\r\n      if (!directives[key]) {\r\n        Reflect.set(directives, key, value);\r\n      } else {\r\n        console.error(directives);\r\n        console.error(\"do not extend existing directive\");\r\n        throw new Error();\r\n      }\r\n    }\r\n  });\r\n  return directives;\r\n}\r\n","export const { requestAnimationFrame } = window;\r\nimport ReactiveState from \"../Reactivity/ReactiveState\";\r\nimport { setelehtml, seteletext } from \"../UtilTools/dom\";\r\nimport { apply, set } from \"../UtilTools/reflect\";\r\nimport { isfunction, isobject } from \"../UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { createhtmlandtextdirective } from \"./create-html-and-text-directive\";\r\nimport extenddirectives, { ExtendOptions } from \"./extend-directive\";\r\nexport { directive };\r\nconst directive: ExtendOptions = {\r\n  ref(ref: object | Function, ele: Element, _vdom: Virtualdom<any>) {\r\n    if (isfunction(ref)) {\r\n      apply(ref as Function, undefined, [ele]);\r\n      // ref(ele)\r\n      //   ref.call(undefined, ele);\r\n    } else if (isobject(ref)) {\r\n      set(ref as object, \"value\", ele);\r\n      //   ref.value = ele;\r\n    } else {\r\n      console.log(_vdom);\r\n      console.error(ref);\r\n      console.error(\"invalid ref\");\r\n      throw TypeError();\r\n    }\r\n  }\r\n};\r\nextenddirectives({\r\n  html(\r\n    html: string | ReactiveState<any>,\r\n    ele: Element,\r\n\r\n    _vdom: Virtualdom<any>\r\n  ) {\r\n    console.log(_vdom);\r\n    createhtmlandtextdirective(setelehtml, \"html\")(ele, html);\r\n\r\n    // ele.innerHTML = html;\r\n    // console.log(ele.outerHTML);\r\n    /*  if (typeof html == \"string\") {\r\n          requestAnimationFrame(() => {\r\n            setelehtml(ele, html);\r\n    \r\n            /* ele.innerHTML = html;*/\r\n    //   console.log(ele.outerHTML);\r\n    /*     });\r\n        } else if (html instanceof ReactiveState) {\r\n          //   const ReactiveState = html;\r\n          watch(html, (state: { value: any }) => {\r\n            /*ele.innerHTML = String(state);*/\r\n    /*\r\n            setelehtml(ele, String(state));\r\n          });\r\n          //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n          //     ele.innerHTML = String(state.value);\r\n          //   });\r\n          requestAnimationFrame(() => {\r\n            // console.log(\"html\");\r\n            /*  ele.innerHTML = String(html);*/\r\n    /*\r\n      //      setelehtml(ele, String(html));\r\n     //     });\r\n      //  } else {\r\n    \r\n    //console.error()\r\n      //    throw TypeError(\"invalid html\");\r\n     //   }\r\n    \r\n    */\r\n  },\r\n  text(\r\n    text: string | ReactiveState<any>,\r\n    ele: Element,\r\n    _vdom: Virtualdom<any>\r\n  ) {\r\n    console.log(_vdom);\r\n    createhtmlandtextdirective(seteletext, \"text\")(ele, text);\r\n\r\n    /*\r\n    \r\n      // ele.textContent = text;\r\n        // console.log(ele.outerHTML);\r\n        if (typeof text == \"string\") {\r\n          requestAnimationFrame(() => {\r\n            seteletext(ele, text);\r\n            /*    ele.textContent = text;*/\r\n    /*      //   console.log(ele.outerHTML);\r\n          });\r\n        } else if (text instanceof ReactiveState) {\r\n          //   const ReactiveState = text;\r\n          watch(text, (state: { value: any }) => {\r\n            seteletext(ele, String(state));\r\n    \r\n            /* ele.textContent = String(state);*/\r\n    /*   });\r\n          //   ReactiveState[subscribesymbol]((state: { value: any }) => {\r\n          //     ele.textContent = String(state.value);\r\n          //   });\r\n          requestAnimationFrame(() => {\r\n            // console.log(\"text\");\r\n            seteletext(ele, String(text));\r\n    \r\n            /*  ele.textContent = String(text);*/\r\n    /*    });\r\n       // } else {\r\n      //    throw TypeError(\"invalid text\");\r\n     //   }\r\n    \r\n    */\r\n  }\r\n});\r\n\r\nexport default directive;\r\n","import onevent /*  eventlistenerssymbol  */ from \"./handle-onevent\";\r\nexport { onevent };\r\nimport { invalid_Function } from \"../mounted-unmounted/Component-context\";\r\nimport { domaddlisten, domremovelisten } from \"../UtilTools/dom\";\r\nimport { get, has, set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { /* isArray, */ isfunction } from \"../UtilTools/util\";\r\nexport const eventlistenerssymbol = Symbol(\"eventlisteners\");\r\nexport default function(\r\n  element: Element | Node,\r\n  eventname: string,\r\n  callback: EventListener | Array<EventListener>\r\n) {\r\n  /* if (!element[eventlistenerssymbol]) {\r\n    element[eventlistenerssymbol] = [];\r\n  }\r\n*/\r\n  firstaddlisteners(element, eventname, toArray(callback));\r\n  /*\r\n//  if (isfunction(callback)) {\r\n//    firstaddlisteners(element, eventname, [callback]);\r\n//  } else if (isArray(callback)) {\r\n//    firstaddlisteners(element, eventname, callback);\r\n // } else {\r\n //   console.error(callback);\r\n //   throw TypeError(invalid_Function);\r\n // }\r\n*/\r\n}\r\nexport function firstaddlisteners(\r\n  ele: Element | Node,\r\n  event: string,\r\n  callarray: Array<EventListener>\r\n) {\r\n  const element = ele;\r\n  callarray.forEach((call: EventListener) => {\r\n    if (!isfunction(call)) {\r\n      console.error(call);\r\n      console.error(invalid_Function);\r\n      throw TypeError();\r\n    }\r\n\r\n    if (!has(element, eventlistenerssymbol)) {\r\n      set(element, eventlistenerssymbol, []);\r\n      //   element[eventlistenerssymbol] = [];\r\n    }\r\n    (get(ele, eventlistenerssymbol) as [string, EventListener][])\r\n      /* ele[eventlistenerssymbol] */\r\n      .push([event, call]);\r\n    domaddlisten(ele, event, call);\r\n  });\r\n}\r\nexport function removelisteners(\r\n  ele: Element | Node\r\n  //   event: string,\r\n  //   callarray: Array<EventListener>\r\n) {\r\n  // const element = ele;\r\n  if (has(ele, eventlistenerssymbol)) {\r\n    (get(ele, eventlistenerssymbol) as [string, EventListener][])\r\n      /*   ele[eventlistenerssymbol] */\r\n\r\n      .forEach(([event, call]) => {\r\n        //   ele[eventlistenerssymbol].push([event, call]);\r\n        domremovelisten(ele, event, call);\r\n      });\r\n  }\r\n}\r\nexport function readdlisteners(\r\n  ele: Element | Node\r\n  //   event: string,\r\n  //   callarray: Array<EventListener>\r\n) {\r\n  if (has(ele, eventlistenerssymbol)) {\r\n    (get(ele, eventlistenerssymbol) as [string, EventListener][]).forEach(\r\n      ([event, call]) => {\r\n        //   ele[eventlistenerssymbol].push([event, call]);\r\n        domaddlisten(ele, event, call);\r\n      }\r\n    );\r\n  }\r\n}\r\n","export { render };\r\nimport { createcostumelemet } from \"../CustomClass/create-costum-elemet\";\r\nimport { iscomponent } from \"../AttributeClass/iscomponent\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { watch } from \"../Reactivity/watch\";\r\nimport {\r\n  changetext,\r\n  createDocumentFragment,\r\n  createElementNS,\r\n  createmathelement,\r\n  //   createnonescript,\r\n  createnativeelement,\r\n  createsvgelement,\r\n  createtextnode,\r\n  mathnamespace,\r\n  svgnamespace\r\n} from \"../UtilTools/dom\";\r\nimport { isconnected } from \"../UtilTools/isconnected\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport {\r\n  isArray,\r\n  isfunction,\r\n  isnumber,\r\n  isobject,\r\n  isstring\r\n} from \"../UtilTools/util\";\r\nimport Virtualdom, {\r\n  isVirtualdom,\r\n  Vdomchildren\r\n} from \"../CreateElement/VirtualElement\";\r\nimport handleprops from \"./handle-props\";\r\nimport { autocreateclass } from \"src/AttributeClass/createComponent\";\r\n\r\nexport const bindstatesymbol = Symbol(\"bindstate\");\r\n\r\n// export const reactivestatesymbol = Symbol(\"reactive\");\r\n// export const virtualdomsymbol = Symbol(\"virtualelement\");\r\n/* 为了垃圾回收,所以不要给dom元素添加没必要的属性 */\r\nfunction throwinvalideletype(type?: any): never {\r\n  console.error(type);\r\n  console.error(\"invalid element type!\");\r\n  console.error(invalid_Virtualdom);\r\n  throw TypeError(/*\"invalid element type!\"*/);\r\n}\r\nexport default function render(\r\n  vdom: Virtualdom<string | Function>,\r\n  namespace?: string\r\n): Element;\r\nexport default function render(\r\n  vdom: Virtualdom<\"script\" | \"\" | \"html\">,\r\n  namespace?: string\r\n): Node;\r\nexport default function render(\r\n  vdom: Vdomchildren,\r\n  namespace?: string\r\n): Array<Node | Element>;\r\nexport default function render(\r\n  vdom: string | ReactiveState<any> | number,\r\n  namespace?: string\r\n): Node;\r\nexport default function render(\r\n  vdom: Array<Virtualdom<any>>,\r\n  namespace?: string\r\n): Array<Element>;\r\nexport default function render(\r\n  vdom: Array<string | ReactiveState<any> | number>,\r\n  namespace?: string\r\n): Array<Node>;\r\nexport default function render(\r\n  vdom: Virtualdom<any> | string | number | ReactiveState<any> | Vdomchildren,\r\n  namespace?: string\r\n): Array<Node | Element> | Element | Node {\r\n  if (isArray(vdom)) {\r\n    return (vdom as (string | number | ReactiveState<any> | Virtualdom<any>)[])\r\n      .map(a => render(a as any))\r\n      .flat(1 / 0);\r\n  }\r\n  if (isnumber(vdom) || isstring(vdom)) {\r\n    const textnode = createtextnode(vdom);\r\n    // set(textnode, virtualdomsymbol, vdom);\r\n    // textnode[virtualdomsymbol] = vdom;\r\n    return textnode;\r\n\r\n    // } else if (typeof vdom === \"string\") {\r\n    // return createtextnode(vdom);\r\n  } else if (isReactiveState(vdom) /*instanceof ReactiveState*/) {\r\n    const reactive = vdom;\r\n    const textnode = createtextnode(String(reactive));\r\n    // set(textnode, virtualdomsymbol, vdom);\r\n    // textnode[virtualdomsymbol] = reactive;\r\n\r\n    //textnode[reactivestatesymbol] = reactive;\r\n    /*  try {\r\n      reactive[textnodesymbol] = textnode;\r\n    } catch (error) {\r\n      console.warn(error);\r\n    } */\r\n\r\n    watch(reactive, (/* state: ReactiveState<any> */) => {\r\n      const state = reactive;\r\n      if (isconnected(element)) {\r\n        changetext(textnode, String(state));\r\n      }\r\n    });\r\n    const element = textnode;\r\n    set(element, bindstatesymbol, new Set());\r\n    // element[bindstatesymbol] = new Set();\r\n    (get(element, bindstatesymbol) as Set<ReactiveState<any>>).add(reactive);\r\n    // element[bindstatesymbol].add(reactive);\r\n    return textnode;\r\n  } else if (\r\n    isVirtualdom(vdom)\r\n    //vdom instanceof Virtualdom && \"type\" in vdom\r\n  ) {\r\n    let { type } = vdom;\r\n    if (isfunction(type)) {\r\n      type = autocreateclass(type);\r\n      // debugger;\r\n    }\r\n    let element:\r\n      | Element\r\n      | HTMLElement\r\n      | SVGSVGElement\r\n      | SVGElement\r\n      | undefined = undefined;\r\n    if (typeof type === \"string\") {\r\n      if (type === \"script\") {\r\n        /* 禁止加载脚本 */\r\n\r\n        return createDocumentFragment();\r\n      } else if (type === \"svg\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createsvgelement();\r\n      } else if (type === \"math\") {\r\n        /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n        element = createmathelement();\r\n      } else if (\"\" === type || type === \"html\") {\r\n        const fragmentnode = createDocumentFragment();\r\n\r\n        mount(render(vdom.children), fragmentnode);\r\n\r\n        return fragmentnode;\r\n        //不要创建html元素\r\n        // return render(vdom.children);\r\n        // element = createDocumentFragment();\r\n      } else {\r\n        element = namespace\r\n          ? createElementNS(namespace, type)\r\n          : createnativeelement(type);\r\n      }\r\n    } else if (typeof type == \"function\") {\r\n      //添加默认props\r\n\r\n      /*static defaultProps = {\r\n        name: 'Omi',\r\n        myAge: 18\r\n  }*/\r\n      if (isobject(type[\"defaultProps\"])) {\r\n        /*  改成了readonly属性 props*/\r\n        Object.assign(\r\n          vdom.props,\r\n          JSON.parse(JSON.stringify({ ...type[\"defaultProps\"], ...vdom.props }))\r\n        );\r\n        /* vdom.props = JSON.parse(\r\n          JSON.stringify({ ...type[\"defaultProps\"], ...vdom.props })\r\n        ); */\r\n      }\r\n\r\n      const propsjson = JSON.parse(\r\n        JSON.stringify({\r\n          ...vdom.props,\r\n          ...Object.fromEntries(\r\n            Object.entries(vdom.bindattr).map(([key, value]) => {\r\n              return [key, value.value];\r\n            })\r\n          )\r\n        })\r\n      );\r\n      element = createcostumelemet(\r\n        type,\r\n        propsjson,\r\n        vdom.children\r\n        // vdom.options\r\n      );\r\n    } else {\r\n      throwinvalideletype(vdom);\r\n      // throw TypeError(\"invalid element type!\");\r\n    }\r\n    /*  if (element) {\r\n      const attribute1: { [key: string]: any } = createeleattr(element);\r\n      Object.assign(\r\n        attribute1,\r\n\r\n        /* 把属性为false的先不设置 */\r\n    //     vdom.props\r\n    //     // Object.fromEntries(Object.entries(vdom.props).filter())\r\n    //   );\r\n    // } */\r\n    // apply(handleprops)\r\n\r\n    /* 自定义组件不添加children,而是从构造函数传入 */\r\n    /* web components也可以设置 childnodes,比如说slot */\r\n    /* https://webkit.org/blog/4096/introducing-shadow-dom-api/ */\r\n    /*  */\r\n    /* https://developer.mozilla.org/zh-CN/docs/Web/API/Element/slot */\r\n    if (\r\n      type &&\r\n      (isfunction(type) || isstring(type))\r\n      // /\r\n      //   /\r\n\r\n      /* typeof type !== \"function\" */\r\n    ) {\r\n      /* 如果自己创造的组件就不加children, */\r\n      if (\r\n        !iscomponent(type)\r\n        // componentsymbol !== type[componentsymbol]\r\n      ) {\r\n        if (element) {\r\n          mount(\r\n            vdom.children.map(e => {\r\n              if (type === \"svg\" && isVirtualdom(e)) {\r\n                /* 没想到svg的创建方式这么特别?否则显示不出svg */\r\n                //   element.innerHTML = element.innerHTML;\r\n                return render(e, svgnamespace);\r\n              } else if (type === \"math\" && isVirtualdom(e)) {\r\n                return render(e, mathnamespace);\r\n              } else if (namespace && isVirtualdom(e)) {\r\n                return render(e, namespace);\r\n              } else {\r\n                return render(e as any) as any;\r\n              }\r\n            }),\r\n\r\n            element\r\n          );\r\n          //   return element;\r\n        }\r\n      }\r\n    }\r\n    /* 对于select元素,设置value属性时,如果没有 找到对应的option元素,则设置失败,\r\n    \r\n    改成先加children,后设attributes,\r\n    */\r\n    if (element) {\r\n      handleprops(element, vdom);\r\n    }\r\n\r\n    return element as Node | Element;\r\n  } else {\r\n    throwinvalideletype(vdom);\r\n    // throw TypeError(\"invalid element type!\");\r\n  }\r\n  //   throw Error();\r\n  //   throwinvalideletype();\r\n\r\n  /* console.error(vdom);\r\n  throw new Error(); */\r\n  //   return;\r\n  //   throw new Error();\r\n}\r\n","import { Class, Custom } from \"./customclass\";\r\n//import setlikearray from \"./setlikearay\";\r\n// const customElementsarray = new Set;\r\nimport RandomDefineCustomElement, {\r\n  invalid_custom_element_class\r\n} from \"./CustomElementRegistry\";\r\nimport { construct } from \"../UtilTools/reflect\";\r\nimport { isclassextendsHTMLElement } from \"./isclassextendsHTMLElement\";\r\nimport { autocreateclass } from \"src/AttributeClass/createComponent\";\r\nimport { isfunction } from \"src/UtilTools/util\";\r\n\r\n// import Reflect from \"./reflect\";\r\n\r\n// import { Class } from \"./rendervdomtoreal\";\r\n\r\nexport function createcostumelemet(\r\n  initclass: Class | Custom,\r\n  propsjson?: object,\r\n  children?: any[]\r\n  //   options?: any\r\n): HTMLElement {\r\n  let type = initclass;\r\n  if (isfunction(type)) {\r\n    type = autocreateclass(type);\r\n    // debugger;\r\n  }\r\n  initclass = type;\r\n  if (isclassextendsHTMLElement(initclass)) {\r\n    // customElementsarray.push(initclass);\r\n    /*   const elementname =\r\n     getcustomelementname(initclass); */\r\n    /* if (customElements.get(elementname) === initclass) {\r\n    } else {\r\n      customElements.define(elementname, initclass);\r\n    } */\r\n    RandomDefineCustomElement(initclass);\r\n    return construct(initclass, [propsjson, children /* , options */]); // (children);\r\n  } else {\r\n    console.error(initclass);\r\n    console.error(invalid_custom_element_class);\r\n    throw TypeError();\r\n  }\r\n}\r\n","import createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport watch from \"src/Reactivity/watch\";\r\nimport { isconnected } from \"src/UtilTools/isconnected\";\r\nimport { get, has, set } from \"src/UtilTools/reflect\";\r\nimport { isfunction } from \"src/UtilTools/util\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport directives from \"../Directives/directives\";\r\nimport { onevent } from \"./handle-onevent\";\r\nimport { bindstatesymbol /* virtualdomsymbol */ } from \"./render-vdom-to-real\";\r\n\r\nexport default handleprops;\r\nfunction handleprops(\r\n  element: HTMLElement | Element | SVGSVGElement | SVGElement,\r\n  vdom: Virtualdom<any>\r\n) {\r\n  /* if (!vdom.element) {\r\n    vdom.element = element;\r\n  }\r\n */\r\n  vdom.element.push(element);\r\n  /*  if (vdom.element.length > 1) {\r\n    console.log(vdom);\r\n  } */\r\n  ((element, vdom) => {\r\n    Object.entries(vdom.directives).forEach(([name, value]) => {\r\n      if (\r\n        isfunction(\r\n          directives[name]\r\n        ) /* typeof directives[name] === \"function\" */\r\n        /*name in directives &&*/\r\n      ) {\r\n        directives[name](value, element, vdom);\r\n      } else {\r\n        console.error(vdom.directives);\r\n        console.error(\"invalid directives \" + name);\r\n        throw new Error();\r\n      }\r\n    });\r\n\r\n    const attribute1: Record<string, any> = createeleattr(element);\r\n    Object.assign(\r\n      attribute1,\r\n\r\n      /* 把属性为false的先不设置 */\r\n      vdom.props\r\n      // Object.fromEntries(Object.entries(vdom.props).filter())\r\n    );\r\n    /* 添加常量的属性 */\r\n    // set(element, virtualdomsymbol, vdom);\r\n    // element[virtualdomsymbol] = vdom;\r\n    /* 为了垃圾回收,所以不要给dom元素添加没必要的属性 */\r\n\r\n    /* 添加绑定属性 */\r\n\r\n    Object.entries(vdom.bindattr).forEach(([key, primitivestate]) => {\r\n      attribute1[key] = primitivestate.valueOf();\r\n      watch(primitivestate, (/* state: ReactiveState<any> */) => {\r\n        const state = primitivestate;\r\n        if (isconnected(element)) {\r\n          attribute1[key] = state.valueOf();\r\n        }\r\n      });\r\n      /*     primitivestate[subscribesymbol]();\r\n        requestAnimationFrame(() => {\r\n          primitivestate[addallistenerssymbol]();\r\n        }); */\r\n    });\r\n\r\n    /* 添加事件绑定和指令执行 */\r\n\r\n    /*  if (!element[eventlistenerssymbol]) {\r\n        element[eventlistenerssymbol] = [];\r\n      }\r\n  */\r\n    Object.entries(vdom.onevent).forEach(([event, callbacks]) => {\r\n      onevent(element, event, callbacks);\r\n    });\r\n  })(element, vdom);\r\n  /*  if (!element[bindstatesymbol]) {\r\n      element[bindstatesymbol] = new Set();\r\n    }\r\n  */\r\n  [...Object.values(vdom.bindattr), ...Object.values(vdom.directives)]\r\n    .flat(1 / 0)\r\n    .filter(\r\n      e => isReactiveState(e)\r\n      // e instanceof ReactiveState\r\n    )\r\n\r\n    .forEach((e: ReactiveState<any>) => {\r\n      if (!has(element, bindstatesymbol)) {\r\n        set(element, bindstatesymbol, new Set());\r\n        // element[bindstatesymbol] = new Set();\r\n      }\r\n      (get(element, bindstatesymbol) as Set<ReactiveState<any>>).add(e);\r\n      //   element[bindstatesymbol].add(e);\r\n    });\r\n}\r\n","import createElement from \"../CreateElement/create-element\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\n\r\nconst componentsstylesheet: Map<string, Set<string>> = new Map();\r\n// { [key: string]: Set<string> }\r\n\r\nexport { componentsstylesheet };\r\n\r\nexport function createlinkstylesheet(url: string): HTMLLinkElement {\r\n  return render(\r\n    createElement(\"link\", { href: url, rel: \"stylesheet\" })\r\n  ) as HTMLLinkElement;\r\n}\r\n","export { createcssBlob };\r\nfunction createcssBlob(source: string): string {\r\n  const cachedBlob = sourcecssblobCache.get(source);\r\n  if (cachedBlob) {\r\n    return cachedBlob;\r\n  } else {\r\n    const bloburl = URL.createObjectURL(\r\n      new Blob([source], { type: \"text/css\" })\r\n    );\r\n    sourcecssblobCache.set(source, bloburl);\r\n    return bloburl;\r\n  }\r\n}\r\nconst sourcecssblobCache = new Map<string, string>();\r\n","import { componentsstylesheet } from \"./parsecss-transformcss\";\r\nimport { get, set } from \"src/UtilTools/reflect\";\r\nimport { createcssBlob } from \"./create-cssurlblob\";\r\n\r\nexport function savestyleblob(\r\n  tagname: string,\r\n  csstext?: string,\r\n  urltext?: string\r\n) {\r\n  tagname = tagname.toLowerCase();\r\n  const prefix = tagname;\r\n  if (\r\n    !get(componentsstylesheet, prefix)\r\n    // componentsstylesheet[tagname]\r\n  ) {\r\n    set(componentsstylesheet, tagname, new Set());\r\n    // componentsstylesheet[tagname] = ;\r\n  }\r\n  if (csstext) {\r\n    get(componentsstylesheet, prefix).add(createcssBlob(csstext));\r\n  } else if (urltext) {\r\n    get(componentsstylesheet, prefix).add(urltext);\r\n  }\r\n}\r\n","import {\r\n  isCSSImportRule,\r\n  isCSSMediaRule,\r\n  //   isCSSRule,\r\n  isCSSStyleRule\r\n} from \"./isCSSRule\";\r\nimport { prefixcssmediarule } from \"./prefix-cssmediarule\";\r\nimport { savestyleblob } from \"./savestyleblob\";\r\nimport { selectoraddprefix } from \"./selectoraddprefix\";\r\n// import { isundefined } from \"src/UtilTools/util\";\r\n\r\nexport function prefixcssrules(\r\n  cssRulesarray: Array<CSSRule>,\r\n  prefix: string\r\n): Array<CSSRule> {\r\n  return cssRulesarray\r\n    .map((cssrule: CSSRule) => {\r\n      if (isCSSStyleRule(cssrule)) {\r\n        const resultoutput = selectoraddprefix(cssrule, prefix);\r\n        // console.log(resultoutput);\r\n        return resultoutput;\r\n      } else if (isCSSMediaRule(cssrule)) {\r\n        /*  selectoraddprefix函数返回新对象,不是修改原来的对象*/\r\n\r\n        // return cssrule;\r\n\r\n        return prefixcssmediarule(cssrule, prefix);\r\n      } else if (isCSSImportRule(cssrule)) {\r\n        //把url放入\r\n        savestyleblob(prefix, undefined, cssrule.href);\r\n        return;\r\n      } else {\r\n        return cssrule;\r\n      }\r\n    })\r\n    .filter(Boolean) as Array<CSSRule>;\r\n}\r\n","import { gettagtype } from \"src/UtilTools/util\";\r\n\r\nexport function isCSSStyleRule(a: any): a is CSSStyleRule {\r\n  return gettagtype(a) === \"CSSStyleRule\";\r\n}\r\nexport function isCSSMediaRule(a: any): a is CSSMediaRule {\r\n  return gettagtype(a) === \"CSSMediaRule\";\r\n}\r\nexport function isCSSImportRule(a: any): a is CSSImportRule {\r\n  return gettagtype(a) === \"CSSImportRule\";\r\n}\r\nexport function isCSSRule(a: any): a is CSSRule {\r\n  return a instanceof CSSRule;\r\n}\r\n","// import { get } from \"src/UtilTools/reflect\";\r\n/*  selectoraddprefix函数返回新对象,不是修改原来的对象*/\r\nexport function selectoraddprefix(cssstylerule: CSSStyleRule, prefix: string) {\r\n  /* 突然发现Edge浏览器的 CSSStyleRule的selectorText属性居然是只读的?*/\r\n  //css 选择器可能有多个\r\n  //h1,p,h3,div\r\n  const selectorold = cssstylerule.selectorText;\r\n  const stylebodyold = cssstylerule.cssText.slice(selectorold.length);\r\n  const selectorTextss = selectorold;\r\n\r\n  const selectorarray = selectorTextss.split(\",\");\r\n  const selectoraftertransform = selectorarray\r\n    .map(selectorTextone => {\r\n      let prefixselector = prefix + \" \" + selectorTextone;\r\n\r\n      if (selectorTextone.startsWith(\"*\")) {\r\n        prefixselector =\r\n          prefixselector + \",\" + selectorTextone.replace(\"*\", prefix);\r\n      }\r\n      return prefixselector;\r\n    })\r\n    .join(\",\");\r\n\r\n  /*   cssstylerule.selectorText = selectoraftertransform;\r\n    if (cssstylerule.selectorText.startsWith(prefix)) {\r\n      return cssstylerule;\r\n    } else { */\r\n  // console.trace();\r\n  return {\r\n    /* 没有用到的变量,消耗性能 */\r\n    // type: cssstylerule.type,\r\n    // parentRule: cssstylerule.parentRule,\r\n    // parentStyleSheet: cssstylerule.parentStyleSheet,\r\n    // style: cssstylerule.style,\r\n    // styleMap: get(cssstylerule, \"styleMap\"),\r\n    selectorText: selectoraftertransform,\r\n    cssText: selectoraftertransform + stylebodyold,\r\n    // cssText: selectoraftertransform + stylebodyold,\r\n    // selectorText: selectoraftertransform,\r\n    [Symbol.toStringTag]: \"CSSStyleRule\"\r\n  };\r\n  // }\r\n\r\n  /*\r\n    const prefixselector = prefix + \" \" + selectorText;\r\n    if (selectorText.startsWith(\"*\")) {\r\n      cssstylerule.selectorText =\r\n        selectorText.replace(\"*\", prefix) + \",\" + prefixselector;\r\n      /* 对于'* '的处理,变成两个selectorrule*/\r\n\r\n  /* \r\n      *{font-size:80px !important;}\r\n  p{color:blue !important;} \r\n  */\r\n  /* \r\n      \r\n      q-9, q-9 * { font-size: 80px !important; }\r\n  q-9 p { color: blue !important; }\r\n  \r\n      */\r\n  /* } else {\r\n      cssstylerule.selectorText = prefixselector;\r\n    }\r\n  */\r\n}\r\n","import { prefixcssrules } from \"./transform-prefix-cssrules\";\r\nimport { cssrulestocsstext } from \"./cssrulestocsstext\";\r\n\r\nexport function prefixcssmediarule(cssrule: CSSMediaRule, prefix: string) {\r\n  const rulesarr = prefixcssrules([...cssrule.cssRules], prefix);\r\n  const conditionText = cssrule.conditionText;\r\n  const cssText =\r\n    cssrule.cssText.slice(0, 7) +\r\n    conditionText +\r\n    \"{\" +\r\n    cssrulestocsstext(rulesarr) +\r\n    \"}\";\r\n  return {\r\n    cssText,\r\n    conditionText,\r\n    cssRules: rulesarr,\r\n    [Symbol.toStringTag]: \"CSSMediaRule\"\r\n  };\r\n}\r\n","import { render } from \"src/RenderVirtual/render-vdom-to-real\";\r\nimport createElement from \"src/CreateElement/create-element\";\r\nimport { createanotherhtmldocument, appendchild } from \"src/UtilTools/dom\";\r\nimport { get } from \"src/UtilTools/reflect\";\r\n\r\nexport function parsecsstext(text: string): Array<CSSRule> {\r\n  const styleelement = render(\r\n    createElement(\"style\", [text])\r\n  ) as HTMLStyleElement;\r\n  //   console.dir(styleelement);\r\n  /* 只有添加到document之后才会有sheet */\r\n  //const otherdocument = document.implementation.createHTMLDocument(\"\");\r\n  const otherdocument = createanotherhtmldocument();\r\n  appendchild(otherdocument.documentElement, styleelement);\r\n  //otherdocument.firstElementChild.appendChild(styleelement);\r\n  return Array.from(\r\n    get(\r\n      get(styleelement, \"sheet\"),\r\n\r\n      \"cssRules\"\r\n    )\r\n  );\r\n}\r\n","// import { parsecsstext } from \"./parsecss-transformcss\";\r\nimport { prefixcssrules } from \"./transform-prefix-cssrules\";\r\nimport { cssrulestocsstext } from \"./cssrulestocsstext\";\r\nimport { parsecsstext } from \"./parsecsstext\";\r\n\r\nexport function transformcsstext(text: string, prefix: string): string {\r\n  const cachedtext = oldcsstotransformedcss.get(text);\r\n  if (cachedtext) {\r\n    return cachedtext;\r\n  } else {\r\n    const css = text;\r\n    const cssomold = parsecsstext(css);\r\n    const cssomnew = prefixcssrules(cssomold, prefix).filter(Boolean);\r\n    //   console.log(cssomnew);\r\n    //   console.log([css, prefix, cssomold, cssomnew]);\r\n    const cssnewtext = cssrulestocsstext(cssomnew);\r\n    //   console.log([text, cssomold, cssomnew, cssnewtext]);\r\n    oldcsstotransformedcss.set(text, cssnewtext);\r\n    return cssnewtext;\r\n  }\r\n}\r\nconst oldcsstotransformedcss = new Map<string, string>();\r\n","import { transformcsstext } from \"./transformcsstext\";\r\nimport { savestyleblob } from \"./savestyleblob\";\r\n// import { savestyleblob } from \"./parsecss-transformcss\";\r\n\r\nexport function registercssprefix(text: string, prefix: string) {\r\n  //   debugger;\r\n  //   console.trace();\r\n  const css = text;\r\n  const cssnewtext = transformcsstext(css, prefix);\r\n  //   cssnewtext.forEach(url => {\r\n  /* 把css文字转成url放入 */\r\n  savestyleblob(prefix, cssnewtext);\r\n  //   });\r\n}\r\n","import {\r\n  componentsstylesheet,\r\n  createlinkstylesheet\r\n  //   loadlinkstyle\r\n} from \"./parsecss-transformcss\";\r\nimport { querySelectorAll } from \"src/UtilTools/dom\";\r\nimport { get } from \"src/UtilTools/reflect\";\r\nimport { loadlinkstyle } from \"./loadlinkstyle\";\r\n\r\nexport function waitloadallstyle(\r\n  prefix: string,\r\n  containerthis: Element | HTMLElement | SVGSVGElement | SVGElement\r\n) {\r\n  return Promise.all(\r\n    [...get(componentsstylesheet, prefix)].map(styleurl => {\r\n      if (\r\n        querySelectorAll(`link[rel=\"stylesheet\"][href=\"${styleurl}\"]`).length\r\n      ) {\r\n        return Promise.resolve();\r\n      } else {\r\n        /* 如果已经有过相同的linkstylesheet挂载着的话,则不重复挂载 */\r\n        return loadlinkstyle(createlinkstylesheet(styleurl), containerthis);\r\n      }\r\n    })\r\n  );\r\n}\r\n","import { appendchild } from \"src/UtilTools/dom\";\r\n\r\nexport function loadlinkstyle(\r\n  stylelinkelement: HTMLElement,\r\n  container: HTMLElement | Element | SVGSVGElement | SVGElement\r\n): Promise<void> {\r\n  return new Promise(rs => {\r\n    const loaderrorfun = () => {\r\n      stylelinkelement.onload = stylelinkelement.onerror = null;\r\n      rs();\r\n      //   console.log(stylelinkelement.href);\r\n    };\r\n    stylelinkelement.onload = loaderrorfun;\r\n    stylelinkelement.onerror = loaderrorfun;\r\n    appendchild(container, stylelinkelement);\r\n  });\r\n}\r\n","export default function<T extends object>(target: T): T {\r\n  return new Proxy(target, {\r\n    set() {\r\n      return true;\r\n    },\r\n    defineProperty() {\r\n      return false;\r\n    },\r\n    deleteProperty() {\r\n      return false;\r\n    },\r\n    setPrototypeOf() {\r\n      return false;\r\n    }\r\n  });\r\n}\r\n","export function setimmediate(fun: Function) {\r\n  return Promise.resolve().then(() => fun());\r\n}\r\n","export const readysymbol = Symbol(\"readystate\");\r\n","import {\r\n  innerstatesymbol,\r\n  innerwatchrecords\r\n} from \"../AttributeClass/createComponent\";\r\nimport { cached_callback_eventlistner } from \"../cached-map\";\r\nimport { isNode } from \"../MountElement/isNodeArray\";\r\n// import { isNode } from \"./MountElement/MountElement\";\r\nimport ReactiveState, {\r\n  addonelistner,\r\n  dispatchsymbol,\r\n  //   callbackmap,\r\n  removeonelistner\r\n} from \"../Reactivity/ReactiveState\";\r\nimport { rewatch /* , unwatch */, unwatch } from \"../Reactivity/watch\";\r\nimport {\r\n  readdlisteners,\r\n  removelisteners\r\n} from \"../RenderVirtual/handle-onevent\";\r\nimport { bindstatesymbol } from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { getchildNodes } from \"../UtilTools/dom\";\r\nimport { get, has } from \"../UtilTools/reflect\";\r\nimport { isArray } from \"../UtilTools/util\";\r\n\r\nexport function onmounted(ele: Element | Node | Array<Node>) {\r\n  if (isArray(ele)) {\r\n    ele.forEach(e => {\r\n      onmounted(e);\r\n    });\r\n  } else if (\r\n    isNode(ele)\r\n    //   ele instanceof Node\r\n  ) {\r\n    // if (has(ele, eventlistenerssymbol)) {\r\n    readdlisteners(ele);\r\n    // }\r\n    //全局共享状态\r\n    if (\r\n      has(ele, bindstatesymbol)\r\n      // ele[bindstatesymbol]\r\n    ) {\r\n      (get(ele, bindstatesymbol) as ReactiveState<any>[])\r\n\r\n        /*  ele[bindstatesymbol] */\r\n        .forEach((state: ReactiveState<any>) => {\r\n          rewatch(state);\r\n\r\n          /* 当组件挂载时把状态跟dom元素同步一次 */\r\n          state[dispatchsymbol]();\r\n        });\r\n    }\r\n    if (\r\n      has(ele, innerstatesymbol)\r\n      //   ele[innerstatesymbol]\r\n    ) {\r\n      (get(ele, innerstatesymbol) as ReactiveState<any>[]).forEach(\r\n        (state: ReactiveState<any>) => {\r\n          rewatch(state);\r\n        }\r\n      );\r\n    }\r\n    // readdlisteners(ele);\r\n    /* 记录组件中使用的watch的state和callback,\r\n组件卸载时removeeventlistener,\r\n组件挂载时addeventlistener\r\n*/\r\n    if (has(ele, innerwatchrecords)) {\r\n      const watchrecords = get(ele, innerwatchrecords) as [\r\n        ReactiveState<any>,\r\n        Function\r\n      ][];\r\n      watchrecords.forEach(([state, callback]) => {\r\n        const eventlistener = cached_callback_eventlistner.get(callback);\r\n        /*   if (!eventlistener) {\r\n          throw new Error();\r\n        } */\r\n        if (eventlistener) {\r\n          state[addonelistner](eventlistener);\r\n        }\r\n      });\r\n    }\r\n    onmounted(getchildNodes(ele));\r\n  }\r\n\r\n  //\r\n}\r\nexport function onunmounted(ele: Element | Node | Array<Node>) {\r\n  if (isArray(ele)) {\r\n    ele.forEach(e => {\r\n      onunmounted(e);\r\n    });\r\n  } else if (\r\n    isNode(ele)\r\n    //   ele instanceof Node\r\n  ) {\r\n    // if (\r\n    //   has(ele, eventlistenerssymbol)\r\n    //   // ele[eventlistenerssymbol]\r\n    // ) {\r\n    removelisteners(ele);\r\n    // }\r\n    /*   if (ele[bindstatesymbol]) {\r\n      ele[bindstatesymbol].forEach((state: ReactiveState) => {\r\n        unwatch(state);\r\n      });\r\n */\r\n    // readdlisteners(ele);\r\n    // }\r\n    //\r\n    /* 组件卸载时unwatch组件内部的 ReactiveState*/\r\n    if (\r\n      has(ele, innerstatesymbol)\r\n      // ele[innerstatesymbol]\r\n    ) {\r\n      (get(ele, innerstatesymbol) as ReactiveState<any>[]).forEach(\r\n        (state: ReactiveState<any>) => {\r\n          unwatch(state);\r\n        }\r\n      );\r\n    }\r\n    if (has(ele, innerwatchrecords)) {\r\n      const watchrecords = get(ele, innerwatchrecords) as [\r\n        ReactiveState<any>,\r\n        Function\r\n      ][];\r\n      watchrecords.forEach(([state, callback]) => {\r\n        const eventlistener = cached_callback_eventlistner.get(callback);\r\n        /*  if (!eventlistener) {\r\n          throw new Error();\r\n        } */\r\n        if (eventlistener) {\r\n          state[removeonelistner](eventlistener);\r\n        }\r\n      });\r\n    }\r\n    onunmounted(getchildNodes(ele));\r\n  }\r\n}\r\n","import createeleattragentreadwrite from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { getAttribute, removeAttribute, setAttribute } from \"../UtilTools/dom\";\r\nimport { get } from \"../UtilTools/reflect\";\r\nimport { isFunction, isobject, isfunction } from \"../UtilTools/util\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nimport {\r\n  onunmounted,\r\n  onmounted\r\n} from \"../mounted-unmounted/element-onmount-unmount\";\r\nimport { setimmediate } from \"src/UtilTools/setimmediate\";\r\nexport const attributeChangedCallback = Symbol(\"attributeChanged\");\r\nexport const firstinstalledcallback = Symbol(\"firstinstalled\");\r\n/* \r\n\r\n super.disconnectedCallback();\r\n\r\n 被babel转换之后这句就没了?\r\n\r\n  connectedCallback() {\r\n            //    return _asyncToGenerator((function*() {}\r\n                ))();\r\n            }\r\n            disconnectedCallback() {\r\n               // return _asyncToGenerator((function*() {}\r\n                ))();\r\n            }\r\n*/\r\nexport function connectedCallback(componentelement: HTMLElement) {\r\n  AttrChange.prototype.connectedCallback.call(componentelement);\r\n}\r\n\r\nexport function disconnectedCallback(componentelement: HTMLElement) {\r\n  AttrChange.prototype.disconnectedCallback.call(componentelement);\r\n}\r\nexport class AttrChange extends HTMLElement {\r\n  //   abstract [firstinstalledcallback]();\r\n  disconnectedCallback() {\r\n    setimmediate(() => {\r\n      onunmounted(this);\r\n    });\r\n  }\r\n  connectedCallback() {\r\n    setimmediate(() => {\r\n      if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n        const callback = get(this, firstinstalledcallback);\r\n        if (isfunction(callback)) {\r\n          // get(this,firstinstalledcallback)\r\n          setimmediate(() => {\r\n            callback.call(this);\r\n          });\r\n        }\r\n      }\r\n      onmounted(this);\r\n    });\r\n\r\n    // onmounted(this);\r\n  }\r\n  [readysymbol] = false;\r\n  // [attributessymbol]: Record<string, ReactiveState<any>>;\r\n  constructor() {\r\n    super();\r\n    const defaultProps = get(this.constructor, \"defaultProps\");\r\n    // this.constructor[\"defaultProps\"];\r\n    const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n    //   const props = {};\r\n    if (isobject(defaultProps)) {\r\n      /*     if (!this[attributessymbol]) {\r\n        this[attributessymbol] = {};\r\n      } */\r\n      Object.assign(attrs, defaultProps);\r\n      // Object.assign(props, this.constructor[\"defaultProps\"]);\r\n    }\r\n  }\r\n  //   [attributeChangedCallback](name?: string): void;\r\n  // prototype!: HTMLElement;\r\n  /*  defaultProps?: { [key: string]: any } | undefined;\r\n  css?: string | undefined; */\r\n  /* constructor() {\r\n    super();\r\n  } */\r\n\r\n  /* 跟seteletext发生冲突,清空children */\r\n  //   get textContent() {\r\n  //     return String(super.textContent || \"\");\r\n  //   }\r\n  //   set textContent(_a: string) {\r\n  //     console.trace();\r\n  //     // return;\r\n  //   }\r\n  //   get innerHTML() {\r\n  //     return super.innerHTML;\r\n  //   }\r\n  //   set innerHTML(_a: string) {\r\n  //     // return;\r\n  //   }\r\n  //   get innerText() {\r\n  //     return super.innerText;\r\n  //   }\r\n  //   set innerText(_a: string) {\r\n  //     // return;\r\n  //   }\r\n  // [attributeChangedCallback](\r\n  //   name: string\r\n\r\n  /* _name?: any, _oldValue?: any, _newValue?: any */\r\n  // ) {\r\n  //   noop(name);\r\n  //\r\n  //  }\r\n  /* constructor() {\r\n    super();\r\n  } */\r\n\r\n  //禁止设置innerhtml，innertext，textcontent\r\n  /* disconnectedCallback() {\r\n  //console.log('Custom square element removed from page.');\r\n} */\r\n  /* connectedCallback() {\r\n  //console.log('Custom square element added to page.');\r\n  updateStyle(this);\r\n} */\r\n  //\r\n  //   connectedCallback(){}\r\n  /* attributeChangedCallback(name, oldValue, newValue) {\r\n  //console.log('Custom square element attributes changed.');\r\n  updateStyle(this);\r\n} */\r\n  setAttribute(qualifiedName: string, value: string) {\r\n    const callback = get(this, attributeChangedCallback);\r\n    const oldValue = getAttribute(this, qualifiedName);\r\n    // super.getAttribute(qualifiedName);\r\n\r\n    if (oldValue !== value) {\r\n      setAttribute(this, qualifiedName, value);\r\n      //   super.setAttribute(qualifiedName, value);\r\n      if (\r\n        isFunction(\r\n          callback\r\n          // this[attributeChangedCallback]\r\n        )\r\n      ) {\r\n        // setimmediate(() => {\r\n        callback.call(this, qualifiedName, oldValue, value);\r\n        // });\r\n      }\r\n    }\r\n  }\r\n  removeAttribute(qualifiedName: string) {\r\n    const callback = get(this, attributeChangedCallback);\r\n    const oldValue = getAttribute(this, qualifiedName);\r\n\r\n    if (null !== oldValue) {\r\n      //   super.removeAttribute(qualifiedName);\r\n      removeAttribute(this, qualifiedName);\r\n      if (isFunction(callback)) {\r\n        // setimmediate(() => {\r\n        callback.call(this, qualifiedName, oldValue, undefined);\r\n        // });\r\n      }\r\n    }\r\n  }\r\n}\r\n","const waittranformcsssymbol = Symbol(\"waittranformcss\");\r\nexport const innerwatchrecords = Symbol(\"innerwatchrecord\");\r\nexport const innerstatesymbol = Symbol(\"innerstate\");\r\nimport createeleattragentreadwrite from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { isvalidvdom } from \"src/CreateElement/isvalidvdom\";\r\nimport { isclassextendsHTMLElement } from \"src/CustomClass/isclassextendsHTMLElement\";\r\nimport { registercssprefix } from \"src/ScopedCSS/registercssprefix\";\r\nimport { waitloadallstyle } from \"src/ScopedCSS/waitloadallstyle\";\r\nimport { cached_create_componet } from \"../cached-map\";\r\n// import { Class } from \"./rendervdomtoreal\";\r\nimport Virtualdom, { Vdomchildren } from \"../CreateElement/VirtualElement\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\nimport {\r\n  closectx,\r\n  getMounted,\r\n  getstates,\r\n  getUnMounted,\r\n  getwatchrecords,\r\n  invalid_Function,\r\n  openctx\r\n} from \"../mounted-unmounted/Component-context\";\r\n// import { isvalidvdom } from \"../CreateElement/html\";\r\n// import { Promise } from \"q\";\r\n// import { inflate } from \"zlib\";\r\n// import { componentsymbol } from \"./iscomponent\";\r\n// import { insertfirst } from \"./dom\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport {\r\n  /* createApp, */ invalid_Virtualdom\r\n} from \"../MountElement/MountElement\";\r\nimport ReactiveState, {\r\n  dispatchsymbol /* , { dispatchsymbol } */\r\n} from \"../Reactivity/ReactiveState\";\r\nimport readonlyproxy from \"../Reactivity/readonly-proxy\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport {\r\n  /* parsecsstext,\r\n                        prefixcssrules,\r\n                        cssrulestocsstext, */\r\n  //   savestyleblob,\r\n  componentsstylesheet\r\n  //   createlinkstylesheet,\r\n  //   transformcsstext,\r\n  //   registercssprefix\r\n  /*  loadlinkstyle,\r\n                        createlinkstylesheet */\r\n  //   savestyleblob\r\n  //   waitloadallstyle\r\n} from \"../ScopedCSS/parsecss-transformcss\";\r\nimport { seteletext } from \"../UtilTools/dom\";\r\nimport { apply, defineProperty, get, set } from \"../UtilTools/reflect\";\r\nimport { setimmediate } from \"../UtilTools/setimmediate\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport { isfunction, isobject, isstring } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  attributeChangedCallback,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport createcomponent from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nexport const attributessymbol = Symbol(\"attributes\");\r\nconst elementsymbol = Symbol(\"innerelement\");\r\nconst inner_vdom_symbol = Symbol(\"innervdom\");\r\nconst mountedsymbol = Symbol(\"mounted\");\r\nconst unmountedsymbol = Symbol(\"unmounted\");\r\nexport interface Htmlelementconstructor {\r\n  new (): HTMLElement;\r\n  prototype: HTMLElement;\r\n  defaultProps?: Record<string, any>;\r\n  css?: string;\r\n}\r\nfunction createComponent(custfun: Custom): Htmlelementconstructor {\r\n  if (isfunction(custfun)) {\r\n    const cached_class = cached_create_componet.get(custfun);\r\n    if (cached_class) {\r\n      return cached_class;\r\n    }\r\n\r\n    const defaultProps = get(custfun, \"defaultProps\"); //custfun[\"defaultProps\"];\r\n    const css = get(custfun, \"css\");\r\n    class Component extends AttrChange {\r\n      [innerwatchrecords]: [ReactiveState<any>, Function][];\r\n      [attributessymbol]: Record<string, ReactiveState<any>> = {};\r\n      // new (propsjson?: object | undefined, children?: any[] | undefined): HTMLElement\r\n\r\n      //   constructor(...args: any[]);\r\n\r\n      [waittranformcsssymbol]: undefined | (() => Promise<void>);\r\n      constructor(\r\n        propsjson: Record<string, any> = {},\r\n        children: Vdomchildren = [] /* , options?: any */ //   : HTMLElement;\r\n      ) {\r\n        super();\r\n        // this[attributessymbol] = {};\r\n        const css = get(this.constructor, \"css\");\r\n\r\n        if (css) {\r\n          const prefix = this.tagName.toLowerCase();\r\n          if (\r\n            !get(componentsstylesheet, prefix)\r\n            /*  componentsstylesheet[prefix] */\r\n          ) {\r\n            set(componentsstylesheet, prefix, new Set());\r\n            /* 改成异步解析css转换 */\r\n            // console.trace();\r\n            this[waittranformcsssymbol] = () => {\r\n              return setimmediate(() => {\r\n                registercssprefix(css, prefix);\r\n              });\r\n            };\r\n\r\n            /* 把css文本先解析成cssom ,然后添加前缀,然后转成字符串,生成blob,再生成link-stylesheet,添加*/\r\n            /* const cssomold = parsecsstext(css);\r\n                const cssomnew = prefixcssrules(cssomold, prefix);\r\n                //   console.log([css, prefix, cssomold, cssomnew]);\r\n                const cssnewtext = cssrulestocsstext(cssomnew); */\r\n            // const cssnewtext = transformcsstext(css, prefix);\r\n            // savestyleblob(prefix, cssnewtext);\r\n            // console.log(cssnewtext, componentsstylesheet);\r\n          }\r\n        }\r\n        // const defaultProps = get(this.constructor, \"defaultProps\");\r\n        // this.constructor[\"defaultProps\"];\r\n        const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n        //   const props = {};\r\n        /*    if (isobject(defaultProps)) {\r\n          Object.assign(attrs, defaultProps);\r\n          // Object.assign(props, this.constructor[\"defaultProps\"]);\r\n        } */\r\n        if (isobject(propsjson)) {\r\n          Object.assign(attrs, propsjson);\r\n          // Object.assign(props, propsjson);\r\n        }\r\n        // console.log({ ...attrs });\r\n        //   this[attributessymbol] = createeleattragentreadwrite(this);\r\n        // const props = createeleattragentreadwrite(this);/\r\n        const props = attrs;\r\n        openctx();\r\n\r\n        const thisattributess = Object.fromEntries(\r\n          Object.entries(props).map(([key]) => [\r\n            key,\r\n            (() => {\r\n              /* 使用getter来保证每次访问到最新的attribute */\r\n              const attributes = createeleattragentreadwrite(this) as Record<\r\n                string,\r\n                any\r\n              >;\r\n              const state = new ReactiveState();\r\n              defineProperty(state, \"value\", {\r\n                get() {\r\n                  return get(attributes, key);\r\n                },\r\n                configurable: true\r\n              });\r\n              //   usestste(state);\r\n              return state;\r\n            })()\r\n          ])\r\n        );\r\n        this[attributessymbol] = thisattributess;\r\n        // console.log({ props, thisattributess });\r\n        // debugger;\r\n        /* 把attributes的reactivestates也放进innerstates中 */\r\n        const readonlyprop = readonlyproxy(\r\n          Object.fromEntries(\r\n            Object.entries(thisattributess).map(([key, value]) => [\r\n              key,\r\n              readonlyproxy(value)\r\n            ])\r\n          )\r\n        );\r\n\r\n        let possiblyvirtualdom:\r\n          | string\r\n          | Virtualdom<any>\r\n          | ReactiveState<any>\r\n          | (string | Virtualdom<any> | ReactiveState<any>)[]\r\n          | any;\r\n        try {\r\n          possiblyvirtualdom = apply(custfun, undefined, [\r\n            readonlyprop,\r\n            children.flat(1 / 0)\r\n          ]);\r\n          /* custfun.call(\r\n            undefined,\r\n            //让组件里面无法修改props的reactivestate的value\r\n            // readonlyproxy(thisattributess),\r\n            readonlyprop,\r\n            children */\r\n          // );\r\n        } catch (error) {\r\n          closectx();\r\n          console.error(\"error in component\");\r\n          throw error;\r\n        }\r\n        /* \r\n        if (isArray(possiblyvirtualdom)) {\r\n          possiblyvirtualdom = possiblyvirtualdom\r\n            .flat(Infinity)\r\n            .filter(Boolean);\r\n        } */\r\n        possiblyvirtualdom = toArray(possiblyvirtualdom);\r\n        if (isvalidvdom(possiblyvirtualdom)) {\r\n          const vdomarray /* isArray(possiblyvirtualdom)\r\n                ? possiblyvirtualdom\r\n                : [possiblyvirtualdom]; */ = toArray(\r\n            possiblyvirtualdom\r\n          );\r\n          //\r\n          this[inner_vdom_symbol] = vdomarray.flat(Infinity).filter(Boolean);\r\n          this[mountedsymbol] = getMounted();\r\n          this[unmountedsymbol] = getUnMounted();\r\n          this[innerstatesymbol] = getstates();\r\n          this[innerwatchrecords] = getwatchrecords();\r\n          closectx();\r\n        } else {\r\n          closectx();\r\n          console.error(possiblyvirtualdom);\r\n          console.error(invalid_Virtualdom);\r\n          throw TypeError();\r\n        }\r\n\r\n        //   this[mountedsymbol] = getMounted();\r\n        //   this[unmountedsymbol] = getUnMounted();\r\n      }\r\n      //   prototype!: HTMLElement;\r\n      //   defaultProps?: { [key: string]: any } | undefined;\r\n      //  css?: string | undefined;\r\n      [innerstatesymbol]: Array<ReactiveState<any>>;\r\n      static [componentsymbol] = componentsymbol;\r\n      static css = isstring(css) && css ? css : undefined;\r\n      [readysymbol] = false;\r\n      [mountedsymbol]: Array<Function>;\r\n      [unmountedsymbol]: Array<Function>;\r\n      static defaultProps = isobject(defaultProps)\r\n        ? JSON.parse(JSON.stringify(defaultProps))\r\n        : undefined;\r\n\r\n      [elementsymbol]: Array<Node>;\r\n      [inner_vdom_symbol]: Array<\r\n        Virtualdom<any> | ReactiveState<any> | string | number\r\n      >;\r\n      // | undefined;\r\n      [firstinstalledcallback]() {\r\n        const thencallbackfirst = () => {\r\n          /* 异步解析转换css */\r\n          seteletext(this, \"\");\r\n          /* 挂载link style sheet到head上 */\r\n          return waitloadallstyle(prefix, document.head);\r\n        };\r\n        const thencallbacksecond = () => {\r\n          //   console.log(\"style load all\");\r\n          //   console.log(\"mount1\");\r\n          mount(this[elementsymbol], this, false);\r\n          this[waittranformcsssymbol] = undefined;\r\n        };\r\n        if (!this[elementsymbol]) {\r\n          const innervdom = this[inner_vdom_symbol];\r\n          if (innervdom) {\r\n            this[elementsymbol] = render(innervdom).flat(Infinity);\r\n            this[inner_vdom_symbol] = [];\r\n            /*清除不再使用的引用, 垃圾回收 */\r\n          }\r\n        }\r\n\r\n        const css = get(this.constructor, \"css\");\r\n        const prefix = this.tagName.toLowerCase();\r\n        if (css /*  && componentsstylesheet[prefix] */) {\r\n          const waitcallback = this[waittranformcsssymbol];\r\n          if (waitcallback) {\r\n            waitcallback()\r\n              .then(thencallbackfirst)\r\n              .then(thencallbacksecond);\r\n          } else {\r\n            Promise.resolve(thencallbackfirst).then(thencallbacksecond);\r\n          }\r\n\r\n          /* 先清空当前组件 的children */\r\n\r\n          /* 应该要等待css加载完成之后再渲染出来,否则会有页面跳动 */\r\n          /* 是css里面的@import导致的 */\r\n          /* 挂载样式到组件最前面 */\r\n          //   console.log(componentsstylesheet[prefix]);\r\n          // if (componentsstylesheet[prefix]) {\r\n          /* const stylelinkelement = createlinkstylesheet(\r\n              componentsstylesheet[prefix]\r\n            ); */\r\n          /*   stylelinkelement.onload = () => {\r\n              mount(this[elementsymbol], this, false);\r\n            };\r\n            stylelinkelement.onerror = () => {\r\n              mount(this[elementsymbol], this, false);\r\n            }; */\r\n          // insertfirst(this, stylelinkelement);\r\n          // }\r\n          /*  Promise.all(\r\n              [...componentsstylesheet[prefix]].map(styleurl =>\r\n                loadlinkstyle(createlinkstylesheet(styleurl), this)\r\n              )\r\n            )\r\n*/\r\n        } else {\r\n          // console.log(\"mount2\");\r\n          mount(this[elementsymbol], this);\r\n        }\r\n      }\r\n      connectedCallback() {\r\n        setimmediate(() => {\r\n          connectedCallback(this);\r\n          // if (!this[elementsymbol]) {\r\n          //   this[elementsymbol] = render(this[vdomsymbol]).flat(Infinity);\r\n          // }\r\n          //    /*  if (!this[readysymbol]) {\r\n          //       this[readysymbol] = true;\r\n          //       /* 这段代码只在初始化时执行一次 */\r\n          //       //   mount(this[elementsymbol], this, false);\r\n          //     } */\r\n          //把mounted callback 异步执行\r\n          this[mountedsymbol].forEach(f => {\r\n            setimmediate(f);\r\n          });\r\n        });\r\n\r\n        // onmounted(this);\r\n        // super.connectedCallback();\r\n      }\r\n      disconnectedCallback() {\r\n        setimmediate(() => {\r\n          disconnectedCallback(this);\r\n          this[unmountedsymbol].forEach(f => {\r\n            setimmediate(f);\r\n          });\r\n        });\r\n\r\n        // onunmounted(this);\r\n        // super.disconnectedCallback();\r\n      }\r\n      [attributeChangedCallback](\r\n        name: string /* , oldValue: any, newValue: any */\r\n      ) {\r\n        // console.log(this[attributessymbol]);\r\n        // if (!this[attributessymbol]) {\r\n        //   this[attributessymbol] = {};\r\n        // }\r\n        if (this[readysymbol]) {\r\n          {\r\n            const propreactivestate = this[attributessymbol][name];\r\n            /*   const attributes = createeleattragentreadwrite(this) as Record<\r\n              string,\r\n              any\r\n            >; */\r\n            if (propreactivestate) {\r\n              /* 使用getter来保证每次访问到最新的attribute */\r\n              propreactivestate[dispatchsymbol]();\r\n              //   propreactivestate[\"value\"] = attributes[name];\r\n\r\n              /* 当属性改变时要跟ReactiveState同步状态 */\r\n              /*   set(\r\n            get(this, attributessymbol)[name],\r\n            \"value,\",\r\n            (createeleattragentreadwrite(this) as { [key: string]: any })[\r\n              name\r\n            ] as any */\r\n              //   );\r\n              /*   this[attributessymbol][name].value = createeleattragentreadwrite(\r\n            this\r\n          )[name]; */\r\n              //   this[attributessymbol][name][dispatchsymbol]();\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    cached_create_componet.set(custfun, Component);\r\n    return Component;\r\n  } else {\r\n    console.error(custfun);\r\n    console.error(invalid_Function);\r\n    throw TypeError();\r\n  }\r\n}\r\nexport { createcomponent as createComponent };\r\nexport default (custfun: Custom | Htmlelementconstructor) =>\r\n  autocreateclass(custfun);\r\nexport function autocreateclass(\r\n  custfun: Custom | Htmlelementconstructor\r\n): Htmlelementconstructor {\r\n  if (isclassextendsHTMLElement(custfun)) {\r\n    return custfun;\r\n  } else if (isfunction(custfun)) {\r\n    return createComponent(custfun);\r\n  } else {\r\n    throw TypeError();\r\n  }\r\n}\r\n","import h from \"./create-element\";\r\nexport { h };\r\nimport { Class, Custom } from \"../CustomClass/customclass\";\r\nimport ReactiveState from \"../Reactivity/ReactiveState\";\r\nimport { apply } from \"../UtilTools/reflect\";\r\nimport {\r\n  isarray,\r\n  isfunction,\r\n  isplainobject,\r\n  isstring\r\n} from \"../UtilTools/util\";\r\nimport Virtualdom, {\r\n  createVirtualElement,\r\n  Vdomchildren\r\n} from \"./VirtualElement\";\r\nimport {\r\n  autocreateclass,\r\n  Htmlelementconstructor\r\n} from \"../AttributeClass/createComponent\";\r\ntype styleprop =\r\n  | string\r\n  | object\r\n  | ReactiveState<string>\r\n  | ReactiveState<object>;\r\n\r\ntype classprop =\r\n  | string\r\n  | Set<string>\r\n  | Array<string>\r\n  | ReactiveState<string | Set<string> | Array<string>>;\r\nexport interface ElementAttrs {\r\n  style?: styleprop;\r\n  class?: classprop;\r\n  [key: string]: any;\r\n}\r\n\r\nexport default function<T extends Htmlelementconstructor | string | Custom>(\r\n  type: T,\r\n  propsorchildren?: Vdomchildren,\r\n  ...children: Vdomchildren\r\n): Virtualdom<T>;\r\nexport default function<T extends Vdomchildren>(\r\n  type: \"\",\r\n  propsorchildren?: T,\r\n  ...children: T\r\n): T;\r\nexport default function<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T;\r\nexport default function<T extends Htmlelementconstructor | string | Custom>(\r\n  type: T,\r\n  props?: ElementAttrs,\r\n  ...children: Vdomchildren\r\n): Virtualdom<T>;\r\n//如果第二个参数是数组，则 变成\r\n/* \r\nh(type,...children)\r\nh(type,children)\r\n*/\r\n\r\nexport default function(\r\n  type?: Htmlelementconstructor | string | Custom,\r\n  propsorchildren?: Vdomchildren | ElementAttrs,\r\n  ...children: Vdomchildren\r\n) {\r\n  if (isfunction(type)) {\r\n    type = autocreateclass(type);\r\n    // debugger;\r\n  }\r\n\r\n  if (isarray(propsorchildren)) {\r\n    return apply(createElement, undefined, [\r\n      type,\r\n      undefined,\r\n      [...propsorchildren, ...children].flat(1 / 0)\r\n    ]);\r\n    /*   createElement(\r\n      type,\r\n      undefined,\r\n      [...propsorchildren, ...children].flat(1 / 0)\r\n    ); */\r\n  } else {\r\n    return apply(createElement, undefined, [\r\n      type,\r\n      propsorchildren,\r\n      ...children\r\n    ]); // createElement(...arguments);\r\n  }\r\n}\r\nfunction createElement<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T;\r\nfunction createElement<T extends Function | string>(\r\n  type: T,\r\n  props?: ElementAttrs,\r\n  ...children: Vdomchildren\r\n): Virtualdom<T>;\r\n\r\n/* function createElement<T extends Vdomchildren>(\r\n  type: \"\",\r\n  props?: ElementAttrs,\r\n  ...children: T\r\n): T; */\r\n\r\nfunction createElement<T extends Function | string | Class>(\r\n  type?: T,\r\n  props: ElementAttrs = {},\r\n  ...children: Vdomchildren\r\n): Virtualdom<T> | Vdomchildren {\r\n  // | Array<Virtualdom | string>\r\n  // if(isarray()){}\r\n  /* add fragment element */\r\n  //   console.log(type, props, children);\r\n  let typenormalized: \"\" | Function | string =\r\n    isstring(type) || isfunction(type) ? type : \"\";\r\n  const propsnormalized = isplainobject(props) ? props : {};\r\n  const childrennormalized: Vdomchildren = children\r\n    .flat(Infinity)\r\n    .map(a => (a === 0 ? \"0\" : a))\r\n    .filter(a => !!a);\r\n  if (\r\n    isstring(typenormalized)\r\n    //   typeof typenormalized === \"string\"\r\n  ) {\r\n    typenormalized = typenormalized.trim().toLowerCase();\r\n  }\r\n\r\n  if (\r\n    //typeof typenormalized === \"string\" &&\r\n\r\n    \"\" === typenormalized\r\n  ) {\r\n    return childrennormalized;\r\n  } else {\r\n    /* propsnormalized = Object.fromEntries(\r\n    Object.entries(propsnormalized).map(([key, value]) => [\r\n      key.trim().toLowerCase(),\r\n      value\r\n    ])\r\n  ); */\r\n\r\n    /* return new Virtualdom(\r\n      typenormalized,\r\n      propsnormalized,\r\n      childrennormalized\r\n    ) as Virtualdom<any>;\r\n*/\r\n    return apply(createVirtualElement, undefined, [\r\n      typenormalized,\r\n      propsnormalized,\r\n      childrennormalized\r\n    ]) as Virtualdom<T>;\r\n\r\n    /*  createVirtualElement(\r\n     \r\n    ); */\r\n  }\r\n}\r\n","// declare interface Array<T> {\r\n//   flat(arg0: number): any[];\r\n// }\r\nimport createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { isvalidvdom, VaildVDom } from \"../CreateElement/isvalidvdom\";\r\nimport createElement from \"../CreateElement/create-element\";\r\n// import createElement from \"./createelement\";\r\nimport Virtualdom, { Vdomchildren } from \"../CreateElement/VirtualElement\";\r\n// const readysymbol = Symbol(\"ready\");\r\nimport {\r\n  onmounted,\r\n  onunmounted\r\n} from \"../mounted-unmounted/element-onmount-unmount\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { setelehtml } from \"../UtilTools/dom\";\r\nimport { get } from \"../UtilTools/reflect\";\r\n// import mount from \"./mount\";\r\nimport { isboolean, isundefined } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  attributeChangedCallback,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { Htmlelementconstructor } from \"./createComponent\";\r\n// import { isvalidvdom } from \"../CreateElement/html\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\n\r\n// import { readysymbol } from \"./createComponent\";\r\nexport const invalid_ReactiveState = \"invalid ReactiveState\";\r\nconst truevdomsymbol = Symbol(\"truevdom\");\r\nconst falsevdomsymbol = Symbol(\"falsevdom\");\r\nconst trueelesymbol = Symbol(\"trueele\");\r\nconst falseelesymbol = Symbol(\"falseele\");\r\nconst handletrue = Symbol(\"handletrue\");\r\nconst handlefalse = Symbol(\"handlefalse\");\r\n\r\nexport default function(\r\n  conditon: ReactiveState<boolean> | boolean,\r\n  iftrue?: VaildVDom,\r\n  iffalse?: VaildVDom\r\n): Virtualdom<Htmlelementconstructor> {\r\n  if (!(isReactiveState(conditon) || isboolean(conditon))) {\r\n    console.error(conditon);\r\n    console.error(invalid_ReactiveState);\r\n    throw TypeError();\r\n  }\r\n  [iftrue, iffalse].forEach(a => {\r\n    if (!(isundefined(a) || isvalidvdom(a))) {\r\n      console.error(a);\r\n      console.error(invalid_Virtualdom);\r\n      throw new TypeError();\r\n    }\r\n  });\r\n  const options = { true: iftrue, false: iffalse };\r\n  const optionstrue = get(options, \"true\");\r\n  const optionsfalse = get(options, \"false\");\r\n  class Condition extends AttrChange {\r\n    // prototype!: HTMLElement;\r\n    // defaultProps?: { [key: string]: any } | undefined;\r\n    // css?: string | undefined;\r\n    static [componentsymbol] = componentsymbol;\r\n    [readysymbol] = false;\r\n    [truevdomsymbol]: Vdomchildren = [optionstrue].flat(1 / 0).filter(Boolean);\r\n    /*isarray(optionstrue)\r\n    ? optionstrue.filter(Boolean)\r\n    : */\r\n\r\n    [falsevdomsymbol]: Vdomchildren = [optionsfalse]\r\n      .flat(1 / 0)\r\n      .filter(Boolean);\r\n    /* isarray(optionsfalse)\r\n    ? optionsfalse.filter(Boolean)\r\n    : */\r\n\r\n    //  /*    constructor() /* propsjson?: object, children?: any[], options: object = {} */ {\r\n    //       super();\r\n    //       // if(){}\r\n\r\n    //       this[truevdomsymbol] =\r\n    //         /*isarray(optionstrue)\r\n    //         ? optionstrue.filter(Boolean)\r\n    //         : */\r\n    //         [optionstrue].flat(1 / 0).filter(Boolean);\r\n    //       this[falsevdomsymbol] =\r\n    //         /* isarray(optionsfalse)\r\n    //         ? optionsfalse.filter(Boolean)\r\n    //         : */\r\n\r\n    //         [optionsfalse].flat(1 / 0).filter(Boolean);\r\n    //       // optionsfalse;\r\n    //     } */\r\n    [falseelesymbol]: Node[];\r\n    [trueelesymbol]: Node[];\r\n    // [truevdomsymbol]: any[];\r\n    // [falsevdomsymbol]: any[];\r\n    //   [readysymbol] = false;\r\n    [handlefalse]() {\r\n      setelehtml(this, \"\");\r\n      if (this[falsevdomsymbol]) {\r\n        if (!this[falseelesymbol]) {\r\n          // } else {\r\n          this[falseelesymbol] = render(this[falsevdomsymbol]);\r\n          // this[falsevdomsymbol].map(e => render(e));\r\n          this[falsevdomsymbol] = [];\r\n        }\r\n      }\r\n      //   mount(this[falseelesymbol], this);\r\n      const elementtomount = this[falseelesymbol];\r\n      mount(elementtomount, this);\r\n      // elementtomount.forEach(e => onmounted(e));\r\n      onmounted(elementtomount);\r\n      if (this[trueelesymbol]) {\r\n        onunmounted(this[trueelesymbol]);\r\n        //   this[trueelesymbol].forEach(e => onunmounted(e));\r\n      }\r\n      //   }\r\n    }\r\n    [handletrue]() {\r\n      setelehtml(this, \"\");\r\n      if (this[truevdomsymbol]) {\r\n        if (!this[trueelesymbol]) {\r\n          this[trueelesymbol] = render(this[truevdomsymbol]);\r\n\r\n          // this[truevdomsymbol].map(e => render(e));\r\n          /* 垃圾回收 */\r\n          this[truevdomsymbol] = [];\r\n        }\r\n      }\r\n      //\r\n      //   mount(this[trueelesymbol], this);\r\n      const elementtomount = this[trueelesymbol];\r\n      mount(elementtomount, this);\r\n      onmounted(elementtomount);\r\n      // elementtomount.forEach(e => onmounted(e));\r\n      if (this[falseelesymbol]) {\r\n        onunmounted(this[falseelesymbol]);\r\n        //   this[falseelesymbol].forEach(e => onunmounted(e));\r\n      }\r\n      //   }\r\n    }\r\n    [firstinstalledcallback]() {\r\n      const attrs: { [key: string]: any } = createeleattr(this);\r\n      // console.log(attrs);\r\n      if (true === attrs[\"value\"]) {\r\n        get(this, handletrue).call(this);\r\n      } else if (!attrs[\"value\"]) {\r\n        /* \"@masx200/dom-element-attribute-agent-proxy\"\r\n      如果属性设置为false,则获取到的是undefined\r\n      */\r\n        get(this, handlefalse).call(this);\r\n        //\r\n      }\r\n    }\r\n    connectedCallback() {\r\n      connectedCallback(this);\r\n      //   super.connectedCallback();\r\n\r\n      /*   if (!this[readysymbol]) {\r\n        // createApp(this[elementsymbol], this);\r\n        this[readysymbol] = true;\r\n\r\n        const attrs: { [key: string]: any } = createeleattr(this);\r\n        // console.log(attrs);\r\n        if (true === attrs[\"value\"]) {\r\n          get(this, handletrue).call(this);\r\n        }\r\n        if (false === attrs[\"value\"]) {\r\n          get(this, handlefalse).call(this);\r\n          //\r\n        }\r\n      } */\r\n      //   onmounted(this);\r\n      //\r\n    }\r\n    disconnectedCallback() {\r\n      disconnectedCallback(this);\r\n      //   onunmounted(this);\r\n      //   super.connectedCallback();\r\n    }\r\n\r\n    [attributeChangedCallback](\r\n      name: string /* , oldValue: any, newValue: any */\r\n    ) {\r\n      if (this[readysymbol]) {\r\n        // console.log(name, oldValue, newValue);\r\n        if (name === \"value\") {\r\n          const attrs: Record<string, any> = createeleattr(this);\r\n          //   console.log(attrs);\r\n          if (true === attrs[\"value\"]) {\r\n            this[handletrue]();\r\n            //\r\n          } else if (!attrs[\"value\"]) {\r\n            this[handlefalse]();\r\n            //\r\n          }\r\n        }\r\n\r\n        //\r\n      }\r\n    }\r\n  }\r\n  /* vdom.options = { true: iftrue, false: iffalse }; */\r\n  const vdom = createElement(Condition, { value: conditon });\r\n  return vdom;\r\n  /*  */\r\n}\r\n","import { isFunction, isobject, issymbol } from \"src/UtilTools/util\";\r\nimport {\r\n  get,\r\n  has,\r\n  ownKeys,\r\n  getOwnPropertyDescriptor\r\n} from \"src/UtilTools/reflect\";\r\n\r\nexport function getproperyreadproxy<T extends object>(a: T): T {\r\n  const __proto__ = \"__proto__\";\r\n  /* 把基本类型原型的属性 也加上*/\r\n  //   const target = isobject(a) ? a : getPrototypeOf(a);\r\n  const target = a;\r\n  return new Proxy(target, {\r\n    getOwnPropertyDescriptor(target, key) {\r\n      //对于symbol属性，返回undefined\r\n      if (issymbol(key)) {\r\n        return;\r\n      } else {\r\n        return getOwnPropertyDescriptor(target, key);\r\n      }\r\n    },\r\n    ownKeys(target) {\r\n      let myvalue = get(target, \"value\");\r\n      const myvalueobj = isobject(myvalue) ? myvalue : myvalue[__proto__];\r\n      //   return ownKeys(target);\r\n      return Array.from(new Set([...ownKeys(target), ...ownKeys(myvalueobj)]));\r\n\r\n      /* Array.from(\r\n          new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n        ); */\r\n    },\r\n    has(target, key) {\r\n      const myvalue = get(target, \"value\");\r\n      const myvalueobj = isobject(myvalue) ? myvalue : myvalue[__proto__];\r\n      return has(target, key) || has(myvalueobj, key);\r\n    },\r\n    get(target, key) {\r\n      if (has(target, key)) {\r\n        return get(target, key);\r\n      } else {\r\n        const myvalue = get(target, \"value\");\r\n        const myvalueobj = /*  isobject(myvalue) ? myvalue :  */ Object(\r\n          myvalue\r\n        );\r\n\r\n        if (has(myvalueobj, key)) {\r\n          /* 对于string,number等原始类型,返回的函数要绑定this */\r\n          const property = get(myvalueobj, key);\r\n          return isFunction(property) ? property.bind(myvalueobj) : property;\r\n        }\r\n      }\r\n      //   return get(target, key);\r\n      /*  const myvalue = get(target, \"value\");\r\n  \r\n        if (has(target, key)) {\r\n          return get(target, key);\r\n        } else if (has(myvalue, key)) {\r\n          return get(myvalue, key);\r\n        } */\r\n    }\r\n  });\r\n}\r\n","/* interface CallbackReactiveState<\r\n \r\n> {\r\n  (...args: T[]): any;\r\n} */\r\nimport { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { invalid_Function } from \"../mounted-unmounted/Component-context\";\r\nimport {\r\n  apply,\r\n  //   getPrototypeOf\r\n  //   set\r\n  defineProperty\r\n} from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport {\r\n  isArray,\r\n  isFunction,\r\n  isfunction,\r\n  isobject,\r\n  isprimitive\r\n} from \"../UtilTools/util\";\r\nimport computed from \"./computed\";\r\nimport { getproperyreadproxy } from \"./getproperyread-proxy\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  isReactiveState\r\n} from \"./ReactiveState\";\r\nimport { CallbackReactiveState, UnwrapedState, watch } from \"./watch\";\r\n\r\n//const { defineProperty } = Object;\r\nexport default function<T extends UnwrapedState>(\r\n  state: ReactiveState<T> | Array<ReactiveState<T>>,\r\n  callback: CallbackReactiveState,\r\n  setter?: SetterFun\r\n): ReactiveState<any> {\r\n  if (\r\n    !(\r\n      (isArray(state) || isReactiveState(state)) &&\r\n      // state instanceof ReactiveState\r\n      isFunction(callback)\r\n    )\r\n  ) {\r\n    console.error(state);\r\n    console.error(callback);\r\n    console.error(invalid_ReactiveState + invalid_Function);\r\n\r\n    throw TypeError();\r\n  }\r\n  const state1array: ReactiveState<T>[] =\r\n    //   if (isReactiveState(state)) {\r\n    toArray(state);\r\n  if (!state1array.length) {\r\n    console.error(\"Empty array not allowed\");\r\n    throw new Error();\r\n  }\r\n  /*  state1 = Arraycomputed(\r\n      toArray(state),\r\n\r\n      callback\r\n    ); */\r\n  //   } else if (isArray(state)) {\r\n  //     state1array = state;\r\n  //     // state1 = Arraycomputed(state, callback);\r\n  //   } else {\r\n  //     state1array = Array.from(state);\r\n  //   }\r\n  const state1 = Arraycomputed(state1array, callback, setter);\r\n  //   usestste(state1);\r\n  return state1;\r\n}\r\ntype SetterFun = (v: any) => void;\r\nfunction Arraycomputed<T extends UnwrapedState>(\r\n  state: ReactiveState<T>[],\r\n  callback: CallbackReactiveState,\r\n  setter?: SetterFun\r\n): ReactiveState<any> {\r\n  const reactivestate = new ReactiveState();\r\n  const getter = () => {\r\n    //自动解包\r\n    const value = apply(callback, undefined, state.map(st => st.valueOf()));\r\n    // callback(...state.map(st => st.valueOf()));\r\n    const possiblevalue = isReactiveState(value) ? value.valueOf() : value;\r\n\r\n    if (isobject(possiblevalue) || isprimitive(possiblevalue)) {\r\n      return possiblevalue;\r\n    } else {\r\n      console.error(possiblevalue);\r\n      throw TypeError();\r\n    }\r\n  };\r\n\r\n  let memorized = getter();\r\n\r\n  // if (isFunction(memorized)) {\r\n  //   console.error(memorized);\r\n  //   throw new TypeError();\r\n  // }\r\n  defineProperty(reactivestate, \"value\", {\r\n    set: isfunction(setter) ? setter : undefined,\r\n    get: getter,\r\n    configurable: true\r\n  });\r\n\r\n  state.forEach(state => {\r\n    watch(state, () => {\r\n      let newvalue = getter();\r\n      if (newvalue !== memorized) {\r\n        reactivestate[dispatchsymbol]();\r\n\r\n        memorized = newvalue;\r\n      }\r\n      //\r\n    });\r\n  });\r\n\r\n  return getproperyreadproxy(reactivestate);\r\n}\r\n\r\n// export function getproperyreadproxy<T extends object>(a: T): T;\r\n\r\nexport { computed };\r\n","const Setprototype = Set.prototype;\r\nconst Mapprototype = Map.prototype;\r\nfunction ispromise(a: any): a is Promise<any> {\r\n  return a instanceof Promise;\r\n}\r\nfunction isdate(a: any): a is Date {\r\n  return a instanceof Date;\r\n}\r\nfunction isregexp(a: any): a is RegExp {\r\n  return a instanceof RegExp;\r\n}\r\nfunction isMap(a: any): a is Map<any, any> {\r\n  return a instanceof Map;\r\n}\r\nfunction isSet(a: any): a is Set<any> {\r\n  return a instanceof Set;\r\n}\r\nfunction isArray(a: any): a is any[] {\r\n  return Array.isArray(a);\r\n}\r\n\"use strict\";\r\nconst Reflect = window.Reflect;\r\nconst {\r\n  ownKeys,\r\n  deleteProperty,\r\n  apply,\r\n  construct,\r\n  defineProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  getPrototypeOf,\r\n  has,\r\n\r\n  set,\r\n  setPrototypeOf\r\n} = Reflect;\r\nfunction isobject(a: any): a is Exclude<object, Function> {\r\n  return typeof a === \"object\" && a !== null;\r\n}\r\nfunction isfunction(a: any): a is Function {\r\n  return typeof a === \"function\";\r\n}\r\n/* API\r\nfunction deepobserveagent(target: Object | Function, callback: callback): any;\r\n\r\ninterface callback {\r\n  (\r\n    target: Object | Function,\r\n    patharray: Array<any>,\r\n    newvalue: any,\r\n    oldvalue: any\r\n  ): void;\r\n}\r\n\r\n*/\r\ninterface Callback<\r\n  T extends object | Function | any[] | Set<any> | Map<any, any>\r\n> {\r\n  (target: T, patharray: Array<string>, newvalue: any, oldvalue: any): void;\r\n}\r\nfunction deepobserveaddpath<\r\n  T extends object | Function | any[] | Set<any> | Map<any, any>\r\n>(\r\n  target: T,\r\n  callback: Callback<T>,\r\n  patharray: Array<string> = [],\r\n  ancestor = target\r\n): T {\r\n  if (\r\n    !isfunction(callback)\r\n\r\n    //typeof callback !== \"function\"\r\n  ) {\r\n    console.error(callback);\r\n    console.error(\"observe callback invalid !\");\r\n    throw Error();\r\n\r\n    //throw Error(\"callback not defined!\");\r\n    // setTimeout(() => {\r\n    // }, 0);\r\n\r\n    // callback(t, k, v);\r\n  }\r\n\r\n  /* promise,date,regexp直接返回,不可代理,不可监测 */\r\n\r\n  if (ispromise(target) || isregexp(target) || isdate(target)) {\r\n    return target;\r\n  }\r\n  if (isfunction(target) || isobject(target)) {\r\n    //\r\n\r\n    let fakeobj: T;\r\n    if (isSet(target)) {\r\n      fakeobj = new Set([...target]) as any;\r\n      set(fakeobj, \"add\", (value: any) => {\r\n        Setprototype.add.call(target, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n\r\n        return Setprototype.add.call(fakeobj, value);\r\n      });\r\n      set(fakeobj, \"delete\", (value: any) => {\r\n        Setprototype.delete.call(target, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Setprototype.delete.call(fakeobj, value);\r\n      });\r\n      set(fakeobj, \"clear\", () => {\r\n        Setprototype.clear.call(target);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Setprototype.clear.call(fakeobj);\r\n      });\r\n      //   fakeobj.add = () => {};\r\n    } else if (isMap(target)) {\r\n      fakeobj = new Map([...target]) as any;\r\n      set(fakeobj, \"clear\", () => {\r\n        Mapprototype.clear.call(target);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Mapprototype.clear.call(fakeobj);\r\n      });\r\n      set(fakeobj, \"set\", (key: any, value: any) => {\r\n        Mapprototype.set.call(target, key, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Mapprototype.set.call(fakeobj, key, value);\r\n      });\r\n      set(fakeobj, \"delete\", (value: any) => {\r\n        Mapprototype.delete.call(target, value);\r\n        callback(ancestor, patharray, undefined, undefined);\r\n        return Mapprototype.delete.call(fakeobj, value);\r\n      });\r\n    } else if (isArray(target)) {\r\n      fakeobj = [] as T;\r\n      /* VM462:1 Uncaught TypeError: 'getOwnPropertyDescriptor' on proxy: trap returned descriptor for property 'length' that is incompatible with the existing property in the proxy target\r\n    at Function.getOwnPropertyDescriptors (<anonymous>)\r\n    at <anonymous>:1:8 */\r\n    } else if (isfunction(target)) {\r\n      fakeobj = (() => {}) as T;\r\n    } else {\r\n      fakeobj = {} as T;\r\n    }\r\n    if (!isSet(target) && !isMap(target)) {\r\n      setPrototypeOf(fakeobj, null);\r\n    }\r\n    // return (fakeobj => {\r\n    return new Proxy(fakeobj, {\r\n      defineProperty(t, p, a) {\r\n        callback(\r\n          ancestor,\r\n          [...patharray, String(p)],\r\n          //属性描述符的value或者getter\r\n          has(a, \"value\") ? a.value : isfunction(a.get) ? a.get() : undefined,\r\n          get(target, p)\r\n        );\r\n        return defineProperty(target, p, a);\r\n      },\r\n      deleteProperty(t, p) {\r\n        callback(\r\n          ancestor,\r\n          [...patharray, String(p)],\r\n          undefined,\r\n          get(target, p)\r\n\r\n          //target[p]\r\n        );\r\n        return deleteProperty(target, p);\r\n      },\r\n      ownKeys(/*  t*/) {\r\n        return ownKeys(target);\r\n      },\r\n      has(t, p) {\r\n        return has(target, p);\r\n      },\r\n      getPrototypeOf(/* t */) {\r\n        return getPrototypeOf(target);\r\n      },\r\n      setPrototypeOf(t, v) {\r\n        return setPrototypeOf(target, v);\r\n      },\r\n      construct(t, argumentslist) {\r\n        if (\r\n          isfunction(target)\r\n          //typeof target === \"function\"\r\n        ) {\r\n          return construct(target, argumentslist);\r\n        }\r\n      },\r\n      apply(t, thisarg, argarray) {\r\n        /* index.ts:153 Uncaught TypeError: Method Set.prototype.values called on incompatible receiver [object Object] */\r\n        if (isfunction(target)) {\r\n          /*  if (isSet(thisarg) || isMap(thisarg)) {\r\n            const result = apply(target, thisarg, argarray);\r\n            if (\r\n              target === Setprototype.delete ||\r\n              target === Setprototype.add ||\r\n              target === Setprototype.clear ||\r\n              (target === Mapprototype.set ||\r\n                target === Mapprototype.clear ||\r\n                target === Mapprototype.delete)\r\n            ) {\r\n              callback(ancestor, patharray, undefined, undefined);\r\n            }\r\n\r\n            return result;\r\n          } else { */\r\n          return apply(target, thisarg, argarray);\r\n        }\r\n        //   debugger;\r\n        // }\r\n      },\r\n      /* TypeError: 'get' on proxy: property 'prototype' is a read-only and non-configurable data property on the proxy target but the proxy did not return its actual value (expected '[object Symbol]' but got '[object Object]') */\r\n      getOwnPropertyDescriptor(t, k) {\r\n        var descripter = getOwnPropertyDescriptor(target, k);\r\n        if (isArray(target) && k === \"length\") {\r\n          return descripter;\r\n        } else {\r\n          if (descripter) {\r\n            descripter.configurable = true;\r\n            return descripter;\r\n          } else {\r\n            return;\r\n          }\r\n        }\r\n      },\r\n      //   return {\r\n      //     ...getOwnPropertyDescriptor(t, k),\r\n      //     ...{ configurable: true, writable: true }\r\n      //   };\r\n      // },\r\n\r\n      /* \r\n          https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor\r\n          如果下列不变量被违反，代理将抛出一个 TypeError：\r\n  \r\n  getOwnPropertyDescriptor 必须返回一个 object 或 undefined。\r\n  如果属性作为目标对象的不可配置的属性存在，则该属性无法报告为不存在。\r\n  如果属性作为目标对象的属性存在，并且目标对象不可扩展，则该属性无法报告为不存在。\r\n  如果属性不存在作为目标对象的属性，并且目标对象不可扩展，则不能将其报告为存在。\r\n  属性不能被报告为不可配置，如果它不作为目标对象的自身属性存在，或者作为目标对象的可配置的属性存在。\r\n  Object.getOwnPropertyDescriptor（target）的结果可以使用 Object.defineProperty 应用于目标对象，也不会抛出异常。 */\r\n\r\n      /* https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/set\r\n  \r\n  如果违背以下的约束条件，proxy会抛出一个TypeError:\r\n  \r\n  若目标属性是不可写及不可配置的，则不能改变它的值。\r\n  如果目标属性没有配置存储方法，即set方法是undefined的，则不能设置它的值。\r\n  在严格模式下，若set方法返回false，则会抛出一个 TypeError 异常。\r\n  */\r\n      set(t, k, v) {\r\n        // console.log(\"set\", [t, k, v]);\r\n        if (\r\n          isfunction(callback)\r\n          //typeof callback === \"function\"\r\n        ) {\r\n          //throw Error(\"callback not defined!\");\r\n          callback(\r\n            ancestor,\r\n            [...patharray, String(k)] /* patharray.concat(k) */,\r\n            v,\r\n            get(target, k)\r\n            // target[k]\r\n          );\r\n        }\r\n\r\n        return set(target, k, v);\r\n        // return true;\r\n        /* Uncaught TypeError: 'set' on proxy: trap returned truish for property 'prototype' which exists in the proxy target as a non-configurable and non-writable data property with a different value */\r\n      },\r\n\r\n      /* \r\n          https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get\r\n          如果违背了以下的约束，proxy会抛出 TypeError:\r\n  \r\n  如果要访问的目标属性是不可写以及不可配置的，则返回的值必须与该目标属性的值相同。\r\n  如果要访问的目标属性没有配置访问方法，即get方法是undefined的，则返回值必须为undefined。 */\r\n      get(t, k) {\r\n        // console.log(\"get\", [t, k]);\r\n        var value = get(target, k);\r\n\r\n        if (isfunction(value) && (isSet(target) || isMap(target))) {\r\n          return get(fakeobj, k).bind(fakeobj);\r\n        }\r\n        if (isfunction(value) || isobject(value)) {\r\n          // var descripter = getOwnPropertyDescriptor(t, k);\r\n          // /* descripter  可能是undefined */\r\n          // if (\r\n          //   descripter &&\r\n          //   descripter.writable === false &&\r\n          //   descripter.configurable === false\r\n          // ) {\r\n          //   console.warn(\r\n          //     `无法代理此属性!\\n如果要访问的目标属性是不可写以及不可配置的，\\n则返回的值必须与该目标属性的值相同。\\n`,\r\n          //     [t, k, value]\r\n          //   );\r\n          //   return value;\r\n          // } else {\r\n          return deepobserveaddpath(\r\n            value,\r\n            callback,\r\n            [...patharray, String(k)],\r\n            //  patharray.concat(k),\r\n            target\r\n          );\r\n          // }\r\n        } else {\r\n          return value;\r\n        }\r\n      }\r\n    });\r\n    // })(fakeobj);\r\n  } else {\r\n    return target;\r\n  }\r\n}\r\nexport default function observedeepagent<\r\n  T extends object | Function | any[] | Set<any> | Map<any, any>\r\n>(target: T, callback: Callback<T>): T {\r\n  if (\r\n    !isfunction(callback)\r\n    //typeof callback !== \"function\"\r\n  ) {\r\n    console.error(callback);\r\n    console.error(\"observe callback  invalid function !\");\r\n    throw Error();\r\n\r\n    //throw Error(\"callback not defined!\");\r\n    // setTimeout(() => {\r\n    // }, 0);\r\n\r\n    // callback(t, k, v);\r\n  }\r\n  if (\r\n    !isfunction(Proxy)\r\n    //typeof Proxy !== \"function\"\r\n  ) {\r\n    console.error(\"Proxy unsupported!\");\r\n    throw Error();\r\n\r\n    //setTimeout(() => {\r\n\r\n    // }, 0);\r\n    // return target;\r\n  }\r\n\r\n  // else\r\n  if (isfunction(target) || isobject(target)) {\r\n    return deepobserveaddpath(target, callback /*, [], target*/);\r\n  } else {\r\n    return target;\r\n  }\r\n}\r\n","// import deepobserve from \"deep-observe-agent-proxy\";\r\nimport { set } from \"../UtilTools/reflect\";\r\nimport { isfunction, isobject, isprimitive } from \"../UtilTools/util\";\r\nimport { getproperyreadproxy } from \"./getproperyread-proxy\";\r\n// import { getproperyreadproxy } from \"./computed\";\r\nimport handleobjectstate from \"./handle-object-state\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  invalid_primitive_or_object_state,\r\n  // textnodesymbol,\r\n  isReactiveState\r\n} from \"./ReactiveState\";\r\nimport { UnwrapedState } from \"./watch\";\r\nexport const set_prototype = Set.prototype;\r\n\r\nexport default function<T extends UnwrapedState>(\r\n  init: ReactiveState<T>\r\n): ReactiveState<T>;\r\nexport default function<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | undefined\r\n): ReactiveState<T>;\r\nexport default function<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | ReactiveState<T> | undefined\r\n): ReactiveState<T> {\r\n  /* 收集组件内部创建的 ReactiveState*/\r\n  const state: ReactiveState<T> = createstate(init as any) as ReactiveState<T>;\r\n  //   usestste(state);\r\n  return state;\r\n}\r\n\r\nfunction createstate<T extends UnwrapedState>(\r\n  init: ReactiveState<T>\r\n): ReactiveState<T>;\r\nfunction createstate<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | undefined\r\n): ReactiveState<T>;\r\n\r\nfunction createstate<T extends UnwrapedState>(\r\n  init: Exclude<T, ReactiveState<any>> | ReactiveState<T> | undefined\r\n) {\r\n  /*   if (!(isprimitive(init) || isobject(init) || isReactiveState(init))) {\r\n    console.error(init);\r\n    console.error(invalid_primitive_or_object_state);\r\n    throw TypeError();\r\n  } */\r\n  // /*   const inittype = isfunction(init)\r\n  //     ? \"function\"\r\n  //     : isprimitive(init)\r\n  //     ? \"primitive\"\r\n  //     : /* isobject(init)\r\n  //     ? \"object\" */\r\n  //       /* : */ void 0; */\r\n  if (isprimitive(init) || isfunction(init)) {\r\n    return getproperyreadproxy(\r\n      new Proxy(new ReactiveState(init), {\r\n        defineProperty() {\r\n          return false;\r\n        },\r\n        deleteProperty() {\r\n          return false;\r\n        },\r\n        set(target, key, value) {\r\n          /*  if (key === textnodesymbol) {\r\n          return set(target, key, value);\r\n        } */\r\n\r\n          /* 若初始值函数,则只能赋值函数 */\r\n          if (\r\n            key === \"value\" &&\r\n            ((isprimitive(value) && isprimitive(init)) ||\r\n              (isfunction(value) && isfunction(init)))\r\n          ) {\r\n            if (target[key] !== value) {\r\n              /* 如果相同则不触发事件 */\r\n              set(target, key, value);\r\n              target[dispatchsymbol]();\r\n            }\r\n            return true;\r\n          } else {\r\n            console.error(value);\r\n            console.error(init);\r\n            console.error(invalid_primitive_or_object_state);\r\n            throw TypeError();\r\n            // return false;\r\n          }\r\n        },\r\n        setPrototypeOf() {\r\n          return false;\r\n        }\r\n      })\r\n    );\r\n  } else if (\r\n    isReactiveState(init)\r\n    // init instanceof ReactiveState\r\n  ) {\r\n    // 如果init是个 ReactiveState，则对其解包，并生成新的 ReactiveState\r\n    return createstate(init.valueOf() as any);\r\n  } else if (isobject(init)) {\r\n    //如果在 ReactiveState属性中包含 ReactiveState，则转换成语法糖\r\n    //ReactiveState1=createstate( {aaaaa:ReactiveState2})\r\n    //\r\n    // else {\r\n    //   console.error(init);\r\n    //console.error(invalid_primitive_or_object_state)\r\n    //  throw TypeError();\r\n    //throw TypeError(\"invalid State\");\r\n    // }\r\n    return handleobjectstate(init);\r\n  } else {\r\n    throw Error();\r\n  }\r\n}\r\n\r\n// /*\r\n// let initobj=init\r\n// const containReactiveState=(isplainobject(init))&&Object.values(init).map(a=>isReactiveState(a)).includes(true)\r\n// const state_entries=Object.entries(init).filter(([key,a])=>isReactiveState(a))\r\n\r\n// if(\r\n// containReactiveState\r\n// ){\r\n\r\n// initobj={...init}\r\n\r\n// state_entries\r\n// .forEach(\r\n// ([key,state])=>{\r\n\r\n// defineProperty(initobj,key,{\r\n// enumerable:true,\r\n// get(){\r\n\r\n// return state.valueOf()\r\n\r\n// },\r\n// configurable: true\r\n\r\n// })\r\n\r\n// })\r\n\r\n// }\r\n// let reactive\r\n// =new ReactiveState(\r\n\r\n// initobj\r\n\r\n// )\r\n\r\n// if(containReactiveState){\r\n// state_entries.forEach(\r\n// ([key,state])=>{\r\n\r\n// watch(state,()=>{\r\n\r\n// reactive[dispatchsymbol](String(key));\r\n\r\n// })\r\n// }\r\n// )\r\n// }\r\n\r\n//     return new Proxy(\r\n// reactive\r\n\r\n// , {\r\n//     ownKeys(target) {\r\n//     return Array.from(\r\n//       new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n//     );\r\n//   }\r\n//   ,\r\n//   setPrototypeOf() {\r\n//     return false;\r\n//   },\r\n//       defineProperty() {\r\n//         return false;\r\n//       },\r\n//       getOwnPropertyDescriptor(target, key) {\r\n//         const myvalue = get(target, \"value\");\r\n\r\n//         const descripter =\r\n//           getOwnPropertyDescriptor(target, key) ||\r\n//           getOwnPropertyDescriptor(myvalue, key);\r\n//         if (descripter) {\r\n//           descripter.configurable = true;\r\n//         }\r\n\r\n//         return descripter;\r\n//       },\r\n//       deleteProperty(target, key) {\r\n//         const myvalue = get(target, \"value\");\r\n//         if (has(myvalue, key)) {\r\n//           deleteProperty(myvalue, key);\r\n//           target[dispatchsymbol](String(key));\r\n//           return true;\r\n//         } else {\r\n//           return true;\r\n//         }\r\n//       },\r\n//       has(target, key) {\r\n//         const myvalue = get(target, \"value\");\r\n//         return has(target, key) || has(myvalue, key);\r\n//       },\r\n//       get(target, key) {\r\n//         const value = get(target, \"value\");\r\n\r\n//         if (\r\n//           key === \"value\" &&\r\n//           (isarray(value)  || isplainobject(value))\r\n//         ) {\r\n//           return deepobserve(get(target, key), (_target_, patharray) => {\r\n//             target[dispatchsymbol](patharray[0]);\r\n//           });\r\n//         } else if (has(target, key)) {\r\n//           return get(target, key);\r\n//         } else if (has(value, key)) {\r\n//           if (isSet(value) ) {\r\n//             const myvalue = value;\r\n//             if (key === \"add\") {\r\n//               return (add: any) => {\r\n//                 if (!set_prototype.has.call(myvalue, add)) {\r\n//                   const returnvalue = set_prototype[key].call(myvalue, add);\r\n//                   target[dispatchsymbol]();\r\n//                   return returnvalue;\r\n//                 }\r\n//               };\r\n//             } else if (key === \"delete\") {\r\n//               return (dele: any) => {\r\n//                 if (\r\n// set_prototype.has.call(myvalue, dele)) {\r\n//                   const returnvalue = set_prototype[key].call(myvalue, dele);\r\n//                   target[dispatchsymbol]();\r\n//                   return returnvalue;\r\n//                 }\r\n//               }\r\n// else if (key === \"clear\") {\r\n//               return () => {\r\n//                 if (value.length) {\r\n//                   const returnvalue = set_prototype[key].call(myvalue);\r\n//                   target[dispatchsymbol]();\r\n//                   return returnvalue;\r\n//                 }\r\n//               }\r\n// else {\r\n\r\n// return  get(value, key)\r\n// }\r\n\r\n//             }\r\n//           } else {\r\n// //只深度观察array和plainobject\r\n// if(\r\n// (isarray(value)  || isplainobject(value))\r\n// ){\r\n// return deepobserve(get(value, key), () => {\r\n//               target[dispatchsymbol](String(key));\r\n//             });\r\n// }\r\n// else{\r\n// return get(value, key)\r\n// }\r\n\r\n//           }\r\n\r\n//           /*  */\r\n//         }\r\n//     }},\r\n\r\n//     set(target, key, value)\r\n//      {\r\n\r\n// if(isReactiveState(value)){\r\n// //如果遇到 isReactiveState则自动解包\r\n// value=value.valueOf()\r\n\r\n// }\r\n//       /*   if (key === textnodesymbol) {\r\n//         return set(target, key, value);\r\n//       } */\r\n//       const myvalue = get(target, \"value\");\r\n//       if (key === \"value\" && isobject(value)) {\r\n//         // if (target[key] !== value) {\r\n//         set(target, key, value);\r\n//         target[dispatchsymbol]();\r\n\r\n//         // }\r\n//         return true;\r\n//       } else if (!has(target, key)) {\r\n//         set(myvalue, key, value);\r\n//         target[dispatchsymbol](String(key));\r\n\r\n//         //\r\n//       } else if (key === \"length\") {\r\n//         set(myvalue, key, value);\r\n//         target[dispatchsymbol](key);\r\n//       } else {\r\n//         return false;\r\n//       }\r\n//       return true;\r\n\r\n//     }\r\n\r\n// }) */\r\n","import deepobserve from \"@masx200/deep-observe-agent-proxy\";\r\nimport { set_prototype } from \"./create-state\";\r\nimport ReactiveState, {\r\n  dispatchsymbol,\r\n  invalid_primitive_or_object_state,\r\n  isReactiveState\r\n} from \"./ReactiveState\";\r\nimport {\r\n  defineProperty,\r\n  deleteProperty,\r\n  get,\r\n  getOwnPropertyDescriptor,\r\n  has,\r\n  ownKeys,\r\n  set\r\n} from \"../UtilTools/reflect\";\r\nimport {\r\n  isArray,\r\n  isarray,\r\n  isobject,\r\n  isplainobject,\r\n  isSet,\r\n  issymbol,\r\n  isfunction\r\n} from \"../UtilTools/util\";\r\nimport { watch } from \"./watch\";\r\n\r\nexport default function(init: object): ReactiveState<object> {\r\n  const reactive: ReactiveState<object> = new ReactiveState(init);\r\n\r\n  let initobj = init;\r\n  const containReactiveState =\r\n    isplainobject(init) && Object.values(init).some(a => isReactiveState(a));\r\n  const state_entries = Object.entries(init).filter(e => {\r\n    const a = e[1];\r\n    return isReactiveState(a);\r\n  });\r\n  if (containReactiveState) {\r\n    initobj = Object.assign({}, init);\r\n    // initobj = { ...init };\r\n    state_entries.forEach(([key, state]) => {\r\n      defineProperty(initobj, key, {\r\n        enumerable: true,\r\n        get() {\r\n          return state.valueOf();\r\n        },\r\n        set: nvalue => {\r\n          state.value = nvalue;\r\n        },\r\n        configurable: true\r\n      });\r\n    });\r\n  }\r\n  //   const inittype = isfunction(init)\r\n  //   ? \"function\"\r\n  //   : isprimitive(init)\r\n  //   ? \"primitive\"\r\n  //   : /* isobject(init)\r\n  //   ? \"object\" */\r\n  //     /* : */ void 0;\r\n  if (containReactiveState) {\r\n    state_entries.forEach(([key, state]) => {\r\n      watch(state, () => {\r\n        reactive[dispatchsymbol](String(key));\r\n      });\r\n    });\r\n    // console.log(reactive);\r\n  }\r\n  reactive.value = initobj;\r\n\r\n  const objproxyhandler: ProxyHandler<object> = {};\r\n  objproxyhandler.ownKeys = target => {\r\n    return Array.from(\r\n      new Set([...ownKeys(target), ...ownKeys(get(target, \"value\"))])\r\n    );\r\n  };\r\n  objproxyhandler.setPrototypeOf = () => {\r\n    return false;\r\n  };\r\n  objproxyhandler.defineProperty = () => {\r\n    return false;\r\n  };\r\n  objproxyhandler.getOwnPropertyDescriptor = (\r\n    target: ReactiveState<object>,\r\n    key\r\n  ) => {\r\n    //如果是symbol属性返回undefined\r\n    if (issymbol(key)) {\r\n      return;\r\n    }\r\n    const myvalue = get(target, \"value\");\r\n\r\n    const descripter =\r\n      getOwnPropertyDescriptor(target, key) ||\r\n      getOwnPropertyDescriptor(myvalue, key);\r\n    if (descripter) {\r\n      descripter.configurable = true;\r\n    }\r\n\r\n    return descripter;\r\n  };\r\n  objproxyhandler.deleteProperty = (target: ReactiveState<object>, key) => {\r\n    const myvalue = get(target, \"value\");\r\n    if (has(myvalue, key)) {\r\n      deleteProperty(myvalue, key);\r\n      target[dispatchsymbol](String(key));\r\n      return true;\r\n    } else {\r\n      return true;\r\n    }\r\n  };\r\n  objproxyhandler.has = (target: ReactiveState<object>, key) => {\r\n    const myvalue = get(target, \"value\");\r\n    return has(target, key) || has(myvalue, key);\r\n  };\r\n  objproxyhandler.get = (target: ReactiveState<object>, key) => {\r\n    const value = get(target, \"value\");\r\n    const deepflage = isarray(value) || isplainobject(value);\r\n    if (key === \"value\" && deepflage) {\r\n      return deepobserve(get(target, key), (_target_, patharray) => {\r\n        target[dispatchsymbol](patharray[0]);\r\n      });\r\n    } else if (has(target, key)) {\r\n      return get(target, key);\r\n    } else if (has(value, key)) {\r\n      const resultvalue = get(value, key);\r\n      if (isSet(value)) {\r\n        if (key === \"add\" || key === \"clear\" || key === \"delete\") {\r\n          switch (key) {\r\n            case \"add\": {\r\n              return ((add: any) => {\r\n                if (!set_prototype.has.call(value, add)) {\r\n                  const returnvalue = set_prototype[key].call(value, add);\r\n                  target[dispatchsymbol]();\r\n                  return returnvalue;\r\n                }\r\n                return;\r\n              }).bind(value);\r\n            }\r\n            // break;\r\n            case \"delete\": {\r\n              return ((dele: any) => {\r\n                if (set_prototype.has.call(value, dele)) {\r\n                  const returnvalue = set_prototype[key].call(value, dele);\r\n                  target[dispatchsymbol]();\r\n                  return returnvalue;\r\n                }\r\n                return;\r\n              }).bind(value);\r\n            }\r\n            // break;\r\n            case \"clear\": {\r\n              return (() => {\r\n                if (value.size) {\r\n                  const returnvalue = set_prototype[key].call(value);\r\n                  target[dispatchsymbol]();\r\n                  return returnvalue;\r\n                }\r\n                return;\r\n              }).bind(value);\r\n            }\r\n            // break;\r\n          }\r\n        } else {\r\n          /* VM1933:1 Uncaught TypeError: Method Set.prototype.values called on incompatible receiver [object Object] */\r\n          return isfunction(resultvalue)\r\n            ? resultvalue.bind(value)\r\n            : resultvalue;\r\n        }\r\n      } else if (\r\n        deepflage &&\r\n        (isarray(resultvalue) || isplainobject(resultvalue))\r\n      ) {\r\n        return deepobserve(resultvalue, () => {\r\n          target[dispatchsymbol](String(key));\r\n        });\r\n      } else {\r\n        return resultvalue;\r\n      }\r\n    }\r\n  };\r\n  objproxyhandler.set = (target: ReactiveState<object>, key, value) => {\r\n    if (isReactiveState(value)) {\r\n      //如果遇到 isReactiveState则自动解包\r\n      value = value.valueOf();\r\n    }\r\n    const myvalue = get(target, \"value\");\r\n    /* 若初始值数组,则只能赋值数组 */\r\n    if (\r\n      key === \"value\" &&\r\n      isobject(value) &&\r\n      ((isArray(init) && isarray(value)) || (!isArray(init) && !isarray(value)))\r\n    ) {\r\n      if (target[key] !== value) {\r\n        set(target, key, value);\r\n        target[dispatchsymbol]();\r\n      }\r\n      return true;\r\n    } else if (!has(target, key)) {\r\n      if (myvalue[key] !== value) {\r\n        set(myvalue, key, value);\r\n        target[dispatchsymbol](String(key));\r\n      }\r\n      return true;\r\n      //\r\n    } else {\r\n      console.error(value);\r\n      console.error(init);\r\n      console.error(invalid_primitive_or_object_state);\r\n      throw TypeError();\r\n      //   return false;\r\n    }\r\n    // return true;\r\n  };\r\n  return new Proxy(\r\n    reactive,\r\n\r\n    objproxyhandler\r\n  ) as ReactiveState<object>;\r\n}\r\n","import createeleattr from \"@masx200/dom-element-attribute-agent-proxy\";\r\nimport { asserttype } from \"src/asserttype\";\r\nimport { setimmediate } from \"src/UtilTools/setimmediate\";\r\nimport createElement from \"../CreateElement/create-element\";\r\nimport Virtualdom, { isVirtualdom } from \"../CreateElement/VirtualElement\";\r\nimport mount from \"../MountElement/mount-real-element\";\r\nimport computed from \"../Reactivity/computed\";\r\nimport createstate from \"../Reactivity/create-state\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { appendchild, getchildren, removeElement } from \"../UtilTools/dom\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport { isArray, isfunction, isSet } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  attributeChangedCallback,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\n// import { VaildVDom } from \"./conditon\";\r\nimport { Htmlelementconstructor } from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nexport { ListMap };\r\nexport default ListMap;\r\nconst listvalueattr = Symbol(\"listvalueattr\");\r\n// const listlengthsymbol = Symbol(\"listlength\");\r\nconst listinnervdom = Symbol(\"listinnervdom\");\r\nconst listinnerelement = Symbol(\"listinnerelement\");\r\n/* 不需要中间缓存了 */\r\n// const cached_vdom_symbol = Symbol(\"cached_vdom\");\r\nconst cached_realele = Symbol(\"cached_realele\");\r\nfunction ListMap(\r\n  list: any[] | Set<any> | ReactiveState<any[] | Set<any>>,\r\n  mapfun: (value: ReactiveState<any>, index: number) => Virtualdom<any>\r\n): Virtualdom<Htmlelementconstructor> {\r\n  if (!isArray(list) && !isSet(list) && !isReactiveState(list)) {\r\n    console.error(list);\r\n    throw new TypeError();\r\n  }\r\n  if (!isfunction(mapfun)) {\r\n    console.error(mapfun);\r\n    throw new TypeError();\r\n  }\r\n\r\n  const ITEMfactory = (value: ReactiveState<any>, index: number) => {\r\n    const possiblevdom = mapfun(value, index);\r\n    asserttype(isVirtualdom(possiblevdom));\r\n    return possiblevdom;\r\n  };\r\n  function indextovdom(index: number, thiscom: ListMap) {\r\n    /* 只要缓存从index到element就够了,不需要中间缓存了 */\r\n    // index => {\r\n    /* const cached_vdom1 = get(thiscom[cached_vdom_symbol], index);\r\n    if (cached_vdom1) {\r\n      return cached_vdom1;\r\n    } else { */\r\n    const vdom = ITEMfactory(\r\n      computed(thiscom[listvalueattr], v => (v as any[])[index] as any),\r\n\r\n      index\r\n    );\r\n    //   set(thiscom[cached_vdom_symbol], index, vdom);\r\n    return vdom;\r\n    // }\r\n    //   }\r\n  }\r\n  //   const itemclass = createComponent(\r\n  //     Object.assign(\r\n  //       (\r\n  //         props: Record<string, ReactiveState<any>>,\r\n  //         children: [(0 | undefined)?]\r\n  //       ) => {\r\n  //         const { value: propvalue /* , index: propindex */ } = props as {\r\n  //           value: ReactiveState<any>;\r\n  //           //   index: ReactiveState<any>;\r\n  //         };\r\n  //         // const myprops = {propvalue,}\r\n  //         const value = propvalue; //myprops.value;\r\n  //         const [propindex = 0] = children;\r\n  //         const index = Number(propindex); //myprops.index.valueOf() as number;\r\n  //         return mapfun(value, index);\r\n  //       },\r\n  //       { defaultProps: { /*  index: 0, */ value: undefined } }\r\n  //     ) as Custom\r\n  //     //,/* {defaultProps:{\r\n\r\n  //     //  value\r\n  //     // }} */\r\n  //   );\r\n  /* 没有必要创建一个class */\r\n  //   const itemtagname = RandomDefineCustomElement(itemclass);\r\n  //   const ITEMfactory = (value: ReactiveState<any>, index: number) =>\r\n  //     createElement(itemclass, { value }, index);\r\n  //   console.log(ITEMfactory);\r\n  class ListMap extends AttrChange {\r\n    // /* constructor() {\r\n    //   super();\r\n    //   /*    const defaultProps = get(this.constructor, \"defaultProps\");\r\n    //   // this.constructor[\"defaultProps\"];\r\n    //   const attrs: Record<string, any> = createeleattragentreadwrite(this);\r\n    //   //   const props = {};\r\n    //   if (isobject(defaultProps)) {\r\n    //     Object.assign(attrs, defaultProps);\r\n    //     // Object.assign(props, this.constructor[\"defaultProps\"]);\r\n    //   } */\r\n    // } */\r\n    static defaultProps = { value: [] };\r\n    // [cached_vdom_symbol]: Map<number, Virtualdom<any>> = new Map();\r\n    [cached_realele]: Map<number, Element> = new Map();\r\n    [listvalueattr] = createstate([]);\r\n    // [listlengthsymbol]: number;\r\n    [listinnerelement]: Array<Element | Node>;\r\n    [listinnervdom]: Array<Virtualdom<any>>; //Virtualdom<Htmlelementconstructor>[];\r\n    static [componentsymbol] = componentsymbol;\r\n    [readysymbol] = false;\r\n    [attributeChangedCallback](name: string) {\r\n      if (this[readysymbol]) {\r\n        if (name === \"value\") {\r\n          const attrs = createeleattr(this);\r\n          const value = attrs[\"value\"];\r\n\r\n          if (!isArray(value)) {\r\n            console.log(value);\r\n            throw new TypeError();\r\n          }\r\n          // this[listlengthsymbol] = value.length;\r\n          /* 状态变化时同步一次 */\r\n          set(this[listvalueattr], \"value\", value);\r\n          //  [] = ;\r\n          const domchildren = getchildren(this);\r\n          const newlength = value.length;\r\n          const oldlength = domchildren.length;\r\n          if (newlength > oldlength) {\r\n            const numindexs = Array(newlength)\r\n              .fill(undefined)\r\n              .map((v, i) => i)\r\n              .slice(oldlength);\r\n\r\n            // const vdomstoadd: Array<Virtualdom<any>> = numindexs.map();\r\n            const realelementstoadd: Element[] = numindexs.map(index => {\r\n              //   const index = i + oldlength;\r\n              //   const index = Number(vdom.children[0]);\r\n\r\n              //   const index = vdom.props.index;\r\n\r\n              const cached_element = get(this[cached_realele], index);\r\n              /* 直接从缓存中获取element */\r\n              if (cached_element) {\r\n                return cached_element;\r\n              } else {\r\n                const vdom = indextovdom(index, this);\r\n                const element = render(vdom);\r\n                set(this[cached_realele], index, element);\r\n                return element;\r\n              }\r\n            });\r\n            /* this[listinnervdom].push(...vdomstoadd);\r\n            this[listinnerelement].push(...realelementstoadd); */\r\n            realelementstoadd.forEach(element => appendchild(this, element));\r\n          } else if (newlength < oldlength) {\r\n            /* 把旧的清除掉 */\r\n            /*  this[listinnervdom] = this[listinnervdom].slice(0, newlength);\r\n            this[listinnerelement] = this[listinnerelement].slice(0, newlength); */\r\n            getchildren(this)\r\n              .slice(newlength)\r\n              .forEach(element => removeElement(element));\r\n          }\r\n        }\r\n      }\r\n    }\r\n    disconnectedCallback() {\r\n      //   onunmounted(this);\r\n      //   super.disconnectedCallback();\r\n\r\n      setimmediate(() => {\r\n        disconnectedCallback(this);\r\n        /* if (itemtagname) {\r\n          querySelectorAll(itemtagname).forEach(e => removeNode(e));\r\n        } */\r\n      });\r\n    }\r\n    [firstinstalledcallback]() {\r\n      const attrs = createeleattr(this);\r\n      const value: any[] = attrs[\"value\"];\r\n\r\n      if (!isArray(value)) {\r\n        console.log(value);\r\n        throw new TypeError();\r\n      }\r\n      /* 挂载时同步一次 */\r\n      // this[listvalueattr][\"value\"] = value;\r\n      set(this[listvalueattr], \"value\", value);\r\n      this[listinnervdom] = value.map((v, index) =>\r\n        ITEMfactory(\r\n          computed(this[listvalueattr], v => (v as any[])[index] as any),\r\n\r\n          index\r\n        )\r\n      );\r\n      this[listinnerelement] = render(this[listinnervdom]);\r\n      // /*   Object.entries(this[listinnervdom]).forEach(([key, value]) => {\r\n      //     /*  this[cached_vdom_symbol]已经改成Map类型了*/\r\n      //     set(this[cached_vdom_symbol], key, value);\r\n      //   }); */\r\n      Object.entries(this[listinnerelement]).forEach(([key, value]) => {\r\n        /* this[cached_realele] 已经改成Map类型了\r\n         */\r\n        set(this[cached_realele], Number(key), value);\r\n      });\r\n      //   Object.assign(this[cached_vdom_symbol], this[listinnervdom]);\r\n      //   Object.assign(this[cached_realele], this[listinnerelement]);\r\n      mount(this[listinnerelement], this);\r\n\r\n      /* 清除不使用的变量引用,垃圾回收 */\r\n      this[listinnerelement] = [];\r\n      this[listinnervdom] = [];\r\n    }\r\n    connectedCallback() {\r\n      /*   if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n\r\n       \r\n        // this[listlengthsymbol] = value.length;\r\n      } */\r\n      //   onmounted(this);\r\n      connectedCallback(this);\r\n    }\r\n  }\r\n  return createElement(ListMap, { value: list });\r\n}\r\n","export function asserttype(con: boolean) :asserts con{\r\n  if (!con) {\r\n    throw new TypeError();\r\n  }\r\n}\r\n","import { setimmediate } from \"src/UtilTools/setimmediate\";\r\nimport { h } from \"../CreateElement/create-element\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\nimport { Custom } from \"../CustomClass/customclass\";\r\n// import { isclassextendsHTMLElement } from \"../CustomElement/create-costum-elemet\";\r\nimport { mountrealelement } from \"../MountElement/mount-real-element\";\r\nimport ReactiveState, { isReactiveState } from \"../Reactivity/ReactiveState\";\r\nimport { CancelWatchfun, watch } from \"../Reactivity/watch\";\r\nimport render from \"../RenderVirtual/render-vdom-to-real\";\r\nimport { isfunction } from \"../UtilTools/util\";\r\nimport {\r\n  AttrChange,\r\n  connectedCallback,\r\n  disconnectedCallback,\r\n  firstinstalledcallback\r\n} from \"./attr-change\";\r\nimport { autocreateclass, Htmlelementconstructor } from \"./createComponent\";\r\nimport { componentsymbol } from \"./iscomponent\";\r\nimport { readysymbol } from \"./readysymbol\";\r\nconst cancel_watch_symbol = Symbol(\"cancel_watch\");\r\nconst cached_class_element = Symbol(\"cached_class_element\");\r\nconst switch_mount_symbol = Symbol(\"switch_mount\");\r\n// const current_element_class = Symbol(\"current_element_class\");\r\nexport { Switchable };\r\nfunction Switchable(\r\n  funstate: ReactiveState<Htmlelementconstructor | Custom>\r\n): Virtualdom<Htmlelementconstructor> {\r\n  if (!isReactiveState(funstate)) {\r\n    console.error(funstate);\r\n    throw new TypeError();\r\n  }\r\n  class Switchable extends AttrChange {\r\n    // [current_element_class]: Htmlelementconstructor;\r\n    [cached_class_element] = new WeakMap<Htmlelementconstructor, Element>();\r\n    disconnectedCallback() {\r\n      //   onunmounted(this);\r\n      //   super.disconnectedCallback();\r\n      setimmediate(() => {\r\n        disconnectedCallback(this);\r\n        if (isfunction(this[cancel_watch_symbol])) {\r\n          this[cancel_watch_symbol]();\r\n        }\r\n      });\r\n    }\r\n    [cancel_watch_symbol]: CancelWatchfun;\r\n    static [componentsymbol] = componentsymbol;\r\n    [readysymbol] = false;\r\n    [switch_mount_symbol](eleclass: Custom | Htmlelementconstructor) {\r\n      eleclass = autocreateclass(eleclass);\r\n      /*  if (!isclassextendsHTMLElement(eleclass)) {\r\n        console.error(eleclass);\r\n        throw new TypeError();\r\n      } */\r\n      //   this[current_element_class] = eleclass;\r\n      const eleme = this[cached_class_element].get(eleclass);\r\n      if (eleme) {\r\n        mountrealelement(eleme, this);\r\n        // return;\r\n      } else {\r\n        const elementreal = render(h(eleclass));\r\n\r\n        this[cached_class_element].set(eleclass, elementreal);\r\n        mountrealelement(elementreal, this);\r\n        // return;\r\n      }\r\n    }\r\n    [firstinstalledcallback]() {\r\n      const callmountswitch = () => {\r\n        this[switch_mount_symbol](funstate.valueOf() as\r\n          | Custom\r\n          | Htmlelementconstructor);\r\n      };\r\n      callmountswitch();\r\n      this[cancel_watch_symbol] = watch(funstate, () => {\r\n        callmountswitch();\r\n      });\r\n    }\r\n    connectedCallback() {\r\n      connectedCallback(this);\r\n      /* if (!this[readysymbol]) {\r\n        this[readysymbol] = true;\r\n      } */\r\n      //   onmounted(this);\r\n    }\r\n  }\r\n  return h(Switchable);\r\n}\r\nexport default Switchable;\r\n","interface Ref<T = any | undefined> {\r\n  value: T | undefined;\r\n}\r\n\r\nexport default function createRef<T = any | undefined>(value?: T): Ref<T> {\r\n  return { value };\r\n}\r\n","var n=function(t,r,u,e){for(var p=1;p<r.length;p++){var s=r[p],h=\"number\"==typeof s?u[s]:s,a=r[++p];1===a?e[0]=h:3===a?e[1]=Object.assign(e[1]||{},h):5===a?(e[1]=e[1]||{})[r[++p]]=h:6===a?e[1][r[++p]]+=h+\"\":e.push(a?t.apply(null,n(t,h,u,[\"\",null])):h)}return e},t=function(n){for(var t,r,u=1,e=\"\",p=\"\",s=[0],h=function(n){1===u&&(n||(e=e.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g,\"\")))?s.push(n||e,0):3===u&&(n||e)?(s.push(n||e,1),u=2):2===u&&\"...\"===e&&n?s.push(n,3):2===u&&e&&!n?s.push(!0,5,e):u>=5&&((e||!n&&5===u)&&(s.push(e,u,r),u=6),n&&(s.push(n,u,r),u=6)),e=\"\"},a=0;a<n.length;a++){a&&(1===u&&h(),h(a));for(var f=0;f<n[a].length;f++)t=n[a][f],1===u?\"<\"===t?(h(),s=[s],u=3):e+=t:4===u?\"--\"===e&&\">\"===t?(u=1,e=\"\"):e=t+e[0]:p?t===p?p=\"\":e+=t:'\"'===t||\"'\"===t?p=t:\">\"===t?(h(),u=1):u&&(\"=\"===t?(u=5,r=e,e=\"\"):\"/\"===t&&(u<5||\">\"===n[a][f+1])?(h(),3===u&&(s=s[0]),u=s,(s=s[0]).push(u,2),u=0):\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t?(h(),u=2):e+=t),3===u&&\"!--\"===e&&(u=4,s=s[0])}return h(),s},r=\"function\"==typeof Map,u=r?new Map:{},e=r?function(n){var r=u.get(n);return r||u.set(n,r=t(n)),r}:function(n){for(var r=\"\",e=0;e<n.length;e++)r+=n[e].length+\"-\"+n[e];return u[r]||(u[r]=t(n))};export default function(t){var r=n(this,e(t),arguments,[]);return r.length>1?r:r[0]}\n","import { invalid_ReactiveState } from \"../AttributeClass/conditon\";\r\nimport { querySelectorAll } from \"../UtilTools/dom\";\r\nimport directives from \"./extend-directive\";\r\nimport { invalid_Virtualdom } from \"../MountElement/MountElement\";\r\nimport ReactiveState, {\r\n  // ReactiveState,\r\n  isReactiveState\r\n} from \"../Reactivity/ReactiveState\";\r\nimport { get, set } from \"../UtilTools/reflect\";\r\nimport { toArray } from \"../UtilTools/toArray\";\r\nimport Virtualdom from \"../CreateElement/VirtualElement\";\r\ndirectives({\r\n  value(value, element, vdom) {\r\n    model(\r\n      [\"input\", \"textarea\", \"select\"],\r\n      \"value\",\r\n      \"value\",\r\n      [\"change\", \"input\"],\r\n      value,\r\n      vdom\r\n    );\r\n  },\r\n  checked(value, element, vdom) {\r\n    model([\"input\"], \"checked\", \"checked\", [\"change\"], value, vdom);\r\n\r\n    /* 对于name相同的input,radio,单选框,如果一个改变,其他全都要触发change事件 */\r\n    const eventname = \"click\";\r\n    const origin = toArray(vdom.onevent[eventname]);\r\n    const eventsarray = origin;\r\n    const dispatchallsamename: EventListener = (event: Event) => {\r\n      const inputelement = event.target as HTMLInputElement;\r\n      const name = (event.target as HTMLInputElement).name;\r\n      if (name) {\r\n        querySelectorAll(`input[name=${name}]`)\r\n          /* 通知其他inputelement */\r\n          .filter(ele => ele !== inputelement)\r\n\r\n          .forEach(element => {\r\n            element.dispatchEvent(new Event(\"change\"));\r\n          });\r\n      }\r\n    };\r\n\r\n    set(\r\n      vdom.onevent,\r\n      eventname,\r\n      toArray([...eventsarray, dispatchallsamename]).filter(Boolean)\r\n    );\r\n  }\r\n});\r\nfunction model(\r\n  types: string[],\r\n  bindattribute: string,\r\n  domprop: string,\r\n  eventnames: string[],\r\n  value: ReactiveState<any>,\r\n  vdom: Virtualdom<any>\r\n) {\r\n  if (!isReactiveState(value)) {\r\n    console.error(value);\r\n    console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n    throw TypeError();\r\n  }\r\n  if (types.includes(vdom.type)) {\r\n    // const vdom = virtualdom;\r\n    set(vdom.bindattr, bindattribute, value);\r\n    /*  [\r\n      // vdom.bindattr[\"checked\"] = value;\r\n      \"change\",\r\n      \"input\"\r\n    ]. */\r\n\r\n    eventnames.forEach(eventname => {\r\n      const origin = vdom.onevent[eventname];\r\n\r\n      const eventsarray = toArray(origin);\r\n\r\n      set(\r\n        vdom.onevent,\r\n        eventname,\r\n        toArray([\r\n          ...eventsarray,\r\n\r\n          (e: any) => {\r\n            return (value.value = get(e.target, domprop));\r\n          }\r\n        ]).filter(Boolean)\r\n      );\r\n    });\r\n  } else {\r\n    console.error(vdom);\r\n    console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n    throw TypeError();\r\n  }\r\n}\r\n\r\n/* directives({\r\n  value(_element: Element, value: ReactiveState<any>, vdom: Virtualdom<any>) {\r\n    // console.log(vdom);\r\n    if (\r\n      isReactiveState(value) &&\r\n      //   value instanceof ReactiveState\r\n\r\n      (vdom.type === \"input\" ||\r\n        vdom.type === \"textarea\" ||\r\n        vdom.type === \"select\")\r\n    ) {\r\n      vdom.bindattr[\"value\"] = value;\r\n      [\"change\", \"input\"].forEach(eventname => {\r\n        const origin = vdom.onevent[eventname];\r\n\r\n        const eventsarray = toArray(origin);\r\n\r\n        set(\r\n          vdom.onevent,\r\n          eventname,\r\n          [\r\n            ...eventsarray,\r\n\r\n            (e: any) => {\r\n              return (value.value = e.target.value);\r\n            }\r\n          ].filter(Boolean)\r\n        );\r\n      });\r\n    } else {\r\n      console.log(_element);\r\n      console.error(value);\r\n      console.error(vdom);\r\n      console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n      throw TypeError();\r\n    }\r\n  }\r\n});\r\ndirectives({\r\n  checked(_element: Element, value: ReactiveState<any>, vdom: Virtualdom<any>) {\r\n    // console.log(vdom);\r\n    if (\r\n      isReactiveState(value) &&\r\n      //   value instanceof ReactiveState\r\n\r\n      vdom.type === \"input\"\r\n    ) {\r\n      vdom.bindattr[\"checked\"] = value;\r\n      [\"change\", \"input\"].forEach(eventname => {\r\n        const origin = vdom.onevent[eventname];\r\n\r\n        const eventsarray = toArray(origin);\r\n\r\n        set(\r\n          vdom.onevent,\r\n          eventname,\r\n          [\r\n            ...eventsarray,\r\n\r\n            (e: any) => {\r\n              return (value.value = e.target.checked);\r\n            }\r\n          ].filter(Boolean)\r\n        );\r\n      });\r\n    } else {\r\n      console.log(_element);\r\n      console.error(value);\r\n      console.error(vdom);\r\n      console.error(invalid_ReactiveState + invalid_Virtualdom);\r\n      throw TypeError();\r\n      //throw TypeError(invalid_ReactiveState + invalid_Virtualdom);\r\n    }\r\n  }\r\n}); */\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  watch,\r\n  computed,\r\n  createComponent,\r\n  createElement,\r\n  //   createElement,\r\n  createState,\r\n  h,\r\n  MountElement,\r\n  useMounted,\r\n  useUnMounted\r\n} from \"./mvvm-view\";\r\nconsole.log([h, createElement]);\r\nfunction useMousePosition() {\r\n  const x = createState(0);\r\n  const y = createState(0);\r\n\r\n  function update(e) {\r\n    x.value = e.pageX;\r\n    y.value = e.pageY;\r\n  }\r\n\r\n  useMounted(() => {\r\n    window.addEventListener(\"mousemove\", update);\r\n  });\r\n\r\n  useUnMounted(() => {\r\n    window.removeEventListener(\"mousemove\", update);\r\n  });\r\n\r\n  return { x, y };\r\n}\r\n\r\nconst mycomapp = createComponent(() => {\r\n  const { x, y } = useMousePosition();\r\n  const plus = computed(x, x => {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n    // @ts-ignore\r\n    return x + 100;\r\n  });\r\n  // other logic...\r\n\r\n  const multi = computed([x, y], (x, y) => {\r\n    // eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n    // @ts-ignore\r\n    return x * y;\r\n  });\r\n  //   console.log(plus, multi);\r\n  let count = 0;\r\n  const cancelwatch = watch([x, y, multi, plus], (...args) => {\r\n    if (count === 0) {\r\n      console.time(\"watchmousemove50\");\r\n    }\r\n    console.log(count, args);\r\n    count++;\r\n    if (count > 50) {\r\n      cancelwatch();\r\n      console.timeEnd(\"watchmousemove50\");\r\n    }\r\n  });\r\n  return (\r\n    <div>\r\n      <h3> 鼠标位置</h3>\r\n      <h2>x:{x}</h2>\r\n\r\n      <h1>y:{y}</h1>\r\n      <p>x+100 是{plus}</p>\r\n      <p>x*y 是{multi}</p>\r\n    </div>\r\n  );\r\n});\r\nmycomapp.css = `\r\n*{font-size:80px !important;}\r\np{color:blue !important;}\r\n`;\r\nvar vdom = createElement(mycomapp);\r\n// MountElement(vdom, document.getElementById(\"root\"));\r\ndocument.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n","/* eslint-disable @typescript-eslint/ban-ts-ignore */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  Condition,\r\n  ListMap,\r\n  // @ts-ignore\r\n  computed,\r\n  // @ts-ignore\r\n  createElement,\r\n  createRef,\r\n  createState,\r\n  // @ts-ignore\r\n  h,\r\n  MountElement,\r\n  // @ts-ignore\r\n  watch\r\n} from \"./mvvm-view\";\r\nconst refarray = [];\r\nconst liststate = createState(\r\n  Array(10)\r\n    .fill(undefined)\r\n    // @ts-ignore\r\n    .map((v, i) => i)\r\n);\r\nwatch(liststate, a => console.dir([liststate, a]));\r\nconst testlistvdom = (\r\n  <div>\r\n    <button\r\n      _text=\"push\"\r\n      onclick={() => {\r\n        // @ts-ignore\r\n        liststate.push(Math.random());\r\n      }}\r\n    />\r\n    <button\r\n      _text=\"pop\"\r\n      onclick={() => {\r\n        // @ts-ignore\r\n        liststate.pop();\r\n      }}\r\n    />\r\n\r\n    <button\r\n      _text=\"shift\"\r\n      onclick={() => {\r\n        // @ts-ignore\r\n        liststate.shift();\r\n      }}\r\n    />\r\n    <button\r\n      _text=\"unshift\"\r\n      onclick={() => {\r\n        // @ts-ignore\r\n        liststate.unshift(Math.random());\r\n      }}\r\n    />\r\n    {ListMap(liststate, (value, index) => (\r\n      <div\r\n        _ref={ele => {\r\n          // @ts-ignore\r\n          refarray.length = liststate.length;\r\n          refarray[index] = ele;\r\n        }}\r\n      >\r\n        {[\"item:\", \"value:\", value, \"index:\", index]}\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\nconst weathercondition = createState(true);\r\nconst vdom = [\r\n  Condition(weathercondition, testlistvdom),\r\n  <>\r\n    <button\r\n      onclick={() => {\r\n        weathercondition.value = !weathercondition.value;\r\n      }}\r\n    >\r\n      condition toggle\r\n    </button>\r\n  </>\r\n];\r\n\r\ndocument.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\nconsole.log(vdom, refarray, liststate);\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  createComponent,\r\n  createElement,\r\n  //   createElement,\r\n  createRef,\r\n  createState,\r\n  h,\r\n  html,\r\n  MountElement,\r\n  watch\r\n} from './mvvm-view';\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n// @ts-ignore\r\nimport modulecss from \"./main.b9c7ffd191cff11a9b96.css\";\r\nconsole.log([h, createElement]);\r\nconst mycomapp = createComponent(() => {\r\n  const inputpassword = createState(\"\");\r\n  const inputref = createRef();\r\n  const inputref2 = createRef();\r\n  console.log(inputref2);\r\n  console.log(inputpassword);\r\n  watch(inputpassword, console.log);\r\n  const vdom = html`\r\n    <h1 style=\"padding-top: 127.6px;\">\r\n      <svg\r\n        style=\"\r\n      width: 100%;\r\n      height: 200px;\r\n  \"\r\n        class=\"octicon octicon-book\"\r\n        viewBox=\"0 0 16 16\"\r\n        version=\"1.1\"\r\n        width=\"16\"\r\n        height=\"16\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <path\r\n          fill-rule=\"evenodd\"\r\n          d=\"M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z\"\r\n        ></path></svg\r\n      ><svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 3046.7 875.7\"\r\n        style=\"\r\n      width: 100%;\r\n      height: 200px;\r\n  \"\r\n      >\r\n        <title>logo-on-dark-bg</title>\r\n        <rect Color=\"#FFF\" x=\"0\" y=\"0\" width=\"3046.7\" height=\"875.7\" />\r\n        <path\r\n          fill=\"#FFF\"\r\n          d=\"M387 0l387 218.9v437.9L387 875.7 0 656.8V218.9L387 0z\"\r\n        />\r\n        <path\r\n          fill=\"#8ED6FB\"\r\n          d=\"M704.9 641.7L399.8 814.3V679.9l190.1-104.6 115 66.4zm20.9-18.9V261.9l-111.6 64.5v232l111.6 64.4zM67.9 641.7L373 814.3V679.9L182.8 575.3 67.9 641.7zM47 622.8V261.9l111.6 64.5v232L47 622.8zm13.1-384.3L373 61.5v129.9L172.5 301.7l-1.6.9-110.8-64.1zm652.6 0l-312.9-177v129.9l200.5 110.2 1.6.9 110.8-64z\"\r\n        />\r\n        <path\r\n          fill=\"#1C78C0\"\r\n          d=\"M373 649.3L185.4 546.1V341.8L373 450.1v199.2zm26.8 0l187.6-103.1V341.8L399.8 450.1v199.2zM198.1 318.2l188.3-103.5 188.3 103.5-188.3 108.7-188.3-108.7z\"\r\n        />\r\n        <path\r\n          fill=\"#F5FAFA\"\r\n          d=\"M1164.3 576.3h82.5l84.1-280.2h-80.4l-49.8 198.8-53.1-198.8H1078l-53.6 198.8-49.3-198.8h-80.4l83.6 280.2h82.5l52-179.5 51.5 179.5zM1335.2 437c0 84.1 57.3 146.3 147.4 146.3 69.7 0 107.2-41.8 117.9-61.6l-48.8-37c-8 11.8-30 34.3-68.1 34.3-41.3 0-71.3-26.8-72.9-64.3H1608c.5-5.4.5-10.7.5-16.1 0-91.6-49.3-149.5-136.1-149.5-79.9 0-137.2 63.2-137.2 147.9zm77.7-30.6c3.2-32.1 25.7-56.8 60.6-56.8 33.8 0 58.4 22.5 60 56.8h-120.6zm223.5 169.9h69.7v-28.9c7.5 9.1 35.4 35.9 83.1 35.9 80.4 0 137.2-60.5 137.2-146.8 0-86.8-52.5-147.3-132.9-147.3-48.2 0-76.1 26.8-83.1 36.4V188.9h-73.9v387.4h-.1zm71.8-139.3c0-52.5 31.1-82.5 71.8-82.5 42.9 0 71.8 33.8 71.8 82.5 0 49.8-30 80.9-71.8 80.9-45 0-71.8-36.5-71.8-80.9zm247 239.5h73.9V547.3c7 9.1 34.8 35.9 83.1 35.9 80.4 0 132.9-60.5 132.9-147.3 0-85.7-56.8-146.8-137.2-146.8-47.7 0-75.6 26.8-83.1 36.4V296h-69.7v380.5h.1zm71.8-241.1c0-44.5 26.8-80.9 71.8-80.9 41.8 0 71.8 31.1 71.8 80.9 0 48.8-28.9 82.5-71.8 82.5-40.7 0-71.8-30-71.8-82.5zm231.5 54.1c0 58.9 48.2 93.8 105 93.8 32.2 0 53.6-9.6 68.1-25.2l4.8 18.2h65.4V398.9c0-62.7-26.8-109.8-116.8-109.8-42.9 0-85.2 16.1-110.4 33.2l27.9 50.4c20.9-10.7 46.6-19.8 74.5-19.8 32.7 0 50.9 16.6 50.9 41.3v18.2c-10.2-7-32.2-15.5-60.6-15.5-65.4-.1-108.8 37.4-108.8 92.6zm73.9-2.2c0-23 19.8-39.1 48.2-39.1s48.8 14.5 48.8 39.1c0 23.6-20.4 38.6-48.2 38.6s-48.8-15.5-48.8-38.6zm348.9 30.6c-46.6 0-79.8-33.8-79.8-81.4 0-45 29.5-82 77.2-82 31.6 0 53.1 15.5 65.4 26.8l20.9-62.2c-18.2-13.9-47.2-30-88.4-30-85.2 0-149 62.7-149 147.9s62.2 146.3 149.5 146.3c40.7 0 71.3-17.1 87.3-30l-19.8-60.5c-12.4 10.1-34.9 25.1-63.3 25.1zm110.9 58.4h73.9V431.6l93.8 144.7h86.8L2940.6 423l98.6-127h-83.1l-90 117.9v-225h-73.9v387.4z\"\r\n        />\r\n      </svg>\r\n    </h1>\r\n    <div>\r\n      <div>\r\n        <noscript>You need to enable JavaScript to run this app.</noscript>\r\n        <div id=\"root\">\r\n          <div>\r\n            <div class=\"container-fluid fixed-top\" id=\"my导航栏\">\r\n              <nav\r\n                class=\"navbar navbar-default navbar navbar-expand-sm bg-light navbar-light\"\r\n                role=\"navigation\"\r\n              >\r\n                <div>\r\n                  <a\r\n                    class=\"navbar-brand mui-btn mui-btn-primary mui-btn-outlined\"\r\n                    href=\"#/\"\r\n                    >masx200的\r\n                    <hr id=\"hidewidthless500\" />\r\n                    github主页</a\r\n                  ><button\r\n                    class=\"navbar-toggler\"\r\n                    type=\"button\"\r\n                    data-toggle=\"collapse\"\r\n                  >\r\n                    <span class=\"navbar-toggler-icon\"></span>\r\n                  </button>\r\n                </div>\r\n                <div\r\n                  class=\"collapse navbar-collapse\"\r\n                  id=\"example-navbar-collapse\"\r\n                  style=\"display: none;\"\r\n                >\r\n                  <ul class=\"nav navbar-nav\" id=\"allnavbar\">\r\n                    <li id=\"mynav1\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/react-home\"\r\n                        >基于REACT的主页</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/react-rssreader\"\r\n                        >rss阅读</a\r\n                      >\r\n                    </li>\r\n                    <li id=\"mynav2\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/react-about\"\r\n                        >关于REACT</a\r\n                      >\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/picalc\"\r\n                        >圆周率计算多线程</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/react-huami\"\r\n                        >花密网页版</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/decoder\"\r\n                        >JSfuck-and-hieroglyphy-Decoder</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/jsfuck\"\r\n                        >JSfuck-ENCODER</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/hieroglyphy\"\r\n                        >hieroglyphy-ENCODER</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/webpack-react-vue-spa-awesome-config\"\r\n                        >webpack-react-vue- 极速零配置的单页面 web\r\n                        应用打包工具</a\r\n                      >\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/IMPORTCJSAMDUMD动态异步加载\"\r\n                        >动态异步加载-commonjs和umd和amd模块库</a\r\n                      >\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/react-simple-global-state-store-hook\"\r\n                        >适用于React的极简全局状态管理库</a\r\n                      >\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/excellent-vscode-extensions-for-javascript\"\r\n                        >VScode的优秀扩展推荐</a\r\n                      >\r\n                    </li>\r\n                    <li class=\"nav-item\">\r\n                      <a\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        href=\"#/vue-simple-global-state-store-manager\"\r\n                        >适用于Vue的极简全局状态管理库</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        href=\"./my-vue-router-project/index.html\"\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        >基于vue的主页</a\r\n                      >\r\n                    </li>\r\n                    <li>\r\n                      <a\r\n                        href=\"./my-vue-router-project/index.html#/about\"\r\n                        class=\"nav-link mui-btn mui-btn-primary mui-btn-outlined\"\r\n                        >关于Vue</a\r\n                      >\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </nav>\r\n            </div>\r\n            <div class=\"container\" id=\"my主体\" style=\"padding-top: 127.6px;\">\r\n              <div class=\"hello flowerpassword\">\r\n                <h1>花密 不一样的密码管理工具</h1>\r\n\r\n                <div id=\"rong1\" class=\"container\" style=\"text-align: center;\">\r\n                  <div id=\"rong2\">\r\n                    <h2><span>1</span>输入</h2>\r\n                    <div id=\"input\">\r\n                      <p></p>\r\n                      <h3>记忆密码</h3>\r\n                      <p></p>\r\n                      <p>\r\n                        <input\r\n                          *ref=${inputref}\r\n                          @change=${e => console.log(e, inputref)}\r\n                          @input=${e => console.log(e)}\r\n                          id=\"password\"\r\n                          placeholder=\"输入密码\"\r\n                          name=\"password\"\r\n                          type=\"password\"\r\n                          tabindex=\"1\"\r\n                          class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 form-control\"\r\n                          value=\"\"\r\n                        />\r\n                      </p>\r\n                      <p></p>\r\n                      <span>+</span>\r\n                      <h3>区分代号</h3>\r\n                      <p></p>\r\n                      <p>\r\n                        <input\r\n                          *ref=${inputref2}\r\n                          *value=${inputpassword}\r\n                          @input=${e => console.log(e)}\r\n                          id=\"key\"\r\n                          placeholder=\"输入代号\"\r\n                          name=\"key\"\r\n                          type=\"text\"\r\n                          tabindex=\"2\"\r\n                          class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 form-control\"\r\n                          value=\"\"\r\n                        />\r\n                      </p>\r\n                    </div>\r\n                    <br />\r\n                    <p></p>\r\n                    <h2><span>2</span>获取</h2>\r\n                    <p></p>\r\n                    <div id=\"get\">\r\n                      <p id=\"tuijian\"></p>\r\n                      <p></p>\r\n                      <h3>最终密码</h3>\r\n                      <p></p>\r\n                      <span id=\"myhezi\"\r\n                        ><p>\r\n                          <input\r\n                            id=\"cod222222222222e16\"\r\n                            readonly=\"\"\r\n                            class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 snippet code16d form-control\"\r\n                            value=\"\"\r\n                          />\r\n                        </p>\r\n                        <br />\r\n                        <p>\r\n                          <button\r\n                            id=\"copycode16\"\r\n                            data-clipboard-target=\"#code16\"\r\n                            class=\"btn btn-lg btn copycode16d btn-info\"\r\n                            style=\"width: 100%;\"\r\n                          >\r\n                            点击复制\r\n                          </button>\r\n                        </p></span\r\n                      >\r\n                      <p>\r\n                        <span id=\"copyOK\" style=\"display: none;\"\r\n                          >√复制成功</span\r\n                        >\r\n                      </p>\r\n                      <p></p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <script\r\n          type=\"text/javascript\"\r\n          src=\"https://cdn.jsdelivr.net/gh/masx200/masx200.github.io@4.3.3/bundle.runtime~main.3a15bebb435b0d3fead6.js\"\r\n        ></script\r\n        ><script\r\n          type=\"text/javascript\"\r\n          src=\"https://cdn.jsdelivr.net/gh/masx200/masx200.github.io@4.3.3/chunk.vendors~main.f7c5ea92c1b78a8ff211.js\"\r\n        ></script\r\n        ><script\r\n          type=\"text/javascript\"\r\n          src=\"https://cdn.jsdelivr.net/gh/masx200/masx200.github.io@4.3.3/chunk.main.b9c7ffd191cff11a9b96.js\"\r\n        ></script>\r\n      </div>\r\n      <div contenteditable=${false}>\r\n        不可以编辑的区域\r\n      </div>\r\n      <div contenteditable>\r\n        可以编辑的区域\r\n      </div>\r\n    </div>\r\n    <h1>\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n        version=\"1.1\"\r\n        baseProfile=\"full\"\r\n        style=\"\r\n      width:600px;\r\n      height: 600px;\r\n  \"\r\n      >\r\n        <g fill-opacity=\"0.7\" stroke=\"black\" stroke-width=\"0.1cm\">\r\n          <circle\r\n            cx=\"6cm\"\r\n            cy=\"2cm\"\r\n            r=\"100\"\r\n            fill=\"red\"\r\n            transform=\"translate(0,50)\"\r\n          />\r\n          <circle\r\n            cx=\"6cm\"\r\n            cy=\"2cm\"\r\n            r=\"100\"\r\n            fill=\"blue\"\r\n            transform=\"translate(70,150)\"\r\n          />\r\n          <circle\r\n            cx=\"6cm\"\r\n            cy=\"2cm\"\r\n            r=\"100\"\r\n            fill=\"green\"\r\n            transform=\"translate(-70,150)\"\r\n          />\r\n        </g>\r\n      </svg>\r\n\r\n      <svg\r\n        style=\"\r\n      width: 100%;\r\n      height: 200px;\r\n  \"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        viewBox=\"0 0 3046.7 875.7\"\r\n      >\r\n        <title>logo-on-dark-bg</title>\r\n        <rect Color=\"#FFF\" x=\"0\" y=\"0\" width=\"3046.7\" height=\"875.7\" />\r\n        <path\r\n          fill=\"#FFF\"\r\n          d=\"M387 0l387 218.9v437.9L387 875.7 0 656.8V218.9L387 0z\"\r\n        />\r\n        <path\r\n          fill=\"#8ED6FB\"\r\n          d=\"M704.9 641.7L399.8 814.3V679.9l190.1-104.6 115 66.4zm20.9-18.9V261.9l-111.6 64.5v232l111.6 64.4zM67.9 641.7L373 814.3V679.9L182.8 575.3 67.9 641.7zM47 622.8V261.9l111.6 64.5v232L47 622.8zm13.1-384.3L373 61.5v129.9L172.5 301.7l-1.6.9-110.8-64.1zm652.6 0l-312.9-177v129.9l200.5 110.2 1.6.9 110.8-64z\"\r\n        />\r\n        <path\r\n          fill=\"#1C78C0\"\r\n          d=\"M373 649.3L185.4 546.1V341.8L373 450.1v199.2zm26.8 0l187.6-103.1V341.8L399.8 450.1v199.2zM198.1 318.2l188.3-103.5 188.3 103.5-188.3 108.7-188.3-108.7z\"\r\n        />\r\n        <path\r\n          fill=\"#F5FAFA\"\r\n          d=\"M1164.3 576.3h82.5l84.1-280.2h-80.4l-49.8 198.8-53.1-198.8H1078l-53.6 198.8-49.3-198.8h-80.4l83.6 280.2h82.5l52-179.5 51.5 179.5zM1335.2 437c0 84.1 57.3 146.3 147.4 146.3 69.7 0 107.2-41.8 117.9-61.6l-48.8-37c-8 11.8-30 34.3-68.1 34.3-41.3 0-71.3-26.8-72.9-64.3H1608c.5-5.4.5-10.7.5-16.1 0-91.6-49.3-149.5-136.1-149.5-79.9 0-137.2 63.2-137.2 147.9zm77.7-30.6c3.2-32.1 25.7-56.8 60.6-56.8 33.8 0 58.4 22.5 60 56.8h-120.6zm223.5 169.9h69.7v-28.9c7.5 9.1 35.4 35.9 83.1 35.9 80.4 0 137.2-60.5 137.2-146.8 0-86.8-52.5-147.3-132.9-147.3-48.2 0-76.1 26.8-83.1 36.4V188.9h-73.9v387.4h-.1zm71.8-139.3c0-52.5 31.1-82.5 71.8-82.5 42.9 0 71.8 33.8 71.8 82.5 0 49.8-30 80.9-71.8 80.9-45 0-71.8-36.5-71.8-80.9zm247 239.5h73.9V547.3c7 9.1 34.8 35.9 83.1 35.9 80.4 0 132.9-60.5 132.9-147.3 0-85.7-56.8-146.8-137.2-146.8-47.7 0-75.6 26.8-83.1 36.4V296h-69.7v380.5h.1zm71.8-241.1c0-44.5 26.8-80.9 71.8-80.9 41.8 0 71.8 31.1 71.8 80.9 0 48.8-28.9 82.5-71.8 82.5-40.7 0-71.8-30-71.8-82.5zm231.5 54.1c0 58.9 48.2 93.8 105 93.8 32.2 0 53.6-9.6 68.1-25.2l4.8 18.2h65.4V398.9c0-62.7-26.8-109.8-116.8-109.8-42.9 0-85.2 16.1-110.4 33.2l27.9 50.4c20.9-10.7 46.6-19.8 74.5-19.8 32.7 0 50.9 16.6 50.9 41.3v18.2c-10.2-7-32.2-15.5-60.6-15.5-65.4-.1-108.8 37.4-108.8 92.6zm73.9-2.2c0-23 19.8-39.1 48.2-39.1s48.8 14.5 48.8 39.1c0 23.6-20.4 38.6-48.2 38.6s-48.8-15.5-48.8-38.6zm348.9 30.6c-46.6 0-79.8-33.8-79.8-81.4 0-45 29.5-82 77.2-82 31.6 0 53.1 15.5 65.4 26.8l20.9-62.2c-18.2-13.9-47.2-30-88.4-30-85.2 0-149 62.7-149 147.9s62.2 146.3 149.5 146.3c40.7 0 71.3-17.1 87.3-30l-19.8-60.5c-12.4 10.1-34.9 25.1-63.3 25.1zm110.9 58.4h73.9V431.6l93.8 144.7h86.8L2940.6 423l98.6-127h-83.1l-90 117.9v-225h-73.9v387.4z\"\r\n        />\r\n      </svg>\r\n    </h1>\r\n  `;\r\n  console.log(vdom);\r\n  return vdom;\r\n  // MountElement(vdom, document.getElementById(\"root\"));\r\n});\r\nmycomapp.css = modulecss;\r\nvar vdom = createElement(mycomapp);\r\nMountElement(vdom, document.getElementById(\"root\"));\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  createComponent,\r\n  createElement,\r\n  createState,\r\n  h,\r\n  //   createElement,\r\n  html,\r\n  MountElement,\r\n  watch\r\n} from './mvvm-view';\r\nconsole.log([h, createElement]);\r\nconst vdom = (\r\n  <select\r\n    onchange={e => console.log(e)}\r\n    style={{ textAlign: \"center\", fontSize: \"30px\", color: \"#65a4f0\" }}\r\n    value=\"94b92331-e2f4-40c6-90ee-80e203a4de3a\"\r\n    name=\"version_id\"\r\n    id=\"version_id\"\r\n    class=\"StyleSelectBox\"\r\n  >\r\n    <option value=\"0\">- Select version -</option>\r\n    <option value=\"94b92331-e2f4-40c6-90ee-80e203a4de3a\">\r\n      Windows 10 Insider Preview 18999.1 (vb_release) [arm64]\r\n    </option>\r\n    <option value=\"7268dbc9-dfe0-4947-af82-67f384e95cb6\">\r\n      Windows 10 Insider Preview 18999.1 (vb_release) [x64]\r\n    </option>\r\n    <option value=\"08f0d32e-c68a-46a8-b301-57e86b4e96e0\">\r\n      Windows 10 Insider Preview 18999.1 (vb_release) [x86]\r\n    </option>\r\n    <option value=\"9fa87c7f-75fa-4e5e-9ca3-1e19cb2c743f\">\r\n      Windows 10 Insider Preview 18995.1 (vb_release) [x64]\r\n    </option>\r\n    <option value=\"5173796c-11ac-47d7-9ed7-dbad6d5c9486\">\r\n      Windows 10 Insider Preview 18995.1 (vb_release) [x86]\r\n    </option>\r\n    <option value=\"4adf5f24-213a-472c-ae94-70f3cb81bade\">\r\n      Windows 10 Insider Preview 18995.1 (vb_release) [arm64]\r\n    </option>\r\n    <option value=\"9287fe5e-2cb3-4064-820f-3e336a3ddff4\">\r\n      Windows 10 Insider Preview 18990.1 (vb_release) [arm64]\r\n    </option>\r\n    <option value=\"5e420f0d-b3a5-424c-9b55-5c2cf939af14\">\r\n      Windows 10 Insider Preview 18990.1 (vb_release) [x86]\r\n    </option>\r\n    <option value=\"13e2104c-c98c-43b2-b232-9b2a4b5af2ac\">\r\n      Windows 10 Insider Preview 18990.1 (vb_release) [x64]\r\n    </option>\r\n  </select>\r\n);\r\n\r\nconst element = document.body.appendChild(\r\n  MountElement(vdom, document.createElement(\"div\"))\r\n);\r\nconsole.log([vdom, element]);\r\n","/* eslint-disable @typescript-eslint/ban-ts-ignore */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  createComponent,\r\n  createElement,\r\n  //   createElement,\r\n  createState,\r\n  h,\r\n  MountElement,\r\n  watch\r\n} from \"./mvvm-view\";\r\nconsole.log([h, createElement]);\r\nconst number = createState(10);\r\nfunction increment() {\r\n  // @ts-ignore\r\n  number.value++;\r\n}\r\nfunction decrement() {\r\n  // @ts-ignore\r\n  number.value--;\r\n}\r\nconst store = { number, increment, decrement };\r\nlet timer = setInterval(() => {\r\n  increment();\r\n}, 2000);\r\nsetTimeout(() => {\r\n  clearInterval(timer);\r\n}, 8000);\r\nconst mycomappclass = createComponent(() => {\r\n  watch(store.number, number => {\r\n    // console.trace();\r\n    console.log({ ...store }, number);\r\n  });\r\n  const vdom = (\r\n    <div>\r\n      <h3> 点击数字</h3>\r\n      <h2>number:{store.number}</h2>\r\n\r\n      <button onclick={store.increment}>increment</button>\r\n      <button onclick={store.decrement}>decrement</button>\r\n    </div>\r\n  );\r\n  return vdom;\r\n});\r\nlet vdom = [\r\n  createElement(mycomappclass),\r\n  createElement(mycomappclass),\r\n  createElement(mycomappclass)\r\n];\r\n\r\ndocument.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n\r\nsetTimeout(() => {\r\n  vdom.forEach(vdom => {\r\n    const element = vdom.element;\r\n    // element.parentNode.removeChild(element);\r\n    element.forEach(e => e.remove());\r\n  });\r\n  // @ts-ignore\r\n  number.value = -50;\r\n\r\n  vdom.forEach(vdom => {\r\n    const element = vdom.element;\r\n    // document.body.appendChild(element);\r\n    element.forEach(e => document.body.appendChild(e));\r\n  });\r\n  vdom = undefined;\r\n}, 5000);\r\n","/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  computed,\r\n  createElement,\r\n  createRef,\r\n  createState,\r\n  h,\r\n  MountElement,\r\n  watch\r\n} from \"./mvvm-view\";\r\nconsole.log([h, createElement]);\r\nconst lirefs = [];\r\n// console.log()\r\n// export{vdom}\r\nconst temp_ref = createRef();\r\nconst check = createState(false);\r\nconst check2 = createState(true);\r\nwatch(check2, a => console.log(a));\r\nconst check3 = createState(true);\r\nwatch(check3, a => console.log(a));\r\nconst check4 = createState(true);\r\nwatch(check4, a => console.log(a));\r\nconst notcheck = computed(\r\n  check,\r\n  a => !a,\r\n  v => {\r\n    // console.log(v);\r\n    console.log(notcheck, check, v);\r\n    // check3.value = v;\r\n    check.value = !v;\r\n  }\r\n);\r\nvar list = Array(10)\r\n  .fill(undefined)\r\n  .map((v, i) => i);\r\nwatch(check, a => console.log(a));\r\nwatch(notcheck, a => console.log(a));\r\nvar vdom = (\r\n  <>\r\n    <input type=\"radio\" _checked={check4} name=\"myname1\" />\r\n    <input type=\"radio\" _checked={check3} name=\"myname1\" />\r\n    <input type=\"radio\" _checked={check2} name=\"myname2\" />\r\n    <input type=\"radio\" _checked={check4} name=\"myname2\" />\r\n    {[\r\n      <input type=\"checkbox\" _checked={check} />,\r\n      <input type=\"checkbox\" _checked={notcheck} />,\r\n      <>\r\n        <ul>\r\n          {list.map((a, index) => (\r\n            <li\r\n              $ref={ele => {\r\n                lirefs[index] = ele;\r\n                lirefs.length = list.length;\r\n              }}\r\n            >\r\n              item{a}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <header\r\n          class=\"common-header fixed noborder floating\"\r\n          id=\"git-header-nav\"\r\n          _ref={temp_ref}\r\n        >\r\n          <div class=\"ui container\">\r\n            <div class=\"ui menu header-menu\">\r\n              <div class=\"git-nav-expand-bar\">\r\n                <i class=\"iconfont icon-mode-table\"></i>\r\n              </div>\r\n              <div class=\"gitee-nav__sidebar\">\r\n                <div class=\"gitee-nav__sidebar-container\">\r\n                  <div class=\"gitee-nav__sidebar-top\">\r\n                    <div class=\"gitee-nav__avatar-box\">\r\n                      <a href=\"/masx200\" onclick={e => e.preventDefault()}>\r\n                        <img\r\n                          alt=\"1081296_masx200\"\r\n                          class=\"ui avatar image masx200-avatar\"\r\n                          src=\"https://avatar.gitee.com/uploads/96/1081296_masx200.png?1566294318\"\r\n                        />\r\n                      </a>\r\n                    </div>\r\n                    <div class=\"gitee-nav__info-box\">\r\n                      <a href=\"/masx200\">masx200</a>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"gitee-nav__sidebar-middle\">\r\n                    <div class=\"gitee-nav__sidebar-list\">\r\n                      <ul>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/masx200\">\r\n                            <i class=\"iconfont icon-ic-dashboard\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">\r\n                              个人主页\r\n                            </span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/explore\">\r\n                            <i class=\"iconfont icon-ic-discover\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">\r\n                              开源软件\r\n                            </span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/gists\">\r\n                            <i class=\"iconfont icon-ic-gists1\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">\r\n                              代码片段\r\n                            </span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/enterprises\">\r\n                            <i class=\"iconfont icon-ic-enterprise\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">企业版</span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/education\">\r\n                            <i class=\"iconfont icon-ic-education\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">高校版</span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item split-line\"></li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/search\">\r\n                            <i class=\"iconfont icon-ic-search\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">搜索</span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/help\">\r\n                            <i class=\"iconfont icon-help-circle\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">\r\n                              帮助中心\r\n                            </span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/terms\">\r\n                            <i class=\"iconfont icon-file\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">\r\n                              使用条款\r\n                            </span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/about_us\">\r\n                            <i class=\"iconfont icon-issuepx\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">\r\n                              关于我们\r\n                            </span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/profile\">\r\n                            <i class=\"iconfont icon-edit\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">设置</span>\r\n                          </a>\r\n                        </li>\r\n                        <li class=\"gitee-nav__sidebar-item\">\r\n                          <a href=\"/logout\" data-method=\"delete\" rel=\"nofollow\">\r\n                            <i class=\"iconfont icon-ic-logout\"></i>\r\n                            <span class=\"gitee-nav__sidebar-name\">退出</span>\r\n                          </a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"gitee-nav__sidebar-bottom\">\r\n                    <div class=\"gitee-nav__sidebar-close-button\">\r\n                      <i class=\"fa fa-angle-double-left\"></i>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"item gitosc-logo\">\r\n                <a href=\"/\">\r\n                  <img\r\n                    class=\"ui inline image\"\r\n                    height=\"28\"\r\n                    src=\"https://gitee.com//logo.svg?20171024\"\r\n                    width=\"95\"\r\n                  />\r\n                  <img\r\n                    class=\"ui inline black image\"\r\n                    height=\"28\"\r\n                    src=\"https://gitee.com//logo-black.svg?20171024\"\r\n                    width=\"95\"\r\n                  />\r\n                </a>\r\n              </div>\r\n              <a href=\"/explore\" class=\"item \" title=\"开源软件\">\r\n                开源软件\r\n              </a>\r\n              <a href=\"/enterprises\" class=\"item \" title=\"企业版\">\r\n                企业版\r\n                <sup class=\"ui red label\">特惠</sup>\r\n              </a>\r\n              <a href=\"/education\" class=\"item \" title=\"高校版\">\r\n                高校版\r\n              </a>\r\n              <a\r\n                href=\"https://blog.gitee.com/\"\r\n                class=\"item\"\r\n                id=\"gitee-blog\"\r\n                target=\"_blank\"\r\n                title=\"博客\"\r\n              >\r\n                博客\r\n              </a>\r\n              <div class=\"dropdown item ui\" id=\"my-gitee-dropdown\" tabindex=\"0\">\r\n                <a href=\"/masx200/dashboard\">我的码云</a>\r\n                <i class=\"dropdown icon\"></i>\r\n                <div class=\"menu transition hidden\" tabindex=\"-1\">\r\n                  <div class=\"header user-projects\">\r\n                    <a\r\n                      href=\"/masx200/projects\"\r\n                      class=\"pull-right\"\r\n                      target=\"_blank\"\r\n                    >\r\n                      全部\r\n                    </a>\r\n                    仓库\r\n                    <span class=\"count\">(11)</span>\r\n                  </div>\r\n                  <a\r\n                    target=\"_blank\"\r\n                    href=\"/masx200/mvvm-reactive-view\"\r\n                    title=\"masx200/mvvm-reactive-view\"\r\n                    class=\"item\"\r\n                  >\r\n                    masx200/mvvm-reactive-view\r\n                  </a>\r\n                  <a\r\n                    target=\"_blank\"\r\n                    href=\"/masx200/webpack-react-vue-spa-awesome-config\"\r\n                    title=\"masx200/webpack-react-vue-spa-awesome-config\"\r\n                    class=\"item\"\r\n                  >\r\n                    masx200/webpack-react-vue-spa-awesome-config\r\n                  </a>\r\n                  <a\r\n                    target=\"_blank\"\r\n                    href=\"/masx200/custom-elements-random-define\"\r\n                    title=\"masx200/custom-elements-random-define\"\r\n                    class=\"item\"\r\n                  >\r\n                    masx200/custom-elements-random-define\r\n                  </a>\r\n                  <a\r\n                    target=\"_blank\"\r\n                    href=\"/masx200/importcjsamdumd\"\r\n                    title=\"masx200/importcjsamdumd\"\r\n                    class=\"item\"\r\n                  >\r\n                    masx200/importcjsamdumd\r\n                  </a>\r\n                  <a\r\n                    target=\"_blank\"\r\n                    href=\"/masx200/dom-element-attribute-agent-proxy\"\r\n                    title=\"masx200/dom-element-attribute-agent-proxy\"\r\n                    class=\"item\"\r\n                  >\r\n                    masx200/dom-element-attribute-agent-proxy\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class=\"center responsive-logo\">\r\n                <a href=\"/\">\r\n                  <img\r\n                    class=\"ui inline image\"\r\n                    height=\"24\"\r\n                    src=\"https://gitee.com//logo.svg?20171024\"\r\n                    width=\"85\"\r\n                  />\r\n                  <img\r\n                    class=\"ui inline black image\"\r\n                    height=\"24\"\r\n                    src=\"https://gitee.com//logo-black.svg?20171024\"\r\n                    width=\"85\"\r\n                  />\r\n                </a>\r\n              </div>\r\n              <div class=\"right menu userbar\" id=\"git-nav-user-bar\">\r\n                <div class=\"item git-nav-search-item\">\r\n                  <form\r\n                    accept-charset=\"UTF-8\"\r\n                    action=\"/search\"\r\n                    autocomplete=\"on\"\r\n                    data-text-filter=\"搜索格式不正确\"\r\n                    data-text-require=\"搜索关键字不能少于1个\"\r\n                    id=\"navbar-search-form\"\r\n                    method=\"get\"\r\n                  >\r\n                    <div style=\"margin:0;padding:0;display:inline\">\r\n                      <input name=\"utf8\" type=\"hidden\" value=\"✓\" />\r\n                    </div>\r\n                    <div class=\"ui mini fluid input\">\r\n                      <input\r\n                        id=\"navbar-search-input\"\r\n                        name=\"q\"\r\n                        placeholder=\"搜索项目、代码片段...\"\r\n                        type=\"text\"\r\n                        value=\"\"\r\n                      />\r\n                      <input\r\n                        id=\"navbar-search-type\"\r\n                        name=\"type\"\r\n                        type=\"hidden\"\r\n                      />\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n                <div\r\n                  class=\"item ui dropdown empty\"\r\n                  data-count-path=\"/notifications/unread_count\"\r\n                  data-enable=\"\"\r\n                  data-mark-notice-path=\"/notifications/mark\"\r\n                  id=\"notice-dropdown\"\r\n                  tabindex=\"0\"\r\n                >\r\n                  <a href=\"/notifications\" class=\"remind-button\">\r\n                    <i class=\"iconfont icon-remind\"></i>\r\n                    <div class=\"notice-count total\">1</div>\r\n                  </a>\r\n                  <div\r\n                    class=\"notice-dropdown-panel menu transition hidden\"\r\n                    tabindex=\"-1\"\r\n                    style=\"left: -165px;\"\r\n                  >\r\n                    <div class=\"notice-dropdown-panel-header\">\r\n                      <div\r\n                        class=\"tab\"\r\n                        data-data-path=\"/notifications/notices?scope=referer\"\r\n                        data-html-path=\"/notifications/referer\"\r\n                        data-scope=\"referer\"\r\n                      >\r\n                        <div class=\"content\">\r\n                          @ 我<div class=\"notice-count referer\"></div>\r\n                        </div>\r\n                      </div>\r\n                      <div\r\n                        class=\"tab active\"\r\n                        data-data-path=\"/notifications/notices?scope=infos\"\r\n                        data-html-path=\"/notifications/infos\"\r\n                        data-scope=\"infos\"\r\n                      >\r\n                        <div class=\"content\">\r\n                          通知\r\n                          <div class=\"notice-count infos\">1</div>\r\n                        </div>\r\n                      </div>\r\n                      <div\r\n                        class=\"tab\"\r\n                        data-data-path=\"/notifications/notices?scope=messages\"\r\n                        data-html-path=\"/notifications/messages\"\r\n                        data-scope=\"messages\"\r\n                      >\r\n                        <div class=\"content\">\r\n                          私信\r\n                          <div class=\"notice-count messages\"></div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"item notice-dropdown-panel-container\">\r\n                      <div class=\"ui dimmer over active\">\r\n                        <div class=\"ui loader\"></div>\r\n                      </div>\r\n                      <div class=\"notice-list\" style=\"min-height: auto;\">\r\n                        <a\r\n                          class=\"noti\"\r\n                          href=\"/masx200/mvvm-reactive-view\"\r\n                          target=\"_blank\"\r\n                          data-type=\"project\"\r\n                          data-id=\"50555275\"\r\n                        >\r\n                          <div class=\"title\">\r\n                            你的仓库 masx200/mvvm-reactive-view 已经从\r\n                            https://github.com/masx200/mvvm-reactive-view.git\r\n                            同步成功\r\n                          </div>\r\n                          <div class=\"meta\">\r\n                            <time class=\"timeago\">2小时前</time> ·{\" \"}\r\n                            <span class=\"namespace\">\r\n                              masx200/mvvm-reactive-view\r\n                            </span>\r\n                          </div>\r\n                        </a>\r\n                      </div>\r\n                      <div class=\"notice-dropdown-panel-blank\">\r\n                        暂没有新消息\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"notice-dropdown-panel-footer\">\r\n                      <div class=\"action\">\r\n                        <div class=\"side left\">\r\n                          <a href=\"javascript: void(0);\" class=\"mark-notices\">\r\n                            当前标记为已读\r\n                          </a>\r\n                        </div>\r\n                        <div class=\"side right\">\r\n                          <a\r\n                            href=\"/notifications/infos\"\r\n                            class=\"load-all\"\r\n                            target=\"_blank\"\r\n                          >\r\n                            查看全部\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div\r\n                  class=\"ui dropdown link item\"\r\n                  id=\"git-nav-create\"\r\n                  tabindex=\"0\"\r\n                >\r\n                  <i class=\"iconfont icon-add-thin\"></i>\r\n                  <div class=\"right menu\" tabindex=\"-1\">\r\n                    <a href=\"/projects/new\" class=\"item\">\r\n                      <i class=\"add square icon\"></i>\r\n                      新建仓库\r\n                    </a>\r\n                    <a href=\"/masx200/codes/new\" class=\"item\">\r\n                      <i class=\"code icon\"></i>\r\n                      发布代码片段\r\n                    </a>\r\n                    <a href=\"/organizations/new\" class=\"item\">\r\n                      <i class=\"group icon\"></i>\r\n                      创建组织\r\n                    </a>\r\n                    <a href=\"/enterprises/new\" class=\"item\">\r\n                      <i class=\"icon iconfont icon-enterprise\"></i>\r\n                      开通企业版\r\n                    </a>\r\n                    <a href=\"/projects/oauth_github\" class=\"item\">\r\n                      <i class=\"github icon\"></i>从 GitHub 导入仓库\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div class=\"ui dropdown item\" id=\"git-nav-user\" tabindex=\"0\">\r\n                  <img\r\n                    alt=\"1081296_masx200\"\r\n                    class=\"ui avatar image\"\r\n                    src=\"https://avatar.gitee.com/uploads/96/1081296_masx200.png!avatar30?1566294318\"\r\n                  />\r\n                  <i class=\"dropdown icon\"></i>\r\n                  <div class=\"right menu\" tabindex=\"-1\">\r\n                    <a href=\"/masx200\" class=\"item\">\r\n                      <i class=\"iconfont icon-ic-home\"></i>\r\n                      个人主页\r\n                    </a>\r\n                    <a href=\"/profile\" class=\"item\">\r\n                      <div class=\"mayun-icon my-ic-edit my-ic-edit-dims\"></div>\r\n                      设置\r\n                    </a>\r\n                    <div class=\"divider\"></div>\r\n                    <a href=\"/gists\" class=\"item\">\r\n                      <div class=\"iconfont icon-ic-gist\"></div>\r\n                      代码片段\r\n                    </a>\r\n                    <a\r\n                      href=\"https://gitee.com/help\"\r\n                      class=\"item\"\r\n                      target=\"_blank\"\r\n                    >\r\n                      <div class=\"mayun-icon my-ic-help my-ic-help-dims\"></div>\r\n                      帮助\r\n                    </a>\r\n                    <div class=\"divider\"></div>\r\n                    <a\r\n                      href=\"/logout\"\r\n                      class=\"item destroy-user-session\"\r\n                      data-method=\"delete\"\r\n                      rel=\"nofollow\"\r\n                    >\r\n                      <div class=\"mayun-icon my-ic-exit my-ic-exit-dims\"></div>\r\n                      退出\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <script></script>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n      </>\r\n    ]}\r\n  </>\r\n);\r\nconsole.log(vdom, temp_ref, lirefs);\r\ndocument.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n","// @ts-nocheck\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  Condition,\r\n  createElement,\r\n  //   createElement,\r\n  createRef,\r\n  createState,\r\n  h,\r\n  html,\r\n  MountElement,\r\n  watch\r\n} from './mvvm-view';\r\nconsole.log([h, createElement]);\r\n/* console.log([\r\n  Fragment,\r\n  createRef,\r\n  html,\r\n  MountElement,\r\n  h,\r\n  createElement,\r\n  createState,\r\n  watch,\r\n  Condition,\r\n  createComponent,\r\n  useMounted,\r\n  useUnMounted\r\n]); */\r\n// console.log(createElement(Fragment));\r\n(() => {\r\n  var mystate = createState(true);\r\n  //   watch(mystate, console.log);\r\n  console.log(\"mystatetest\", mystate);\r\n  var vdom = Condition(\r\n    mystate,\r\n    \"testtrue\",\r\n    createElement(\"div\", undefined, \"testfalese\")\r\n  );\r\n  var vdom2 = Condition(\r\n    mystate,\r\n    undefined,\r\n    createElement(\"div\", undefined, \"testwwwwwwwwwfalese\")\r\n  );\r\n  var vdom3 = Condition(\r\n    mystate,\r\n    createElement(\"div\", undefined, \"testwwwwwwwtrueeeeeeeeee\"),\r\n    undefined\r\n  );\r\n  console.log([vdom, vdom2, vdom3]);\r\n  document.body.appendChild(\r\n    MountElement([vdom, vdom2, vdom3], document.createElement(\"div\"))\r\n  );\r\n  var timer = setInterval(() => {\r\n    mystate.value = !mystate.value;\r\n    // setInterval(() => {\r\n    //   mystate.value = true;\r\n    // }, 1500);\r\n  }, 1000);\r\n  setTimeout(() => {\r\n    clearInterval(timer);\r\n  }, 10000);\r\n})();\r\n\r\n(() => {\r\n  const stylestate = createState({ display: \"block\", width: \"100%\" });\r\n  const inputref = createRef();\r\n  const state1 = createState(\"hello\");\r\n  const vdom = html`\r\n    <div style=${{ display: \"block\", width: \"100%\" }}>hello world!</div>\r\n    <input\r\n      style=\"width:100%\"\r\n      @input=${e => (state1.value = e.target.value)}\r\n      *ref=${inputref}\r\n      @change=${e => (state1.value = e.target.value)}\r\n      id=\"co11111111111de16\"\r\n      class=\"col-lg-12 col-md-12 col-sm-12 col-xs-12 snippet code16d form-control\"\r\n      value=${state1}\r\n    />\r\n    <h1 style=${stylestate}>mvvm-reactive-view</h1>\r\n    <button\r\n      @click=${() => {\r\n        stylestate.color = \"red\";\r\n      }}\r\n    >\r\n      red</button\r\n    ><button\r\n      @click=${() => {\r\n        stylestate.color = \"green\";\r\n      }}\r\n    >\r\n      green\r\n    </button>\r\n  `;\r\n  watch(stylestate, console.log);\r\n  watch(state1, console.log);\r\n  console.log(vdom);\r\n  MountElement(vdom, document.getElementById(\"app\"));\r\n})();\r\n\r\n// console.log(MountElement);\r\n// console.log(h);\r\n// console.log([].flat);\r\n\r\n// console.log(Object.fromEntries);\r\n// console.log(setImmediate);\r\n(() => {\r\n  const vdom2 = html`\r\n    <div *text=${\"<a>绑定textcontent</a>\"}></div>\r\n    <div *html=${\"<a>绑定innerhtml</a>\"}></div>\r\n  `;\r\n  console.log(vdom2);\r\n  document.body.appendChild(MountElement(vdom2, document.createElement(\"div\")));\r\n\r\n  const state1 = createState(\"<a>绑定textcontent</a>\");\r\n\r\n  const state2 = createState(\"<a>绑定innerhtml</a>\");\r\n  /* setInterval(() => {\r\n  state2.value = state2.value + \"qw\";\r\n  //   if (state2.value.length > 60) {\r\n  //     state2.value = \"\";\r\n  //   }\r\n  state1.value = state2.value;\r\n}, 2000); */\r\n  const vdom3 = html`\r\n  <textarea value=${state1} @input=${[\r\n    e => {\r\n      state1.value = e.target.value;\r\n    }\r\n  ]}></textarea>\r\n  <input value=${state2} style='width:100%' @change=${[\r\n    e => {\r\n      state2.value = e.target.value;\r\n    }\r\n  ]}  \r\n@input=${[\r\n    e => {\r\n      state2.value = e.target.value;\r\n    }\r\n  ]}\r\n></input>\r\n`;\r\n  console.log(vdom3);\r\n  // watch(state1, console.log);\r\n  // watch(state2, console.log);\r\n  document.body.appendChild(MountElement(vdom3, document.createElement(\"div\")));\r\n  //////////////////////\r\n  const state3 = createState(\"<a>绑定innerhtml</a>\");\r\n  const vdom4 = (\r\n    <>\r\n      <div _text={state3}></div>\r\n      <div _html={state3}></div>\r\n\r\n      <script> </script>\r\n    </>\r\n  );\r\n\r\n  // setInterval(() => {\r\n  //   state3.value = String(Math.random());\r\n  // }, 2000);\r\n  watch(state1, state => (state3.value = state));\r\n  watch(state2, state => (state1.value = state));\r\n  console.log(state3);\r\n  // watch(state3, console.log);\r\n  console.log(vdom4);\r\n  document.body.appendChild(MountElement(vdom4, document.createElement(\"div\")));\r\n\r\n  /////////////////////\r\n  const objstate = createState({ a: \"w\", 6: \"xxxxxxx\", tttttttt: \"true\" });\r\n  const objstate2 = createState(`{ a: \"w\", 6: \"xxxxxxx\", tttttttt: \"true\" }`);\r\n  // watch(objstate, console.log);\r\n  // watch(objstate2, console.log);\r\n  console.log(objstate);\r\n  setTimeout(() => {\r\n    //\r\n    objstate.length = 10;\r\n    objstate2.value = 2222222222222;\r\n    //   objstate.push(Math.random());\r\n    //   objstate.push(Math.random());\r\n  }, 2000);\r\n\r\n  const objstatearray = createState([\r\n    { a: \"w\", 6: \"xxxxxxx\", tttttttt: \"true\" },\r\n    1,\r\n    true,\r\n    \"test\"\r\n  ]);\r\n  const stylestate = createState({ display: \"block\", width: \"100%\" });\r\n\r\n  //\r\n  const classsetstate = createState(\r\n    new Set([\"xxxxxxx\", \"wwwwwww\", \"eeeeeeee\"])\r\n  );\r\n\r\n  console.log(\"classsetstate\", classsetstate);\r\n  watch(classsetstate, a => console.log(a));\r\n  setTimeout(() => {\r\n    classsetstate.add(\"vvvvvvvvvvv\");\r\n  }, 5000);\r\n  setTimeout(() => {\r\n    classsetstate.delete(\"eeeeeeee\");\r\n  }, 4000);\r\n\r\n  //\r\n\r\n  const vdomobj = html`\r\n    <div style=${{ display: \"block\", width: \"100%\" }}>${objstate2}</div>\r\n    <div style=${stylestate} class=${new Set([\"wwwwwww\", \"eeeeeeee\"])}>\r\n      ${objstatearray}\r\n    </div>\r\n    ${objstate}\r\n    <div style=${stylestate} class=${classsetstate} />\r\n  `;\r\n  document.body.appendChild(\r\n    MountElement(vdomobj, document.createElement(\"div\"))\r\n  );\r\n  console.log(vdomobj);\r\n\r\n  /* requestAnimationFrame(() => {\r\n  //   watch(objstatearray, console.log);\r\n}); */\r\n\r\n  requestAnimationFrame(() => {\r\n    objstatearray.unshift(Math.random());\r\n    //   objstate.sort();\r\n    objstatearray.push(\"qqqqqqqqq\");\r\n    //   objstatearray.push(Math.random());\r\n\r\n    objstatearray.unshift(Math.random());\r\n    //   objstatearray.sort();\r\n    objstatearray.push(\"qqqqqqqqq\");\r\n    objstatearray.length = 10;\r\n    objstatearray.push(Math.random());\r\n  });\r\n  console.log(objstatearray);\r\n  const timer = setInterval(() => {\r\n    objstate2.value += String(Math.random());\r\n  }, 1000);\r\n  setTimeout(() => {\r\n    clearInterval(timer);\r\n  }, 10000);\r\n  console.log([objstate2, createState(objstate2)]);\r\n  //   console.log(Object.getOwnPropertyDescriptors(objstatearray));\r\n  console.log(Object.entries(objstate));\r\n})();\r\n(() => {\r\n  var vdom = html`\r\n    <math>\r\n      <mrow>\r\n        <mrow>\r\n          <msup>\r\n            <mi>a</mi>\r\n            <mn>2</mn>\r\n          </msup>\r\n          <mo>+</mo>\r\n          <msup>\r\n            <mi>b</mi>\r\n            <mn>2</mn>\r\n          </msup>\r\n        </mrow>\r\n        <mo>=</mo>\r\n        <msup>\r\n          <mi>c</mi>\r\n          <mn>2</mn>\r\n        </msup>\r\n      </mrow>\r\n    </math>\r\n  `;\r\n  document.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n  console.log(vdom);\r\n})();\r\n\r\n/*const mytestclass = class extends HTMLElement {\r\n  constructor(...argwwwuments) {\r\n    super();\r\n    // console.log(argwwwuments);\r\n  }\r\n};\r\ncustomElements.define(\"mejej-rjeken\", mytestclass);\r\nconsole.log(mytestclass, RandomDefine(mytestclass));\r\n\r\nconsole.log(\r\n  Array(999)\r\n    .fill()\r\n    .map(() => RandomDefine(class extends HTMLElement {}))\r\n);\r\n*/\r\nclass Bqqqqqqqqq extends HTMLElement {}\r\nclass Aqqqqqqqqq extends HTMLElement {}\r\nconsole.log(customElements, [...customElements]);\r\ncustomElements.define(\"qqqqqqqqqq-----a\", Bqqqqqqqqq);\r\ncustomElements.define(\"qqqqqqqqqq-----a\", Aqqqqqqqqq);\r\ndocument.body.appendChild(\r\n  MountElement(\r\n    [h(Bqqqqqqqqq), createElement(Aqqqqqqqqq)],\r\n    document.createElement(\"div\")\r\n  )\r\n);\r\n","/* eslint-disable @typescript-eslint/ban-ts-ignore */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  createComponent,\r\n  createElement,\r\n  createState,\r\n  h,\r\n  //   createElement,\r\n  html,\r\n  MountElement,\r\n  watch\r\n} from \"./mvvm-view\";\r\nconsole.log([h, createElement]);\r\n/* console.log([\r\n  condition,\r\n  Fragment,\r\n  createRef,\r\n  html,\r\n  MountElement,\r\n  h,\r\n  createElement,\r\n  createState,\r\n  watch,\r\n  \r\n  createComponent,\r\n  useMounted,\r\n  useUnMounted\r\n]); */\r\n// setTimeout(\r\n(() => {\r\n  (() => {\r\n    var myvdom1111111 = createElement(\r\n      class extends HTMLElement {\r\n        constructor(...argwwwuments) {\r\n          super();\r\n          console.log(argwwwuments);\r\n        }\r\n      },\r\n      {\r\n        style: {\r\n          display: \"block\"\r\n        }\r\n      },\r\n      \"hhhhhhhhhhhhtests\"\r\n    );\r\n    console.log(myvdom1111111);\r\n    document.body.appendChild(\r\n      MountElement(myvdom1111111, document.createElement(\"div\"))\r\n    );\r\n    document.body.appendChild(\r\n      MountElement(\r\n        createElement(\r\n          (() => {\r\n            var Aaaaaaaaaa = class extends HTMLElement {};\r\n            /* 其他浏览器不支持 \r\n                  static defaultProps = {\r\n                    name: \"HelloKitty\",\r\n                    myAge: 18\r\n                  };\r\n                  \r\n                  */\r\n            Aaaaaaaaaa.defaultProps = {\r\n              name: \"HelloKitty\",\r\n              myAge: 18\r\n            };\r\n            return Aaaaaaaaaa;\r\n          })()\r\n        ),\r\n        document.createElement(\"div\")\r\n      )\r\n    );\r\n    const myele1 = createElement(\r\n      class extends HTMLElement {\r\n        static defaultProps = {\r\n          name: \"aaaaaaaaaaHelloKitty\",\r\n          myAge: 1999999999999998\r\n        };\r\n      }\r\n    );\r\n    console.log(myele1);\r\n    document.body.appendChild(\r\n      MountElement(myele1, document.createElement(\"div\"))\r\n    );\r\n    document.body.appendChild(\r\n      MountElement(myele1, document.createElement(\"div\"))\r\n    );\r\n  })();\r\n})(); /* , 0); */\r\n/* (async () => {\r\n  const { default: importcjsamdumd } = await import(\r\n    \"https://cdn.jsdelivr.net/gh/masx200/importcjsamdumd@latest/dist/index.esm.min.js\"\r\n  );\r\n\r\n  await importcjsamdumd({\r\n    omi: \"https://cdn.jsdelivr.net/npm/omi@6.11.3/dist/omi.esm.js\"\r\n  });\r\n\r\n  return await importcjsamdumd(\r\n    \"https://cdn.jsdelivr.net/npm/omim@0.1.17/button/index.js\"\r\n  );\r\n})().then(console.log); */\r\n// ));\r\n{\r\n  const vdom = createElement(\"div\", [\r\n    html`\r\n      <html>\r\n        testhtml\r\n      </html>\r\n      <button\r\n        onclick=${[\r\n          console.log,\r\n          () => {\r\n            console.log(\"onclick\");\r\n          }\r\n        ]}\r\n        *text=\"clicktest\"\r\n        @click=${[\r\n          console.log,\r\n          () => {\r\n            console.log(\"@click\");\r\n          }\r\n        ]}\r\n      />\r\n      <style></style>\r\n    `\r\n  ]);\r\n\r\n  document.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n  console.log(\"onclick\", \" @click\", vdom);\r\n}\r\n(async () => {\r\n  const defaultProps = { cccccc: \"bbbbbbb\" };\r\n  const css = await (await fetch(\r\n    \"https://cdn.jsdelivr.net/gh/masx200/masx200.github.io@4.2.2/src/assetscss/github-6556dfa9be535e551ffffaadfecdad99.min.css\"\r\n  )).text();\r\n  /* 测试不使用createComponent */\r\n  const Hellowordclass = Object.assign(\r\n    () => {\r\n      return createElement(\"div\", [\"hello world\"], \"测试不使用createComponent\");\r\n    },\r\n    { css, defaultProps }\r\n  );\r\n  const vdom = <Hellowordclass></Hellowordclass>;\r\n  let vdom1 = h(Hellowordclass);\r\n  document.body.appendChild(\r\n    MountElement([vdom, vdom1], document.createElement(\"div\"))\r\n  );\r\n  console.log([\"测试不使用createComponent\", Hellowordclass, vdom]);\r\n})();\r\n(() => {\r\n  const colortext = createState(\"red\");\r\n  const stylestate = createState({\r\n    display: \"block\",\r\n    width: \"100%\",\r\n    color: colortext\r\n  });\r\n  /* const inputref = createRef();\r\n  const state1 = createState(\"hello\"); */\r\n  const vdom = html`\r\n    <hr />\r\n    <h1 style=${stylestate}>input color ${colortext}</h1>\r\n    <input _value=${colortext} />\r\n    <hr />\r\n  `;\r\n  /* watch(stylestate, console.log);\r\n  watch(state1, console.log); */\r\n  console.log([vdom, colortext, stylestate]);\r\n  // @ts-ignore\r\n  watch([colortext, stylestate], (a, b) => console.log([a, { ...b }]));\r\n  document.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n})();\r\n(() => {\r\n  const colortext = createState(\"blue\");\r\n  const stylestate = createState({\r\n    display: \"block\",\r\n    width: \"100%\",\r\n    color: colortext\r\n  });\r\n  /* const inputref = createRef();\r\n    const state1 = createState(\"hello\"); */\r\n  const vdom = html`\r\n    <hr />\r\n    <h1 style=${stylestate}>input color ${colortext}</h1>\r\n    <input _value=${colortext} />\r\n    <hr />\r\n  `;\r\n  /* watch(stylestate, console.log);\r\n    watch(state1, console.log); */\r\n  //   console.log([vdom, colortext, stylestate]);\r\n  var inter = setInterval(() => {\r\n    // @ts-ignore\r\n    colortext.value = \"#\" + (Math.random() * 16 ** 7).toString(16).slice(0, 6);\r\n  }, 1000);\r\n  setTimeout(() => {\r\n    clearInterval(inter);\r\n  }, 10000);\r\n  // @ts-ignore\r\n  watch([colortext, stylestate], (a, b) => console.log([a, { ...b }]));\r\n  document.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n})();\r\n","/* eslint-disable @typescript-eslint/ban-ts-ignore */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport {\r\n  createComponent,\r\n  createElement,\r\n  //   createElement,\r\n  createState,\r\n  h,\r\n  html,\r\n  MountElement,\r\n  useMounted,\r\n  useUnMounted,\r\n  watch\r\n} from \"./mvvm-view\";\r\n// eslint-disable-next-line @typescript-eslint/ban-ts-ignore\r\n// @ts-ignore\r\nimport mycss from \"./test.css\";\r\nconsole.log([h, createElement]);\r\n(() => {\r\n  var mycom = createComponent(\r\n    Object.assign(\r\n      (props, children) => {\r\n        const number = createState(1);\r\n        useMounted(() => {\r\n          console.log(\"mounted1\");\r\n        });\r\n        useMounted(() => {\r\n          console.log(\"mounted2\", props);\r\n        });\r\n        useUnMounted(() => {\r\n          console.log(\"unmounted\");\r\n        });\r\n        watch(props.cccccc, cccccc => {\r\n          console.log(\"cccccc\", cccccc);\r\n        });\r\n        return (\r\n          <div\r\n            onclick={() => {\r\n              // @ts-ignore\r\n              number.value++;\r\n            }}\r\n          >\r\n            {[\r\n              number,\r\n              <br />,\r\n              \"wwwwwwwwwwww\",\r\n              createElement(\"div\", [\"createComponent\"]),\r\n              children,\r\n              createElement(\"div\", <>props cccccc {props.cccccc}</>)\r\n            ]}\r\n          </div>\r\n        );\r\n      },\r\n      { defaultProps: { cccccc: \"bbbbbbb\" }, css: mycss }\r\n    )\r\n  );\r\n  //   /* mycom.defaultProps = { cccccc: \"bbbbbbb\" };\r\n  //   mycom.css = mycss; /* css``; */ */\r\n  const myclasscomponent = mycom;\r\n  let vdom = createElement(\r\n    myclasscomponent,\r\n    {\r\n      aaaaaa: 222222222,\r\n      tttttt: \"dddddddddd\"\r\n    },\r\n    \"children\"\r\n  );\r\n  console.log([vdom, myclasscomponent, mycom]);\r\n  document.body.appendChild(MountElement(vdom, document.createElement(\"div\")));\r\n  setTimeout(() => {\r\n    vdom.element.forEach(e => {\r\n      e.setAttribute(\"cccccc\", \"aaaaaaaaaaaaaaaaaabbbbbbbbbbnnnnnnnnnnnnn\");\r\n    });\r\n    vdom = undefined;\r\n  }, 5000);\r\n  document.body.appendChild(\r\n    MountElement(\r\n      createElement(\r\n        myclasscomponent,\r\n\r\n        [\r\n          <form\r\n            id=\"newsletterForm\"\r\n            class=\"newsletter-form nodisable\"\r\n            name=\"newsletter-form\"\r\n            action=\"https://www.mozilla.org/en-US/newsletter/\"\r\n            method=\"post\"\r\n          >\r\n            <div class=\"newsletter-head\">\r\n              <h2 class=\"newsletter-teaser\">学习 Web 开发的最佳实践</h2>\r\n              <p class=\"newsletter-description\">\r\n                让 MDN 将最新、最棒的内容直接投递到您的邮箱。\r\n              </p>\r\n\r\n              <p class=\"newsletter-lang\">目前仅提供英文版新闻报。</p>\r\n            </div>\r\n\r\n            <div class=\"newsletter-fields\">\r\n              <input type=\"hidden\" id=\"fmt\" name=\"fmt\" value=\"H\" />\r\n              <input\r\n                type=\"hidden\"\r\n                id=\"newsletterNewslettersInput\"\r\n                name=\"newsletters\"\r\n                value=\"app-dev\"\r\n              />\r\n              <div id=\"newsletterErrors\" class=\"newsletter-errors\"></div>\r\n\r\n              <div\r\n                id=\"newsletterEmail\"\r\n                class=\"form-group newsletter-group-email\"\r\n              >\r\n                <label for=\"newsletterEmailInput\" class=\"form-label offscreen\">\r\n                  电子邮件地址\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"newsletterEmailInput\"\r\n                  name=\"email\"\r\n                  class=\"form-input newsletter-input-email\"\r\n                  required=\"\"\r\n                  placeholder=\"you@example.com\"\r\n                  size=\"30\"\r\n                />\r\n              </div>\r\n\r\n              <div\r\n                id=\"newsletterPrivacy\"\r\n                class=\"form-group form-group-agree newsletter-group-privacy hidden\"\r\n              >\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"newsletterPrivacyInput\"\r\n                  name=\"privacy\"\r\n                  required=\"\"\r\n                />\r\n                <label for=\"newsletterPrivacyInput\">\r\n                  我接受 Mozilla 按照\r\n                  <a href=\"https://www.mozilla.org/privacy/\">隐私政策</a>\r\n                  所述的方式处理我的信息。\r\n                </label>\r\n              </div>\r\n              <div id=\"newsletterSubmit\" class=\"newsletter-group-submit\">\r\n                <button\r\n                  id=\"newsletter-submit\"\r\n                  type=\"submit\"\r\n                  class=\"button neutral newsletter-submit\"\r\n                >\r\n                  立即注册\r\n                  <svg\r\n                    class=\"icon icon-arrow\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    width=\"23\"\r\n                    height=\"28\"\r\n                    viewBox=\"0 0 23 28\"\r\n                    aria-hidden=\"true\"\r\n                  >\r\n                    <path d=\"M23 15a2.01 2.01 0 0 1-.578 1.422L12.25 26.594c-.375.359-.891.578-1.422.578s-1.031-.219-1.406-.578L8.25 25.422c-.375-.375-.594-.891-.594-1.422s.219-1.047.594-1.422L12.828 18h-11C.703 18 0 17.062 0 16v-2c0-1.062.703-2 1.828-2h11L8.25 7.406a1.96 1.96 0 0 1 0-2.812l1.172-1.172c.375-.375.875-.594 1.406-.594s1.047.219 1.422.594l10.172 10.172c.375.359.578.875.578 1.406z\"></path>\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        ]\r\n      ),\r\n      document.createElement(\"div\")\r\n    )\r\n  );\r\n})();\r\n","import { render, h } from './mvvm-view';\r\n/* eslint-disable @typescript-eslint/ban-ts-ignore */\r\nsetTimeout(() => {\r\n  // @ts-ignore\r\n  Object.values(Object.fromEntries(customElements))\r\n    .map(c => render(h(c)))\r\n    .forEach(e => document.body.appendChild(e));\r\n}, 8000);\r\nsetTimeout(() => {\r\n  // @ts-ignore\r\n  Object.values(Object.fromEntries(customElements))\r\n    .map(c => new c())\r\n    .forEach(e => document.body.appendChild(e));\r\n}, 8000);\r\n","import { createState, watch } from \"./mvvm-view\";\r\n\r\nconst funstate = createState(() => {});\r\nwatch(funstate, fun => {\r\n  console.log([funstate, fun]);\r\n});\r\nrequestAnimationFrame(() => {\r\n  setTimeout(() => {\r\n    funstate.value = class extends HTMLElement {};\r\n  }, 50);\r\n});\r\nconsole.dir(funstate);\r\n","import {\r\n  Switchable,\r\n  createComponent,\r\n  createState,\r\n  render,\r\n  h,\r\n  watch\r\n} from \"./mvvm-view\";\r\n// import { watch } from \"../../dist\";\r\nconst com1 = createComponent(() => {\r\n  return <h1>component 1</h1>;\r\n});\r\nconst com2 = createComponent(() => {\r\n  return <h1>component 2</h1>;\r\n});\r\nconst com3 = createComponent(() => {\r\n  return <h1>component 3</h1>;\r\n});\r\nconst com4 = () => {\r\n  return <h1>component 4</h1>;\r\n};\r\nconst mystate = createState(com1);\r\nconst vdom = Switchable(mystate);\r\nconst element = render(vdom);\r\ndocument.body.appendChild(element);\r\nsetTimeout(() => {\r\n  mystate.value = com2;\r\n  setTimeout(() => {\r\n    mystate.value = com3;\r\n    setTimeout(() => {\r\n      mystate.value = com4;\r\n    }, 2000);\r\n  }, 2000);\r\n}, 2000);\r\nconsole.log([vdom, mystate, com1, com2, com3, com4]);\r\nwatch(mystate, state => {\r\n  console.log([state, element]);\r\n});\r\n\r\ndocument.body.appendChild(\r\n  render(\r\n    h(() => (\r\n      <div>\r\n        <button\r\n          $text=\"component 1\"\r\n          onclick={() => {\r\n            mystate.value = com1;\r\n          }}\r\n        />\r\n        <button\r\n          $text=\"component 2\"\r\n          onclick={() => {\r\n            mystate.value = com2;\r\n          }}\r\n        />\r\n        <button\r\n          $text=\"component 3\"\r\n          onclick={() => {\r\n            mystate.value = com3;\r\n          }}\r\n        />\r\n        <button\r\n          $text=\"component 4\"\r\n          onclick={() => {\r\n            mystate.value = com4;\r\n          }}\r\n        />\r\n      </div>\r\n    ))\r\n  )\r\n);\r\n"],"names":["Array","prototype","flat","arrayflat","depth","this","reduce","acc","val","concat","flattenDeep","arr1","isArray","result","call","fromPairs_1","pairs","index","length","pair","a","isString","isnumber","isboolean","isundefined","issymbol","Object","fromEntries","isplainobject","isobject","gettagtype","isstring","isfunction","isarray","toString","replace","trim","isSet","Set","isMap","Map","isWeakMap","WeakMap","HTMLElement","customElements","Proxy","window","TypeError","acceptValue","tag","attr","attrtype","includes","hyphenateRE","hyphenate","str","toLowerCase","String","Reflect","get","set","ownKeys","valuestring","isinputcheckbox","ele","geteletagname","createeleattragentreadwrite","Element","temp","create","outputattrs","[object Object]","isinputtextortextareaflag","tagname","keys","getAttributeNames","from","undefined","Infinity","filter","target","key","mustUseDomProp","v","getAttribute","JSON","parse","error","t","csstext","obj","stringify","entries","map","value","join","classtext","setattribute","removeAttribute","k","otherdescipter","enumerable","configurable","writable","myvalue","tagName","setAttribute","type","global","freeSelf","self","freeGlobal","Function","root","Date","now","Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","toStringTag","isOwn","unmasked","e","nullTag","undefinedTag","getRawTag","objectToString","symbolTag","isObjectLike","baseGetTag","NAN","NaN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","isSymbol","isObject","other","valueOf","isBinary","test","slice","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","timeWaiting","debounced","isInvoking","arguments","clearTimeout","toNumber","cancel","flush","cached_callback_eventlistner","cached_create_componet","cached_callback_debounced_watchs","construct","defineProperty","deleteProperty","getOwnPropertyDescriptor","getPrototypeOf","has","preventExtensions","propertyKey","watchrecord","ctxopen","MountedSet","UnMountedSet","StateSet","useMounted","fun","isFunction","Error","add","useUnMounted","closectx","clearall","addonelistner","removeonelistner","cancelsubscribe","debouncedispatch","isReactiveState","ReactiveState","eventtargetsymbol","memlisteners","dispatchsymbol","subscribesymbol","removeallistenerssymbol","addallistenerssymbol","init","state","EventTarget","debouncedfun","debounce","eventname","name","dispatchEvent","CustomEvent","detail","forEach","callback","removeEventListener","addEventListener","isprimitive","eventlistener","possiblecallback","delete","toPrimitive","merge_entries","m","VirtualElementSet","WeakSet","Letter_case_and_Chinese","isVirtualdom","createVirtualElement","props","children","assign","propsentries","propsentriesNOTevents","startsWith","Entries_beginning_with_a_letter","virtual","vdom","element","bindattr","onevent","directives","freeze","isvalidvdom","every","isclassextendsHTMLElement","initclass","cssrulestocsstext","cssrules","c","cssText","charactorlist","fill","i","n","fromCharCode","hexnumberlist","charactorandnumberlist","getrandomstringandnumber","floor","random","CustomElementRegistry","elementset","for","elementmap","extendsname","RandomDefineCustomElement","table","Componentstatusname","outputentrie","find","elementname","define","extends","constructor","iterator","componentsymbol","seteletext","textContent","setelehtml","innerHTML","appendchild","container","appendChild","createDocumentFragment","document","createElementNS","namespace","createtextnode","data","createTextNode","svgnamespace","mathnamespace","domaddlisten","event","getchildren","getchildNodes","childNodes","HTMLElementprototype","querySelectorAll","selector","toArray","clear","isNode","Node","MountElement","el","body","documentElement","head","elesarray","mount","render","arr","watch","statearray","debouncedcallback","stateandlisteners","state1","listener","cachedfun","listenfun","r","requestAnimationFrame","rewatch","push","isconnected","isConnectedstate","isConnected","node","parentNode","createhtmlandtextdirective","errorname","text","extenddirectives","directive","ref","_vdom","html","eventlistenerssymbol","callarray","bindstatesymbol","throwinvalideletype","reactive","textnode","nodeValue","autocreateclass","fragmentnode","createElement","propsjson","attribute1","createeleattr","primitivestate","callbacks","values","componentsstylesheet","sourcecssblobCache","savestyleblob","urltext","prefix","source","cachedBlob","bloburl","URL","createObjectURL","Blob","prefixcssrules","cssRulesarray","cssrule","cssstylerule","selectorold","selectorText","stylebodyold","selectoraftertransform","split","selectorTextone","prefixselector","rulesarr","cssRules","conditionText","href","Boolean","parsecsstext","styleelement","implementation","createHTMLDocument","oldcsstotransformedcss","registercssprefix","cachedtext","cssnewtext","waitloadallstyle","containerthis","Promise","all","styleurl","resolve","stylelinkelement","rs","loaderrorfun","onload","onerror","url","rel","setimmediate","then","readysymbol","onmounted","innerstatesymbol","innerwatchrecords","onunmounted","attributeChangedCallback","firstinstalledcallback","connectedCallback","componentelement","AttrChange","disconnectedCallback","defaultProps","attrs","qualifiedName","oldValue","waittranformcsssymbol","attributessymbol","elementsymbol","inner_vdom_symbol","mountedsymbol","unmountedsymbol","createComponent","custfun","cached_class","css","Component","thisattributess","attributes","readonlyprop","readonlyproxy","possiblyvirtualdom","vdomarray","thencallbackfirst","thencallbacksecond","innervdom","waitcallback","f","propreactivestate","propsorchildren","typenormalized","propsnormalized","childrennormalized","truevdomsymbol","falsevdomsymbol","trueelesymbol","falseelesymbol","handletrue","handlefalse","conditon","iftrue","iffalse","true","false","optionstrue","optionsfalse","Condition","elementtomount","getproperyreadproxy","myvalueobj","property","bind","setter","state1array","reactivestate","getter","st","possiblevalue","memorized","newvalue","Setprototype","Mapprototype","setPrototypeOf","deepobserveaddpath","patharray","ancestor","RegExp","fakeobj","p","argumentslist","thisarg","argarray","descripter","observedeepagent","set_prototype","createstate","initobj","containReactiveState","some","state_entries","nvalue","objproxyhandler","deepflage","deepobserve","_target_","resultvalue","returnvalue","dele","size","listvalueattr","listinnervdom","listinnerelement","cached_realele","ListMap","list","mapfun","ITEMfactory","possiblevdom","con","domchildren","newlength","oldlength","cached_element","thiscom","computed","remove","Number","cancel_watch_symbol","cached_class_element","switch_mount_symbol","Switchable","funstate","eleclass","eleme","mountrealelement","elementreal","h","callmountswitch","createRef","u","model","types","bindattribute","domprop","eventnames","eventsarray","inputelement","Event","console","log","useMousePosition","x","createState","y","update","pageX","pageY","mycomapp","plus","multi","count","cancelwatch","timeEnd","refarray","liststate","dir","testlistvdom","_text","onclick","pop","shift","unshift","_ref","weathercondition","inputpassword","inputref","inputref2","modulecss","getElementById","onchange","style","textAlign","fontSize","color","id","class","number","increment","decrement","store","timer","setInterval","clearInterval","mycomappclass","lirefs","temp_ref","check","check2","check3","check4","notcheck","_checked","$ref","preventDefault","alt","src","height","width","title","tabindex","action","autocomplete","method","placeholder","mystate","vdom2","vdom3","stylestate","display","state2","state3","vdom4","_html","objstate","tttttttt","objstate2","objstatearray","classsetstate","vdomobj","Bqqqqqqqqq","Aqqqqqqqqq","myvdom1111111","argwwwuments","Aaaaaaaaaa","myAge","myele1","cccccc","fetch","Hellowordclass","vdom1","colortext","b","inter","mycom","mycss","myclasscomponent","aaaaaa","tttttt","required","xmlns","viewBox","d","com1","com2","com3","com4","$text"],"mappings":"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"}